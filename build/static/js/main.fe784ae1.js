/*! For license information please see main.fe784ae1.js.LICENSE.txt */
(()=>{var e={47:function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const i=n(r(4011));t.default=class{constructor(e,t){let{headers:r={},schema:n,fetch:i}=t;this.url=e,this.headers=r,this.schema=n,this.fetch=i}select(e){let{head:t=!1,count:r}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n=t?"HEAD":"GET";let o=!1;const s=(null!==e&&void 0!==e?e:"*").split("").map((e=>/\s/.test(e)&&!o?"":('"'===e&&(o=!o),e))).join("");return this.url.searchParams.set("select",s),r&&(this.headers.Prefer=`count=${r}`),new i.default({method:n,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}insert(e){let{count:t,defaultToNull:r=!0}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n=[];if(this.headers.Prefer&&n.push(this.headers.Prefer),t&&n.push(`count=${t}`),r||n.push("missing=default"),this.headers.Prefer=n.join(","),Array.isArray(e)){const t=e.reduce(((e,t)=>e.concat(Object.keys(t))),[]);if(t.length>0){const e=[...new Set(t)].map((e=>`"${e}"`));this.url.searchParams.set("columns",e.join(","))}}return new i.default({method:"POST",url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}upsert(e){let{onConflict:t,ignoreDuplicates:r=!1,count:n,defaultToNull:o=!0}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const s=[`resolution=${r?"ignore":"merge"}-duplicates`];if(void 0!==t&&this.url.searchParams.set("on_conflict",t),this.headers.Prefer&&s.push(this.headers.Prefer),n&&s.push(`count=${n}`),o||s.push("missing=default"),this.headers.Prefer=s.join(","),Array.isArray(e)){const t=e.reduce(((e,t)=>e.concat(Object.keys(t))),[]);if(t.length>0){const e=[...new Set(t)].map((e=>`"${e}"`));this.url.searchParams.set("columns",e.join(","))}}return new i.default({method:"POST",url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}update(e){let{count:t}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const r=[];return this.headers.Prefer&&r.push(this.headers.Prefer),t&&r.push(`count=${t}`),this.headers.Prefer=r.join(","),new i.default({method:"PATCH",url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}delete(){let{count:e}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const t=[];return e&&t.push(`count=${e}`),this.headers.Prefer&&t.unshift(this.headers.Prefer),this.headers.Prefer=t.join(","),new i.default({method:"DELETE",url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}}},355:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}();var n=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.api=t}return r(e,[{key:"handleCatch",value:function(e){if("InvalidInputException"!==e.name)throw e;if(this.api._options.valid===this.api._defaults.valid)throw e.message;this.api._options.valid(!1),this.api.render=function(){}}},{key:"wrapBarcodeCall",value:function(e){try{var t=e.apply(void 0,arguments);return this.api._options.valid(!0),t}catch(r){return this.handleCatch(r),this.api}}}]),e}();t.default=n},562:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(1330),i=r(1503),o=r(6800),s=r(8184),a=r(1178),l=r(3415),c=r(5619),u=r(2928);t.default={CODE39:n.CODE39,CODE128:i.CODE128,CODE128A:i.CODE128A,CODE128B:i.CODE128B,CODE128C:i.CODE128C,EAN13:o.EAN13,EAN8:o.EAN8,EAN5:o.EAN5,EAN2:o.EAN2,UPC:o.UPC,UPCE:o.UPCE,ITF14:s.ITF14,ITF:s.ITF,MSI:a.MSI,MSI10:a.MSI10,MSI11:a.MSI11,MSI1010:a.MSI1010,MSI1110:a.MSI1110,pharmacode:l.pharmacode,codabar:c.codabar,GenericBarcode:u.GenericBarcode}},649:function(e,t,r){!function(e){"use strict";function t(e){return null===e||void 0===e}var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])};function i(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}function o(e,t){var r=Object.setPrototypeOf;r?r(e,t):e.__proto__=t}function s(e,t){void 0===t&&(t=e.constructor);var r=Error.captureStackTrace;r&&r(e,t)}var a,l=function(e){function t(t){var r=this.constructor,n=e.call(this,t)||this;return Object.defineProperty(n,"name",{value:r.name,enumerable:!1}),o(n,r.prototype),s(n),n}return i(t,e),t}(Error);class c extends l{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:void 0;super(e),this.message=e}getKind(){return this.constructor.kind}}c.kind="Exception";class u extends c{}u.kind="ArgumentException";class d extends c{}d.kind="IllegalArgumentException";class h{constructor(e){if(this.binarizer=e,null===e)throw new d("Binarizer must be non-null.")}getWidth(){return this.binarizer.getWidth()}getHeight(){return this.binarizer.getHeight()}getBlackRow(e,t){return this.binarizer.getBlackRow(e,t)}getBlackMatrix(){return null!==this.matrix&&void 0!==this.matrix||(this.matrix=this.binarizer.getBlackMatrix()),this.matrix}isCropSupported(){return this.binarizer.getLuminanceSource().isCropSupported()}crop(e,t,r,n){const i=this.binarizer.getLuminanceSource().crop(e,t,r,n);return new h(this.binarizer.createBinarizer(i))}isRotateSupported(){return this.binarizer.getLuminanceSource().isRotateSupported()}rotateCounterClockwise(){const e=this.binarizer.getLuminanceSource().rotateCounterClockwise();return new h(this.binarizer.createBinarizer(e))}rotateCounterClockwise45(){const e=this.binarizer.getLuminanceSource().rotateCounterClockwise45();return new h(this.binarizer.createBinarizer(e))}toString(){try{return this.getBlackMatrix().toString()}catch(e){return""}}}class f extends c{static getChecksumInstance(){return new f}}f.kind="ChecksumException";class p{constructor(e){this.source=e}getLuminanceSource(){return this.source}getWidth(){return this.source.getWidth()}getHeight(){return this.source.getHeight()}}class m{static arraycopy(e,t,r,n,i){for(;i--;)r[n++]=e[t++]}static currentTimeMillis(){return Date.now()}}class g extends c{}g.kind="IndexOutOfBoundsException";class y extends g{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:void 0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0;super(t),this.index=e,this.message=t}}y.kind="ArrayIndexOutOfBoundsException";class w{static fill(e,t){for(let r=0,n=e.length;r<n;r++)e[r]=t}static fillWithin(e,t,r,n){w.rangeCheck(e.length,t,r);for(let i=t;i<r;i++)e[i]=n}static rangeCheck(e,t,r){if(t>r)throw new d("fromIndex("+t+") > toIndex("+r+")");if(t<0)throw new y(t);if(r>e)throw new y(r)}static asList(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return t}static create(e,t,r){return Array.from({length:e}).map((e=>Array.from({length:t}).fill(r)))}static createInt32Array(e,t,r){return Array.from({length:e}).map((e=>Int32Array.from({length:t}).fill(r)))}static equals(e,t){if(!e)return!1;if(!t)return!1;if(!e.length)return!1;if(!t.length)return!1;if(e.length!==t.length)return!1;for(let r=0,n=e.length;r<n;r++)if(e[r]!==t[r])return!1;return!0}static hashCode(e){if(null===e)return 0;let t=1;for(const r of e)t=31*t+r;return t}static fillUint8Array(e,t){for(let r=0;r!==e.length;r++)e[r]=t}static copyOf(e,t){return e.slice(0,t)}static copyOfUint8Array(e,t){if(e.length<=t){const r=new Uint8Array(t);return r.set(e),r}return e.slice(0,t)}static copyOfRange(e,t,r){const n=r-t,i=new Int32Array(n);return m.arraycopy(e,t,i,0,n),i}static binarySearch(e,t,r){void 0===r&&(r=w.numberComparator);let n=0,i=e.length-1;for(;n<=i;){const o=i+n>>1,s=r(t,e[o]);if(s>0)n=o+1;else{if(!(s<0))return o;i=o-1}}return-n-1}static numberComparator(e,t){return e-t}}class b{static numberOfTrailingZeros(e){let t;if(0===e)return 32;let r=31;return t=e<<16,0!==t&&(r-=16,e=t),t=e<<8,0!==t&&(r-=8,e=t),t=e<<4,0!==t&&(r-=4,e=t),t=e<<2,0!==t&&(r-=2,e=t),r-(e<<1>>>31)}static numberOfLeadingZeros(e){if(0===e)return 32;let t=1;return e>>>16===0&&(t+=16,e<<=16),e>>>24===0&&(t+=8,e<<=8),e>>>28===0&&(t+=4,e<<=4),e>>>30===0&&(t+=2,e<<=2),t-=e>>>31,t}static toHexString(e){return e.toString(16)}static toBinaryString(e){return String(parseInt(String(e),2))}static bitCount(e){return e=(e=(858993459&(e-=e>>>1&1431655765))+(e>>>2&858993459))+(e>>>4)&252645135,e+=e>>>8,63&(e+=e>>>16)}static truncDivision(e,t){return Math.trunc(e/t)}static parseInt(e){return parseInt(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0)}}b.MIN_VALUE_32_BITS=-2147483648,b.MAX_VALUE=Number.MAX_SAFE_INTEGER;class v{constructor(e,t){void 0===e?(this.size=0,this.bits=new Int32Array(1)):(this.size=e,this.bits=void 0===t||null===t?v.makeArray(e):t)}getSize(){return this.size}getSizeInBytes(){return Math.floor((this.size+7)/8)}ensureCapacity(e){if(e>32*this.bits.length){const t=v.makeArray(e);m.arraycopy(this.bits,0,t,0,this.bits.length),this.bits=t}}get(e){return 0!==(this.bits[Math.floor(e/32)]&1<<(31&e))}set(e){this.bits[Math.floor(e/32)]|=1<<(31&e)}flip(e){this.bits[Math.floor(e/32)]^=1<<(31&e)}getNextSet(e){const t=this.size;if(e>=t)return t;const r=this.bits;let n=Math.floor(e/32),i=r[n];i&=~((1<<(31&e))-1);const o=r.length;for(;0===i;){if(++n===o)return t;i=r[n]}const s=32*n+b.numberOfTrailingZeros(i);return s>t?t:s}getNextUnset(e){const t=this.size;if(e>=t)return t;const r=this.bits;let n=Math.floor(e/32),i=~r[n];i&=~((1<<(31&e))-1);const o=r.length;for(;0===i;){if(++n===o)return t;i=~r[n]}const s=32*n+b.numberOfTrailingZeros(i);return s>t?t:s}setBulk(e,t){this.bits[Math.floor(e/32)]=t}setRange(e,t){if(t<e||e<0||t>this.size)throw new d;if(t===e)return;t--;const r=Math.floor(e/32),n=Math.floor(t/32),i=this.bits;for(let o=r;o<=n;o++){const s=(2<<(o<n?31:31&t))-(1<<(o>r?0:31&e));i[o]|=s}}clear(){const e=this.bits.length,t=this.bits;for(let r=0;r<e;r++)t[r]=0}isRange(e,t,r){if(t<e||e<0||t>this.size)throw new d;if(t===e)return!0;t--;const n=Math.floor(e/32),i=Math.floor(t/32),o=this.bits;for(let s=n;s<=i;s++){const a=(2<<(s<i?31:31&t))-(1<<(s>n?0:31&e))&4294967295;if((o[s]&a)!==(r?a:0))return!1}return!0}appendBit(e){this.ensureCapacity(this.size+1),e&&(this.bits[Math.floor(this.size/32)]|=1<<(31&this.size)),this.size++}appendBits(e,t){if(t<0||t>32)throw new d("Num bits must be between 0 and 32");this.ensureCapacity(this.size+t);for(let r=t;r>0;r--)this.appendBit(1===(e>>r-1&1))}appendBitArray(e){const t=e.size;this.ensureCapacity(this.size+t);for(let r=0;r<t;r++)this.appendBit(e.get(r))}xor(e){if(this.size!==e.size)throw new d("Sizes don't match");const t=this.bits;for(let r=0,n=t.length;r<n;r++)t[r]^=e.bits[r]}toBytes(e,t,r,n){for(let i=0;i<n;i++){let n=0;for(let t=0;t<8;t++)this.get(e)&&(n|=1<<7-t),e++;t[r+i]=n}}getBitArray(){return this.bits}reverse(){const e=new Int32Array(this.bits.length),t=Math.floor((this.size-1)/32),r=t+1,n=this.bits;for(let i=0;i<r;i++){let r=n[i];r=r>>1&1431655765|(1431655765&r)<<1,r=r>>2&858993459|(858993459&r)<<2,r=r>>4&252645135|(252645135&r)<<4,r=r>>8&16711935|(16711935&r)<<8,r=r>>16&65535|(65535&r)<<16,e[t-i]=r}if(this.size!==32*r){const t=32*r-this.size;let n=e[0]>>>t;for(let i=1;i<r;i++){const r=e[i];n|=r<<32-t,e[i-1]=n,n=r>>>t}e[r-1]=n}this.bits=e}static makeArray(e){return new Int32Array(Math.floor((e+31)/32))}equals(e){if(!(e instanceof v))return!1;const t=e;return this.size===t.size&&w.equals(this.bits,t.bits)}hashCode(){return 31*this.size+w.hashCode(this.bits)}toString(){let e="";for(let t=0,r=this.size;t<r;t++)0===(7&t)&&(e+=" "),e+=this.get(t)?"X":".";return e}clone(){return new v(this.size,this.bits.slice())}}!function(e){e[e.OTHER=0]="OTHER",e[e.PURE_BARCODE=1]="PURE_BARCODE",e[e.POSSIBLE_FORMATS=2]="POSSIBLE_FORMATS",e[e.TRY_HARDER=3]="TRY_HARDER",e[e.CHARACTER_SET=4]="CHARACTER_SET",e[e.ALLOWED_LENGTHS=5]="ALLOWED_LENGTHS",e[e.ASSUME_CODE_39_CHECK_DIGIT=6]="ASSUME_CODE_39_CHECK_DIGIT",e[e.ASSUME_GS1=7]="ASSUME_GS1",e[e.RETURN_CODABAR_START_END=8]="RETURN_CODABAR_START_END",e[e.NEED_RESULT_POINT_CALLBACK=9]="NEED_RESULT_POINT_CALLBACK",e[e.ALLOWED_EAN_EXTENSIONS=10]="ALLOWED_EAN_EXTENSIONS"}(a||(a={}));var _,x=a;class E extends c{static getFormatInstance(){return new E}}E.kind="FormatException",function(e){e[e.Cp437=0]="Cp437",e[e.ISO8859_1=1]="ISO8859_1",e[e.ISO8859_2=2]="ISO8859_2",e[e.ISO8859_3=3]="ISO8859_3",e[e.ISO8859_4=4]="ISO8859_4",e[e.ISO8859_5=5]="ISO8859_5",e[e.ISO8859_6=6]="ISO8859_6",e[e.ISO8859_7=7]="ISO8859_7",e[e.ISO8859_8=8]="ISO8859_8",e[e.ISO8859_9=9]="ISO8859_9",e[e.ISO8859_10=10]="ISO8859_10",e[e.ISO8859_11=11]="ISO8859_11",e[e.ISO8859_13=12]="ISO8859_13",e[e.ISO8859_14=13]="ISO8859_14",e[e.ISO8859_15=14]="ISO8859_15",e[e.ISO8859_16=15]="ISO8859_16",e[e.SJIS=16]="SJIS",e[e.Cp1250=17]="Cp1250",e[e.Cp1251=18]="Cp1251",e[e.Cp1252=19]="Cp1252",e[e.Cp1256=20]="Cp1256",e[e.UnicodeBigUnmarked=21]="UnicodeBigUnmarked",e[e.UTF8=22]="UTF8",e[e.ASCII=23]="ASCII",e[e.Big5=24]="Big5",e[e.GB18030=25]="GB18030",e[e.EUC_KR=26]="EUC_KR"}(_||(_={}));class C{constructor(e,t,r){this.valueIdentifier=e,this.name=r,this.values="number"===typeof t?Int32Array.from([t]):t;for(var n=arguments.length,i=new Array(n>3?n-3:0),o=3;o<n;o++)i[o-3]=arguments[o];this.otherEncodingNames=i,C.VALUE_IDENTIFIER_TO_ECI.set(e,this),C.NAME_TO_ECI.set(r,this);const s=this.values;for(let a=0,l=s.length;a!==l;a++){const e=s[a];C.VALUES_TO_ECI.set(e,this)}for(const a of i)C.NAME_TO_ECI.set(a,this)}getValueIdentifier(){return this.valueIdentifier}getName(){return this.name}getValue(){return this.values[0]}static getCharacterSetECIByValue(e){if(e<0||e>=900)throw new E("incorect value");const t=C.VALUES_TO_ECI.get(e);if(void 0===t)throw new E("incorect value");return t}static getCharacterSetECIByName(e){const t=C.NAME_TO_ECI.get(e);if(void 0===t)throw new E("incorect value");return t}equals(e){if(!(e instanceof C))return!1;const t=e;return this.getName()===t.getName()}}C.VALUE_IDENTIFIER_TO_ECI=new Map,C.VALUES_TO_ECI=new Map,C.NAME_TO_ECI=new Map,C.Cp437=new C(_.Cp437,Int32Array.from([0,2]),"Cp437"),C.ISO8859_1=new C(_.ISO8859_1,Int32Array.from([1,3]),"ISO-8859-1","ISO88591","ISO8859_1"),C.ISO8859_2=new C(_.ISO8859_2,4,"ISO-8859-2","ISO88592","ISO8859_2"),C.ISO8859_3=new C(_.ISO8859_3,5,"ISO-8859-3","ISO88593","ISO8859_3"),C.ISO8859_4=new C(_.ISO8859_4,6,"ISO-8859-4","ISO88594","ISO8859_4"),C.ISO8859_5=new C(_.ISO8859_5,7,"ISO-8859-5","ISO88595","ISO8859_5"),C.ISO8859_6=new C(_.ISO8859_6,8,"ISO-8859-6","ISO88596","ISO8859_6"),C.ISO8859_7=new C(_.ISO8859_7,9,"ISO-8859-7","ISO88597","ISO8859_7"),C.ISO8859_8=new C(_.ISO8859_8,10,"ISO-8859-8","ISO88598","ISO8859_8"),C.ISO8859_9=new C(_.ISO8859_9,11,"ISO-8859-9","ISO88599","ISO8859_9"),C.ISO8859_10=new C(_.ISO8859_10,12,"ISO-8859-10","ISO885910","ISO8859_10"),C.ISO8859_11=new C(_.ISO8859_11,13,"ISO-8859-11","ISO885911","ISO8859_11"),C.ISO8859_13=new C(_.ISO8859_13,15,"ISO-8859-13","ISO885913","ISO8859_13"),C.ISO8859_14=new C(_.ISO8859_14,16,"ISO-8859-14","ISO885914","ISO8859_14"),C.ISO8859_15=new C(_.ISO8859_15,17,"ISO-8859-15","ISO885915","ISO8859_15"),C.ISO8859_16=new C(_.ISO8859_16,18,"ISO-8859-16","ISO885916","ISO8859_16"),C.SJIS=new C(_.SJIS,20,"SJIS","Shift_JIS"),C.Cp1250=new C(_.Cp1250,21,"Cp1250","windows-1250"),C.Cp1251=new C(_.Cp1251,22,"Cp1251","windows-1251"),C.Cp1252=new C(_.Cp1252,23,"Cp1252","windows-1252"),C.Cp1256=new C(_.Cp1256,24,"Cp1256","windows-1256"),C.UnicodeBigUnmarked=new C(_.UnicodeBigUnmarked,25,"UnicodeBigUnmarked","UTF-16BE","UnicodeBig"),C.UTF8=new C(_.UTF8,26,"UTF8","UTF-8"),C.ASCII=new C(_.ASCII,Int32Array.from([27,170]),"ASCII","US-ASCII"),C.Big5=new C(_.Big5,28,"Big5"),C.GB18030=new C(_.GB18030,29,"GB18030","GB2312","EUC_CN","GBK"),C.EUC_KR=new C(_.EUC_KR,30,"EUC_KR","EUC-KR");class S extends c{}S.kind="UnsupportedOperationException";class A{static decode(e,t){const r=this.encodingName(t);return this.customDecoder?this.customDecoder(e,r):"undefined"===typeof TextDecoder||this.shouldDecodeOnFallback(r)?this.decodeFallback(e,r):new TextDecoder(r).decode(e)}static shouldDecodeOnFallback(e){return!A.isBrowser()&&"ISO-8859-1"===e}static encode(e,t){const r=this.encodingName(t);return this.customEncoder?this.customEncoder(e,r):"undefined"===typeof TextEncoder?this.encodeFallback(e):(new TextEncoder).encode(e)}static isBrowser(){return"undefined"!==typeof window&&"[object Window]"==={}.toString.call(window)}static encodingName(e){return"string"===typeof e?e:e.getName()}static encodingCharacterSet(e){return e instanceof C?e:C.getCharacterSetECIByName(e)}static decodeFallback(e,t){const r=this.encodingCharacterSet(t);if(A.isDecodeFallbackSupported(r)){let t="";for(let r=0,n=e.length;r<n;r++){let n=e[r].toString(16);n.length<2&&(n="0"+n),t+="%"+n}return decodeURIComponent(t)}if(r.equals(C.UnicodeBigUnmarked))return String.fromCharCode.apply(null,new Uint16Array(e.buffer));throw new S(`Encoding ${this.encodingName(t)} not supported by fallback.`)}static isDecodeFallbackSupported(e){return e.equals(C.UTF8)||e.equals(C.ISO8859_1)||e.equals(C.ASCII)}static encodeFallback(e){const t=btoa(unescape(encodeURIComponent(e))).split(""),r=[];for(let n=0;n<t.length;n++)r.push(t[n].charCodeAt(0));return new Uint8Array(r)}}class N{static castAsNonUtf8Char(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;const r=t?t.getName():this.ISO88591;return A.decode(new Uint8Array([e]),r)}static guessEncoding(e,t){if(null!==t&&void 0!==t&&void 0!==t.get(x.CHARACTER_SET))return t.get(x.CHARACTER_SET).toString();const r=e.length;let n=!0,i=!0,o=!0,s=0,a=0,l=0,c=0,u=0,d=0,h=0,f=0,p=0,m=0,g=0;const y=e.length>3&&239===e[0]&&187===e[1]&&191===e[2];for(let w=0;w<r&&(n||i||o);w++){const t=255&e[w];o&&(s>0?0===(128&t)?o=!1:s--:0!==(128&t)&&(0===(64&t)?o=!1:(s++,0===(32&t)?a++:(s++,0===(16&t)?l++:(s++,0===(8&t)?c++:o=!1))))),n&&(t>127&&t<160?n=!1:t>159&&(t<192||215===t||247===t)&&g++),i&&(u>0?t<64||127===t||t>252?i=!1:u--:128===t||160===t||t>239?i=!1:t>160&&t<224?(d++,f=0,h++,h>p&&(p=h)):t>127?(u++,h=0,f++,f>m&&(m=f)):(h=0,f=0))}return o&&s>0&&(o=!1),i&&u>0&&(i=!1),o&&(y||a+l+c>0)?N.UTF8:i&&(N.ASSUME_SHIFT_JIS||p>=3||m>=3)?N.SHIFT_JIS:n&&i?2===p&&2===d||10*g>=r?N.SHIFT_JIS:N.ISO88591:n?N.ISO88591:i?N.SHIFT_JIS:o?N.UTF8:N.PLATFORM_DEFAULT_ENCODING}static format(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];let i=-1;function o(e,t,n,o,s,a){if("%%"===e)return"%";if(void 0===r[++i])return;e=o?parseInt(o.substr(1)):void 0;let l,c=s?parseInt(s.substr(1)):void 0;switch(a){case"s":l=r[i];break;case"c":l=r[i][0];break;case"f":l=parseFloat(r[i]).toFixed(e);break;case"p":l=parseFloat(r[i]).toPrecision(e);break;case"e":l=parseFloat(r[i]).toExponential(e);break;case"x":l=parseInt(r[i]).toString(c||16);break;case"d":l=parseFloat(parseInt(r[i],c||10).toPrecision(e)).toFixed(0)}l="object"===typeof l?JSON.stringify(l):(+l).toString(c);let u=parseInt(n),d=n&&n[0]+""==="0"?"0":" ";for(;l.length<u;)l=void 0!==t?l+d:d+l;return l}let s=/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g;return e.replace(s,o)}static getBytes(e,t){return A.encode(e,t)}static getCharCode(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e.charCodeAt(t)}static getCharAt(e){return String.fromCharCode(e)}}N.SHIFT_JIS=C.SJIS.getName(),N.GB2312="GB2312",N.ISO88591=C.ISO8859_1.getName(),N.EUC_JP="EUC_JP",N.UTF8=C.UTF8.getName(),N.PLATFORM_DEFAULT_ENCODING=N.UTF8,N.ASSUME_SHIFT_JIS=!1;class I{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";this.value=e}enableDecoding(e){return this.encoding=e,this}append(e){return"string"===typeof e?this.value+=e.toString():this.encoding?this.value+=N.castAsNonUtf8Char(e,this.encoding):this.value+=String.fromCharCode(e),this}appendChars(e,t,r){for(let n=t;t<t+r;n++)this.append(e[n]);return this}length(){return this.value.length}charAt(e){return this.value.charAt(e)}deleteCharAt(e){this.value=this.value.substr(0,e)+this.value.substring(e+1)}setCharAt(e,t){this.value=this.value.substr(0,e)+t+this.value.substr(e+1)}substring(e,t){return this.value.substring(e,t)}setLengthToZero(){this.value=""}toString(){return this.value}insert(e,t){this.value=this.value.substr(0,e)+t+this.value.substr(e+t.length)}}class T{constructor(e,t,r,n){if(this.width=e,this.height=t,this.rowSize=r,this.bits=n,void 0!==t&&null!==t||(t=e),this.height=t,e<1||t<1)throw new d("Both dimensions must be greater than 0");void 0!==r&&null!==r||(r=Math.floor((e+31)/32)),this.rowSize=r,void 0!==n&&null!==n||(this.bits=new Int32Array(this.rowSize*this.height))}static parseFromBooleanArray(e){const t=e.length,r=e[0].length,n=new T(r,t);for(let i=0;i<t;i++){const t=e[i];for(let e=0;e<r;e++)t[e]&&n.set(e,i)}return n}static parseFromString(e,t,r){if(null===e)throw new d("stringRepresentation cannot be null");const n=new Array(e.length);let i=0,o=0,s=-1,a=0,l=0;for(;l<e.length;)if("\n"===e.charAt(l)||"\r"===e.charAt(l)){if(i>o){if(-1===s)s=i-o;else if(i-o!==s)throw new d("row lengths do not match");o=i,a++}l++}else if(e.substring(l,l+t.length)===t)l+=t.length,n[i]=!0,i++;else{if(e.substring(l,l+r.length)!==r)throw new d("illegal character encountered: "+e.substring(l));l+=r.length,n[i]=!1,i++}if(i>o){if(-1===s)s=i-o;else if(i-o!==s)throw new d("row lengths do not match");a++}const c=new T(s,a);for(let u=0;u<i;u++)n[u]&&c.set(Math.floor(u%s),Math.floor(u/s));return c}get(e,t){const r=t*this.rowSize+Math.floor(e/32);return 0!==(this.bits[r]>>>(31&e)&1)}set(e,t){const r=t*this.rowSize+Math.floor(e/32);this.bits[r]|=1<<(31&e)&4294967295}unset(e,t){const r=t*this.rowSize+Math.floor(e/32);this.bits[r]&=~(1<<(31&e)&4294967295)}flip(e,t){const r=t*this.rowSize+Math.floor(e/32);this.bits[r]^=1<<(31&e)&4294967295}xor(e){if(this.width!==e.getWidth()||this.height!==e.getHeight()||this.rowSize!==e.getRowSize())throw new d("input matrix dimensions do not match");const t=new v(Math.floor(this.width/32)+1),r=this.rowSize,n=this.bits;for(let i=0,o=this.height;i<o;i++){const o=i*r,s=e.getRow(i,t).getBitArray();for(let e=0;e<r;e++)n[o+e]^=s[e]}}clear(){const e=this.bits,t=e.length;for(let r=0;r<t;r++)e[r]=0}setRegion(e,t,r,n){if(t<0||e<0)throw new d("Left and top must be nonnegative");if(n<1||r<1)throw new d("Height and width must be at least 1");const i=e+r,o=t+n;if(o>this.height||i>this.width)throw new d("The region must fit inside the matrix");const s=this.rowSize,a=this.bits;for(let l=t;l<o;l++){const t=l*s;for(let r=e;r<i;r++)a[t+Math.floor(r/32)]|=1<<(31&r)&4294967295}}getRow(e,t){null===t||void 0===t||t.getSize()<this.width?t=new v(this.width):t.clear();const r=this.rowSize,n=this.bits,i=e*r;for(let o=0;o<r;o++)t.setBulk(32*o,n[i+o]);return t}setRow(e,t){m.arraycopy(t.getBitArray(),0,this.bits,e*this.rowSize,this.rowSize)}rotate180(){const e=this.getWidth(),t=this.getHeight();let r=new v(e),n=new v(e);for(let i=0,o=Math.floor((t+1)/2);i<o;i++)r=this.getRow(i,r),n=this.getRow(t-1-i,n),r.reverse(),n.reverse(),this.setRow(i,n),this.setRow(t-1-i,r)}getEnclosingRectangle(){const e=this.width,t=this.height,r=this.rowSize,n=this.bits;let i=e,o=t,s=-1,a=-1;for(let l=0;l<t;l++)for(let e=0;e<r;e++){const t=n[l*r+e];if(0!==t){if(l<o&&(o=l),l>a&&(a=l),32*e<i){let r=0;for(;0===(t<<31-r&4294967295);)r++;32*e+r<i&&(i=32*e+r)}if(32*e+31>s){let r=31;for(;t>>>r===0;)r--;32*e+r>s&&(s=32*e+r)}}}return s<i||a<o?null:Int32Array.from([i,o,s-i+1,a-o+1])}getTopLeftOnBit(){const e=this.rowSize,t=this.bits;let r=0;for(;r<t.length&&0===t[r];)r++;if(r===t.length)return null;const n=r/e;let i=r%e*32;const o=t[r];let s=0;for(;0===(o<<31-s&4294967295);)s++;return i+=s,Int32Array.from([i,n])}getBottomRightOnBit(){const e=this.rowSize,t=this.bits;let r=t.length-1;for(;r>=0&&0===t[r];)r--;if(r<0)return null;const n=Math.floor(r/e);let i=32*Math.floor(r%e);const o=t[r];let s=31;for(;o>>>s===0;)s--;return i+=s,Int32Array.from([i,n])}getWidth(){return this.width}getHeight(){return this.height}getRowSize(){return this.rowSize}equals(e){if(!(e instanceof T))return!1;const t=e;return this.width===t.width&&this.height===t.height&&this.rowSize===t.rowSize&&w.equals(this.bits,t.bits)}hashCode(){let e=this.width;return e=31*e+this.width,e=31*e+this.height,e=31*e+this.rowSize,e=31*e+w.hashCode(this.bits),e}toString(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"X ",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"  ",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"\n";return this.buildToString(e,t,r)}buildToString(e,t,r){let n=new I;for(let i=0,o=this.height;i<o;i++){for(let r=0,o=this.width;r<o;r++)n.append(this.get(r,i)?e:t);n.append(r)}return n.toString()}clone(){return new T(this.width,this.height,this.rowSize,this.bits.slice())}}class O extends c{static getNotFoundInstance(){return new O}}O.kind="NotFoundException";class k extends p{constructor(e){super(e),this.luminances=k.EMPTY,this.buckets=new Int32Array(k.LUMINANCE_BUCKETS)}getBlackRow(e,t){const r=this.getLuminanceSource(),n=r.getWidth();void 0===t||null===t||t.getSize()<n?t=new v(n):t.clear(),this.initArrays(n);const i=r.getRow(e,this.luminances),o=this.buckets;for(let a=0;a<n;a++)o[(255&i[a])>>k.LUMINANCE_SHIFT]++;const s=k.estimateBlackPoint(o);if(n<3)for(let a=0;a<n;a++)(255&i[a])<s&&t.set(a);else{let e=255&i[0],r=255&i[1];for(let o=1;o<n-1;o++){const n=255&i[o+1];(4*r-e-n)/2<s&&t.set(o),e=r,r=n}}return t}getBlackMatrix(){const e=this.getLuminanceSource(),t=e.getWidth(),r=e.getHeight(),n=new T(t,r);this.initArrays(t);const i=this.buckets;for(let a=1;a<5;a++){const n=Math.floor(r*a/5),o=e.getRow(n,this.luminances),s=Math.floor(4*t/5);for(let e=Math.floor(t/5);e<s;e++)i[(255&o[e])>>k.LUMINANCE_SHIFT]++}const o=k.estimateBlackPoint(i),s=e.getMatrix();for(let a=0;a<r;a++){const e=a*t;for(let r=0;r<t;r++)(255&s[e+r])<o&&n.set(r,a)}return n}createBinarizer(e){return new k(e)}initArrays(e){this.luminances.length<e&&(this.luminances=new Uint8ClampedArray(e));const t=this.buckets;for(let r=0;r<k.LUMINANCE_BUCKETS;r++)t[r]=0}static estimateBlackPoint(e){const t=e.length;let r=0,n=0,i=0;for(let c=0;c<t;c++)e[c]>i&&(n=c,i=e[c]),e[c]>r&&(r=e[c]);let o=0,s=0;for(let c=0;c<t;c++){const t=c-n,r=e[c]*t*t;r>s&&(o=c,s=r)}if(n>o){const e=n;n=o,o=e}if(o-n<=t/16)throw new O;let a=o-1,l=-1;for(let c=o-1;c>n;c--){const t=c-n,i=t*t*(o-c)*(r-e[c]);i>l&&(a=c,l=i)}return a<<k.LUMINANCE_SHIFT}}k.LUMINANCE_BITS=5,k.LUMINANCE_SHIFT=8-k.LUMINANCE_BITS,k.LUMINANCE_BUCKETS=1<<k.LUMINANCE_BITS,k.EMPTY=Uint8ClampedArray.from([0]);class R extends k{constructor(e){super(e),this.matrix=null}getBlackMatrix(){if(null!==this.matrix)return this.matrix;const e=this.getLuminanceSource(),t=e.getWidth(),r=e.getHeight();if(t>=R.MINIMUM_DIMENSION&&r>=R.MINIMUM_DIMENSION){const n=e.getMatrix();let i=t>>R.BLOCK_SIZE_POWER;0!==(t&R.BLOCK_SIZE_MASK)&&i++;let o=r>>R.BLOCK_SIZE_POWER;0!==(r&R.BLOCK_SIZE_MASK)&&o++;const s=R.calculateBlackPoints(n,i,o,t,r),a=new T(t,r);R.calculateThresholdForBlock(n,i,o,t,r,s,a),this.matrix=a}else this.matrix=super.getBlackMatrix();return this.matrix}createBinarizer(e){return new R(e)}static calculateThresholdForBlock(e,t,r,n,i,o,s){const a=i-R.BLOCK_SIZE,l=n-R.BLOCK_SIZE;for(let c=0;c<r;c++){let i=c<<R.BLOCK_SIZE_POWER;i>a&&(i=a);const u=R.cap(c,2,r-3);for(let r=0;r<t;r++){let a=r<<R.BLOCK_SIZE_POWER;a>l&&(a=l);const c=R.cap(r,2,t-3);let d=0;for(let e=-2;e<=2;e++){const t=o[u+e];d+=t[c-2]+t[c-1]+t[c]+t[c+1]+t[c+2]}const h=d/25;R.thresholdBlock(e,a,i,h,n,s)}}}static cap(e,t,r){return e<t?t:e>r?r:e}static thresholdBlock(e,t,r,n,i,o){for(let s=0,a=r*i+t;s<R.BLOCK_SIZE;s++,a+=i)for(let i=0;i<R.BLOCK_SIZE;i++)(255&e[a+i])<=n&&o.set(t+i,r+s)}static calculateBlackPoints(e,t,r,n,i){const o=i-R.BLOCK_SIZE,s=n-R.BLOCK_SIZE,a=new Array(r);for(let l=0;l<r;l++){a[l]=new Int32Array(t);let r=l<<R.BLOCK_SIZE_POWER;r>o&&(r=o);for(let i=0;i<t;i++){let t=i<<R.BLOCK_SIZE_POWER;t>s&&(t=s);let o=0,c=255,u=0;for(let i=0,s=r*n+t;i<R.BLOCK_SIZE;i++,s+=n){for(let t=0;t<R.BLOCK_SIZE;t++){const r=255&e[s+t];o+=r,r<c&&(c=r),r>u&&(u=r)}if(u-c>R.MIN_DYNAMIC_RANGE)for(i++,s+=n;i<R.BLOCK_SIZE;i++,s+=n)for(let t=0;t<R.BLOCK_SIZE;t++)o+=255&e[s+t]}let d=o>>2*R.BLOCK_SIZE_POWER;if(u-c<=R.MIN_DYNAMIC_RANGE&&(d=c/2,l>0&&i>0)){const e=(a[l-1][i]+2*a[l][i-1]+a[l-1][i-1])/4;c<e&&(d=e)}a[l][i]=d}}return a}}R.BLOCK_SIZE_POWER=3,R.BLOCK_SIZE=1<<R.BLOCK_SIZE_POWER,R.BLOCK_SIZE_MASK=R.BLOCK_SIZE-1,R.MINIMUM_DIMENSION=5*R.BLOCK_SIZE,R.MIN_DYNAMIC_RANGE=24;class M{constructor(e,t){this.width=e,this.height=t}getWidth(){return this.width}getHeight(){return this.height}isCropSupported(){return!1}crop(e,t,r,n){throw new S("This luminance source does not support cropping.")}isRotateSupported(){return!1}rotateCounterClockwise(){throw new S("This luminance source does not support rotation by 90 degrees.")}rotateCounterClockwise45(){throw new S("This luminance source does not support rotation by 45 degrees.")}toString(){const e=new Uint8ClampedArray(this.width);let t=new I;for(let r=0;r<this.height;r++){const n=this.getRow(r,e);for(let e=0;e<this.width;e++){const r=255&n[e];let i;i=r<64?"#":r<128?"+":r<192?".":" ",t.append(i)}t.append("\n")}return t.toString()}}class j extends M{constructor(e){super(e.getWidth(),e.getHeight()),this.delegate=e}getRow(e,t){const r=this.delegate.getRow(e,t),n=this.getWidth();for(let i=0;i<n;i++)r[i]=255-(255&r[i]);return r}getMatrix(){const e=this.delegate.getMatrix(),t=this.getWidth()*this.getHeight(),r=new Uint8ClampedArray(t);for(let n=0;n<t;n++)r[n]=255-(255&e[n]);return r}isCropSupported(){return this.delegate.isCropSupported()}crop(e,t,r,n){return new j(this.delegate.crop(e,t,r,n))}isRotateSupported(){return this.delegate.isRotateSupported()}invert(){return this.delegate}rotateCounterClockwise(){return new j(this.delegate.rotateCounterClockwise())}rotateCounterClockwise45(){return new j(this.delegate.rotateCounterClockwise45())}}class D extends M{constructor(e){super(e.width,e.height),this.canvas=e,this.tempCanvasElement=null,this.buffer=D.makeBufferFromCanvasImageData(e)}static makeBufferFromCanvasImageData(e){const t=e.getContext("2d").getImageData(0,0,e.width,e.height);return D.toGrayscaleBuffer(t.data,e.width,e.height)}static toGrayscaleBuffer(e,t,r){const n=new Uint8ClampedArray(t*r);for(let i=0,o=0,s=e.length;i<s;i+=4,o++){let t;t=0===e[i+3]?255:306*e[i]+601*e[i+1]+117*e[i+2]+512>>10,n[o]=t}return n}getRow(e,t){if(e<0||e>=this.getHeight())throw new d("Requested row is outside the image: "+e);const r=this.getWidth(),n=e*r;return null===t?t=this.buffer.slice(n,n+r):(t.length<r&&(t=new Uint8ClampedArray(r)),t.set(this.buffer.slice(n,n+r))),t}getMatrix(){return this.buffer}isCropSupported(){return!0}crop(e,t,r,n){return super.crop(e,t,r,n),this}isRotateSupported(){return!0}rotateCounterClockwise(){return this.rotate(-90),this}rotateCounterClockwise45(){return this.rotate(-45),this}getTempCanvasElement(){if(null===this.tempCanvasElement){const e=this.canvas.ownerDocument.createElement("canvas");e.width=this.canvas.width,e.height=this.canvas.height,this.tempCanvasElement=e}return this.tempCanvasElement}rotate(e){const t=this.getTempCanvasElement(),r=t.getContext("2d"),n=e*D.DEGREE_TO_RADIANS,i=this.canvas.width,o=this.canvas.height,s=Math.ceil(Math.abs(Math.cos(n))*i+Math.abs(Math.sin(n))*o),a=Math.ceil(Math.abs(Math.sin(n))*i+Math.abs(Math.cos(n))*o);return t.width=s,t.height=a,r.translate(s/2,a/2),r.rotate(n),r.drawImage(this.canvas,i/-2,o/-2),this.buffer=D.makeBufferFromCanvasImageData(t),this}invert(){return new j(this)}}D.DEGREE_TO_RADIANS=Math.PI/180;class P{constructor(e,t,r){this.deviceId=e,this.label=t,this.kind="videoinput",this.groupId=r||void 0}toJSON(){return{kind:this.kind,groupId:this.groupId,deviceId:this.deviceId,label:this.label}}}var L,B=(globalThis||r.g||self||window?(globalThis||r.g||self||window||void 0).__awaiter:void 0)||function(e,t,r,n){function i(e){return e instanceof r?e:new r((function(t){t(e)}))}return new(r||(r=Promise))((function(r,o){function s(e){try{l(n.next(e))}catch(t){o(t)}}function a(e){try{l(n.throw(e))}catch(t){o(t)}}function l(e){e.done?r(e.value):i(e.value).then(s,a)}l((n=n.apply(e,t||[])).next())}))};class F{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:500,r=arguments.length>2?arguments[2]:void 0;this.reader=e,this.timeBetweenScansMillis=t,this._hints=r,this._stopContinuousDecode=!1,this._stopAsyncDecode=!1,this._timeBetweenDecodingAttempts=0}get hasNavigator(){return"undefined"!==typeof navigator}get isMediaDevicesSuported(){return this.hasNavigator&&!!navigator.mediaDevices}get canEnumerateDevices(){return!(!this.isMediaDevicesSuported||!navigator.mediaDevices.enumerateDevices)}get timeBetweenDecodingAttempts(){return this._timeBetweenDecodingAttempts}set timeBetweenDecodingAttempts(e){this._timeBetweenDecodingAttempts=e<0?0:e}set hints(e){this._hints=e||null}get hints(){return this._hints}listVideoInputDevices(){return B(this,void 0,void 0,(function*(){if(!this.hasNavigator)throw new Error("Can't enumerate devices, navigator is not present.");if(!this.canEnumerateDevices)throw new Error("Can't enumerate devices, method not supported.");const e=yield navigator.mediaDevices.enumerateDevices(),t=[];for(const r of e){const e="video"===r.kind?"videoinput":r.kind;if("videoinput"!==e)continue;const n={deviceId:r.deviceId||r.id,label:r.label||`Video device ${t.length+1}`,kind:e,groupId:r.groupId};t.push(n)}return t}))}getVideoInputDevices(){return B(this,void 0,void 0,(function*(){return(yield this.listVideoInputDevices()).map((e=>new P(e.deviceId,e.label)))}))}findDeviceById(e){return B(this,void 0,void 0,(function*(){const t=yield this.listVideoInputDevices();return t?t.find((t=>t.deviceId===e)):null}))}decodeFromInputVideoDevice(e,t){return B(this,void 0,void 0,(function*(){return yield this.decodeOnceFromVideoDevice(e,t)}))}decodeOnceFromVideoDevice(e,t){return B(this,void 0,void 0,(function*(){let r;this.reset(),r=e?{deviceId:{exact:e}}:{facingMode:"environment"};const n={video:r};return yield this.decodeOnceFromConstraints(n,t)}))}decodeOnceFromConstraints(e,t){return B(this,void 0,void 0,(function*(){const r=yield navigator.mediaDevices.getUserMedia(e);return yield this.decodeOnceFromStream(r,t)}))}decodeOnceFromStream(e,t){return B(this,void 0,void 0,(function*(){this.reset();const r=yield this.attachStreamToVideo(e,t);return yield this.decodeOnce(r)}))}decodeFromInputVideoDeviceContinuously(e,t,r){return B(this,void 0,void 0,(function*(){return yield this.decodeFromVideoDevice(e,t,r)}))}decodeFromVideoDevice(e,t,r){return B(this,void 0,void 0,(function*(){let n;n=e?{deviceId:{exact:e}}:{facingMode:"environment"};const i={video:n};return yield this.decodeFromConstraints(i,t,r)}))}decodeFromConstraints(e,t,r){return B(this,void 0,void 0,(function*(){const n=yield navigator.mediaDevices.getUserMedia(e);return yield this.decodeFromStream(n,t,r)}))}decodeFromStream(e,t,r){return B(this,void 0,void 0,(function*(){this.reset();const n=yield this.attachStreamToVideo(e,t);return yield this.decodeContinuously(n,r)}))}stopAsyncDecode(){this._stopAsyncDecode=!0}stopContinuousDecode(){this._stopContinuousDecode=!0}attachStreamToVideo(e,t){return B(this,void 0,void 0,(function*(){const r=this.prepareVideoElement(t);return this.addVideoSource(r,e),this.videoElement=r,this.stream=e,yield this.playVideoOnLoadAsync(r),r}))}playVideoOnLoadAsync(e){return new Promise(((t,r)=>this.playVideoOnLoad(e,(()=>t()))))}playVideoOnLoad(e,t){this.videoEndedListener=()=>this.stopStreams(),this.videoCanPlayListener=()=>this.tryPlayVideo(e),e.addEventListener("ended",this.videoEndedListener),e.addEventListener("canplay",this.videoCanPlayListener),e.addEventListener("playing",t),this.tryPlayVideo(e)}isVideoPlaying(e){return e.currentTime>0&&!e.paused&&!e.ended&&e.readyState>2}tryPlayVideo(e){return B(this,void 0,void 0,(function*(){if(this.isVideoPlaying(e))console.warn("Trying to play video that is already playing.");else try{yield e.play()}catch(t){console.warn("It was not possible to play the video.")}}))}getMediaElement(e,t){const r=document.getElementById(e);if(!r)throw new u(`element with id '${e}' not found`);if(r.nodeName.toLowerCase()!==t.toLowerCase())throw new u(`element with id '${e}' must be an ${t} element`);return r}decodeFromImage(e,t){if(!e&&!t)throw new u("either imageElement with a src set or an url must be provided");return t&&!e?this.decodeFromImageUrl(t):this.decodeFromImageElement(e)}decodeFromVideo(e,t){if(!e&&!t)throw new u("Either an element with a src set or an URL must be provided");return t&&!e?this.decodeFromVideoUrl(t):this.decodeFromVideoElement(e)}decodeFromVideoContinuously(e,t,r){if(void 0===e&&void 0===t)throw new u("Either an element with a src set or an URL must be provided");return t&&!e?this.decodeFromVideoUrlContinuously(t,r):this.decodeFromVideoElementContinuously(e,r)}decodeFromImageElement(e){if(!e)throw new u("An image element must be provided.");this.reset();const t=this.prepareImageElement(e);let r;return this.imageElement=t,r=this.isImageLoaded(t)?this.decodeOnce(t,!1,!0):this._decodeOnLoadImage(t),r}decodeFromVideoElement(e){const t=this._decodeFromVideoElementSetup(e);return this._decodeOnLoadVideo(t)}decodeFromVideoElementContinuously(e,t){const r=this._decodeFromVideoElementSetup(e);return this._decodeOnLoadVideoContinuously(r,t)}_decodeFromVideoElementSetup(e){if(!e)throw new u("A video element must be provided.");this.reset();const t=this.prepareVideoElement(e);return this.videoElement=t,t}decodeFromImageUrl(e){if(!e)throw new u("An URL must be provided.");this.reset();const t=this.prepareImageElement();this.imageElement=t;const r=this._decodeOnLoadImage(t);return t.src=e,r}decodeFromVideoUrl(e){if(!e)throw new u("An URL must be provided.");this.reset();const t=this.prepareVideoElement(),r=this.decodeFromVideoElement(t);return t.src=e,r}decodeFromVideoUrlContinuously(e,t){if(!e)throw new u("An URL must be provided.");this.reset();const r=this.prepareVideoElement(),n=this.decodeFromVideoElementContinuously(r,t);return r.src=e,n}_decodeOnLoadImage(e){return new Promise(((t,r)=>{this.imageLoadedListener=()=>this.decodeOnce(e,!1,!0).then(t,r),e.addEventListener("load",this.imageLoadedListener)}))}_decodeOnLoadVideo(e){return B(this,void 0,void 0,(function*(){return yield this.playVideoOnLoadAsync(e),yield this.decodeOnce(e)}))}_decodeOnLoadVideoContinuously(e,t){return B(this,void 0,void 0,(function*(){yield this.playVideoOnLoadAsync(e),this.decodeContinuously(e,t)}))}isImageLoaded(e){return!!e.complete&&0!==e.naturalWidth}prepareImageElement(e){let t;return"undefined"===typeof e&&(t=document.createElement("img"),t.width=200,t.height=200),"string"===typeof e&&(t=this.getMediaElement(e,"img")),e instanceof HTMLImageElement&&(t=e),t}prepareVideoElement(e){let t;return e||"undefined"===typeof document||(t=document.createElement("video"),t.width=200,t.height=200),"string"===typeof e&&(t=this.getMediaElement(e,"video")),e instanceof HTMLVideoElement&&(t=e),t.setAttribute("autoplay","true"),t.setAttribute("muted","true"),t.setAttribute("playsinline","true"),t}decodeOnce(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];this._stopAsyncDecode=!1;const n=(i,o)=>{if(this._stopAsyncDecode)return o(new O("Video stream has ended before any code could be detected.")),void(this._stopAsyncDecode=void 0);try{i(this.decode(e))}catch(s){if(t&&s instanceof O||(s instanceof f||s instanceof E)&&r)return setTimeout(n,this._timeBetweenDecodingAttempts,i,o);o(s)}};return new Promise(((e,t)=>n(e,t)))}decodeContinuously(e,t){this._stopContinuousDecode=!1;const r=()=>{if(this._stopContinuousDecode)this._stopContinuousDecode=void 0;else try{const n=this.decode(e);t(n,null),setTimeout(r,this.timeBetweenScansMillis)}catch(n){t(null,n),(n instanceof f||n instanceof E||n instanceof O)&&setTimeout(r,this._timeBetweenDecodingAttempts)}};r()}decode(e){const t=this.createBinaryBitmap(e);return this.decodeBitmap(t)}_isHTMLVideoElement(e){return 0!==e.videoWidth}drawFrameOnCanvas(e,t,r){t||(t={sx:0,sy:0,sWidth:e.videoWidth,sHeight:e.videoHeight,dx:0,dy:0,dWidth:e.videoWidth,dHeight:e.videoHeight}),r||(r=this.captureCanvasContext),r.drawImage(e,t.sx,t.sy,t.sWidth,t.sHeight,t.dx,t.dy,t.dWidth,t.dHeight)}drawImageOnCanvas(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.captureCanvasContext;t||(t={sx:0,sy:0,sWidth:e.naturalWidth,sHeight:e.naturalHeight,dx:0,dy:0,dWidth:e.naturalWidth,dHeight:e.naturalHeight}),r||(r=this.captureCanvasContext),r.drawImage(e,t.sx,t.sy,t.sWidth,t.sHeight,t.dx,t.dy,t.dWidth,t.dHeight)}createBinaryBitmap(e){this.getCaptureCanvasContext(e),this._isHTMLVideoElement(e)?this.drawFrameOnCanvas(e):this.drawImageOnCanvas(e);const t=this.getCaptureCanvas(e),r=new D(t),n=new R(r);return new h(n)}getCaptureCanvasContext(e){if(!this.captureCanvasContext){const t=this.getCaptureCanvas(e).getContext("2d");this.captureCanvasContext=t}return this.captureCanvasContext}getCaptureCanvas(e){if(!this.captureCanvas){const t=this.createCaptureCanvas(e);this.captureCanvas=t}return this.captureCanvas}decodeBitmap(e){return this.reader.decode(e,this._hints)}createCaptureCanvas(e){if("undefined"===typeof document)return this._destroyCaptureCanvas(),null;const t=document.createElement("canvas");let r,n;return"undefined"!==typeof e&&(e instanceof HTMLVideoElement?(r=e.videoWidth,n=e.videoHeight):e instanceof HTMLImageElement&&(r=e.naturalWidth||e.width,n=e.naturalHeight||e.height)),t.style.width=r+"px",t.style.height=n+"px",t.width=r,t.height=n,t}stopStreams(){this.stream&&(this.stream.getVideoTracks().forEach((e=>e.stop())),this.stream=void 0),!1===this._stopAsyncDecode&&this.stopAsyncDecode(),!1===this._stopContinuousDecode&&this.stopContinuousDecode()}reset(){this.stopStreams(),this._destroyVideoElement(),this._destroyImageElement(),this._destroyCaptureCanvas()}_destroyVideoElement(){this.videoElement&&("undefined"!==typeof this.videoEndedListener&&this.videoElement.removeEventListener("ended",this.videoEndedListener),"undefined"!==typeof this.videoPlayingEventListener&&this.videoElement.removeEventListener("playing",this.videoPlayingEventListener),"undefined"!==typeof this.videoCanPlayListener&&this.videoElement.removeEventListener("loadedmetadata",this.videoCanPlayListener),this.cleanVideoSource(this.videoElement),this.videoElement=void 0)}_destroyImageElement(){this.imageElement&&(void 0!==this.imageLoadedListener&&this.imageElement.removeEventListener("load",this.imageLoadedListener),this.imageElement.src=void 0,this.imageElement.removeAttribute("src"),this.imageElement=void 0)}_destroyCaptureCanvas(){this.captureCanvasContext=void 0,this.captureCanvas=void 0}addVideoSource(e,t){try{e.srcObject=t}catch(r){e.src=URL.createObjectURL(t)}}cleanVideoSource(e){try{e.srcObject=null}catch(t){e.src=""}this.videoElement.removeAttribute("src")}}class U{constructor(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null==t?0:8*t.length,n=arguments.length>3?arguments[3]:void 0,i=arguments.length>4?arguments[4]:void 0,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:m.currentTimeMillis();this.text=e,this.rawBytes=t,this.numBits=r,this.resultPoints=n,this.format=i,this.timestamp=o,this.text=e,this.rawBytes=t,this.numBits=void 0===r||null===r?null===t||void 0===t?0:8*t.length:r,this.resultPoints=n,this.format=i,this.resultMetadata=null,this.timestamp=void 0===o||null===o?m.currentTimeMillis():o}getText(){return this.text}getRawBytes(){return this.rawBytes}getNumBits(){return this.numBits}getResultPoints(){return this.resultPoints}getBarcodeFormat(){return this.format}getResultMetadata(){return this.resultMetadata}putMetadata(e,t){null===this.resultMetadata&&(this.resultMetadata=new Map),this.resultMetadata.set(e,t)}putAllMetadata(e){null!==e&&(null===this.resultMetadata?this.resultMetadata=e:this.resultMetadata=new Map(e))}addResultPoints(e){const t=this.resultPoints;if(null===t)this.resultPoints=e;else if(null!==e&&e.length>0){const r=new Array(t.length+e.length);m.arraycopy(t,0,r,0,t.length),m.arraycopy(e,0,r,t.length,e.length),this.resultPoints=r}}getTimestamp(){return this.timestamp}toString(){return this.text}}!function(e){e[e.AZTEC=0]="AZTEC",e[e.CODABAR=1]="CODABAR",e[e.CODE_39=2]="CODE_39",e[e.CODE_93=3]="CODE_93",e[e.CODE_128=4]="CODE_128",e[e.DATA_MATRIX=5]="DATA_MATRIX",e[e.EAN_8=6]="EAN_8",e[e.EAN_13=7]="EAN_13",e[e.ITF=8]="ITF",e[e.MAXICODE=9]="MAXICODE",e[e.PDF_417=10]="PDF_417",e[e.QR_CODE=11]="QR_CODE",e[e.RSS_14=12]="RSS_14",e[e.RSS_EXPANDED=13]="RSS_EXPANDED",e[e.UPC_A=14]="UPC_A",e[e.UPC_E=15]="UPC_E",e[e.UPC_EAN_EXTENSION=16]="UPC_EAN_EXTENSION"}(L||(L={}));var z,H=L;!function(e){e[e.OTHER=0]="OTHER",e[e.ORIENTATION=1]="ORIENTATION",e[e.BYTE_SEGMENTS=2]="BYTE_SEGMENTS",e[e.ERROR_CORRECTION_LEVEL=3]="ERROR_CORRECTION_LEVEL",e[e.ISSUE_NUMBER=4]="ISSUE_NUMBER",e[e.SUGGESTED_PRICE=5]="SUGGESTED_PRICE",e[e.POSSIBLE_COUNTRY=6]="POSSIBLE_COUNTRY",e[e.UPC_EAN_EXTENSION=7]="UPC_EAN_EXTENSION",e[e.PDF417_EXTRA_METADATA=8]="PDF417_EXTRA_METADATA",e[e.STRUCTURED_APPEND_SEQUENCE=9]="STRUCTURED_APPEND_SEQUENCE",e[e.STRUCTURED_APPEND_PARITY=10]="STRUCTURED_APPEND_PARITY"}(z||(z={}));var V,W,G,$,X,Y,q=z;class Q{constructor(e,t,r,n){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:-1,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:-1;this.rawBytes=e,this.text=t,this.byteSegments=r,this.ecLevel=n,this.structuredAppendSequenceNumber=i,this.structuredAppendParity=o,this.numBits=void 0===e||null===e?0:8*e.length}getRawBytes(){return this.rawBytes}getNumBits(){return this.numBits}setNumBits(e){this.numBits=e}getText(){return this.text}getByteSegments(){return this.byteSegments}getECLevel(){return this.ecLevel}getErrorsCorrected(){return this.errorsCorrected}setErrorsCorrected(e){this.errorsCorrected=e}getErasures(){return this.erasures}setErasures(e){this.erasures=e}getOther(){return this.other}setOther(e){this.other=e}hasStructuredAppend(){return this.structuredAppendParity>=0&&this.structuredAppendSequenceNumber>=0}getStructuredAppendParity(){return this.structuredAppendParity}getStructuredAppendSequenceNumber(){return this.structuredAppendSequenceNumber}}class Z{exp(e){return this.expTable[e]}log(e){if(0===e)throw new d;return this.logTable[e]}static addOrSubtract(e,t){return e^t}}class K{constructor(e,t){if(0===t.length)throw new d;this.field=e;const r=t.length;if(r>1&&0===t[0]){let e=1;for(;e<r&&0===t[e];)e++;e===r?this.coefficients=Int32Array.from([0]):(this.coefficients=new Int32Array(r-e),m.arraycopy(t,e,this.coefficients,0,this.coefficients.length))}else this.coefficients=t}getCoefficients(){return this.coefficients}getDegree(){return this.coefficients.length-1}isZero(){return 0===this.coefficients[0]}getCoefficient(e){return this.coefficients[this.coefficients.length-1-e]}evaluateAt(e){if(0===e)return this.getCoefficient(0);const t=this.coefficients;let r;if(1===e){r=0;for(let e=0,n=t.length;e!==n;e++){const n=t[e];r=Z.addOrSubtract(r,n)}return r}r=t[0];const n=t.length,i=this.field;for(let o=1;o<n;o++)r=Z.addOrSubtract(i.multiply(e,r),t[o]);return r}addOrSubtract(e){if(!this.field.equals(e.field))throw new d("GenericGFPolys do not have same GenericGF field");if(this.isZero())return e;if(e.isZero())return this;let t=this.coefficients,r=e.coefficients;if(t.length>r.length){const e=t;t=r,r=e}let n=new Int32Array(r.length);const i=r.length-t.length;m.arraycopy(r,0,n,0,i);for(let o=i;o<r.length;o++)n[o]=Z.addOrSubtract(t[o-i],r[o]);return new K(this.field,n)}multiply(e){if(!this.field.equals(e.field))throw new d("GenericGFPolys do not have same GenericGF field");if(this.isZero()||e.isZero())return this.field.getZero();const t=this.coefficients,r=t.length,n=e.coefficients,i=n.length,o=new Int32Array(r+i-1),s=this.field;for(let a=0;a<r;a++){const e=t[a];for(let t=0;t<i;t++)o[a+t]=Z.addOrSubtract(o[a+t],s.multiply(e,n[t]))}return new K(s,o)}multiplyScalar(e){if(0===e)return this.field.getZero();if(1===e)return this;const t=this.coefficients.length,r=this.field,n=new Int32Array(t),i=this.coefficients;for(let o=0;o<t;o++)n[o]=r.multiply(i[o],e);return new K(r,n)}multiplyByMonomial(e,t){if(e<0)throw new d;if(0===t)return this.field.getZero();const r=this.coefficients,n=r.length,i=new Int32Array(n+e),o=this.field;for(let s=0;s<n;s++)i[s]=o.multiply(r[s],t);return new K(o,i)}divide(e){if(!this.field.equals(e.field))throw new d("GenericGFPolys do not have same GenericGF field");if(e.isZero())throw new d("Divide by 0");const t=this.field;let r=t.getZero(),n=this;const i=e.getCoefficient(e.getDegree()),o=t.inverse(i);for(;n.getDegree()>=e.getDegree()&&!n.isZero();){const i=n.getDegree()-e.getDegree(),s=t.multiply(n.getCoefficient(n.getDegree()),o),a=e.multiplyByMonomial(i,s),l=t.buildMonomial(i,s);r=r.addOrSubtract(l),n=n.addOrSubtract(a)}return[r,n]}toString(){let e="";for(let t=this.getDegree();t>=0;t--){let r=this.getCoefficient(t);if(0!==r){if(r<0?(e+=" - ",r=-r):e.length>0&&(e+=" + "),0===t||1!==r){const t=this.field.log(r);0===t?e+="1":1===t?e+="a":(e+="a^",e+=t)}0!==t&&(1===t?e+="x":(e+="x^",e+=t))}}return e}}class J extends c{}J.kind="ArithmeticException";class ee extends Z{constructor(e,t,r){super(),this.primitive=e,this.size=t,this.generatorBase=r;const n=new Int32Array(t);let i=1;for(let s=0;s<t;s++)n[s]=i,i*=2,i>=t&&(i^=e,i&=t-1);this.expTable=n;const o=new Int32Array(t);for(let s=0;s<t-1;s++)o[n[s]]=s;this.logTable=o,this.zero=new K(this,Int32Array.from([0])),this.one=new K(this,Int32Array.from([1]))}getZero(){return this.zero}getOne(){return this.one}buildMonomial(e,t){if(e<0)throw new d;if(0===t)return this.zero;const r=new Int32Array(e+1);return r[0]=t,new K(this,r)}inverse(e){if(0===e)throw new J;return this.expTable[this.size-this.logTable[e]-1]}multiply(e,t){return 0===e||0===t?0:this.expTable[(this.logTable[e]+this.logTable[t])%(this.size-1)]}getSize(){return this.size}getGeneratorBase(){return this.generatorBase}toString(){return"GF(0x"+b.toHexString(this.primitive)+","+this.size+")"}equals(e){return e===this}}ee.AZTEC_DATA_12=new ee(4201,4096,1),ee.AZTEC_DATA_10=new ee(1033,1024,1),ee.AZTEC_DATA_6=new ee(67,64,1),ee.AZTEC_PARAM=new ee(19,16,1),ee.QR_CODE_FIELD_256=new ee(285,256,0),ee.DATA_MATRIX_FIELD_256=new ee(301,256,1),ee.AZTEC_DATA_8=ee.DATA_MATRIX_FIELD_256,ee.MAXICODE_FIELD_64=ee.AZTEC_DATA_6;class te extends c{}te.kind="ReedSolomonException";class re extends c{}re.kind="IllegalStateException";class ne{constructor(e){this.field=e}decode(e,t){const r=this.field,n=new K(r,e),i=new Int32Array(t);let o=!0;for(let h=0;h<t;h++){const e=n.evaluateAt(r.exp(h+r.getGeneratorBase()));i[i.length-1-h]=e,0!==e&&(o=!1)}if(o)return;const s=new K(r,i),a=this.runEuclideanAlgorithm(r.buildMonomial(t,1),s,t),l=a[0],c=a[1],u=this.findErrorLocations(l),d=this.findErrorMagnitudes(c,u);for(let h=0;h<u.length;h++){const t=e.length-1-r.log(u[h]);if(t<0)throw new te("Bad error location");e[t]=ee.addOrSubtract(e[t],d[h])}}runEuclideanAlgorithm(e,t,r){if(e.getDegree()<t.getDegree()){const r=e;e=t,t=r}const n=this.field;let i=e,o=t,s=n.getZero(),a=n.getOne();for(;o.getDegree()>=(r/2|0);){let e=i,t=s;if(i=o,s=a,i.isZero())throw new te("r_{i-1} was zero");o=e;let r=n.getZero();const l=i.getCoefficient(i.getDegree()),c=n.inverse(l);for(;o.getDegree()>=i.getDegree()&&!o.isZero();){const e=o.getDegree()-i.getDegree(),t=n.multiply(o.getCoefficient(o.getDegree()),c);r=r.addOrSubtract(n.buildMonomial(e,t)),o=o.addOrSubtract(i.multiplyByMonomial(e,t))}if(a=r.multiply(s).addOrSubtract(t),o.getDegree()>=i.getDegree())throw new re("Division algorithm failed to reduce polynomial?")}const l=a.getCoefficient(0);if(0===l)throw new te("sigmaTilde(0) was zero");const c=n.inverse(l);return[a.multiplyScalar(c),o.multiplyScalar(c)]}findErrorLocations(e){const t=e.getDegree();if(1===t)return Int32Array.from([e.getCoefficient(1)]);const r=new Int32Array(t);let n=0;const i=this.field;for(let o=1;o<i.getSize()&&n<t;o++)0===e.evaluateAt(o)&&(r[n]=i.inverse(o),n++);if(n!==t)throw new te("Error locator degree does not match number of roots");return r}findErrorMagnitudes(e,t){const r=t.length,n=new Int32Array(r),i=this.field;for(let o=0;o<r;o++){const s=i.inverse(t[o]);let a=1;for(let e=0;e<r;e++)if(o!==e){const r=i.multiply(t[e],s),n=0===(1&r)?1|r:-2&r;a=i.multiply(a,n)}n[o]=i.multiply(e.evaluateAt(s),i.inverse(a)),0!==i.getGeneratorBase()&&(n[o]=i.multiply(n[o],s))}return n}}!function(e){e[e.UPPER=0]="UPPER",e[e.LOWER=1]="LOWER",e[e.MIXED=2]="MIXED",e[e.DIGIT=3]="DIGIT",e[e.PUNCT=4]="PUNCT",e[e.BINARY=5]="BINARY"}(V||(V={}));class ie{decode(e){this.ddata=e;let t=e.getBits(),r=this.extractBits(t),n=this.correctBits(r),i=ie.convertBoolArrayToByteArray(n),o=ie.getEncodedData(n),s=new Q(i,o,null,null);return s.setNumBits(n.length),s}static highLevelDecode(e){return this.getEncodedData(e)}static getEncodedData(e){let t=e.length,r=V.UPPER,n=V.UPPER,i="",o=0;for(;o<t;)if(n===V.BINARY){if(t-o<5)break;let s=ie.readCode(e,o,5);if(o+=5,0===s){if(t-o<11)break;s=ie.readCode(e,o,11)+31,o+=11}for(let r=0;r<s;r++){if(t-o<8){o=t;break}const r=ie.readCode(e,o,8);i+=N.castAsNonUtf8Char(r),o+=8}n=r}else{let s=n===V.DIGIT?4:5;if(t-o<s)break;let a=ie.readCode(e,o,s);o+=s;let l=ie.getCharacter(n,a);l.startsWith("CTRL_")?(r=n,n=ie.getTable(l.charAt(5)),"L"===l.charAt(6)&&(r=n)):(i+=l,n=r)}return i}static getTable(e){switch(e){case"L":return V.LOWER;case"P":return V.PUNCT;case"M":return V.MIXED;case"D":return V.DIGIT;case"B":return V.BINARY;default:return V.UPPER}}static getCharacter(e,t){switch(e){case V.UPPER:return ie.UPPER_TABLE[t];case V.LOWER:return ie.LOWER_TABLE[t];case V.MIXED:return ie.MIXED_TABLE[t];case V.PUNCT:return ie.PUNCT_TABLE[t];case V.DIGIT:return ie.DIGIT_TABLE[t];default:throw new re("Bad table")}}correctBits(e){let t,r;this.ddata.getNbLayers()<=2?(r=6,t=ee.AZTEC_DATA_6):this.ddata.getNbLayers()<=8?(r=8,t=ee.AZTEC_DATA_8):this.ddata.getNbLayers()<=22?(r=10,t=ee.AZTEC_DATA_10):(r=12,t=ee.AZTEC_DATA_12);let n=this.ddata.getNbDatablocks(),i=e.length/r;if(i<n)throw new E;let o=e.length%r,s=new Int32Array(i);for(let h=0;h<i;h++,o+=r)s[h]=ie.readCode(e,o,r);try{new ne(t).decode(s,i-n)}catch(d){throw new E(d)}let a=(1<<r)-1,l=0;for(let h=0;h<n;h++){let e=s[h];if(0===e||e===a)throw new E;1!==e&&e!==a-1||l++}let c=new Array(n*r-l),u=0;for(let h=0;h<n;h++){let e=s[h];if(1===e||e===a-1)c.fill(e>1,u,u+r-1),u+=r-1;else for(let t=r-1;t>=0;--t)c[u++]=0!==(e&1<<t)}return c}extractBits(e){let t=this.ddata.isCompact(),r=this.ddata.getNbLayers(),n=(t?11:14)+4*r,i=new Int32Array(n),o=new Array(this.totalBitsInLayer(r,t));if(t)for(let s=0;s<i.length;s++)i[s]=s;else{let e=n+1+2*b.truncDivision(b.truncDivision(n,2)-1,15),t=n/2,r=b.truncDivision(e,2);for(let n=0;n<t;n++){let e=n+b.truncDivision(n,15);i[t-n-1]=r-e-1,i[t+n]=r+e+1}}for(let s=0,a=0;s<r;s++){let l=4*(r-s)+(t?9:12),c=2*s,u=n-1-c;for(let t=0;t<l;t++){let r=2*t;for(let n=0;n<2;n++)o[a+r+n]=e.get(i[c+n],i[c+t]),o[a+2*l+r+n]=e.get(i[c+t],i[u-n]),o[a+4*l+r+n]=e.get(i[u-n],i[u-t]),o[a+6*l+r+n]=e.get(i[u-t],i[c+n])}a+=8*l}return o}static readCode(e,t,r){let n=0;for(let i=t;i<t+r;i++)n<<=1,e[i]&&(n|=1);return n}static readByte(e,t){let r=e.length-t;return r>=8?ie.readCode(e,t,8):ie.readCode(e,t,r)<<8-r}static convertBoolArrayToByteArray(e){let t=new Uint8Array((e.length+7)/8);for(let r=0;r<t.length;r++)t[r]=ie.readByte(e,8*r);return t}totalBitsInLayer(e,t){return((t?88:112)+16*e)*e}}ie.UPPER_TABLE=["CTRL_PS"," ","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","CTRL_LL","CTRL_ML","CTRL_DL","CTRL_BS"],ie.LOWER_TABLE=["CTRL_PS"," ","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","CTRL_US","CTRL_ML","CTRL_DL","CTRL_BS"],ie.MIXED_TABLE=["CTRL_PS"," ","\\1","\\2","\\3","\\4","\\5","\\6","\\7","\b","\t","\n","\\13","\f","\r","\\33","\\34","\\35","\\36","\\37","@","\\","^","_","`","|","~","\\177","CTRL_LL","CTRL_UL","CTRL_PL","CTRL_BS"],ie.PUNCT_TABLE=["","\r","\r\n",". ",", ",": ","!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}","CTRL_UL"],ie.DIGIT_TABLE=["CTRL_PS"," ","0","1","2","3","4","5","6","7","8","9",",",".","CTRL_UL","CTRL_US"];class oe{constructor(){}static round(e){return NaN===e?0:e<=Number.MIN_SAFE_INTEGER?Number.MIN_SAFE_INTEGER:e>=Number.MAX_SAFE_INTEGER?Number.MAX_SAFE_INTEGER:e+(e<0?-.5:.5)|0}static distance(e,t,r,n){const i=e-r,o=t-n;return Math.sqrt(i*i+o*o)}static sum(e){let t=0;for(let r=0,n=e.length;r!==n;r++)t+=e[r];return t}}class se{static floatToIntBits(e){return e}}se.MAX_VALUE=Number.MAX_SAFE_INTEGER;class ae{constructor(e,t){this.x=e,this.y=t}getX(){return this.x}getY(){return this.y}equals(e){if(e instanceof ae){const t=e;return this.x===t.x&&this.y===t.y}return!1}hashCode(){return 31*se.floatToIntBits(this.x)+se.floatToIntBits(this.y)}toString(){return"("+this.x+","+this.y+")"}static orderBestPatterns(e){const t=this.distance(e[0],e[1]),r=this.distance(e[1],e[2]),n=this.distance(e[0],e[2]);let i,o,s;if(r>=t&&r>=n?(o=e[0],i=e[1],s=e[2]):n>=r&&n>=t?(o=e[1],i=e[0],s=e[2]):(o=e[2],i=e[0],s=e[1]),this.crossProductZ(i,o,s)<0){const e=i;i=s,s=e}e[0]=i,e[1]=o,e[2]=s}static distance(e,t){return oe.distance(e.x,e.y,t.x,t.y)}static crossProductZ(e,t,r){const n=t.x,i=t.y;return(r.x-n)*(e.y-i)-(r.y-i)*(e.x-n)}}class le{constructor(e,t){this.bits=e,this.points=t}getBits(){return this.bits}getPoints(){return this.points}}class ce extends le{constructor(e,t,r,n,i){super(e,t),this.compact=r,this.nbDatablocks=n,this.nbLayers=i}getNbLayers(){return this.nbLayers}getNbDatablocks(){return this.nbDatablocks}isCompact(){return this.compact}}class ue{constructor(e,t,r,n){this.image=e,this.height=e.getHeight(),this.width=e.getWidth(),void 0!==t&&null!==t||(t=ue.INIT_SIZE),void 0!==r&&null!==r||(r=e.getWidth()/2|0),void 0!==n&&null!==n||(n=e.getHeight()/2|0);const i=t/2|0;if(this.leftInit=r-i,this.rightInit=r+i,this.upInit=n-i,this.downInit=n+i,this.upInit<0||this.leftInit<0||this.downInit>=this.height||this.rightInit>=this.width)throw new O}detect(){let e=this.leftInit,t=this.rightInit,r=this.upInit,n=this.downInit,i=!1,o=!0,s=!1,a=!1,l=!1,c=!1,u=!1;const d=this.width,h=this.height;for(;o;){o=!1;let f=!0;for(;(f||!a)&&t<d;)f=this.containsBlackPoint(r,n,t,!1),f?(t++,o=!0,a=!0):a||t++;if(t>=d){i=!0;break}let p=!0;for(;(p||!l)&&n<h;)p=this.containsBlackPoint(e,t,n,!0),p?(n++,o=!0,l=!0):l||n++;if(n>=h){i=!0;break}let m=!0;for(;(m||!c)&&e>=0;)m=this.containsBlackPoint(r,n,e,!1),m?(e--,o=!0,c=!0):c||e--;if(e<0){i=!0;break}let g=!0;for(;(g||!u)&&r>=0;)g=this.containsBlackPoint(e,t,r,!0),g?(r--,o=!0,u=!0):u||r--;if(r<0){i=!0;break}o&&(s=!0)}if(!i&&s){const i=t-e;let o=null;for(let t=1;null===o&&t<i;t++)o=this.getBlackPointOnSegment(e,n-t,e+t,n);if(null==o)throw new O;let s=null;for(let t=1;null===s&&t<i;t++)s=this.getBlackPointOnSegment(e,r+t,e+t,r);if(null==s)throw new O;let a=null;for(let e=1;null===a&&e<i;e++)a=this.getBlackPointOnSegment(t,r+e,t-e,r);if(null==a)throw new O;let l=null;for(let e=1;null===l&&e<i;e++)l=this.getBlackPointOnSegment(t,n-e,t-e,n);if(null==l)throw new O;return this.centerEdges(l,o,a,s)}throw new O}getBlackPointOnSegment(e,t,r,n){const i=oe.round(oe.distance(e,t,r,n)),o=(r-e)/i,s=(n-t)/i,a=this.image;for(let l=0;l<i;l++){const r=oe.round(e+l*o),n=oe.round(t+l*s);if(a.get(r,n))return new ae(r,n)}return null}centerEdges(e,t,r,n){const i=e.getX(),o=e.getY(),s=t.getX(),a=t.getY(),l=r.getX(),c=r.getY(),u=n.getX(),d=n.getY(),h=ue.CORR;return i<this.width/2?[new ae(u-h,d+h),new ae(s+h,a+h),new ae(l-h,c-h),new ae(i+h,o-h)]:[new ae(u+h,d+h),new ae(s+h,a-h),new ae(l-h,c+h),new ae(i-h,o-h)]}containsBlackPoint(e,t,r,n){const i=this.image;if(n){for(let o=e;o<=t;o++)if(i.get(o,r))return!0}else for(let o=e;o<=t;o++)if(i.get(r,o))return!0;return!1}}ue.INIT_SIZE=10,ue.CORR=1;class de{static checkAndNudgePoints(e,t){const r=e.getWidth(),n=e.getHeight();let i=!0;for(let o=0;o<t.length&&i;o+=2){const e=Math.floor(t[o]),s=Math.floor(t[o+1]);if(e<-1||e>r||s<-1||s>n)throw new O;i=!1,-1===e?(t[o]=0,i=!0):e===r&&(t[o]=r-1,i=!0),-1===s?(t[o+1]=0,i=!0):s===n&&(t[o+1]=n-1,i=!0)}i=!0;for(let o=t.length-2;o>=0&&i;o-=2){const e=Math.floor(t[o]),s=Math.floor(t[o+1]);if(e<-1||e>r||s<-1||s>n)throw new O;i=!1,-1===e?(t[o]=0,i=!0):e===r&&(t[o]=r-1,i=!0),-1===s?(t[o+1]=0,i=!0):s===n&&(t[o+1]=n-1,i=!0)}}}class he{constructor(e,t,r,n,i,o,s,a,l){this.a11=e,this.a21=t,this.a31=r,this.a12=n,this.a22=i,this.a32=o,this.a13=s,this.a23=a,this.a33=l}static quadrilateralToQuadrilateral(e,t,r,n,i,o,s,a,l,c,u,d,h,f,p,m){const g=he.quadrilateralToSquare(e,t,r,n,i,o,s,a);return he.squareToQuadrilateral(l,c,u,d,h,f,p,m).times(g)}transformPoints(e){const t=e.length,r=this.a11,n=this.a12,i=this.a13,o=this.a21,s=this.a22,a=this.a23,l=this.a31,c=this.a32,u=this.a33;for(let d=0;d<t;d+=2){const t=e[d],h=e[d+1],f=i*t+a*h+u;e[d]=(r*t+o*h+l)/f,e[d+1]=(n*t+s*h+c)/f}}transformPointsWithValues(e,t){const r=this.a11,n=this.a12,i=this.a13,o=this.a21,s=this.a22,a=this.a23,l=this.a31,c=this.a32,u=this.a33,d=e.length;for(let h=0;h<d;h++){const d=e[h],f=t[h],p=i*d+a*f+u;e[h]=(r*d+o*f+l)/p,t[h]=(n*d+s*f+c)/p}}static squareToQuadrilateral(e,t,r,n,i,o,s,a){const l=e-r+i-s,c=t-n+o-a;if(0===l&&0===c)return new he(r-e,i-r,e,n-t,o-n,t,0,0,1);{const u=r-i,d=s-i,h=n-o,f=a-o,p=u*f-d*h,m=(l*f-d*c)/p,g=(u*c-l*h)/p;return new he(r-e+m*r,s-e+g*s,e,n-t+m*n,a-t+g*a,t,m,g,1)}}static quadrilateralToSquare(e,t,r,n,i,o,s,a){return he.squareToQuadrilateral(e,t,r,n,i,o,s,a).buildAdjoint()}buildAdjoint(){return new he(this.a22*this.a33-this.a23*this.a32,this.a23*this.a31-this.a21*this.a33,this.a21*this.a32-this.a22*this.a31,this.a13*this.a32-this.a12*this.a33,this.a11*this.a33-this.a13*this.a31,this.a12*this.a31-this.a11*this.a32,this.a12*this.a23-this.a13*this.a22,this.a13*this.a21-this.a11*this.a23,this.a11*this.a22-this.a12*this.a21)}times(e){return new he(this.a11*e.a11+this.a21*e.a12+this.a31*e.a13,this.a11*e.a21+this.a21*e.a22+this.a31*e.a23,this.a11*e.a31+this.a21*e.a32+this.a31*e.a33,this.a12*e.a11+this.a22*e.a12+this.a32*e.a13,this.a12*e.a21+this.a22*e.a22+this.a32*e.a23,this.a12*e.a31+this.a22*e.a32+this.a32*e.a33,this.a13*e.a11+this.a23*e.a12+this.a33*e.a13,this.a13*e.a21+this.a23*e.a22+this.a33*e.a23,this.a13*e.a31+this.a23*e.a32+this.a33*e.a33)}}class fe extends de{sampleGrid(e,t,r,n,i,o,s,a,l,c,u,d,h,f,p,m,g,y,w){const b=he.quadrilateralToQuadrilateral(n,i,o,s,a,l,c,u,d,h,f,p,m,g,y,w);return this.sampleGridWithTransform(e,t,r,b)}sampleGridWithTransform(e,t,r,n){if(t<=0||r<=0)throw new O;const i=new T(t,r),o=new Float32Array(2*t);for(let a=0;a<r;a++){const t=o.length,r=a+.5;for(let e=0;e<t;e+=2)o[e]=e/2+.5,o[e+1]=r;n.transformPoints(o),de.checkAndNudgePoints(e,o);try{for(let r=0;r<t;r+=2)e.get(Math.floor(o[r]),Math.floor(o[r+1]))&&i.set(r/2,a)}catch(s){throw new O}}return i}}class pe{static setGridSampler(e){pe.gridSampler=e}static getInstance(){return pe.gridSampler}}pe.gridSampler=new fe;class me{constructor(e,t){this.x=e,this.y=t}toResultPoint(){return new ae(this.getX(),this.getY())}getX(){return this.x}getY(){return this.y}}class ge{constructor(e){this.EXPECTED_CORNER_BITS=new Int32Array([3808,476,2107,1799]),this.image=e}detect(){return this.detectMirror(!1)}detectMirror(e){let t=this.getMatrixCenter(),r=this.getBullsEyeCorners(t);if(e){let e=r[0];r[0]=r[2],r[2]=e}this.extractParameters(r);let n=this.sampleGrid(this.image,r[this.shift%4],r[(this.shift+1)%4],r[(this.shift+2)%4],r[(this.shift+3)%4]),i=this.getMatrixCornerPoints(r);return new ce(n,i,this.compact,this.nbDataBlocks,this.nbLayers)}extractParameters(e){if(!this.isValidPoint(e[0])||!this.isValidPoint(e[1])||!this.isValidPoint(e[2])||!this.isValidPoint(e[3]))throw new O;let t=2*this.nbCenterLayers,r=new Int32Array([this.sampleLine(e[0],e[1],t),this.sampleLine(e[1],e[2],t),this.sampleLine(e[2],e[3],t),this.sampleLine(e[3],e[0],t)]);this.shift=this.getRotation(r,t);let n=0;for(let o=0;o<4;o++){let e=r[(this.shift+o)%4];this.compact?(n<<=7,n+=e>>1&127):(n<<=10,n+=(e>>2&992)+(e>>1&31))}let i=this.getCorrectedParameterData(n,this.compact);this.compact?(this.nbLayers=1+(i>>6),this.nbDataBlocks=1+(63&i)):(this.nbLayers=1+(i>>11),this.nbDataBlocks=1+(2047&i))}getRotation(e,t){let r=0;e.forEach(((e,n,i)=>{r=(e>>t-2<<1)+(1&e)+(r<<3)})),r=((1&r)<<11)+(r>>1);for(let n=0;n<4;n++)if(b.bitCount(r^this.EXPECTED_CORNER_BITS[n])<=2)return n;throw new O}getCorrectedParameterData(e,t){let r,n;t?(r=7,n=2):(r=10,n=4);let i=r-n,o=new Int32Array(r);for(let l=r-1;l>=0;--l)o[l]=15&e,e>>=4;try{new ne(ee.AZTEC_PARAM).decode(o,i)}catch(a){throw new O}let s=0;for(let l=0;l<n;l++)s=(s<<4)+o[l];return s}getBullsEyeCorners(e){let t=e,r=e,n=e,i=e,o=!0;for(this.nbCenterLayers=1;this.nbCenterLayers<9;this.nbCenterLayers++){let e=this.getFirstDifferent(t,o,1,-1),s=this.getFirstDifferent(r,o,1,1),a=this.getFirstDifferent(n,o,-1,1),l=this.getFirstDifferent(i,o,-1,-1);if(this.nbCenterLayers>2){let r=this.distancePoint(l,e)*this.nbCenterLayers/(this.distancePoint(i,t)*(this.nbCenterLayers+2));if(r<.75||r>1.25||!this.isWhiteOrBlackRectangle(e,s,a,l))break}t=e,r=s,n=a,i=l,o=!o}if(5!==this.nbCenterLayers&&7!==this.nbCenterLayers)throw new O;this.compact=5===this.nbCenterLayers;let s=new ae(t.getX()+.5,t.getY()-.5),a=new ae(r.getX()+.5,r.getY()+.5),l=new ae(n.getX()-.5,n.getY()+.5),c=new ae(i.getX()-.5,i.getY()-.5);return this.expandSquare([s,a,l,c],2*this.nbCenterLayers-3,2*this.nbCenterLayers)}getMatrixCenter(){let e,t,r,n;try{let i=new ue(this.image).detect();e=i[0],t=i[1],r=i[2],n=i[3]}catch(s){let i=this.image.getWidth()/2,o=this.image.getHeight()/2;e=this.getFirstDifferent(new me(i+7,o-7),!1,1,-1).toResultPoint(),t=this.getFirstDifferent(new me(i+7,o+7),!1,1,1).toResultPoint(),r=this.getFirstDifferent(new me(i-7,o+7),!1,-1,1).toResultPoint(),n=this.getFirstDifferent(new me(i-7,o-7),!1,-1,-1).toResultPoint()}let i=oe.round((e.getX()+n.getX()+t.getX()+r.getX())/4),o=oe.round((e.getY()+n.getY()+t.getY()+r.getY())/4);try{let s=new ue(this.image,15,i,o).detect();e=s[0],t=s[1],r=s[2],n=s[3]}catch(s){e=this.getFirstDifferent(new me(i+7,o-7),!1,1,-1).toResultPoint(),t=this.getFirstDifferent(new me(i+7,o+7),!1,1,1).toResultPoint(),r=this.getFirstDifferent(new me(i-7,o+7),!1,-1,1).toResultPoint(),n=this.getFirstDifferent(new me(i-7,o-7),!1,-1,-1).toResultPoint()}return i=oe.round((e.getX()+n.getX()+t.getX()+r.getX())/4),o=oe.round((e.getY()+n.getY()+t.getY()+r.getY())/4),new me(i,o)}getMatrixCornerPoints(e){return this.expandSquare(e,2*this.nbCenterLayers,this.getDimension())}sampleGrid(e,t,r,n,i){let o=pe.getInstance(),s=this.getDimension(),a=s/2-this.nbCenterLayers,l=s/2+this.nbCenterLayers;return o.sampleGrid(e,s,s,a,a,l,a,l,l,a,l,t.getX(),t.getY(),r.getX(),r.getY(),n.getX(),n.getY(),i.getX(),i.getY())}sampleLine(e,t,r){let n=0,i=this.distanceResultPoint(e,t),o=i/r,s=e.getX(),a=e.getY(),l=o*(t.getX()-e.getX())/i,c=o*(t.getY()-e.getY())/i;for(let u=0;u<r;u++)this.image.get(oe.round(s+u*l),oe.round(a+u*c))&&(n|=1<<r-u-1);return n}isWhiteOrBlackRectangle(e,t,r,n){let i=3;e=new me(e.getX()-i,e.getY()+i),t=new me(t.getX()-i,t.getY()-i),r=new me(r.getX()+i,r.getY()-i),n=new me(n.getX()+i,n.getY()+i);let o=this.getColor(n,e);if(0===o)return!1;let s=this.getColor(e,t);return s===o&&(s=this.getColor(t,r),s===o&&(s=this.getColor(r,n),s===o))}getColor(e,t){let r=this.distancePoint(e,t),n=(t.getX()-e.getX())/r,i=(t.getY()-e.getY())/r,o=0,s=e.getX(),a=e.getY(),l=this.image.get(e.getX(),e.getY()),c=Math.ceil(r);for(let d=0;d<c;d++)s+=n,a+=i,this.image.get(oe.round(s),oe.round(a))!==l&&o++;let u=o/r;return u>.1&&u<.9?0:u<=.1===l?1:-1}getFirstDifferent(e,t,r,n){let i=e.getX()+r,o=e.getY()+n;for(;this.isValid(i,o)&&this.image.get(i,o)===t;)i+=r,o+=n;for(i-=r,o-=n;this.isValid(i,o)&&this.image.get(i,o)===t;)i+=r;for(i-=r;this.isValid(i,o)&&this.image.get(i,o)===t;)o+=n;return o-=n,new me(i,o)}expandSquare(e,t,r){let n=r/(2*t),i=e[0].getX()-e[2].getX(),o=e[0].getY()-e[2].getY(),s=(e[0].getX()+e[2].getX())/2,a=(e[0].getY()+e[2].getY())/2,l=new ae(s+n*i,a+n*o),c=new ae(s-n*i,a-n*o);return i=e[1].getX()-e[3].getX(),o=e[1].getY()-e[3].getY(),s=(e[1].getX()+e[3].getX())/2,a=(e[1].getY()+e[3].getY())/2,[l,new ae(s+n*i,a+n*o),c,new ae(s-n*i,a-n*o)]}isValid(e,t){return e>=0&&e<this.image.getWidth()&&t>0&&t<this.image.getHeight()}isValidPoint(e){let t=oe.round(e.getX()),r=oe.round(e.getY());return this.isValid(t,r)}distancePoint(e,t){return oe.distance(e.getX(),e.getY(),t.getX(),t.getY())}distanceResultPoint(e,t){return oe.distance(e.getX(),e.getY(),t.getX(),t.getY())}getDimension(){return this.compact?4*this.nbLayers+11:this.nbLayers<=4?4*this.nbLayers+15:4*this.nbLayers+2*(b.truncDivision(this.nbLayers-4,8)+1)+15}}class ye{decode(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=null,n=new ge(e.getBlackMatrix()),i=null,o=null;try{let e=n.detectMirror(!1);i=e.getPoints(),this.reportFoundResultPoints(t,i),o=(new ie).decode(e)}catch(c){r=c}if(null==o)try{let e=n.detectMirror(!0);i=e.getPoints(),this.reportFoundResultPoints(t,i),o=(new ie).decode(e)}catch(c){if(null!=r)throw r;throw c}let s=new U(o.getText(),o.getRawBytes(),o.getNumBits(),i,H.AZTEC,m.currentTimeMillis()),a=o.getByteSegments();null!=a&&s.putMetadata(q.BYTE_SEGMENTS,a);let l=o.getECLevel();return null!=l&&s.putMetadata(q.ERROR_CORRECTION_LEVEL,l),s}reportFoundResultPoints(e,t){if(null!=e){let r=e.get(x.NEED_RESULT_POINT_CALLBACK);null!=r&&t.forEach(((e,t,n)=>{r.foundPossibleResultPoint(e)}))}}reset(){}}class we extends F{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:500;super(new ye,e)}}class be{decode(e,t){try{return this.doDecode(e,t)}catch(r){if(t&&!0===t.get(x.TRY_HARDER)&&e.isRotateSupported()){const r=e.rotateCounterClockwise(),n=this.doDecode(r,t),i=n.getResultMetadata();let o=270;null!==i&&!0===i.get(q.ORIENTATION)&&(o+=i.get(q.ORIENTATION)%360),n.putMetadata(q.ORIENTATION,o);const s=n.getResultPoints();if(null!==s){const e=r.getHeight();for(let t=0;t<s.length;t++)s[t]=new ae(e-s[t].getY()-1,s[t].getX())}return n}throw new O}}reset(){}doDecode(e,t){const r=e.getWidth(),n=e.getHeight();let i=new v(r);const o=t&&!0===t.get(x.TRY_HARDER),s=Math.max(1,n>>(o?8:5));let a;a=o?n:15;const l=Math.trunc(n/2);for(let d=0;d<a;d++){const o=Math.trunc((d+1)/2),a=l+s*(0===(1&d)?o:-o);if(a<0||a>=n)break;try{i=e.getBlackRow(a,i)}catch(c){continue}for(let e=0;e<2;e++){if(1===e&&(i.reverse(),t&&!0===t.get(x.NEED_RESULT_POINT_CALLBACK))){const e=new Map;t.forEach(((t,r)=>e.set(r,t))),e.delete(x.NEED_RESULT_POINT_CALLBACK),t=e}try{const n=this.decodeRow(a,i,t);if(1===e){n.putMetadata(q.ORIENTATION,180);const e=n.getResultPoints();null!==e&&(e[0]=new ae(r-e[0].getX()-1,e[0].getY()),e[1]=new ae(r-e[1].getX()-1,e[1].getY()))}return n}catch(u){}}}throw new O}static recordPattern(e,t,r){const n=r.length;for(let l=0;l<n;l++)r[l]=0;const i=e.getSize();if(t>=i)throw new O;let o=!e.get(t),s=0,a=t;for(;a<i;){if(e.get(a)!==o)r[s]++;else{if(++s===n)break;r[s]=1,o=!o}a++}if(s!==n&&(s!==n-1||a!==i))throw new O}static recordPatternInReverse(e,t,r){let n=r.length,i=e.get(t);for(;t>0&&n>=0;)e.get(--t)!==i&&(n--,i=!i);if(n>=0)throw new O;be.recordPattern(e,t+1,r)}static patternMatchVariance(e,t,r){const n=e.length;let i=0,o=0;for(let l=0;l<n;l++)i+=e[l],o+=t[l];if(i<o)return Number.POSITIVE_INFINITY;const s=i/o;r*=s;let a=0;for(let l=0;l<n;l++){const n=e[l],i=t[l]*s,o=n>i?n-i:i-n;if(o>r)return Number.POSITIVE_INFINITY;a+=o}return a/i}}class ve extends be{static findStartPattern(e){const t=e.getSize(),r=e.getNextSet(0);let n=0,i=Int32Array.from([0,0,0,0,0,0]),o=r,s=!1;const a=6;for(let l=r;l<t;l++)if(e.get(l)!==s)i[n]++;else{if(n===a-1){let t=ve.MAX_AVG_VARIANCE,r=-1;for(let e=ve.CODE_START_A;e<=ve.CODE_START_C;e++){const n=be.patternMatchVariance(i,ve.CODE_PATTERNS[e],ve.MAX_INDIVIDUAL_VARIANCE);n<t&&(t=n,r=e)}if(r>=0&&e.isRange(Math.max(0,o-(l-o)/2),o,!1))return Int32Array.from([o,l,r]);o+=i[0]+i[1],i=i.slice(2,i.length-1),i[n-1]=0,i[n]=0,n--}else n++;i[n]=1,s=!s}throw new O}static decodeCode(e,t,r){be.recordPattern(e,r,t);let n=ve.MAX_AVG_VARIANCE,i=-1;for(let o=0;o<ve.CODE_PATTERNS.length;o++){const e=ve.CODE_PATTERNS[o],r=this.patternMatchVariance(t,e,ve.MAX_INDIVIDUAL_VARIANCE);r<n&&(n=r,i=o)}if(i>=0)return i;throw new O}decodeRow(e,t,r){const n=r&&!0===r.get(x.ASSUME_GS1),i=ve.findStartPattern(t),o=i[2];let s=0;const a=new Uint8Array(20);let l;switch(a[s++]=o,o){case ve.CODE_START_A:l=ve.CODE_CODE_A;break;case ve.CODE_START_B:l=ve.CODE_CODE_B;break;case ve.CODE_START_C:l=ve.CODE_CODE_C;break;default:throw new E}let c=!1,u=!1,d="",h=i[0],p=i[1];const m=Int32Array.from([0,0,0,0,0,0]);let g=0,y=0,w=o,b=0,v=!0,_=!1,C=!1;for(;!c;){const e=u;switch(u=!1,g=y,y=ve.decodeCode(t,m,p),a[s++]=y,y!==ve.CODE_STOP&&(v=!0),y!==ve.CODE_STOP&&(b++,w+=b*y),h=p,p+=m.reduce(((e,t)=>e+t),0),y){case ve.CODE_START_A:case ve.CODE_START_B:case ve.CODE_START_C:throw new E}switch(l){case ve.CODE_CODE_A:if(y<64)d+=C===_?String.fromCharCode(" ".charCodeAt(0)+y):String.fromCharCode(" ".charCodeAt(0)+y+128),C=!1;else if(y<96)d+=C===_?String.fromCharCode(y-64):String.fromCharCode(y+64),C=!1;else switch(y!==ve.CODE_STOP&&(v=!1),y){case ve.CODE_FNC_1:n&&(0===d.length?d+="]C1":d+=String.fromCharCode(29));break;case ve.CODE_FNC_2:case ve.CODE_FNC_3:break;case ve.CODE_FNC_4_A:!_&&C?(_=!0,C=!1):_&&C?(_=!1,C=!1):C=!0;break;case ve.CODE_SHIFT:u=!0,l=ve.CODE_CODE_B;break;case ve.CODE_CODE_B:l=ve.CODE_CODE_B;break;case ve.CODE_CODE_C:l=ve.CODE_CODE_C;break;case ve.CODE_STOP:c=!0}break;case ve.CODE_CODE_B:if(y<96)d+=C===_?String.fromCharCode(" ".charCodeAt(0)+y):String.fromCharCode(" ".charCodeAt(0)+y+128),C=!1;else switch(y!==ve.CODE_STOP&&(v=!1),y){case ve.CODE_FNC_1:n&&(0===d.length?d+="]C1":d+=String.fromCharCode(29));break;case ve.CODE_FNC_2:case ve.CODE_FNC_3:break;case ve.CODE_FNC_4_B:!_&&C?(_=!0,C=!1):_&&C?(_=!1,C=!1):C=!0;break;case ve.CODE_SHIFT:u=!0,l=ve.CODE_CODE_A;break;case ve.CODE_CODE_A:l=ve.CODE_CODE_A;break;case ve.CODE_CODE_C:l=ve.CODE_CODE_C;break;case ve.CODE_STOP:c=!0}break;case ve.CODE_CODE_C:if(y<100)y<10&&(d+="0"),d+=y;else switch(y!==ve.CODE_STOP&&(v=!1),y){case ve.CODE_FNC_1:n&&(0===d.length?d+="]C1":d+=String.fromCharCode(29));break;case ve.CODE_CODE_A:l=ve.CODE_CODE_A;break;case ve.CODE_CODE_B:l=ve.CODE_CODE_B;break;case ve.CODE_STOP:c=!0}}e&&(l=l===ve.CODE_CODE_A?ve.CODE_CODE_B:ve.CODE_CODE_A)}const S=p-h;if(p=t.getNextUnset(p),!t.isRange(p,Math.min(t.getSize(),p+(p-h)/2),!1))throw new O;if(w-=b*g,w%103!==g)throw new f;const A=d.length;if(0===A)throw new O;A>0&&v&&(d=l===ve.CODE_CODE_C?d.substring(0,A-2):d.substring(0,A-1));const N=(i[1]+i[0])/2,I=h+S/2,T=a.length,k=new Uint8Array(T);for(let f=0;f<T;f++)k[f]=a[f];const R=[new ae(N,e),new ae(I,e)];return new U(d,k,0,R,H.CODE_128,(new Date).getTime())}}ve.CODE_PATTERNS=[Int32Array.from([2,1,2,2,2,2]),Int32Array.from([2,2,2,1,2,2]),Int32Array.from([2,2,2,2,2,1]),Int32Array.from([1,2,1,2,2,3]),Int32Array.from([1,2,1,3,2,2]),Int32Array.from([1,3,1,2,2,2]),Int32Array.from([1,2,2,2,1,3]),Int32Array.from([1,2,2,3,1,2]),Int32Array.from([1,3,2,2,1,2]),Int32Array.from([2,2,1,2,1,3]),Int32Array.from([2,2,1,3,1,2]),Int32Array.from([2,3,1,2,1,2]),Int32Array.from([1,1,2,2,3,2]),Int32Array.from([1,2,2,1,3,2]),Int32Array.from([1,2,2,2,3,1]),Int32Array.from([1,1,3,2,2,2]),Int32Array.from([1,2,3,1,2,2]),Int32Array.from([1,2,3,2,2,1]),Int32Array.from([2,2,3,2,1,1]),Int32Array.from([2,2,1,1,3,2]),Int32Array.from([2,2,1,2,3,1]),Int32Array.from([2,1,3,2,1,2]),Int32Array.from([2,2,3,1,1,2]),Int32Array.from([3,1,2,1,3,1]),Int32Array.from([3,1,1,2,2,2]),Int32Array.from([3,2,1,1,2,2]),Int32Array.from([3,2,1,2,2,1]),Int32Array.from([3,1,2,2,1,2]),Int32Array.from([3,2,2,1,1,2]),Int32Array.from([3,2,2,2,1,1]),Int32Array.from([2,1,2,1,2,3]),Int32Array.from([2,1,2,3,2,1]),Int32Array.from([2,3,2,1,2,1]),Int32Array.from([1,1,1,3,2,3]),Int32Array.from([1,3,1,1,2,3]),Int32Array.from([1,3,1,3,2,1]),Int32Array.from([1,1,2,3,1,3]),Int32Array.from([1,3,2,1,1,3]),Int32Array.from([1,3,2,3,1,1]),Int32Array.from([2,1,1,3,1,3]),Int32Array.from([2,3,1,1,1,3]),Int32Array.from([2,3,1,3,1,1]),Int32Array.from([1,1,2,1,3,3]),Int32Array.from([1,1,2,3,3,1]),Int32Array.from([1,3,2,1,3,1]),Int32Array.from([1,1,3,1,2,3]),Int32Array.from([1,1,3,3,2,1]),Int32Array.from([1,3,3,1,2,1]),Int32Array.from([3,1,3,1,2,1]),Int32Array.from([2,1,1,3,3,1]),Int32Array.from([2,3,1,1,3,1]),Int32Array.from([2,1,3,1,1,3]),Int32Array.from([2,1,3,3,1,1]),Int32Array.from([2,1,3,1,3,1]),Int32Array.from([3,1,1,1,2,3]),Int32Array.from([3,1,1,3,2,1]),Int32Array.from([3,3,1,1,2,1]),Int32Array.from([3,1,2,1,1,3]),Int32Array.from([3,1,2,3,1,1]),Int32Array.from([3,3,2,1,1,1]),Int32Array.from([3,1,4,1,1,1]),Int32Array.from([2,2,1,4,1,1]),Int32Array.from([4,3,1,1,1,1]),Int32Array.from([1,1,1,2,2,4]),Int32Array.from([1,1,1,4,2,2]),Int32Array.from([1,2,1,1,2,4]),Int32Array.from([1,2,1,4,2,1]),Int32Array.from([1,4,1,1,2,2]),Int32Array.from([1,4,1,2,2,1]),Int32Array.from([1,1,2,2,1,4]),Int32Array.from([1,1,2,4,1,2]),Int32Array.from([1,2,2,1,1,4]),Int32Array.from([1,2,2,4,1,1]),Int32Array.from([1,4,2,1,1,2]),Int32Array.from([1,4,2,2,1,1]),Int32Array.from([2,4,1,2,1,1]),Int32Array.from([2,2,1,1,1,4]),Int32Array.from([4,1,3,1,1,1]),Int32Array.from([2,4,1,1,1,2]),Int32Array.from([1,3,4,1,1,1]),Int32Array.from([1,1,1,2,4,2]),Int32Array.from([1,2,1,1,4,2]),Int32Array.from([1,2,1,2,4,1]),Int32Array.from([1,1,4,2,1,2]),Int32Array.from([1,2,4,1,1,2]),Int32Array.from([1,2,4,2,1,1]),Int32Array.from([4,1,1,2,1,2]),Int32Array.from([4,2,1,1,1,2]),Int32Array.from([4,2,1,2,1,1]),Int32Array.from([2,1,2,1,4,1]),Int32Array.from([2,1,4,1,2,1]),Int32Array.from([4,1,2,1,2,1]),Int32Array.from([1,1,1,1,4,3]),Int32Array.from([1,1,1,3,4,1]),Int32Array.from([1,3,1,1,4,1]),Int32Array.from([1,1,4,1,1,3]),Int32Array.from([1,1,4,3,1,1]),Int32Array.from([4,1,1,1,1,3]),Int32Array.from([4,1,1,3,1,1]),Int32Array.from([1,1,3,1,4,1]),Int32Array.from([1,1,4,1,3,1]),Int32Array.from([3,1,1,1,4,1]),Int32Array.from([4,1,1,1,3,1]),Int32Array.from([2,1,1,4,1,2]),Int32Array.from([2,1,1,2,1,4]),Int32Array.from([2,1,1,2,3,2]),Int32Array.from([2,3,3,1,1,1,2])],ve.MAX_AVG_VARIANCE=.25,ve.MAX_INDIVIDUAL_VARIANCE=.7,ve.CODE_SHIFT=98,ve.CODE_CODE_C=99,ve.CODE_CODE_B=100,ve.CODE_CODE_A=101,ve.CODE_FNC_1=102,ve.CODE_FNC_2=97,ve.CODE_FNC_3=96,ve.CODE_FNC_4_A=101,ve.CODE_FNC_4_B=100,ve.CODE_START_A=103,ve.CODE_START_B=104,ve.CODE_START_C=105,ve.CODE_STOP=106;class _e extends be{constructor(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];super(),this.usingCheckDigit=e,this.extendedMode=t,this.decodeRowResult="",this.counters=new Int32Array(9)}decodeRow(e,t,r){let n=this.counters;n.fill(0),this.decodeRowResult="";let i,o,s=_e.findAsteriskPattern(t,n),a=t.getNextSet(s[1]),l=t.getSize();do{_e.recordPattern(t,a,n);let e=_e.toNarrowWidePattern(n);if(e<0)throw new O;i=_e.patternToChar(e),this.decodeRowResult+=i,o=a;for(let t of n)a+=t;a=t.getNextSet(a)}while("*"!==i);this.decodeRowResult=this.decodeRowResult.substring(0,this.decodeRowResult.length-1);let c,u=0;for(let f of n)u+=f;if(a!==l&&2*(a-o-u)<u)throw new O;if(this.usingCheckDigit){let e=this.decodeRowResult.length-1,t=0;for(let r=0;r<e;r++)t+=_e.ALPHABET_STRING.indexOf(this.decodeRowResult.charAt(r));if(this.decodeRowResult.charAt(e)!==_e.ALPHABET_STRING.charAt(t%43))throw new f;this.decodeRowResult=this.decodeRowResult.substring(0,e)}if(0===this.decodeRowResult.length)throw new O;c=this.extendedMode?_e.decodeExtended(this.decodeRowResult):this.decodeRowResult;let d=(s[1]+s[0])/2,h=o+u/2;return new U(c,null,0,[new ae(d,e),new ae(h,e)],H.CODE_39,(new Date).getTime())}static findAsteriskPattern(e,t){let r=e.getSize(),n=e.getNextSet(0),i=0,o=n,s=!1,a=t.length;for(let l=n;l<r;l++)if(e.get(l)!==s)t[i]++;else{if(i===a-1){if(this.toNarrowWidePattern(t)===_e.ASTERISK_ENCODING&&e.isRange(Math.max(0,o-Math.floor((l-o)/2)),o,!1))return[o,l];o+=t[0]+t[1],t.copyWithin(0,2,2+i-1),t[i-1]=0,t[i]=0,i--}else i++;t[i]=1,s=!s}throw new O}static toNarrowWidePattern(e){let t,r=e.length,n=0;do{let i=2147483647;for(let t of e)t<i&&t>n&&(i=t);n=i,t=0;let o=0,s=0;for(let a=0;a<r;a++){let i=e[a];i>n&&(s|=1<<r-1-a,t++,o+=i)}if(3===t){for(let i=0;i<r&&t>0;i++){let r=e[i];if(r>n&&(t--,2*r>=o))return-1}return s}}while(t>3);return-1}static patternToChar(e){for(let t=0;t<_e.CHARACTER_ENCODINGS.length;t++)if(_e.CHARACTER_ENCODINGS[t]===e)return _e.ALPHABET_STRING.charAt(t);if(e===_e.ASTERISK_ENCODING)return"*";throw new O}static decodeExtended(e){let t=e.length,r="";for(let n=0;n<t;n++){let t=e.charAt(n);if("+"===t||"$"===t||"%"===t||"/"===t){let i=e.charAt(n+1),o="\0";switch(t){case"+":if(!(i>="A"&&i<="Z"))throw new E;o=String.fromCharCode(i.charCodeAt(0)+32);break;case"$":if(!(i>="A"&&i<="Z"))throw new E;o=String.fromCharCode(i.charCodeAt(0)-64);break;case"%":if(i>="A"&&i<="E")o=String.fromCharCode(i.charCodeAt(0)-38);else if(i>="F"&&i<="J")o=String.fromCharCode(i.charCodeAt(0)-11);else if(i>="K"&&i<="O")o=String.fromCharCode(i.charCodeAt(0)+16);else if(i>="P"&&i<="T")o=String.fromCharCode(i.charCodeAt(0)+43);else if("U"===i)o="\0";else if("V"===i)o="@";else if("W"===i)o="`";else{if("X"!==i&&"Y"!==i&&"Z"!==i)throw new E;o="\x7f"}break;case"/":if(i>="A"&&i<="O")o=String.fromCharCode(i.charCodeAt(0)-32);else{if("Z"!==i)throw new E;o=":"}}r+=o,n++}else r+=t}return r}}_e.ALPHABET_STRING="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ-. $/+%",_e.CHARACTER_ENCODINGS=[52,289,97,352,49,304,112,37,292,100,265,73,328,25,280,88,13,268,76,28,259,67,322,19,274,82,7,262,70,22,385,193,448,145,400,208,133,388,196,168,162,138,42],_e.ASTERISK_ENCODING=148;class xe extends be{constructor(){super(...arguments),this.narrowLineWidth=-1}decodeRow(e,t,r){let n=this.decodeStart(t),i=this.decodeEnd(t),o=new I;xe.decodeMiddle(t,n[1],i[0],o);let s=o.toString(),a=null;null!=r&&(a=r.get(x.ALLOWED_LENGTHS)),null==a&&(a=xe.DEFAULT_ALLOWED_LENGTHS);let l=s.length,c=!1,u=0;for(let h of a){if(l===h){c=!0;break}h>u&&(u=h)}if(!c&&l>u&&(c=!0),!c)throw new E;const d=[new ae(n[1],e),new ae(i[0],e)];return new U(s,null,0,d,H.ITF,(new Date).getTime())}static decodeMiddle(e,t,r,n){let i=new Int32Array(10),o=new Int32Array(5),s=new Int32Array(5);for(i.fill(0),o.fill(0),s.fill(0);t<r;){be.recordPattern(e,t,i);for(let e=0;e<5;e++){let t=2*e;o[e]=i[t],s[e]=i[t+1]}let r=xe.decodeDigit(o);n.append(r.toString()),r=this.decodeDigit(s),n.append(r.toString()),i.forEach((function(e){t+=e}))}}decodeStart(e){let t=xe.skipWhiteSpace(e),r=xe.findGuardPattern(e,t,xe.START_PATTERN);return this.narrowLineWidth=(r[1]-r[0])/4,this.validateQuietZone(e,r[0]),r}validateQuietZone(e,t){let r=10*this.narrowLineWidth;r=r<t?r:t;for(let n=t-1;r>0&&n>=0&&!e.get(n);n--)r--;if(0!==r)throw new O}static skipWhiteSpace(e){const t=e.getSize(),r=e.getNextSet(0);if(r===t)throw new O;return r}decodeEnd(e){e.reverse();try{let r,n=xe.skipWhiteSpace(e);try{r=xe.findGuardPattern(e,n,xe.END_PATTERN_REVERSED[0])}catch(t){t instanceof O&&(r=xe.findGuardPattern(e,n,xe.END_PATTERN_REVERSED[1]))}this.validateQuietZone(e,r[0]);let i=r[0];return r[0]=e.getSize()-r[1],r[1]=e.getSize()-i,r}finally{e.reverse()}}static findGuardPattern(e,t,r){let n=r.length,i=new Int32Array(n),o=e.getSize(),s=!1,a=0,l=t;i.fill(0);for(let c=t;c<o;c++)if(e.get(c)!==s)i[a]++;else{if(a===n-1){if(be.patternMatchVariance(i,r,xe.MAX_INDIVIDUAL_VARIANCE)<xe.MAX_AVG_VARIANCE)return[l,c];l+=i[0]+i[1],m.arraycopy(i,2,i,0,a-1),i[a-1]=0,i[a]=0,a--}else a++;i[a]=1,s=!s}throw new O}static decodeDigit(e){let t=xe.MAX_AVG_VARIANCE,r=-1,n=xe.PATTERNS.length;for(let i=0;i<n;i++){let n=xe.PATTERNS[i],o=be.patternMatchVariance(e,n,xe.MAX_INDIVIDUAL_VARIANCE);o<t?(t=o,r=i):o===t&&(r=-1)}if(r>=0)return r%10;throw new O}}xe.PATTERNS=[Int32Array.from([1,1,2,2,1]),Int32Array.from([2,1,1,1,2]),Int32Array.from([1,2,1,1,2]),Int32Array.from([2,2,1,1,1]),Int32Array.from([1,1,2,1,2]),Int32Array.from([2,1,2,1,1]),Int32Array.from([1,2,2,1,1]),Int32Array.from([1,1,1,2,2]),Int32Array.from([2,1,1,2,1]),Int32Array.from([1,2,1,2,1]),Int32Array.from([1,1,3,3,1]),Int32Array.from([3,1,1,1,3]),Int32Array.from([1,3,1,1,3]),Int32Array.from([3,3,1,1,1]),Int32Array.from([1,1,3,1,3]),Int32Array.from([3,1,3,1,1]),Int32Array.from([1,3,3,1,1]),Int32Array.from([1,1,1,3,3]),Int32Array.from([3,1,1,3,1]),Int32Array.from([1,3,1,3,1])],xe.MAX_AVG_VARIANCE=.38,xe.MAX_INDIVIDUAL_VARIANCE=.5,xe.DEFAULT_ALLOWED_LENGTHS=[6,8,10,12,14],xe.START_PATTERN=Int32Array.from([1,1,1,1]),xe.END_PATTERN_REVERSED=[Int32Array.from([1,1,2]),Int32Array.from([1,1,3])];class Ee extends be{constructor(){super(...arguments),this.decodeRowStringBuffer=""}static findStartGuardPattern(e){let t,r=!1,n=0,i=Int32Array.from([0,0,0]);for(;!r;){i=Int32Array.from([0,0,0]),t=Ee.findGuardPattern(e,n,!1,this.START_END_PATTERN,i);let o=t[0];n=t[1];let s=o-(n-o);s>=0&&(r=e.isRange(s,o,!1))}return t}static checkChecksum(e){return Ee.checkStandardUPCEANChecksum(e)}static checkStandardUPCEANChecksum(e){let t=e.length;if(0===t)return!1;let r=parseInt(e.charAt(t-1),10);return Ee.getStandardUPCEANChecksum(e.substring(0,t-1))===r}static getStandardUPCEANChecksum(e){let t=e.length,r=0;for(let n=t-1;n>=0;n-=2){let t=e.charAt(n).charCodeAt(0)-"0".charCodeAt(0);if(t<0||t>9)throw new E;r+=t}r*=3;for(let n=t-2;n>=0;n-=2){let t=e.charAt(n).charCodeAt(0)-"0".charCodeAt(0);if(t<0||t>9)throw new E;r+=t}return(1e3-r)%10}static decodeEnd(e,t){return Ee.findGuardPattern(e,t,!1,Ee.START_END_PATTERN,new Int32Array(Ee.START_END_PATTERN.length).fill(0))}static findGuardPatternWithoutCounters(e,t,r,n){return this.findGuardPattern(e,t,r,n,new Int32Array(n.length))}static findGuardPattern(e,t,r,n,i){let o=e.getSize(),s=0,a=t=r?e.getNextUnset(t):e.getNextSet(t),l=n.length,c=r;for(let u=t;u<o;u++)if(e.get(u)!==c)i[s]++;else{if(s===l-1){if(be.patternMatchVariance(i,n,Ee.MAX_INDIVIDUAL_VARIANCE)<Ee.MAX_AVG_VARIANCE)return Int32Array.from([a,u]);a+=i[0]+i[1];let e=i.slice(2,i.length-1);for(let t=0;t<s-1;t++)i[t]=e[t];i[s-1]=0,i[s]=0,s--}else s++;i[s]=1,c=!c}throw new O}static decodeDigit(e,t,r,n){this.recordPattern(e,r,t);let i=this.MAX_AVG_VARIANCE,o=-1,s=n.length;for(let a=0;a<s;a++){let e=n[a],r=be.patternMatchVariance(t,e,Ee.MAX_INDIVIDUAL_VARIANCE);r<i&&(i=r,o=a)}if(o>=0)return o;throw new O}}Ee.MAX_AVG_VARIANCE=.48,Ee.MAX_INDIVIDUAL_VARIANCE=.7,Ee.START_END_PATTERN=Int32Array.from([1,1,1]),Ee.MIDDLE_PATTERN=Int32Array.from([1,1,1,1,1]),Ee.END_PATTERN=Int32Array.from([1,1,1,1,1,1]),Ee.L_PATTERNS=[Int32Array.from([3,2,1,1]),Int32Array.from([2,2,2,1]),Int32Array.from([2,1,2,2]),Int32Array.from([1,4,1,1]),Int32Array.from([1,1,3,2]),Int32Array.from([1,2,3,1]),Int32Array.from([1,1,1,4]),Int32Array.from([1,3,1,2]),Int32Array.from([1,2,1,3]),Int32Array.from([3,1,1,2])];class Ce{constructor(){this.CHECK_DIGIT_ENCODINGS=[24,20,18,17,12,6,3,10,9,5],this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}decodeRow(e,t,r){let n=this.decodeRowStringBuffer,i=this.decodeMiddle(t,r,n),o=n.toString(),s=Ce.parseExtensionString(o),a=[new ae((r[0]+r[1])/2,e),new ae(i,e)],l=new U(o,null,0,a,H.UPC_EAN_EXTENSION,(new Date).getTime());return null!=s&&l.putAllMetadata(s),l}decodeMiddle(e,t,r){let n=this.decodeMiddleCounters;n[0]=0,n[1]=0,n[2]=0,n[3]=0;let i=e.getSize(),o=t[1],s=0;for(let l=0;l<5&&o<i;l++){let t=Ee.decodeDigit(e,n,o,Ee.L_AND_G_PATTERNS);r+=String.fromCharCode("0".charCodeAt(0)+t%10);for(let e of n)o+=e;t>=10&&(s|=1<<4-l),4!==l&&(o=e.getNextSet(o),o=e.getNextUnset(o))}if(5!==r.length)throw new O;let a=this.determineCheckDigit(s);if(Ce.extensionChecksum(r.toString())!==a)throw new O;return o}static extensionChecksum(e){let t=e.length,r=0;for(let n=t-2;n>=0;n-=2)r+=e.charAt(n).charCodeAt(0)-"0".charCodeAt(0);r*=3;for(let n=t-1;n>=0;n-=2)r+=e.charAt(n).charCodeAt(0)-"0".charCodeAt(0);return r*=3,r%10}determineCheckDigit(e){for(let t=0;t<10;t++)if(e===this.CHECK_DIGIT_ENCODINGS[t])return t;throw new O}static parseExtensionString(e){if(5!==e.length)return null;let t=Ce.parseExtension5String(e);return null==t?null:new Map([[q.SUGGESTED_PRICE,t]])}static parseExtension5String(e){let t;switch(e.charAt(0)){case"0":t="\xa3";break;case"5":t="$";break;case"9":switch(e){case"90000":return null;case"99991":return"0.00";case"99990":return"Used"}t="";break;default:t=""}let r=parseInt(e.substring(1)),n=r%100;return t+(r/100).toString()+"."+(n<10?"0"+n:n.toString())}}class Se{constructor(){this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}decodeRow(e,t,r){let n=this.decodeRowStringBuffer,i=this.decodeMiddle(t,r,n),o=n.toString(),s=Se.parseExtensionString(o),a=[new ae((r[0]+r[1])/2,e),new ae(i,e)],l=new U(o,null,0,a,H.UPC_EAN_EXTENSION,(new Date).getTime());return null!=s&&l.putAllMetadata(s),l}decodeMiddle(e,t,r){let n=this.decodeMiddleCounters;n[0]=0,n[1]=0,n[2]=0,n[3]=0;let i=e.getSize(),o=t[1],s=0;for(let a=0;a<2&&o<i;a++){let t=Ee.decodeDigit(e,n,o,Ee.L_AND_G_PATTERNS);r+=String.fromCharCode("0".charCodeAt(0)+t%10);for(let e of n)o+=e;t>=10&&(s|=1<<1-a),1!==a&&(o=e.getNextSet(o),o=e.getNextUnset(o))}if(2!==r.length)throw new O;if(parseInt(r.toString())%4!==s)throw new O;return o}static parseExtensionString(e){return 2!==e.length?null:new Map([[q.ISSUE_NUMBER,parseInt(e)]])}}class Ae{static decodeRow(e,t,r){let n=Ee.findGuardPattern(t,r,!1,this.EXTENSION_START_PATTERN,new Int32Array(this.EXTENSION_START_PATTERN.length).fill(0));try{return(new Ce).decodeRow(e,t,n)}catch(i){return(new Se).decodeRow(e,t,n)}}}Ae.EXTENSION_START_PATTERN=Int32Array.from([1,1,2]);class Ne extends Ee{constructor(){super(),this.decodeRowStringBuffer="",Ne.L_AND_G_PATTERNS=Ne.L_PATTERNS.map((e=>Int32Array.from(e)));for(let e=10;e<20;e++){let t=Ne.L_PATTERNS[e-10],r=new Int32Array(t.length);for(let e=0;e<t.length;e++)r[e]=t[t.length-e-1];Ne.L_AND_G_PATTERNS[e]=r}}decodeRow(e,t,r){let n=Ne.findStartGuardPattern(t),i=null==r?null:r.get(x.NEED_RESULT_POINT_CALLBACK);if(null!=i){const t=new ae((n[0]+n[1])/2,e);i.foundPossibleResultPoint(t)}let o=this.decodeMiddle(t,n,this.decodeRowStringBuffer),s=o.rowOffset,a=o.resultString;if(null!=i){const t=new ae(s,e);i.foundPossibleResultPoint(t)}let l=this.decodeEnd(t,s);if(null!=i){const t=new ae((l[0]+l[1])/2,e);i.foundPossibleResultPoint(t)}let c=l[1],u=c+(c-l[0]);if(u>=t.getSize()||!t.isRange(c,u,!1))throw new O;let d=a.toString();if(d.length<8)throw new E;if(!Ne.checkChecksum(d))throw new f;let h=(n[1]+n[0])/2,p=(l[1]+l[0])/2,m=this.getBarcodeFormat(),g=[new ae(h,e),new ae(p,e)],y=new U(d,null,0,g,m,(new Date).getTime()),w=0;try{let r=Ae.decodeRow(e,t,l[1]);y.putMetadata(q.UPC_EAN_EXTENSION,r.getText()),y.putAllMetadata(r.getResultMetadata()),y.addResultPoints(r.getResultPoints()),w=r.getText().length}catch(v){}let b=null==r?null:r.get(x.ALLOWED_EAN_EXTENSIONS);if(null!=b){let e=!1;for(let t in b)if(w.toString()===t){e=!0;break}if(!e)throw new O}return y}decodeEnd(e,t){return Ne.findGuardPattern(e,t,!1,Ne.START_END_PATTERN,new Int32Array(Ne.START_END_PATTERN.length).fill(0))}static checkChecksum(e){return Ne.checkStandardUPCEANChecksum(e)}static checkStandardUPCEANChecksum(e){let t=e.length;if(0===t)return!1;let r=parseInt(e.charAt(t-1),10);return Ne.getStandardUPCEANChecksum(e.substring(0,t-1))===r}static getStandardUPCEANChecksum(e){let t=e.length,r=0;for(let n=t-1;n>=0;n-=2){let t=e.charAt(n).charCodeAt(0)-"0".charCodeAt(0);if(t<0||t>9)throw new E;r+=t}r*=3;for(let n=t-2;n>=0;n-=2){let t=e.charAt(n).charCodeAt(0)-"0".charCodeAt(0);if(t<0||t>9)throw new E;r+=t}return(1e3-r)%10}}class Ie extends Ne{constructor(){super(),this.decodeMiddleCounters=Int32Array.from([0,0,0,0])}decodeMiddle(e,t,r){let n=this.decodeMiddleCounters;n[0]=0,n[1]=0,n[2]=0,n[3]=0;let i=e.getSize(),o=t[1],s=0;for(let a=0;a<6&&o<i;a++){let t=Ne.decodeDigit(e,n,o,Ne.L_AND_G_PATTERNS);r+=String.fromCharCode("0".charCodeAt(0)+t%10);for(let e of n)o+=e;t>=10&&(s|=1<<5-a)}r=Ie.determineFirstDigit(r,s),o=Ne.findGuardPattern(e,o,!0,Ne.MIDDLE_PATTERN,new Int32Array(Ne.MIDDLE_PATTERN.length).fill(0))[1];for(let a=0;a<6&&o<i;a++){let t=Ne.decodeDigit(e,n,o,Ne.L_PATTERNS);r+=String.fromCharCode("0".charCodeAt(0)+t);for(let e of n)o+=e}return{rowOffset:o,resultString:r}}getBarcodeFormat(){return H.EAN_13}static determineFirstDigit(e,t){for(let r=0;r<10;r++)if(t===this.FIRST_DIGIT_ENCODINGS[r])return e=String.fromCharCode("0".charCodeAt(0)+r)+e;throw new O}}Ie.FIRST_DIGIT_ENCODINGS=[0,11,13,14,19,25,28,21,22,26];class Te extends Ne{constructor(){super(),this.decodeMiddleCounters=Int32Array.from([0,0,0,0])}decodeMiddle(e,t,r){const n=this.decodeMiddleCounters;n[0]=0,n[1]=0,n[2]=0,n[3]=0;let i=e.getSize(),o=t[1];for(let s=0;s<4&&o<i;s++){let t=Ne.decodeDigit(e,n,o,Ne.L_PATTERNS);r+=String.fromCharCode("0".charCodeAt(0)+t);for(let e of n)o+=e}o=Ne.findGuardPattern(e,o,!0,Ne.MIDDLE_PATTERN,new Int32Array(Ne.MIDDLE_PATTERN.length).fill(0))[1];for(let s=0;s<4&&o<i;s++){let t=Ne.decodeDigit(e,n,o,Ne.L_PATTERNS);r+=String.fromCharCode("0".charCodeAt(0)+t);for(let e of n)o+=e}return{rowOffset:o,resultString:r}}getBarcodeFormat(){return H.EAN_8}}class Oe extends Ne{constructor(){super(...arguments),this.ean13Reader=new Ie}getBarcodeFormat(){return H.UPC_A}decode(e,t){return this.maybeReturnResult(this.ean13Reader.decode(e))}decodeRow(e,t,r){return this.maybeReturnResult(this.ean13Reader.decodeRow(e,t,r))}decodeMiddle(e,t,r){return this.ean13Reader.decodeMiddle(e,t,r)}maybeReturnResult(e){let t=e.getText();if("0"===t.charAt(0)){let r=new U(t.substring(1),null,null,e.getResultPoints(),H.UPC_A);return null!=e.getResultMetadata()&&r.putAllMetadata(e.getResultMetadata()),r}throw new O}reset(){this.ean13Reader.reset()}}class ke extends Ne{constructor(){super(),this.decodeMiddleCounters=new Int32Array(4)}decodeMiddle(e,t,r){const n=this.decodeMiddleCounters.map((e=>e));n[0]=0,n[1]=0,n[2]=0,n[3]=0;const i=e.getSize();let o=t[1],s=0;for(let a=0;a<6&&o<i;a++){const t=ke.decodeDigit(e,n,o,ke.L_AND_G_PATTERNS);r+=String.fromCharCode("0".charCodeAt(0)+t%10);for(let e of n)o+=e;t>=10&&(s|=1<<5-a)}return{rowOffset:o,resultString:ke.determineNumSysAndCheckDigit(r,s)}}decodeEnd(e,t){return ke.findGuardPatternWithoutCounters(e,t,!0,ke.MIDDLE_END_PATTERN)}checkChecksum(e){return Ne.checkChecksum(ke.convertUPCEtoUPCA(e))}static determineNumSysAndCheckDigit(e,t){for(let r=0;r<=1;r++)for(let n=0;n<10;n++)if(t===this.NUMSYS_AND_CHECK_DIGIT_PATTERNS[r][n])return String.fromCharCode("0".charCodeAt(0)+r)+e+String.fromCharCode("0".charCodeAt(0)+n);throw O.getNotFoundInstance()}getBarcodeFormat(){return H.UPC_E}static convertUPCEtoUPCA(e){const t=e.slice(1,7).split("").map((e=>e.charCodeAt(0))),r=new I;r.append(e.charAt(0));let n=t[5];switch(n){case 0:case 1:case 2:r.appendChars(t,0,2),r.append(n),r.append("0000"),r.appendChars(t,2,3);break;case 3:r.appendChars(t,0,3),r.append("00000"),r.appendChars(t,3,2);break;case 4:r.appendChars(t,0,4),r.append("00000"),r.append(t[4]);break;default:r.appendChars(t,0,5),r.append("0000"),r.append(n)}return e.length>=8&&r.append(e.charAt(7)),r.toString()}}ke.MIDDLE_END_PATTERN=Int32Array.from([1,1,1,1,1,1]),ke.NUMSYS_AND_CHECK_DIGIT_PATTERNS=[Int32Array.from([56,52,50,49,44,38,35,42,41,37]),Int32Array.from([7,11,13,14,19,25,28,21,22,26])];class Re extends be{constructor(e){super();let r=null==e?null:e.get(x.POSSIBLE_FORMATS),n=[];t(r)?(n.push(new Ie),n.push(new Oe),n.push(new Te),n.push(new ke)):(r.indexOf(H.EAN_13)>-1&&n.push(new Ie),r.indexOf(H.UPC_A)>-1&&n.push(new Oe),r.indexOf(H.EAN_8)>-1&&n.push(new Te),r.indexOf(H.UPC_E)>-1&&n.push(new ke)),this.readers=n}decodeRow(e,t,r){for(let i of this.readers)try{const n=i.decodeRow(e,t,r),o=n.getBarcodeFormat()===H.EAN_13&&"0"===n.getText().charAt(0),s=null==r?null:r.get(x.POSSIBLE_FORMATS),a=null==s||s.includes(H.UPC_A);if(o&&a){const e=n.getRawBytes(),t=new U(n.getText().substring(1),e,e?e.length:null,n.getResultPoints(),H.UPC_A);return t.putAllMetadata(n.getResultMetadata()),t}return n}catch(n){}throw new O}reset(){for(let e of this.readers)e.reset()}}class Me extends be{constructor(){super(),this.decodeFinderCounters=new Int32Array(4),this.dataCharacterCounters=new Int32Array(8),this.oddRoundingErrors=new Array(4),this.evenRoundingErrors=new Array(4),this.oddCounts=new Array(this.dataCharacterCounters.length/2),this.evenCounts=new Array(this.dataCharacterCounters.length/2)}getDecodeFinderCounters(){return this.decodeFinderCounters}getDataCharacterCounters(){return this.dataCharacterCounters}getOddRoundingErrors(){return this.oddRoundingErrors}getEvenRoundingErrors(){return this.evenRoundingErrors}getOddCounts(){return this.oddCounts}getEvenCounts(){return this.evenCounts}parseFinderValue(e,t){for(let r=0;r<t.length;r++)if(be.patternMatchVariance(e,t[r],Me.MAX_INDIVIDUAL_VARIANCE)<Me.MAX_AVG_VARIANCE)return r;throw new O}static count(e){return oe.sum(new Int32Array(e))}static increment(e,t){let r=0,n=t[0];for(let i=1;i<e.length;i++)t[i]>n&&(n=t[i],r=i);e[r]++}static decrement(e,t){let r=0,n=t[0];for(let i=1;i<e.length;i++)t[i]<n&&(n=t[i],r=i);e[r]--}static isFinderPattern(e){let t=e[0]+e[1],r=t/(t+e[2]+e[3]);if(r>=Me.MIN_FINDER_PATTERN_RATIO&&r<=Me.MAX_FINDER_PATTERN_RATIO){let t=Number.MAX_SAFE_INTEGER,r=Number.MIN_SAFE_INTEGER;for(let n of e)n>r&&(r=n),n<t&&(t=n);return r<10*t}return!1}}Me.MAX_AVG_VARIANCE=.2,Me.MAX_INDIVIDUAL_VARIANCE=.45,Me.MIN_FINDER_PATTERN_RATIO=9.5/12,Me.MAX_FINDER_PATTERN_RATIO=12.5/14;class je{constructor(e,t){this.value=e,this.checksumPortion=t}getValue(){return this.value}getChecksumPortion(){return this.checksumPortion}toString(){return this.value+"("+this.checksumPortion+")"}equals(e){if(!(e instanceof je))return!1;const t=e;return this.value===t.value&&this.checksumPortion===t.checksumPortion}hashCode(){return this.value^this.checksumPortion}}class De{constructor(e,t,r,n,i){this.value=e,this.startEnd=t,this.value=e,this.startEnd=t,this.resultPoints=new Array,this.resultPoints.push(new ae(r,i)),this.resultPoints.push(new ae(n,i))}getValue(){return this.value}getStartEnd(){return this.startEnd}getResultPoints(){return this.resultPoints}equals(e){if(!(e instanceof De))return!1;const t=e;return this.value===t.value}hashCode(){return this.value}}class Pe{constructor(){}static getRSSvalue(e,t,r){let n=0;for(let a of e)n+=a;let i=0,o=0,s=e.length;for(let a=0;a<s-1;a++){let l;for(l=1,o|=1<<a;l<e[a];l++,o&=~(1<<a)){let e=Pe.combins(n-l-1,s-a-2);if(r&&0===o&&n-l-(s-a-1)>=s-a-1&&(e-=Pe.combins(n-l-(s-a),s-a-2)),s-a-1>1){let r=0;for(let e=n-l-(s-a-2);e>t;e--)r+=Pe.combins(n-l-e-1,s-a-3);e-=r*(s-1-a)}else n-l>t&&e--;i+=e}n-=l}return i}static combins(e,t){let r,n;e-t>t?(n=t,r=e-t):(n=e-t,r=t);let i=1,o=1;for(let s=e;s>r;s--)i*=s,o<=n&&(i/=o,o++);for(;o<=n;)i/=o,o++;return i}}class Le{static buildBitArray(e){let t=2*e.length-1;null==e[e.length-1].getRightChar()&&(t-=1);let r=new v(12*t),n=0,i=e[0].getRightChar().getValue();for(let o=11;o>=0;--o)0!=(i&1<<o)&&r.set(n),n++;for(let o=1;o<e.length;++o){let t=e[o],i=t.getLeftChar().getValue();for(let e=11;e>=0;--e)0!=(i&1<<e)&&r.set(n),n++;if(null!=t.getRightChar()){let e=t.getRightChar().getValue();for(let t=11;t>=0;--t)0!=(e&1<<t)&&r.set(n),n++}}return r}}class Be{constructor(e,t){t?this.decodedInformation=null:(this.finished=e,this.decodedInformation=t)}getDecodedInformation(){return this.decodedInformation}isFinished(){return this.finished}}class Fe{constructor(e){this.newPosition=e}getNewPosition(){return this.newPosition}}class Ue extends Fe{constructor(e,t){super(e),this.value=t}getValue(){return this.value}isFNC1(){return this.value===Ue.FNC1}}Ue.FNC1="$";class ze extends Fe{constructor(e,t,r){super(e),r?(this.remaining=!0,this.remainingValue=this.remainingValue):(this.remaining=!1,this.remainingValue=0),this.newString=t}getNewString(){return this.newString}isRemaining(){return this.remaining}getRemainingValue(){return this.remainingValue}}class He extends Fe{constructor(e,t,r){if(super(e),t<0||t>10||r<0||r>10)throw new E;this.firstDigit=t,this.secondDigit=r}getFirstDigit(){return this.firstDigit}getSecondDigit(){return this.secondDigit}getValue(){return 10*this.firstDigit+this.secondDigit}isFirstDigitFNC1(){return this.firstDigit===He.FNC1}isSecondDigitFNC1(){return this.secondDigit===He.FNC1}isAnyFNC1(){return this.firstDigit===He.FNC1||this.secondDigit===He.FNC1}}He.FNC1=10;class Ve{constructor(){}static parseFieldsInGeneralPurpose(e){if(!e)return null;if(e.length<2)throw new O;let t=e.substring(0,2);for(let i of Ve.TWO_DIGIT_DATA_LENGTH)if(i[0]===t)return i[1]===Ve.VARIABLE_LENGTH?Ve.processVariableAI(2,i[2],e):Ve.processFixedAI(2,i[1],e);if(e.length<3)throw new O;let r=e.substring(0,3);for(let i of Ve.THREE_DIGIT_DATA_LENGTH)if(i[0]===r)return i[1]===Ve.VARIABLE_LENGTH?Ve.processVariableAI(3,i[2],e):Ve.processFixedAI(3,i[1],e);for(let i of Ve.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH)if(i[0]===r)return i[1]===Ve.VARIABLE_LENGTH?Ve.processVariableAI(4,i[2],e):Ve.processFixedAI(4,i[1],e);if(e.length<4)throw new O;let n=e.substring(0,4);for(let i of Ve.FOUR_DIGIT_DATA_LENGTH)if(i[0]===n)return i[1]===Ve.VARIABLE_LENGTH?Ve.processVariableAI(4,i[2],e):Ve.processFixedAI(4,i[1],e);throw new O}static processFixedAI(e,t,r){if(r.length<e)throw new O;let n=r.substring(0,e);if(r.length<e+t)throw new O;let i=r.substring(e,e+t),o=r.substring(e+t),s="("+n+")"+i,a=Ve.parseFieldsInGeneralPurpose(o);return null==a?s:s+a}static processVariableAI(e,t,r){let n,i=r.substring(0,e);n=r.length<e+t?r.length:e+t;let o=r.substring(e,n),s=r.substring(n),a="("+i+")"+o,l=Ve.parseFieldsInGeneralPurpose(s);return null==l?a:a+l}}Ve.VARIABLE_LENGTH=[],Ve.TWO_DIGIT_DATA_LENGTH=[["00",18],["01",14],["02",14],["10",Ve.VARIABLE_LENGTH,20],["11",6],["12",6],["13",6],["15",6],["17",6],["20",2],["21",Ve.VARIABLE_LENGTH,20],["22",Ve.VARIABLE_LENGTH,29],["30",Ve.VARIABLE_LENGTH,8],["37",Ve.VARIABLE_LENGTH,8],["90",Ve.VARIABLE_LENGTH,30],["91",Ve.VARIABLE_LENGTH,30],["92",Ve.VARIABLE_LENGTH,30],["93",Ve.VARIABLE_LENGTH,30],["94",Ve.VARIABLE_LENGTH,30],["95",Ve.VARIABLE_LENGTH,30],["96",Ve.VARIABLE_LENGTH,30],["97",Ve.VARIABLE_LENGTH,3],["98",Ve.VARIABLE_LENGTH,30],["99",Ve.VARIABLE_LENGTH,30]],Ve.THREE_DIGIT_DATA_LENGTH=[["240",Ve.VARIABLE_LENGTH,30],["241",Ve.VARIABLE_LENGTH,30],["242",Ve.VARIABLE_LENGTH,6],["250",Ve.VARIABLE_LENGTH,30],["251",Ve.VARIABLE_LENGTH,30],["253",Ve.VARIABLE_LENGTH,17],["254",Ve.VARIABLE_LENGTH,20],["400",Ve.VARIABLE_LENGTH,30],["401",Ve.VARIABLE_LENGTH,30],["402",17],["403",Ve.VARIABLE_LENGTH,30],["410",13],["411",13],["412",13],["413",13],["414",13],["420",Ve.VARIABLE_LENGTH,20],["421",Ve.VARIABLE_LENGTH,15],["422",3],["423",Ve.VARIABLE_LENGTH,15],["424",3],["425",3],["426",3]],Ve.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH=[["310",6],["311",6],["312",6],["313",6],["314",6],["315",6],["316",6],["320",6],["321",6],["322",6],["323",6],["324",6],["325",6],["326",6],["327",6],["328",6],["329",6],["330",6],["331",6],["332",6],["333",6],["334",6],["335",6],["336",6],["340",6],["341",6],["342",6],["343",6],["344",6],["345",6],["346",6],["347",6],["348",6],["349",6],["350",6],["351",6],["352",6],["353",6],["354",6],["355",6],["356",6],["357",6],["360",6],["361",6],["362",6],["363",6],["364",6],["365",6],["366",6],["367",6],["368",6],["369",6],["390",Ve.VARIABLE_LENGTH,15],["391",Ve.VARIABLE_LENGTH,18],["392",Ve.VARIABLE_LENGTH,15],["393",Ve.VARIABLE_LENGTH,18],["703",Ve.VARIABLE_LENGTH,30]],Ve.FOUR_DIGIT_DATA_LENGTH=[["7001",13],["7002",Ve.VARIABLE_LENGTH,30],["7003",10],["8001",14],["8002",Ve.VARIABLE_LENGTH,20],["8003",Ve.VARIABLE_LENGTH,30],["8004",Ve.VARIABLE_LENGTH,30],["8005",6],["8006",18],["8007",Ve.VARIABLE_LENGTH,30],["8008",Ve.VARIABLE_LENGTH,12],["8018",18],["8020",Ve.VARIABLE_LENGTH,25],["8100",6],["8101",10],["8102",2],["8110",Ve.VARIABLE_LENGTH,70],["8200",Ve.VARIABLE_LENGTH,70]];class We{constructor(e){this.buffer=new I,this.information=e}decodeAllCodes(e,t){let r=t,n=null;for(;;){let t=this.decodeGeneralPurposeField(r,n),i=Ve.parseFieldsInGeneralPurpose(t.getNewString());if(null!=i&&e.append(i),n=t.isRemaining()?""+t.getRemainingValue():null,r===t.getNewPosition())break;r=t.getNewPosition()}return e.toString()}isStillNumeric(e){if(e+7>this.information.getSize())return e+4<=this.information.getSize();for(let t=e;t<e+3;++t)if(this.information.get(t))return!0;return this.information.get(e+3)}decodeNumeric(e){if(e+7>this.information.getSize()){let t=this.extractNumericValueFromBitArray(e,4);return new He(this.information.getSize(),0===t?He.FNC1:t-1,He.FNC1)}let t=this.extractNumericValueFromBitArray(e,7);return new He(e+7,(t-8)/11,(t-8)%11)}extractNumericValueFromBitArray(e,t){return We.extractNumericValueFromBitArray(this.information,e,t)}static extractNumericValueFromBitArray(e,t,r){let n=0;for(let i=0;i<r;++i)e.get(t+i)&&(n|=1<<r-i-1);return n}decodeGeneralPurposeField(e,t){this.buffer.setLengthToZero(),null!=t&&this.buffer.append(t),this.current.setPosition(e);let r=this.parseBlocks();return null!=r&&r.isRemaining()?new ze(this.current.getPosition(),this.buffer.toString(),r.getRemainingValue()):new ze(this.current.getPosition(),this.buffer.toString())}parseBlocks(){let e,t;do{let r=this.current.getPosition();if(this.current.isAlpha()?(t=this.parseAlphaBlock(),e=t.isFinished()):this.current.isIsoIec646()?(t=this.parseIsoIec646Block(),e=t.isFinished()):(t=this.parseNumericBlock(),e=t.isFinished()),r===this.current.getPosition()&&!e)break}while(!e);return t.getDecodedInformation()}parseNumericBlock(){for(;this.isStillNumeric(this.current.getPosition());){let e=this.decodeNumeric(this.current.getPosition());if(this.current.setPosition(e.getNewPosition()),e.isFirstDigitFNC1()){let t;return t=e.isSecondDigitFNC1()?new ze(this.current.getPosition(),this.buffer.toString()):new ze(this.current.getPosition(),this.buffer.toString(),e.getSecondDigit()),new Be(!0,t)}if(this.buffer.append(e.getFirstDigit()),e.isSecondDigitFNC1()){let e=new ze(this.current.getPosition(),this.buffer.toString());return new Be(!0,e)}this.buffer.append(e.getSecondDigit())}return this.isNumericToAlphaNumericLatch(this.current.getPosition())&&(this.current.setAlpha(),this.current.incrementPosition(4)),new Be(!1)}parseIsoIec646Block(){for(;this.isStillIsoIec646(this.current.getPosition());){let e=this.decodeIsoIec646(this.current.getPosition());if(this.current.setPosition(e.getNewPosition()),e.isFNC1()){let e=new ze(this.current.getPosition(),this.buffer.toString());return new Be(!0,e)}this.buffer.append(e.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setAlpha()),new Be(!1)}parseAlphaBlock(){for(;this.isStillAlpha(this.current.getPosition());){let e=this.decodeAlphanumeric(this.current.getPosition());if(this.current.setPosition(e.getNewPosition()),e.isFNC1()){let e=new ze(this.current.getPosition(),this.buffer.toString());return new Be(!0,e)}this.buffer.append(e.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setIsoIec646()),new Be(!1)}isStillIsoIec646(e){if(e+5>this.information.getSize())return!1;let t=this.extractNumericValueFromBitArray(e,5);if(t>=5&&t<16)return!0;if(e+7>this.information.getSize())return!1;let r=this.extractNumericValueFromBitArray(e,7);if(r>=64&&r<116)return!0;if(e+8>this.information.getSize())return!1;let n=this.extractNumericValueFromBitArray(e,8);return n>=232&&n<253}decodeIsoIec646(e){let t=this.extractNumericValueFromBitArray(e,5);if(15===t)return new Ue(e+5,Ue.FNC1);if(t>=5&&t<15)return new Ue(e+5,"0"+(t-5));let r,n=this.extractNumericValueFromBitArray(e,7);if(n>=64&&n<90)return new Ue(e+7,""+(n+1));if(n>=90&&n<116)return new Ue(e+7,""+(n+7));switch(this.extractNumericValueFromBitArray(e,8)){case 232:r="!";break;case 233:r='"';break;case 234:r="%";break;case 235:r="&";break;case 236:r="'";break;case 237:r="(";break;case 238:r=")";break;case 239:r="*";break;case 240:r="+";break;case 241:r=",";break;case 242:r="-";break;case 243:r=".";break;case 244:r="/";break;case 245:r=":";break;case 246:r=";";break;case 247:r="<";break;case 248:r="=";break;case 249:r=">";break;case 250:r="?";break;case 251:r="_";break;case 252:r=" ";break;default:throw new E}return new Ue(e+8,r)}isStillAlpha(e){if(e+5>this.information.getSize())return!1;let t=this.extractNumericValueFromBitArray(e,5);if(t>=5&&t<16)return!0;if(e+6>this.information.getSize())return!1;let r=this.extractNumericValueFromBitArray(e,6);return r>=16&&r<63}decodeAlphanumeric(e){let t=this.extractNumericValueFromBitArray(e,5);if(15===t)return new Ue(e+5,Ue.FNC1);if(t>=5&&t<15)return new Ue(e+5,"0"+(t-5));let r,n=this.extractNumericValueFromBitArray(e,6);if(n>=32&&n<58)return new Ue(e+6,""+(n+33));switch(n){case 58:r="*";break;case 59:r=",";break;case 60:r="-";break;case 61:r=".";break;case 62:r="/";break;default:throw new re("Decoding invalid alphanumeric value: "+n)}return new Ue(e+6,r)}isAlphaTo646ToAlphaLatch(e){if(e+1>this.information.getSize())return!1;for(let t=0;t<5&&t+e<this.information.getSize();++t)if(2===t){if(!this.information.get(e+2))return!1}else if(this.information.get(e+t))return!1;return!0}isAlphaOr646ToNumericLatch(e){if(e+3>this.information.getSize())return!1;for(let t=e;t<e+3;++t)if(this.information.get(t))return!1;return!0}isNumericToAlphaNumericLatch(e){if(e+1>this.information.getSize())return!1;for(let t=0;t<4&&t+e<this.information.getSize();++t)if(this.information.get(e+t))return!1;return!0}}class Ge{constructor(e){this.information=e,this.generalDecoder=new We(e)}getInformation(){return this.information}getGeneralDecoder(){return this.generalDecoder}}class $e extends Ge{constructor(e){super(e)}encodeCompressedGtin(e,t){e.append("(01)");let r=e.length();e.append("9"),this.encodeCompressedGtinWithoutAI(e,t,r)}encodeCompressedGtinWithoutAI(e,t,r){for(let n=0;n<4;++n){let r=this.getGeneralDecoder().extractNumericValueFromBitArray(t+10*n,10);r/100===0&&e.append("0"),r/10===0&&e.append("0"),e.append(r)}$e.appendCheckDigit(e,r)}static appendCheckDigit(e,t){let r=0;for(let n=0;n<13;n++){let i=e.charAt(n+t).charCodeAt(0)-"0".charCodeAt(0);r+=0===(1&n)?3*i:i}r=10-r%10,10===r&&(r=0),e.append(r)}}$e.GTIN_SIZE=40;class Xe extends $e{constructor(e){super(e)}parseInformation(){let e=new I;e.append("(01)");let t=e.length(),r=this.getGeneralDecoder().extractNumericValueFromBitArray(Xe.HEADER_SIZE,4);return e.append(r),this.encodeCompressedGtinWithoutAI(e,Xe.HEADER_SIZE+4,t),this.getGeneralDecoder().decodeAllCodes(e,Xe.HEADER_SIZE+44)}}Xe.HEADER_SIZE=4;class Ye extends Ge{constructor(e){super(e)}parseInformation(){let e=new I;return this.getGeneralDecoder().decodeAllCodes(e,Ye.HEADER_SIZE)}}Ye.HEADER_SIZE=5;class qe extends $e{constructor(e){super(e)}encodeCompressedWeight(e,t,r){let n=this.getGeneralDecoder().extractNumericValueFromBitArray(t,r);this.addWeightCode(e,n);let i=this.checkWeight(n),o=1e5;for(let s=0;s<5;++s)i/o===0&&e.append("0"),o/=10;e.append(i)}}class Qe extends qe{constructor(e){super(e)}parseInformation(){if(this.getInformation().getSize()!=Qe.HEADER_SIZE+qe.GTIN_SIZE+Qe.WEIGHT_SIZE)throw new O;let e=new I;return this.encodeCompressedGtin(e,Qe.HEADER_SIZE),this.encodeCompressedWeight(e,Qe.HEADER_SIZE+qe.GTIN_SIZE,Qe.WEIGHT_SIZE),e.toString()}}Qe.HEADER_SIZE=5,Qe.WEIGHT_SIZE=15;class Ze extends Qe{constructor(e){super(e)}addWeightCode(e,t){e.append("(3103)")}checkWeight(e){return e}}class Ke extends Qe{constructor(e){super(e)}addWeightCode(e,t){t<1e4?e.append("(3202)"):e.append("(3203)")}checkWeight(e){return e<1e4?e:e-1e4}}class Je extends $e{constructor(e){super(e)}parseInformation(){if(this.getInformation().getSize()<Je.HEADER_SIZE+$e.GTIN_SIZE)throw new O;let e=new I;this.encodeCompressedGtin(e,Je.HEADER_SIZE);let t=this.getGeneralDecoder().extractNumericValueFromBitArray(Je.HEADER_SIZE+$e.GTIN_SIZE,Je.LAST_DIGIT_SIZE);e.append("(392"),e.append(t),e.append(")");let r=this.getGeneralDecoder().decodeGeneralPurposeField(Je.HEADER_SIZE+$e.GTIN_SIZE+Je.LAST_DIGIT_SIZE,null);return e.append(r.getNewString()),e.toString()}}Je.HEADER_SIZE=8,Je.LAST_DIGIT_SIZE=2;class et extends $e{constructor(e){super(e)}parseInformation(){if(this.getInformation().getSize()<et.HEADER_SIZE+$e.GTIN_SIZE)throw new O;let e=new I;this.encodeCompressedGtin(e,et.HEADER_SIZE);let t=this.getGeneralDecoder().extractNumericValueFromBitArray(et.HEADER_SIZE+$e.GTIN_SIZE,et.LAST_DIGIT_SIZE);e.append("(393"),e.append(t),e.append(")");let r=this.getGeneralDecoder().extractNumericValueFromBitArray(et.HEADER_SIZE+$e.GTIN_SIZE+et.LAST_DIGIT_SIZE,et.FIRST_THREE_DIGITS_SIZE);r/100==0&&e.append("0"),r/10==0&&e.append("0"),e.append(r);let n=this.getGeneralDecoder().decodeGeneralPurposeField(et.HEADER_SIZE+$e.GTIN_SIZE+et.LAST_DIGIT_SIZE+et.FIRST_THREE_DIGITS_SIZE,null);return e.append(n.getNewString()),e.toString()}}et.HEADER_SIZE=8,et.LAST_DIGIT_SIZE=2,et.FIRST_THREE_DIGITS_SIZE=10;class tt extends qe{constructor(e,t,r){super(e),this.dateCode=r,this.firstAIdigits=t}parseInformation(){if(this.getInformation().getSize()!=tt.HEADER_SIZE+tt.GTIN_SIZE+tt.WEIGHT_SIZE+tt.DATE_SIZE)throw new O;let e=new I;return this.encodeCompressedGtin(e,tt.HEADER_SIZE),this.encodeCompressedWeight(e,tt.HEADER_SIZE+tt.GTIN_SIZE,tt.WEIGHT_SIZE),this.encodeCompressedDate(e,tt.HEADER_SIZE+tt.GTIN_SIZE+tt.WEIGHT_SIZE),e.toString()}encodeCompressedDate(e,t){let r=this.getGeneralDecoder().extractNumericValueFromBitArray(t,tt.DATE_SIZE);if(38400==r)return;e.append("("),e.append(this.dateCode),e.append(")");let n=r%32;r/=32;let i=r%12+1;r/=12;let o=r;o/10==0&&e.append("0"),e.append(o),i/10==0&&e.append("0"),e.append(i),n/10==0&&e.append("0"),e.append(n)}addWeightCode(e,t){e.append("("),e.append(this.firstAIdigits),e.append(t/1e5),e.append(")")}checkWeight(e){return e%1e5}}function rt(e){try{if(e.get(1))return new Xe(e);if(!e.get(2))return new Ye(e);switch(We.extractNumericValueFromBitArray(e,1,4)){case 4:return new Ze(e);case 5:return new Ke(e)}switch(We.extractNumericValueFromBitArray(e,1,5)){case 12:return new Je(e);case 13:return new et(e)}switch(We.extractNumericValueFromBitArray(e,1,7)){case 56:return new tt(e,"310","11");case 57:return new tt(e,"320","11");case 58:return new tt(e,"310","13");case 59:return new tt(e,"320","13");case 60:return new tt(e,"310","15");case 61:return new tt(e,"320","15");case 62:return new tt(e,"310","17");case 63:return new tt(e,"320","17")}}catch(t){throw console.log(t),new re("unknown decoder: "+e)}}tt.HEADER_SIZE=8,tt.WEIGHT_SIZE=20,tt.DATE_SIZE=16;class nt{constructor(e,t,r,n){this.leftchar=e,this.rightchar=t,this.finderpattern=r,this.maybeLast=n}mayBeLast(){return this.maybeLast}getLeftChar(){return this.leftchar}getRightChar(){return this.rightchar}getFinderPattern(){return this.finderpattern}mustBeLast(){return null==this.rightchar}toString(){return"[ "+this.leftchar+", "+this.rightchar+" : "+(null==this.finderpattern?"null":this.finderpattern.getValue())+" ]"}static equals(e,t){return e instanceof nt&&nt.equalsOrNull(e.leftchar,t.leftchar)&&nt.equalsOrNull(e.rightchar,t.rightchar)&&nt.equalsOrNull(e.finderpattern,t.finderpattern)}static equalsOrNull(e,t){return null===e?null===t:nt.equals(e,t)}hashCode(){return this.leftchar.getValue()^this.rightchar.getValue()^this.finderpattern.getValue()}}class it{constructor(e,t,r){this.pairs=e,this.rowNumber=t,this.wasReversed=r}getPairs(){return this.pairs}getRowNumber(){return this.rowNumber}isReversed(){return this.wasReversed}isEquivalent(e){return this.checkEqualitity(this,e)}toString(){return"{ "+this.pairs+" }"}equals(e,t){return e instanceof it&&this.checkEqualitity(e,t)&&e.wasReversed===t.wasReversed}checkEqualitity(e,t){if(!e||!t)return;let r;return e.forEach(((e,n)=>{t.forEach((t=>{e.getLeftChar().getValue()===t.getLeftChar().getValue()&&e.getRightChar().getValue()===t.getRightChar().getValue()&&e.getFinderPatter().getValue()===t.getFinderPatter().getValue()&&(r=!0)}))})),r}}class ot extends Me{constructor(e){super(...arguments),this.pairs=new Array(ot.MAX_PAIRS),this.rows=new Array,this.startEnd=[2],this.verbose=!0===e}decodeRow(e,t,r){this.pairs.length=0,this.startFromEven=!1;try{return ot.constructResult(this.decodeRow2pairs(e,t))}catch(n){this.verbose&&console.log(n)}return this.pairs.length=0,this.startFromEven=!0,ot.constructResult(this.decodeRow2pairs(e,t))}reset(){this.pairs.length=0,this.rows.length=0}decodeRow2pairs(e,t){let r,n=!1;for(;!n;)try{this.pairs.push(this.retrieveNextPair(t,this.pairs,e))}catch(i){if(i instanceof O){if(!this.pairs.length)throw new O;n=!0}}if(this.checkChecksum())return this.pairs;if(r=!!this.rows.length,this.storeRow(e,!1),r){let e=this.checkRowsBoolean(!1);if(null!=e)return e;if(e=this.checkRowsBoolean(!0),null!=e)return e}throw new O}checkRowsBoolean(e){if(this.rows.length>25)return this.rows.length=0,null;this.pairs.length=0,e&&(this.rows=this.rows.reverse());let t=null;try{t=this.checkRows(new Array,0)}catch(r){this.verbose&&console.log(r)}return e&&(this.rows=this.rows.reverse()),t}checkRows(e,t){for(let n=t;n<this.rows.length;n++){let t=this.rows[n];this.pairs.length=0;for(let r of e)this.pairs.push(r.getPairs());if(this.pairs.push(t.getPairs()),!ot.isValidSequence(this.pairs))continue;if(this.checkChecksum())return this.pairs;let i=new Array(e);i.push(t);try{return this.checkRows(i,n+1)}catch(r){this.verbose&&console.log(r)}}throw new O}static isValidSequence(e){for(let t of ot.FINDER_PATTERN_SEQUENCES){if(e.length>t.length)continue;let r=!0;for(let n=0;n<e.length;n++)if(e[n].getFinderPattern().getValue()!=t[n]){r=!1;break}if(r)return!0}return!1}storeRow(e,t){let r=0,n=!1,i=!1;for(;r<this.rows.length;){let t=this.rows[r];if(t.getRowNumber()>e){i=t.isEquivalent(this.pairs);break}n=t.isEquivalent(this.pairs),r++}i||n||ot.isPartialRow(this.pairs,this.rows)||(this.rows.push(r,new it(this.pairs,e,t)),this.removePartialRows(this.pairs,this.rows))}removePartialRows(e,t){for(let r of t)if(r.getPairs().length!==e.length)for(let t of r.getPairs())for(let r of e)if(nt.equals(t,r))break}static isPartialRow(e,t){for(let r of t){let t=!0;for(let n of e){let e=!1;for(let t of r.getPairs())if(n.equals(t)){e=!0;break}if(!e){t=!1;break}}if(t)return!0}return!1}getRows(){return this.rows}static constructResult(e){let t=rt(Le.buildBitArray(e)).parseInformation(),r=e[0].getFinderPattern().getResultPoints(),n=e[e.length-1].getFinderPattern().getResultPoints(),i=[r[0],r[1],n[0],n[1]];return new U(t,null,null,i,H.RSS_EXPANDED,null)}checkChecksum(){let e=this.pairs.get(0),t=e.getLeftChar(),r=e.getRightChar();if(null==r)return!1;let n=r.getChecksumPortion(),i=2;for(let o=1;o<this.pairs.size();++o){let e=this.pairs.get(o);n+=e.getLeftChar().getChecksumPortion(),i++;let t=e.getRightChar();null!=t&&(n+=t.getChecksumPortion(),i++)}return n%=211,211*(i-4)+n==t.getValue()}static getNextSecondBar(e,t){let r;return e.get(t)?(r=e.getNextUnset(t),r=e.getNextSet(r)):(r=e.getNextSet(t),r=e.getNextUnset(r)),r}retrieveNextPair(e,t,r){let n,i=t.length%2==0;this.startFromEven&&(i=!i);let o=!0,s=-1;do{this.findNextPair(e,t,s),n=this.parseFoundFinderPattern(e,r,i),null==n?s=ot.getNextSecondBar(e,this.startEnd[0]):o=!1}while(o);let a,l=this.decodeDataCharacter(e,n,i,!0);if(!this.isEmptyPair(t)&&t[t.length-1].mustBeLast())throw new O;try{a=this.decodeDataCharacter(e,n,i,!1)}catch(c){a=null,this.verbose&&console.log(c)}return new nt(l,a,n,!0)}isEmptyPair(e){return 0===e.length}findNextPair(e,t,r){let n=this.getDecodeFinderCounters();n[0]=0,n[1]=0,n[2]=0,n[3]=0;let i,o=e.getSize();i=r>=0?r:this.isEmptyPair(t)?0:t[t.length-1].getFinderPattern().getStartEnd()[1];let s=t.length%2!=0;this.startFromEven&&(s=!s);let a=!1;for(;i<o&&(a=!e.get(i),a);)i++;let l=0,c=i;for(let u=i;u<o;u++)if(e.get(u)!=a)n[l]++;else{if(3==l){if(s&&ot.reverseCounters(n),ot.isFinderPattern(n))return this.startEnd[0]=c,void(this.startEnd[1]=u);s&&ot.reverseCounters(n),c+=n[0]+n[1],n[0]=n[2],n[1]=n[3],n[2]=0,n[3]=0,l--}else l++;n[l]=1,a=!a}throw new O}static reverseCounters(e){let t=e.length;for(let r=0;r<t/2;++r){let n=e[r];e[r]=e[t-r-1],e[t-r-1]=n}}parseFoundFinderPattern(e,t,r){let n,i,o;if(r){let t=this.startEnd[0]-1;for(;t>=0&&!e.get(t);)t--;t++,n=this.startEnd[0]-t,i=t,o=this.startEnd[1]}else i=this.startEnd[0],o=e.getNextUnset(this.startEnd[1]+1),n=o-this.startEnd[1];let s,a=this.getDecodeFinderCounters();m.arraycopy(a,0,a,1,a.length-1),a[0]=n;try{s=this.parseFinderValue(a,ot.FINDER_PATTERNS)}catch(l){return null}return new De(s,[i,o],i,o,t)}decodeDataCharacter(e,t,r,n){let i=this.getDataCharacterCounters();for(let C=0;C<i.length;C++)i[C]=0;if(n)ot.recordPatternInReverse(e,t.getStartEnd()[0],i);else{ot.recordPattern(e,t.getStartEnd()[1],i);for(let e=0,t=i.length-1;e<t;e++,t--){let r=i[e];i[e]=i[t],i[t]=r}}let o=17,s=oe.sum(new Int32Array(i))/o,a=(t.getStartEnd()[1]-t.getStartEnd()[0])/15;if(Math.abs(s-a)/a>.3)throw new O;let l=this.getOddCounts(),c=this.getEvenCounts(),u=this.getOddRoundingErrors(),d=this.getEvenRoundingErrors();for(let C=0;C<i.length;C++){let e=1*i[C]/s,t=e+.5;if(t<1){if(e<.3)throw new O;t=1}else if(t>8){if(e>8.7)throw new O;t=8}let r=C/2;0==(1&C)?(l[r]=t,u[r]=e-t):(c[r]=t,d[r]=e-t)}this.adjustOddEvenCounts(o);let h=4*t.getValue()+(r?0:2)+(n?0:1)-1,f=0,p=0;for(let C=l.length-1;C>=0;C--){if(ot.isNotA1left(t,r,n)){let e=ot.WEIGHTS[h][2*C];p+=l[C]*e}f+=l[C]}let m=0;for(let C=c.length-1;C>=0;C--)if(ot.isNotA1left(t,r,n)){let e=ot.WEIGHTS[h][2*C+1];m+=c[C]*e}let g=p+m;if(0!=(1&f)||f>13||f<4)throw new O;let y=(13-f)/2,w=ot.SYMBOL_WIDEST[y],b=9-w,v=Pe.getRSSvalue(l,w,!0),_=Pe.getRSSvalue(c,b,!1),x=ot.EVEN_TOTAL_SUBSET[y],E=ot.GSUM[y];return new je(v*x+_+E,g)}static isNotA1left(e,t,r){return!(0==e.getValue()&&t&&r)}adjustOddEvenCounts(e){let t=oe.sum(new Int32Array(this.getOddCounts())),r=oe.sum(new Int32Array(this.getEvenCounts())),n=!1,i=!1;t>13?i=!0:t<4&&(n=!0);let o=!1,s=!1;r>13?s=!0:r<4&&(o=!0);let a=t+r-e,l=1==(1&t),c=0==(1&r);if(1==a)if(l){if(c)throw new O;i=!0}else{if(!c)throw new O;s=!0}else if(-1==a)if(l){if(c)throw new O;n=!0}else{if(!c)throw new O;o=!0}else{if(0!=a)throw new O;if(l){if(!c)throw new O;t<r?(n=!0,s=!0):(i=!0,o=!0)}else if(c)throw new O}if(n){if(i)throw new O;ot.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(i&&ot.decrement(this.getOddCounts(),this.getOddRoundingErrors()),o){if(s)throw new O;ot.increment(this.getEvenCounts(),this.getOddRoundingErrors())}s&&ot.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())}}ot.SYMBOL_WIDEST=[7,5,4,3,1],ot.EVEN_TOTAL_SUBSET=[4,20,52,104,204],ot.GSUM=[0,348,1388,2948,3988],ot.FINDER_PATTERNS=[Int32Array.from([1,8,4,1]),Int32Array.from([3,6,4,1]),Int32Array.from([3,4,6,1]),Int32Array.from([3,2,8,1]),Int32Array.from([2,6,5,1]),Int32Array.from([2,2,9,1])],ot.WEIGHTS=[[1,3,9,27,81,32,96,77],[20,60,180,118,143,7,21,63],[189,145,13,39,117,140,209,205],[193,157,49,147,19,57,171,91],[62,186,136,197,169,85,44,132],[185,133,188,142,4,12,36,108],[113,128,173,97,80,29,87,50],[150,28,84,41,123,158,52,156],[46,138,203,187,139,206,196,166],[76,17,51,153,37,111,122,155],[43,129,176,106,107,110,119,146],[16,48,144,10,30,90,59,177],[109,116,137,200,178,112,125,164],[70,210,208,202,184,130,179,115],[134,191,151,31,93,68,204,190],[148,22,66,198,172,94,71,2],[6,18,54,162,64,192,154,40],[120,149,25,75,14,42,126,167],[79,26,78,23,69,207,199,175],[103,98,83,38,114,131,182,124],[161,61,183,127,170,88,53,159],[55,165,73,8,24,72,5,15],[45,135,194,160,58,174,100,89]],ot.FINDER_PAT_A=0,ot.FINDER_PAT_B=1,ot.FINDER_PAT_C=2,ot.FINDER_PAT_D=3,ot.FINDER_PAT_E=4,ot.FINDER_PAT_F=5,ot.FINDER_PATTERN_SEQUENCES=[[ot.FINDER_PAT_A,ot.FINDER_PAT_A],[ot.FINDER_PAT_A,ot.FINDER_PAT_B,ot.FINDER_PAT_B],[ot.FINDER_PAT_A,ot.FINDER_PAT_C,ot.FINDER_PAT_B,ot.FINDER_PAT_D],[ot.FINDER_PAT_A,ot.FINDER_PAT_E,ot.FINDER_PAT_B,ot.FINDER_PAT_D,ot.FINDER_PAT_C],[ot.FINDER_PAT_A,ot.FINDER_PAT_E,ot.FINDER_PAT_B,ot.FINDER_PAT_D,ot.FINDER_PAT_D,ot.FINDER_PAT_F],[ot.FINDER_PAT_A,ot.FINDER_PAT_E,ot.FINDER_PAT_B,ot.FINDER_PAT_D,ot.FINDER_PAT_E,ot.FINDER_PAT_F,ot.FINDER_PAT_F],[ot.FINDER_PAT_A,ot.FINDER_PAT_A,ot.FINDER_PAT_B,ot.FINDER_PAT_B,ot.FINDER_PAT_C,ot.FINDER_PAT_C,ot.FINDER_PAT_D,ot.FINDER_PAT_D],[ot.FINDER_PAT_A,ot.FINDER_PAT_A,ot.FINDER_PAT_B,ot.FINDER_PAT_B,ot.FINDER_PAT_C,ot.FINDER_PAT_C,ot.FINDER_PAT_D,ot.FINDER_PAT_E,ot.FINDER_PAT_E],[ot.FINDER_PAT_A,ot.FINDER_PAT_A,ot.FINDER_PAT_B,ot.FINDER_PAT_B,ot.FINDER_PAT_C,ot.FINDER_PAT_C,ot.FINDER_PAT_D,ot.FINDER_PAT_E,ot.FINDER_PAT_F,ot.FINDER_PAT_F],[ot.FINDER_PAT_A,ot.FINDER_PAT_A,ot.FINDER_PAT_B,ot.FINDER_PAT_B,ot.FINDER_PAT_C,ot.FINDER_PAT_D,ot.FINDER_PAT_D,ot.FINDER_PAT_E,ot.FINDER_PAT_E,ot.FINDER_PAT_F,ot.FINDER_PAT_F]],ot.MAX_PAIRS=11;class st extends je{constructor(e,t,r){super(e,t),this.count=0,this.finderPattern=r}getFinderPattern(){return this.finderPattern}getCount(){return this.count}incrementCount(){this.count++}}class at extends Me{constructor(){super(...arguments),this.possibleLeftPairs=[],this.possibleRightPairs=[]}decodeRow(e,t,r){const n=this.decodePair(t,!1,e,r);at.addOrTally(this.possibleLeftPairs,n),t.reverse();let i=this.decodePair(t,!0,e,r);at.addOrTally(this.possibleRightPairs,i),t.reverse();for(let o of this.possibleLeftPairs)if(o.getCount()>1)for(let e of this.possibleRightPairs)if(e.getCount()>1&&at.checkChecksum(o,e))return at.constructResult(o,e);throw new O}static addOrTally(e,t){if(null==t)return;let r=!1;for(let n of e)if(n.getValue()===t.getValue()){n.incrementCount(),r=!0;break}r||e.push(t)}reset(){this.possibleLeftPairs.length=0,this.possibleRightPairs.length=0}static constructResult(e,t){let r=4537077*e.getValue()+t.getValue(),n=new String(r).toString(),i=new I;for(let l=13-n.length;l>0;l--)i.append("0");i.append(n);let o=0;for(let l=0;l<13;l++){let e=i.charAt(l).charCodeAt(0)-"0".charCodeAt(0);o+=0===(1&l)?3*e:e}o=10-o%10,10===o&&(o=0),i.append(o.toString());let s=e.getFinderPattern().getResultPoints(),a=t.getFinderPattern().getResultPoints();return new U(i.toString(),null,0,[s[0],s[1],a[0],a[1]],H.RSS_14,(new Date).getTime())}static checkChecksum(e,t){let r=(e.getChecksumPortion()+16*t.getChecksumPortion())%79,n=9*e.getFinderPattern().getValue()+t.getFinderPattern().getValue();return n>72&&n--,n>8&&n--,r===n}decodePair(e,t,r,n){try{let i=this.findFinderPattern(e,t),o=this.parseFoundFinderPattern(e,r,t,i),s=null==n?null:n.get(x.NEED_RESULT_POINT_CALLBACK);if(null!=s){let n=(i[0]+i[1])/2;t&&(n=e.getSize()-1-n),s.foundPossibleResultPoint(new ae(n,r))}let a=this.decodeDataCharacter(e,o,!0),l=this.decodeDataCharacter(e,o,!1);return new st(1597*a.getValue()+l.getValue(),a.getChecksumPortion()+4*l.getChecksumPortion(),o)}catch(i){return null}}decodeDataCharacter(e,t,r){let n=this.getDataCharacterCounters();for(let m=0;m<n.length;m++)n[m]=0;if(r)be.recordPatternInReverse(e,t.getStartEnd()[0],n);else{be.recordPattern(e,t.getStartEnd()[1]+1,n);for(let e=0,t=n.length-1;e<t;e++,t--){let r=n[e];n[e]=n[t],n[t]=r}}let i=r?16:15,o=oe.sum(new Int32Array(n))/i,s=this.getOddCounts(),a=this.getEvenCounts(),l=this.getOddRoundingErrors(),c=this.getEvenRoundingErrors();for(let m=0;m<n.length;m++){let e=n[m]/o,t=Math.floor(e+.5);t<1?t=1:t>8&&(t=8);let r=Math.floor(m/2);0===(1&m)?(s[r]=t,l[r]=e-t):(a[r]=t,c[r]=e-t)}this.adjustOddEvenCounts(r,i);let u=0,d=0;for(let m=s.length-1;m>=0;m--)d*=9,d+=s[m],u+=s[m];let h=0,f=0;for(let m=a.length-1;m>=0;m--)h*=9,h+=a[m],f+=a[m];let p=d+3*h;if(r){if(0!==(1&u)||u>12||u<4)throw new O;let e=(12-u)/2,t=at.OUTSIDE_ODD_WIDEST[e],r=9-t,n=Pe.getRSSvalue(s,t,!1),i=Pe.getRSSvalue(a,r,!0),o=at.OUTSIDE_EVEN_TOTAL_SUBSET[e],l=at.OUTSIDE_GSUM[e];return new je(n*o+i+l,p)}{if(0!==(1&f)||f>10||f<4)throw new O;let e=(10-f)/2,t=at.INSIDE_ODD_WIDEST[e],r=9-t,n=Pe.getRSSvalue(s,t,!0),i=Pe.getRSSvalue(a,r,!1),o=at.INSIDE_ODD_TOTAL_SUBSET[e],l=at.INSIDE_GSUM[e];return new je(i*o+n+l,p)}}findFinderPattern(e,t){let r=this.getDecodeFinderCounters();r[0]=0,r[1]=0,r[2]=0,r[3]=0;let n=e.getSize(),i=!1,o=0;for(;o<n&&(i=!e.get(o),t!==i);)o++;let s=0,a=o;for(let l=o;l<n;l++)if(e.get(l)!==i)r[s]++;else{if(3===s){if(Me.isFinderPattern(r))return[a,l];a+=r[0]+r[1],r[0]=r[2],r[1]=r[3],r[2]=0,r[3]=0,s--}else s++;r[s]=1,i=!i}throw new O}parseFoundFinderPattern(e,t,r,n){let i=e.get(n[0]),o=n[0]-1;for(;o>=0&&i!==e.get(o);)o--;o++;const s=n[0]-o,a=this.getDecodeFinderCounters(),l=new Int32Array(a.length);m.arraycopy(a,0,l,1,a.length-1),l[0]=s;const c=this.parseFinderValue(l,at.FINDER_PATTERNS);let u=o,d=n[1];return r&&(u=e.getSize()-1-u,d=e.getSize()-1-d),new De(c,[o,n[1]],u,d,t)}adjustOddEvenCounts(e,t){let r=oe.sum(new Int32Array(this.getOddCounts())),n=oe.sum(new Int32Array(this.getEvenCounts())),i=!1,o=!1,s=!1,a=!1;e?(r>12?o=!0:r<4&&(i=!0),n>12?a=!0:n<4&&(s=!0)):(r>11?o=!0:r<5&&(i=!0),n>10?a=!0:n<4&&(s=!0));let l=r+n-t,c=(1&r)===(e?1:0),u=1===(1&n);if(1===l)if(c){if(u)throw new O;o=!0}else{if(!u)throw new O;a=!0}else if(-1===l)if(c){if(u)throw new O;i=!0}else{if(!u)throw new O;s=!0}else{if(0!==l)throw new O;if(c){if(!u)throw new O;r<n?(i=!0,a=!0):(o=!0,s=!0)}else if(u)throw new O}if(i){if(o)throw new O;Me.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(o&&Me.decrement(this.getOddCounts(),this.getOddRoundingErrors()),s){if(a)throw new O;Me.increment(this.getEvenCounts(),this.getOddRoundingErrors())}a&&Me.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())}}at.OUTSIDE_EVEN_TOTAL_SUBSET=[1,10,34,70,126],at.INSIDE_ODD_TOTAL_SUBSET=[4,20,48,81],at.OUTSIDE_GSUM=[0,161,961,2015,2715],at.INSIDE_GSUM=[0,336,1036,1516],at.OUTSIDE_ODD_WIDEST=[8,6,4,3,1],at.INSIDE_ODD_WIDEST=[2,4,6,8],at.FINDER_PATTERNS=[Int32Array.from([3,8,2,1]),Int32Array.from([3,5,5,1]),Int32Array.from([3,3,7,1]),Int32Array.from([3,1,9,1]),Int32Array.from([2,7,4,1]),Int32Array.from([2,5,6,1]),Int32Array.from([2,3,8,1]),Int32Array.from([1,5,7,1]),Int32Array.from([1,3,9,1])];class lt extends be{constructor(e,t){super(),this.readers=[],this.verbose=!0===t;const r=e?e.get(x.POSSIBLE_FORMATS):null,n=e&&void 0!==e.get(x.ASSUME_CODE_39_CHECK_DIGIT);r?((r.includes(H.EAN_13)||r.includes(H.UPC_A)||r.includes(H.EAN_8)||r.includes(H.UPC_E))&&this.readers.push(new Re(e)),r.includes(H.CODE_39)&&this.readers.push(new _e(n)),r.includes(H.CODE_128)&&this.readers.push(new ve),r.includes(H.ITF)&&this.readers.push(new xe),r.includes(H.RSS_14)&&this.readers.push(new at),r.includes(H.RSS_EXPANDED)&&this.readers.push(new ot(this.verbose))):(this.readers.push(new Re(e)),this.readers.push(new _e),this.readers.push(new Re(e)),this.readers.push(new ve),this.readers.push(new xe),this.readers.push(new at),this.readers.push(new ot(this.verbose)))}decodeRow(e,t,r){for(let i=0;i<this.readers.length;i++)try{return this.readers[i].decodeRow(e,t,r)}catch(n){}throw new O}reset(){this.readers.forEach((e=>e.reset()))}}class ct extends F{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:500,t=arguments.length>1?arguments[1]:void 0;super(new lt(t),e,t)}}class ut{constructor(e,t,r){this.ecCodewords=e,this.ecBlocks=[t],r&&this.ecBlocks.push(r)}getECCodewords(){return this.ecCodewords}getECBlocks(){return this.ecBlocks}}class dt{constructor(e,t){this.count=e,this.dataCodewords=t}getCount(){return this.count}getDataCodewords(){return this.dataCodewords}}class ht{constructor(e,t,r,n,i,o){this.versionNumber=e,this.symbolSizeRows=t,this.symbolSizeColumns=r,this.dataRegionSizeRows=n,this.dataRegionSizeColumns=i,this.ecBlocks=o;let s=0;const a=o.getECCodewords(),l=o.getECBlocks();for(let c of l)s+=c.getCount()*(c.getDataCodewords()+a);this.totalCodewords=s}getVersionNumber(){return this.versionNumber}getSymbolSizeRows(){return this.symbolSizeRows}getSymbolSizeColumns(){return this.symbolSizeColumns}getDataRegionSizeRows(){return this.dataRegionSizeRows}getDataRegionSizeColumns(){return this.dataRegionSizeColumns}getTotalCodewords(){return this.totalCodewords}getECBlocks(){return this.ecBlocks}static getVersionForDimensions(e,t){if(0!==(1&e)||0!==(1&t))throw new E;for(let r of ht.VERSIONS)if(r.symbolSizeRows===e&&r.symbolSizeColumns===t)return r;throw new E}toString(){return""+this.versionNumber}static buildVersions(){return[new ht(1,10,10,8,8,new ut(5,new dt(1,3))),new ht(2,12,12,10,10,new ut(7,new dt(1,5))),new ht(3,14,14,12,12,new ut(10,new dt(1,8))),new ht(4,16,16,14,14,new ut(12,new dt(1,12))),new ht(5,18,18,16,16,new ut(14,new dt(1,18))),new ht(6,20,20,18,18,new ut(18,new dt(1,22))),new ht(7,22,22,20,20,new ut(20,new dt(1,30))),new ht(8,24,24,22,22,new ut(24,new dt(1,36))),new ht(9,26,26,24,24,new ut(28,new dt(1,44))),new ht(10,32,32,14,14,new ut(36,new dt(1,62))),new ht(11,36,36,16,16,new ut(42,new dt(1,86))),new ht(12,40,40,18,18,new ut(48,new dt(1,114))),new ht(13,44,44,20,20,new ut(56,new dt(1,144))),new ht(14,48,48,22,22,new ut(68,new dt(1,174))),new ht(15,52,52,24,24,new ut(42,new dt(2,102))),new ht(16,64,64,14,14,new ut(56,new dt(2,140))),new ht(17,72,72,16,16,new ut(36,new dt(4,92))),new ht(18,80,80,18,18,new ut(48,new dt(4,114))),new ht(19,88,88,20,20,new ut(56,new dt(4,144))),new ht(20,96,96,22,22,new ut(68,new dt(4,174))),new ht(21,104,104,24,24,new ut(56,new dt(6,136))),new ht(22,120,120,18,18,new ut(68,new dt(6,175))),new ht(23,132,132,20,20,new ut(62,new dt(8,163))),new ht(24,144,144,22,22,new ut(62,new dt(8,156),new dt(2,155))),new ht(25,8,18,6,16,new ut(7,new dt(1,5))),new ht(26,8,32,6,14,new ut(11,new dt(1,10))),new ht(27,12,26,10,24,new ut(14,new dt(1,16))),new ht(28,12,36,10,16,new ut(18,new dt(1,22))),new ht(29,16,36,14,16,new ut(24,new dt(1,32))),new ht(30,16,48,14,22,new ut(28,new dt(1,49)))]}}ht.VERSIONS=ht.buildVersions();class ft{constructor(e){const t=e.getHeight();if(t<8||t>144||0!==(1&t))throw new E;this.version=ft.readVersion(e),this.mappingBitMatrix=this.extractDataRegion(e),this.readMappingMatrix=new T(this.mappingBitMatrix.getWidth(),this.mappingBitMatrix.getHeight())}getVersion(){return this.version}static readVersion(e){const t=e.getHeight(),r=e.getWidth();return ht.getVersionForDimensions(t,r)}readCodewords(){const e=new Int8Array(this.version.getTotalCodewords());let t=0,r=4,n=0;const i=this.mappingBitMatrix.getHeight(),o=this.mappingBitMatrix.getWidth();let s=!1,a=!1,l=!1,c=!1;do{if(r!==i||0!==n||s)if(r!==i-2||0!==n||0===(3&o)||a)if(r!==i+4||2!==n||0!==(7&o)||l)if(r!==i-2||0!==n||4!==(7&o)||c){do{r<i&&n>=0&&!this.readMappingMatrix.get(n,r)&&(e[t++]=255&this.readUtah(r,n,i,o)),r-=2,n+=2}while(r>=0&&n<o);r+=1,n+=3;do{r>=0&&n<o&&!this.readMappingMatrix.get(n,r)&&(e[t++]=255&this.readUtah(r,n,i,o)),r+=2,n-=2}while(r<i&&n>=0);r+=3,n+=1}else e[t++]=255&this.readCorner4(i,o),r-=2,n+=2,c=!0;else e[t++]=255&this.readCorner3(i,o),r-=2,n+=2,l=!0;else e[t++]=255&this.readCorner2(i,o),r-=2,n+=2,a=!0;else e[t++]=255&this.readCorner1(i,o),r-=2,n+=2,s=!0}while(r<i||n<o);if(t!==this.version.getTotalCodewords())throw new E;return e}readModule(e,t,r,n){return e<0&&(e+=r,t+=4-(r+4&7)),t<0&&(t+=n,e+=4-(n+4&7)),this.readMappingMatrix.set(t,e),this.mappingBitMatrix.get(t,e)}readUtah(e,t,r,n){let i=0;return this.readModule(e-2,t-2,r,n)&&(i|=1),i<<=1,this.readModule(e-2,t-1,r,n)&&(i|=1),i<<=1,this.readModule(e-1,t-2,r,n)&&(i|=1),i<<=1,this.readModule(e-1,t-1,r,n)&&(i|=1),i<<=1,this.readModule(e-1,t,r,n)&&(i|=1),i<<=1,this.readModule(e,t-2,r,n)&&(i|=1),i<<=1,this.readModule(e,t-1,r,n)&&(i|=1),i<<=1,this.readModule(e,t,r,n)&&(i|=1),i}readCorner1(e,t){let r=0;return this.readModule(e-1,0,e,t)&&(r|=1),r<<=1,this.readModule(e-1,1,e,t)&&(r|=1),r<<=1,this.readModule(e-1,2,e,t)&&(r|=1),r<<=1,this.readModule(0,t-2,e,t)&&(r|=1),r<<=1,this.readModule(0,t-1,e,t)&&(r|=1),r<<=1,this.readModule(1,t-1,e,t)&&(r|=1),r<<=1,this.readModule(2,t-1,e,t)&&(r|=1),r<<=1,this.readModule(3,t-1,e,t)&&(r|=1),r}readCorner2(e,t){let r=0;return this.readModule(e-3,0,e,t)&&(r|=1),r<<=1,this.readModule(e-2,0,e,t)&&(r|=1),r<<=1,this.readModule(e-1,0,e,t)&&(r|=1),r<<=1,this.readModule(0,t-4,e,t)&&(r|=1),r<<=1,this.readModule(0,t-3,e,t)&&(r|=1),r<<=1,this.readModule(0,t-2,e,t)&&(r|=1),r<<=1,this.readModule(0,t-1,e,t)&&(r|=1),r<<=1,this.readModule(1,t-1,e,t)&&(r|=1),r}readCorner3(e,t){let r=0;return this.readModule(e-1,0,e,t)&&(r|=1),r<<=1,this.readModule(e-1,t-1,e,t)&&(r|=1),r<<=1,this.readModule(0,t-3,e,t)&&(r|=1),r<<=1,this.readModule(0,t-2,e,t)&&(r|=1),r<<=1,this.readModule(0,t-1,e,t)&&(r|=1),r<<=1,this.readModule(1,t-3,e,t)&&(r|=1),r<<=1,this.readModule(1,t-2,e,t)&&(r|=1),r<<=1,this.readModule(1,t-1,e,t)&&(r|=1),r}readCorner4(e,t){let r=0;return this.readModule(e-3,0,e,t)&&(r|=1),r<<=1,this.readModule(e-2,0,e,t)&&(r|=1),r<<=1,this.readModule(e-1,0,e,t)&&(r|=1),r<<=1,this.readModule(0,t-2,e,t)&&(r|=1),r<<=1,this.readModule(0,t-1,e,t)&&(r|=1),r<<=1,this.readModule(1,t-1,e,t)&&(r|=1),r<<=1,this.readModule(2,t-1,e,t)&&(r|=1),r<<=1,this.readModule(3,t-1,e,t)&&(r|=1),r}extractDataRegion(e){const t=this.version.getSymbolSizeRows(),r=this.version.getSymbolSizeColumns();if(e.getHeight()!==t)throw new d("Dimension of bitMatrix must match the version size");const n=this.version.getDataRegionSizeRows(),i=this.version.getDataRegionSizeColumns(),o=t/n|0,s=r/i|0,a=new T(s*i,o*n);for(let l=0;l<o;++l){const t=l*n;for(let r=0;r<s;++r){const o=r*i;for(let s=0;s<n;++s){const c=l*(n+2)+1+s,u=t+s;for(let t=0;t<i;++t){const n=r*(i+2)+1+t;if(e.get(n,c)){const e=o+t;a.set(e,u)}}}}}return a}}class pt{constructor(e,t){this.numDataCodewords=e,this.codewords=t}static getDataBlocks(e,t){const r=t.getECBlocks();let n=0;const i=r.getECBlocks();for(let d of i)n+=d.getCount();const o=new Array(n);let s=0;for(let d of i)for(let e=0;e<d.getCount();e++){const e=d.getDataCodewords(),t=r.getECCodewords()+e;o[s++]=new pt(e,new Uint8Array(t))}const a=o[0].codewords.length-r.getECCodewords(),l=a-1;let c=0;for(let d=0;d<l;d++)for(let t=0;t<s;t++)o[t].codewords[d]=e[c++];const u=24===t.getVersionNumber(),h=u?8:s;for(let d=0;d<h;d++)o[d].codewords[a-1]=e[c++];const f=o[0].codewords.length;for(let d=a;d<f;d++)for(let t=0;t<s;t++){const r=u?(t+8)%s:t,n=u&&r>7?d-1:d;o[r].codewords[n]=e[c++]}if(c!==e.length)throw new d;return o}getNumDataCodewords(){return this.numDataCodewords}getCodewords(){return this.codewords}}class mt{constructor(e){this.bytes=e,this.byteOffset=0,this.bitOffset=0}getBitOffset(){return this.bitOffset}getByteOffset(){return this.byteOffset}readBits(e){if(e<1||e>32||e>this.available())throw new d(""+e);let t=0,r=this.bitOffset,n=this.byteOffset;const i=this.bytes;if(r>0){const o=8-r,s=e<o?e:o,a=o-s,l=255>>8-s<<a;t=(i[n]&l)>>a,e-=s,r+=s,8===r&&(r=0,n++)}if(e>0){for(;e>=8;)t=t<<8|255&i[n],n++,e-=8;if(e>0){const o=8-e,s=255>>o<<o;t=t<<e|(i[n]&s)>>o,r+=e}}return this.bitOffset=r,this.byteOffset=n,t}available(){return 8*(this.bytes.length-this.byteOffset)-this.bitOffset}}!function(e){e[e.PAD_ENCODE=0]="PAD_ENCODE",e[e.ASCII_ENCODE=1]="ASCII_ENCODE",e[e.C40_ENCODE=2]="C40_ENCODE",e[e.TEXT_ENCODE=3]="TEXT_ENCODE",e[e.ANSIX12_ENCODE=4]="ANSIX12_ENCODE",e[e.EDIFACT_ENCODE=5]="EDIFACT_ENCODE",e[e.BASE256_ENCODE=6]="BASE256_ENCODE"}(W||(W={}));class gt{static decode(e){const t=new mt(e),r=new I,n=new I,i=new Array;let o=W.ASCII_ENCODE;do{if(o===W.ASCII_ENCODE)o=this.decodeAsciiSegment(t,r,n);else{switch(o){case W.C40_ENCODE:this.decodeC40Segment(t,r);break;case W.TEXT_ENCODE:this.decodeTextSegment(t,r);break;case W.ANSIX12_ENCODE:this.decodeAnsiX12Segment(t,r);break;case W.EDIFACT_ENCODE:this.decodeEdifactSegment(t,r);break;case W.BASE256_ENCODE:this.decodeBase256Segment(t,r,i);break;default:throw new E}o=W.ASCII_ENCODE}}while(o!==W.PAD_ENCODE&&t.available()>0);return n.length()>0&&r.append(n.toString()),new Q(e,r.toString(),0===i.length?null:i,null)}static decodeAsciiSegment(e,t,r){let n=!1;do{let i=e.readBits(8);if(0===i)throw new E;if(i<=128)return n&&(i+=128),t.append(String.fromCharCode(i-1)),W.ASCII_ENCODE;if(129===i)return W.PAD_ENCODE;if(i<=229){const e=i-130;e<10&&t.append("0"),t.append(""+e)}else switch(i){case 230:return W.C40_ENCODE;case 231:return W.BASE256_ENCODE;case 232:t.append(String.fromCharCode(29));break;case 233:case 234:case 241:break;case 235:n=!0;break;case 236:t.append("[)>\x1e05\x1d"),r.insert(0,"\x1e\x04");break;case 237:t.append("[)>\x1e06\x1d"),r.insert(0,"\x1e\x04");break;case 238:return W.ANSIX12_ENCODE;case 239:return W.TEXT_ENCODE;case 240:return W.EDIFACT_ENCODE;default:if(254!==i||0!==e.available())throw new E}}while(e.available()>0);return W.ASCII_ENCODE}static decodeC40Segment(e,t){let r=!1;const n=[];let i=0;do{if(8===e.available())return;const o=e.readBits(8);if(254===o)return;this.parseTwoBytes(o,e.readBits(8),n);for(let e=0;e<3;e++){const o=n[e];switch(i){case 0:if(o<3)i=o+1;else{if(!(o<this.C40_BASIC_SET_CHARS.length))throw new E;{const e=this.C40_BASIC_SET_CHARS[o];r?(t.append(String.fromCharCode(e.charCodeAt(0)+128)),r=!1):t.append(e)}}break;case 1:r?(t.append(String.fromCharCode(o+128)),r=!1):t.append(String.fromCharCode(o)),i=0;break;case 2:if(o<this.C40_SHIFT2_SET_CHARS.length){const e=this.C40_SHIFT2_SET_CHARS[o];r?(t.append(String.fromCharCode(e.charCodeAt(0)+128)),r=!1):t.append(e)}else switch(o){case 27:t.append(String.fromCharCode(29));break;case 30:r=!0;break;default:throw new E}i=0;break;case 3:r?(t.append(String.fromCharCode(o+224)),r=!1):t.append(String.fromCharCode(o+96)),i=0;break;default:throw new E}}}while(e.available()>0)}static decodeTextSegment(e,t){let r=!1,n=[],i=0;do{if(8===e.available())return;const o=e.readBits(8);if(254===o)return;this.parseTwoBytes(o,e.readBits(8),n);for(let e=0;e<3;e++){const o=n[e];switch(i){case 0:if(o<3)i=o+1;else{if(!(o<this.TEXT_BASIC_SET_CHARS.length))throw new E;{const e=this.TEXT_BASIC_SET_CHARS[o];r?(t.append(String.fromCharCode(e.charCodeAt(0)+128)),r=!1):t.append(e)}}break;case 1:r?(t.append(String.fromCharCode(o+128)),r=!1):t.append(String.fromCharCode(o)),i=0;break;case 2:if(o<this.TEXT_SHIFT2_SET_CHARS.length){const e=this.TEXT_SHIFT2_SET_CHARS[o];r?(t.append(String.fromCharCode(e.charCodeAt(0)+128)),r=!1):t.append(e)}else switch(o){case 27:t.append(String.fromCharCode(29));break;case 30:r=!0;break;default:throw new E}i=0;break;case 3:if(!(o<this.TEXT_SHIFT3_SET_CHARS.length))throw new E;{const e=this.TEXT_SHIFT3_SET_CHARS[o];r?(t.append(String.fromCharCode(e.charCodeAt(0)+128)),r=!1):t.append(e),i=0}break;default:throw new E}}}while(e.available()>0)}static decodeAnsiX12Segment(e,t){const r=[];do{if(8===e.available())return;const n=e.readBits(8);if(254===n)return;this.parseTwoBytes(n,e.readBits(8),r);for(let e=0;e<3;e++){const n=r[e];switch(n){case 0:t.append("\r");break;case 1:t.append("*");break;case 2:t.append(">");break;case 3:t.append(" ");break;default:if(n<14)t.append(String.fromCharCode(n+44));else{if(!(n<40))throw new E;t.append(String.fromCharCode(n+51))}}}}while(e.available()>0)}static parseTwoBytes(e,t,r){let n=(e<<8)+t-1,i=Math.floor(n/1600);r[0]=i,n-=1600*i,i=Math.floor(n/40),r[1]=i,r[2]=n-40*i}static decodeEdifactSegment(e,t){do{if(e.available()<=16)return;for(let r=0;r<4;r++){let r=e.readBits(6);if(31===r){const t=8-e.getBitOffset();return void(8!==t&&e.readBits(t))}0===(32&r)&&(r|=64),t.append(String.fromCharCode(r))}}while(e.available()>0)}static decodeBase256Segment(e,t,r){let n=1+e.getByteOffset();const i=this.unrandomize255State(e.readBits(8),n++);let o;if(o=0===i?e.available()/8|0:i<250?i:250*(i-249)+this.unrandomize255State(e.readBits(8),n++),o<0)throw new E;const s=new Uint8Array(o);for(let l=0;l<o;l++){if(e.available()<8)throw new E;s[l]=this.unrandomize255State(e.readBits(8),n++)}r.push(s);try{t.append(A.decode(s,N.ISO88591))}catch(a){throw new re("Platform does not support required encoding: "+a.message)}}static unrandomize255State(e,t){const r=e-(149*t%255+1);return r>=0?r:r+256}}gt.C40_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"],gt.C40_SHIFT2_SET_CHARS=["!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","@","[","\\","]","^","_"],gt.TEXT_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z"],gt.TEXT_SHIFT2_SET_CHARS=gt.C40_SHIFT2_SET_CHARS,gt.TEXT_SHIFT3_SET_CHARS=["`","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","{","|","}","~",String.fromCharCode(127)];class yt{constructor(){this.rsDecoder=new ne(ee.DATA_MATRIX_FIELD_256)}decode(e){const t=new ft(e),r=t.getVersion(),n=t.readCodewords(),i=pt.getDataBlocks(n,r);let o=0;for(let l of i)o+=l.getNumDataCodewords();const s=new Uint8Array(o),a=i.length;for(let l=0;l<a;l++){const e=i[l],t=e.getCodewords(),r=e.getNumDataCodewords();this.correctErrors(t,r);for(let n=0;n<r;n++)s[n*a+l]=t[n]}return gt.decode(s)}correctErrors(e,t){const r=new Int32Array(e);try{this.rsDecoder.decode(r,e.length-t)}catch(n){throw new f}for(let i=0;i<t;i++)e[i]=r[i]}}class wt{constructor(e){this.image=e,this.rectangleDetector=new ue(this.image)}detect(){const e=this.rectangleDetector.detect();let t=this.detectSolid1(e);if(t=this.detectSolid2(t),t[3]=this.correctTopRight(t),!t[3])throw new O;t=this.shiftToModuleCenter(t);const r=t[0],n=t[1],i=t[2],o=t[3];let s=this.transitionsBetween(r,o)+1,a=this.transitionsBetween(i,o)+1;1===(1&s)&&(s+=1),1===(1&a)&&(a+=1),4*s<7*a&&4*a<7*s&&(s=a=Math.max(s,a));let l=wt.sampleGrid(this.image,r,n,i,o,s,a);return new le(l,[r,n,i,o])}static shiftPoint(e,t,r){let n=(t.getX()-e.getX())/(r+1),i=(t.getY()-e.getY())/(r+1);return new ae(e.getX()+n,e.getY()+i)}static moveAway(e,t,r){let n=e.getX(),i=e.getY();return n<t?n-=1:n+=1,i<r?i-=1:i+=1,new ae(n,i)}detectSolid1(e){let t=e[0],r=e[1],n=e[3],i=e[2],o=this.transitionsBetween(t,r),s=this.transitionsBetween(r,n),a=this.transitionsBetween(n,i),l=this.transitionsBetween(i,t),c=o,u=[i,t,r,n];return c>s&&(c=s,u[0]=t,u[1]=r,u[2]=n,u[3]=i),c>a&&(c=a,u[0]=r,u[1]=n,u[2]=i,u[3]=t),c>l&&(u[0]=n,u[1]=i,u[2]=t,u[3]=r),u}detectSolid2(e){let t=e[0],r=e[1],n=e[2],i=e[3],o=this.transitionsBetween(t,i),s=wt.shiftPoint(r,n,4*(o+1)),a=wt.shiftPoint(n,r,4*(o+1));return this.transitionsBetween(s,t)<this.transitionsBetween(a,i)?(e[0]=t,e[1]=r,e[2]=n,e[3]=i):(e[0]=r,e[1]=n,e[2]=i,e[3]=t),e}correctTopRight(e){let t=e[0],r=e[1],n=e[2],i=e[3],o=this.transitionsBetween(t,i),s=this.transitionsBetween(r,i),a=wt.shiftPoint(t,r,4*(s+1)),l=wt.shiftPoint(n,r,4*(o+1));o=this.transitionsBetween(a,i),s=this.transitionsBetween(l,i);let c=new ae(i.getX()+(n.getX()-r.getX())/(o+1),i.getY()+(n.getY()-r.getY())/(o+1)),u=new ae(i.getX()+(t.getX()-r.getX())/(s+1),i.getY()+(t.getY()-r.getY())/(s+1));return this.isValid(c)?this.isValid(u)?this.transitionsBetween(a,c)+this.transitionsBetween(l,c)>this.transitionsBetween(a,u)+this.transitionsBetween(l,u)?c:u:c:this.isValid(u)?u:null}shiftToModuleCenter(e){let t=e[0],r=e[1],n=e[2],i=e[3],o=this.transitionsBetween(t,i)+1,s=this.transitionsBetween(n,i)+1,a=wt.shiftPoint(t,r,4*s),l=wt.shiftPoint(n,r,4*o);o=this.transitionsBetween(a,i)+1,s=this.transitionsBetween(l,i)+1,1===(1&o)&&(o+=1),1===(1&s)&&(s+=1);let c,u,d=(t.getX()+r.getX()+n.getX()+i.getX())/4,h=(t.getY()+r.getY()+n.getY()+i.getY())/4;return t=wt.moveAway(t,d,h),r=wt.moveAway(r,d,h),n=wt.moveAway(n,d,h),i=wt.moveAway(i,d,h),a=wt.shiftPoint(t,r,4*s),a=wt.shiftPoint(a,i,4*o),c=wt.shiftPoint(r,t,4*s),c=wt.shiftPoint(c,n,4*o),l=wt.shiftPoint(n,i,4*s),l=wt.shiftPoint(l,r,4*o),u=wt.shiftPoint(i,n,4*s),u=wt.shiftPoint(u,t,4*o),[a,c,l,u]}isValid(e){return e.getX()>=0&&e.getX()<this.image.getWidth()&&e.getY()>0&&e.getY()<this.image.getHeight()}static sampleGrid(e,t,r,n,i,o,s){return pe.getInstance().sampleGrid(e,o,s,.5,.5,o-.5,.5,o-.5,s-.5,.5,s-.5,t.getX(),t.getY(),i.getX(),i.getY(),n.getX(),n.getY(),r.getX(),r.getY())}transitionsBetween(e,t){let r=Math.trunc(e.getX()),n=Math.trunc(e.getY()),i=Math.trunc(t.getX()),o=Math.trunc(t.getY()),s=Math.abs(o-n)>Math.abs(i-r);if(s){let e=r;r=n,n=e,e=i,i=o,o=e}let a=Math.abs(i-r),l=Math.abs(o-n),c=-a/2,u=n<o?1:-1,d=r<i?1:-1,h=0,f=this.image.get(s?n:r,s?r:n);for(let p=r,m=n;p!==i;p+=d){let e=this.image.get(s?m:p,s?p:m);if(e!==f&&(h++,f=e),c+=l,c>0){if(m===o)break;m+=u,c-=a}}return h}}class bt{constructor(){this.decoder=new yt}decode(e){let t,r,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(null!=n&&n.has(x.PURE_BARCODE)){const n=bt.extractPureBits(e.getBlackMatrix());t=this.decoder.decode(n),r=bt.NO_POINTS}else{const n=new wt(e.getBlackMatrix()).detect();t=this.decoder.decode(n.getBits()),r=n.getPoints()}const i=t.getRawBytes(),o=new U(t.getText(),i,8*i.length,r,H.DATA_MATRIX,m.currentTimeMillis()),s=t.getByteSegments();null!=s&&o.putMetadata(q.BYTE_SEGMENTS,s);const a=t.getECLevel();return null!=a&&o.putMetadata(q.ERROR_CORRECTION_LEVEL,a),o}reset(){}static extractPureBits(e){const t=e.getTopLeftOnBit(),r=e.getBottomRightOnBit();if(null==t||null==r)throw new O;const n=this.moduleSize(t,e);let i=t[1];const o=r[1];let s=t[0];const a=(r[0]-s+1)/n,l=(o-i+1)/n;if(a<=0||l<=0)throw new O;const c=n/2;i+=c,s+=c;const u=new T(a,l);for(let d=0;d<l;d++){const t=i+d*n;for(let r=0;r<a;r++)e.get(s+r*n,t)&&u.set(r,d)}return u}static moduleSize(e,t){const r=t.getWidth();let n=e[0];const i=e[1];for(;n<r&&t.get(n,i);)n++;if(n===r)throw new O;const o=n-e[0];if(0===o)throw new O;return o}}bt.NO_POINTS=[];class vt extends F{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:500;super(new bt,e)}}!function(e){e[e.L=0]="L",e[e.M=1]="M",e[e.Q=2]="Q",e[e.H=3]="H"}(G||(G={}));class _t{constructor(e,t,r){this.value=e,this.stringValue=t,this.bits=r,_t.FOR_BITS.set(r,this),_t.FOR_VALUE.set(e,this)}getValue(){return this.value}getBits(){return this.bits}static fromString(e){switch(e){case"L":return _t.L;case"M":return _t.M;case"Q":return _t.Q;case"H":return _t.H;default:throw new u(e+"not available")}}toString(){return this.stringValue}equals(e){if(!(e instanceof _t))return!1;const t=e;return this.value===t.value}static forBits(e){if(e<0||e>=_t.FOR_BITS.size)throw new d;return _t.FOR_BITS.get(e)}}_t.FOR_BITS=new Map,_t.FOR_VALUE=new Map,_t.L=new _t(G.L,"L",1),_t.M=new _t(G.M,"M",0),_t.Q=new _t(G.Q,"Q",3),_t.H=new _t(G.H,"H",2);class xt{constructor(e){this.errorCorrectionLevel=_t.forBits(e>>3&3),this.dataMask=7&e}static numBitsDiffering(e,t){return b.bitCount(e^t)}static decodeFormatInformation(e,t){const r=xt.doDecodeFormatInformation(e,t);return null!==r?r:xt.doDecodeFormatInformation(e^xt.FORMAT_INFO_MASK_QR,t^xt.FORMAT_INFO_MASK_QR)}static doDecodeFormatInformation(e,t){let r=Number.MAX_SAFE_INTEGER,n=0;for(const i of xt.FORMAT_INFO_DECODE_LOOKUP){const o=i[0];if(o===e||o===t)return new xt(i[1]);let s=xt.numBitsDiffering(e,o);s<r&&(n=i[1],r=s),e!==t&&(s=xt.numBitsDiffering(t,o),s<r&&(n=i[1],r=s))}return r<=3?new xt(n):null}getErrorCorrectionLevel(){return this.errorCorrectionLevel}getDataMask(){return this.dataMask}hashCode(){return this.errorCorrectionLevel.getBits()<<3|this.dataMask}equals(e){if(!(e instanceof xt))return!1;const t=e;return this.errorCorrectionLevel===t.errorCorrectionLevel&&this.dataMask===t.dataMask}}xt.FORMAT_INFO_MASK_QR=21522,xt.FORMAT_INFO_DECODE_LOOKUP=[Int32Array.from([21522,0]),Int32Array.from([20773,1]),Int32Array.from([24188,2]),Int32Array.from([23371,3]),Int32Array.from([17913,4]),Int32Array.from([16590,5]),Int32Array.from([20375,6]),Int32Array.from([19104,7]),Int32Array.from([30660,8]),Int32Array.from([29427,9]),Int32Array.from([32170,10]),Int32Array.from([30877,11]),Int32Array.from([26159,12]),Int32Array.from([25368,13]),Int32Array.from([27713,14]),Int32Array.from([26998,15]),Int32Array.from([5769,16]),Int32Array.from([5054,17]),Int32Array.from([7399,18]),Int32Array.from([6608,19]),Int32Array.from([1890,20]),Int32Array.from([597,21]),Int32Array.from([3340,22]),Int32Array.from([2107,23]),Int32Array.from([13663,24]),Int32Array.from([12392,25]),Int32Array.from([16177,26]),Int32Array.from([14854,27]),Int32Array.from([9396,28]),Int32Array.from([8579,29]),Int32Array.from([11994,30]),Int32Array.from([11245,31])];class Et{constructor(e){this.ecCodewordsPerBlock=e;for(var t=arguments.length,r=new Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];this.ecBlocks=r}getECCodewordsPerBlock(){return this.ecCodewordsPerBlock}getNumBlocks(){let e=0;const t=this.ecBlocks;for(const r of t)e+=r.getCount();return e}getTotalECCodewords(){return this.ecCodewordsPerBlock*this.getNumBlocks()}getECBlocks(){return this.ecBlocks}}class Ct{constructor(e,t){this.count=e,this.dataCodewords=t}getCount(){return this.count}getDataCodewords(){return this.dataCodewords}}class St{constructor(e,t){this.versionNumber=e,this.alignmentPatternCenters=t;for(var r=arguments.length,n=new Array(r>2?r-2:0),i=2;i<r;i++)n[i-2]=arguments[i];this.ecBlocks=n;let o=0;const s=n[0].getECCodewordsPerBlock(),a=n[0].getECBlocks();for(const l of a)o+=l.getCount()*(l.getDataCodewords()+s);this.totalCodewords=o}getVersionNumber(){return this.versionNumber}getAlignmentPatternCenters(){return this.alignmentPatternCenters}getTotalCodewords(){return this.totalCodewords}getDimensionForVersion(){return 17+4*this.versionNumber}getECBlocksForLevel(e){return this.ecBlocks[e.getValue()]}static getProvisionalVersionForDimension(e){if(e%4!==1)throw new E;try{return this.getVersionForNumber((e-17)/4)}catch(t){throw new E}}static getVersionForNumber(e){if(e<1||e>40)throw new d;return St.VERSIONS[e-1]}static decodeVersionInformation(e){let t=Number.MAX_SAFE_INTEGER,r=0;for(let n=0;n<St.VERSION_DECODE_INFO.length;n++){const i=St.VERSION_DECODE_INFO[n];if(i===e)return St.getVersionForNumber(n+7);const o=xt.numBitsDiffering(e,i);o<t&&(r=n+7,t=o)}return t<=3?St.getVersionForNumber(r):null}buildFunctionPattern(){const e=this.getDimensionForVersion(),t=new T(e);t.setRegion(0,0,9,9),t.setRegion(e-8,0,8,9),t.setRegion(0,e-8,9,8);const r=this.alignmentPatternCenters.length;for(let n=0;n<r;n++){const e=this.alignmentPatternCenters[n]-2;for(let i=0;i<r;i++)0===n&&(0===i||i===r-1)||n===r-1&&0===i||t.setRegion(this.alignmentPatternCenters[i]-2,e,5,5)}return t.setRegion(6,9,1,e-17),t.setRegion(9,6,e-17,1),this.versionNumber>6&&(t.setRegion(e-11,0,3,6),t.setRegion(0,e-11,6,3)),t}toString(){return""+this.versionNumber}}St.VERSION_DECODE_INFO=Int32Array.from([31892,34236,39577,42195,48118,51042,55367,58893,63784,68472,70749,76311,79154,84390,87683,92361,96236,102084,102881,110507,110734,117786,119615,126325,127568,133589,136944,141498,145311,150283,152622,158308,161089,167017]),St.VERSIONS=[new St(1,new Int32Array(0),new Et(7,new Ct(1,19)),new Et(10,new Ct(1,16)),new Et(13,new Ct(1,13)),new Et(17,new Ct(1,9))),new St(2,Int32Array.from([6,18]),new Et(10,new Ct(1,34)),new Et(16,new Ct(1,28)),new Et(22,new Ct(1,22)),new Et(28,new Ct(1,16))),new St(3,Int32Array.from([6,22]),new Et(15,new Ct(1,55)),new Et(26,new Ct(1,44)),new Et(18,new Ct(2,17)),new Et(22,new Ct(2,13))),new St(4,Int32Array.from([6,26]),new Et(20,new Ct(1,80)),new Et(18,new Ct(2,32)),new Et(26,new Ct(2,24)),new Et(16,new Ct(4,9))),new St(5,Int32Array.from([6,30]),new Et(26,new Ct(1,108)),new Et(24,new Ct(2,43)),new Et(18,new Ct(2,15),new Ct(2,16)),new Et(22,new Ct(2,11),new Ct(2,12))),new St(6,Int32Array.from([6,34]),new Et(18,new Ct(2,68)),new Et(16,new Ct(4,27)),new Et(24,new Ct(4,19)),new Et(28,new Ct(4,15))),new St(7,Int32Array.from([6,22,38]),new Et(20,new Ct(2,78)),new Et(18,new Ct(4,31)),new Et(18,new Ct(2,14),new Ct(4,15)),new Et(26,new Ct(4,13),new Ct(1,14))),new St(8,Int32Array.from([6,24,42]),new Et(24,new Ct(2,97)),new Et(22,new Ct(2,38),new Ct(2,39)),new Et(22,new Ct(4,18),new Ct(2,19)),new Et(26,new Ct(4,14),new Ct(2,15))),new St(9,Int32Array.from([6,26,46]),new Et(30,new Ct(2,116)),new Et(22,new Ct(3,36),new Ct(2,37)),new Et(20,new Ct(4,16),new Ct(4,17)),new Et(24,new Ct(4,12),new Ct(4,13))),new St(10,Int32Array.from([6,28,50]),new Et(18,new Ct(2,68),new Ct(2,69)),new Et(26,new Ct(4,43),new Ct(1,44)),new Et(24,new Ct(6,19),new Ct(2,20)),new Et(28,new Ct(6,15),new Ct(2,16))),new St(11,Int32Array.from([6,30,54]),new Et(20,new Ct(4,81)),new Et(30,new Ct(1,50),new Ct(4,51)),new Et(28,new Ct(4,22),new Ct(4,23)),new Et(24,new Ct(3,12),new Ct(8,13))),new St(12,Int32Array.from([6,32,58]),new Et(24,new Ct(2,92),new Ct(2,93)),new Et(22,new Ct(6,36),new Ct(2,37)),new Et(26,new Ct(4,20),new Ct(6,21)),new Et(28,new Ct(7,14),new Ct(4,15))),new St(13,Int32Array.from([6,34,62]),new Et(26,new Ct(4,107)),new Et(22,new Ct(8,37),new Ct(1,38)),new Et(24,new Ct(8,20),new Ct(4,21)),new Et(22,new Ct(12,11),new Ct(4,12))),new St(14,Int32Array.from([6,26,46,66]),new Et(30,new Ct(3,115),new Ct(1,116)),new Et(24,new Ct(4,40),new Ct(5,41)),new Et(20,new Ct(11,16),new Ct(5,17)),new Et(24,new Ct(11,12),new Ct(5,13))),new St(15,Int32Array.from([6,26,48,70]),new Et(22,new Ct(5,87),new Ct(1,88)),new Et(24,new Ct(5,41),new Ct(5,42)),new Et(30,new Ct(5,24),new Ct(7,25)),new Et(24,new Ct(11,12),new Ct(7,13))),new St(16,Int32Array.from([6,26,50,74]),new Et(24,new Ct(5,98),new Ct(1,99)),new Et(28,new Ct(7,45),new Ct(3,46)),new Et(24,new Ct(15,19),new Ct(2,20)),new Et(30,new Ct(3,15),new Ct(13,16))),new St(17,Int32Array.from([6,30,54,78]),new Et(28,new Ct(1,107),new Ct(5,108)),new Et(28,new Ct(10,46),new Ct(1,47)),new Et(28,new Ct(1,22),new Ct(15,23)),new Et(28,new Ct(2,14),new Ct(17,15))),new St(18,Int32Array.from([6,30,56,82]),new Et(30,new Ct(5,120),new Ct(1,121)),new Et(26,new Ct(9,43),new Ct(4,44)),new Et(28,new Ct(17,22),new Ct(1,23)),new Et(28,new Ct(2,14),new Ct(19,15))),new St(19,Int32Array.from([6,30,58,86]),new Et(28,new Ct(3,113),new Ct(4,114)),new Et(26,new Ct(3,44),new Ct(11,45)),new Et(26,new Ct(17,21),new Ct(4,22)),new Et(26,new Ct(9,13),new Ct(16,14))),new St(20,Int32Array.from([6,34,62,90]),new Et(28,new Ct(3,107),new Ct(5,108)),new Et(26,new Ct(3,41),new Ct(13,42)),new Et(30,new Ct(15,24),new Ct(5,25)),new Et(28,new Ct(15,15),new Ct(10,16))),new St(21,Int32Array.from([6,28,50,72,94]),new Et(28,new Ct(4,116),new Ct(4,117)),new Et(26,new Ct(17,42)),new Et(28,new Ct(17,22),new Ct(6,23)),new Et(30,new Ct(19,16),new Ct(6,17))),new St(22,Int32Array.from([6,26,50,74,98]),new Et(28,new Ct(2,111),new Ct(7,112)),new Et(28,new Ct(17,46)),new Et(30,new Ct(7,24),new Ct(16,25)),new Et(24,new Ct(34,13))),new St(23,Int32Array.from([6,30,54,78,102]),new Et(30,new Ct(4,121),new Ct(5,122)),new Et(28,new Ct(4,47),new Ct(14,48)),new Et(30,new Ct(11,24),new Ct(14,25)),new Et(30,new Ct(16,15),new Ct(14,16))),new St(24,Int32Array.from([6,28,54,80,106]),new Et(30,new Ct(6,117),new Ct(4,118)),new Et(28,new Ct(6,45),new Ct(14,46)),new Et(30,new Ct(11,24),new Ct(16,25)),new Et(30,new Ct(30,16),new Ct(2,17))),new St(25,Int32Array.from([6,32,58,84,110]),new Et(26,new Ct(8,106),new Ct(4,107)),new Et(28,new Ct(8,47),new Ct(13,48)),new Et(30,new Ct(7,24),new Ct(22,25)),new Et(30,new Ct(22,15),new Ct(13,16))),new St(26,Int32Array.from([6,30,58,86,114]),new Et(28,new Ct(10,114),new Ct(2,115)),new Et(28,new Ct(19,46),new Ct(4,47)),new Et(28,new Ct(28,22),new Ct(6,23)),new Et(30,new Ct(33,16),new Ct(4,17))),new St(27,Int32Array.from([6,34,62,90,118]),new Et(30,new Ct(8,122),new Ct(4,123)),new Et(28,new Ct(22,45),new Ct(3,46)),new Et(30,new Ct(8,23),new Ct(26,24)),new Et(30,new Ct(12,15),new Ct(28,16))),new St(28,Int32Array.from([6,26,50,74,98,122]),new Et(30,new Ct(3,117),new Ct(10,118)),new Et(28,new Ct(3,45),new Ct(23,46)),new Et(30,new Ct(4,24),new Ct(31,25)),new Et(30,new Ct(11,15),new Ct(31,16))),new St(29,Int32Array.from([6,30,54,78,102,126]),new Et(30,new Ct(7,116),new Ct(7,117)),new Et(28,new Ct(21,45),new Ct(7,46)),new Et(30,new Ct(1,23),new Ct(37,24)),new Et(30,new Ct(19,15),new Ct(26,16))),new St(30,Int32Array.from([6,26,52,78,104,130]),new Et(30,new Ct(5,115),new Ct(10,116)),new Et(28,new Ct(19,47),new Ct(10,48)),new Et(30,new Ct(15,24),new Ct(25,25)),new Et(30,new Ct(23,15),new Ct(25,16))),new St(31,Int32Array.from([6,30,56,82,108,134]),new Et(30,new Ct(13,115),new Ct(3,116)),new Et(28,new Ct(2,46),new Ct(29,47)),new Et(30,new Ct(42,24),new Ct(1,25)),new Et(30,new Ct(23,15),new Ct(28,16))),new St(32,Int32Array.from([6,34,60,86,112,138]),new Et(30,new Ct(17,115)),new Et(28,new Ct(10,46),new Ct(23,47)),new Et(30,new Ct(10,24),new Ct(35,25)),new Et(30,new Ct(19,15),new Ct(35,16))),new St(33,Int32Array.from([6,30,58,86,114,142]),new Et(30,new Ct(17,115),new Ct(1,116)),new Et(28,new Ct(14,46),new Ct(21,47)),new Et(30,new Ct(29,24),new Ct(19,25)),new Et(30,new Ct(11,15),new Ct(46,16))),new St(34,Int32Array.from([6,34,62,90,118,146]),new Et(30,new Ct(13,115),new Ct(6,116)),new Et(28,new Ct(14,46),new Ct(23,47)),new Et(30,new Ct(44,24),new Ct(7,25)),new Et(30,new Ct(59,16),new Ct(1,17))),new St(35,Int32Array.from([6,30,54,78,102,126,150]),new Et(30,new Ct(12,121),new Ct(7,122)),new Et(28,new Ct(12,47),new Ct(26,48)),new Et(30,new Ct(39,24),new Ct(14,25)),new Et(30,new Ct(22,15),new Ct(41,16))),new St(36,Int32Array.from([6,24,50,76,102,128,154]),new Et(30,new Ct(6,121),new Ct(14,122)),new Et(28,new Ct(6,47),new Ct(34,48)),new Et(30,new Ct(46,24),new Ct(10,25)),new Et(30,new Ct(2,15),new Ct(64,16))),new St(37,Int32Array.from([6,28,54,80,106,132,158]),new Et(30,new Ct(17,122),new Ct(4,123)),new Et(28,new Ct(29,46),new Ct(14,47)),new Et(30,new Ct(49,24),new Ct(10,25)),new Et(30,new Ct(24,15),new Ct(46,16))),new St(38,Int32Array.from([6,32,58,84,110,136,162]),new Et(30,new Ct(4,122),new Ct(18,123)),new Et(28,new Ct(13,46),new Ct(32,47)),new Et(30,new Ct(48,24),new Ct(14,25)),new Et(30,new Ct(42,15),new Ct(32,16))),new St(39,Int32Array.from([6,26,54,82,110,138,166]),new Et(30,new Ct(20,117),new Ct(4,118)),new Et(28,new Ct(40,47),new Ct(7,48)),new Et(30,new Ct(43,24),new Ct(22,25)),new Et(30,new Ct(10,15),new Ct(67,16))),new St(40,Int32Array.from([6,30,58,86,114,142,170]),new Et(30,new Ct(19,118),new Ct(6,119)),new Et(28,new Ct(18,47),new Ct(31,48)),new Et(30,new Ct(34,24),new Ct(34,25)),new Et(30,new Ct(20,15),new Ct(61,16)))],function(e){e[e.DATA_MASK_000=0]="DATA_MASK_000",e[e.DATA_MASK_001=1]="DATA_MASK_001",e[e.DATA_MASK_010=2]="DATA_MASK_010",e[e.DATA_MASK_011=3]="DATA_MASK_011",e[e.DATA_MASK_100=4]="DATA_MASK_100",e[e.DATA_MASK_101=5]="DATA_MASK_101",e[e.DATA_MASK_110=6]="DATA_MASK_110",e[e.DATA_MASK_111=7]="DATA_MASK_111"}($||($={}));class At{constructor(e,t){this.value=e,this.isMasked=t}unmaskBitMatrix(e,t){for(let r=0;r<t;r++)for(let n=0;n<t;n++)this.isMasked(r,n)&&e.flip(n,r)}}At.values=new Map([[$.DATA_MASK_000,new At($.DATA_MASK_000,((e,t)=>0===(e+t&1)))],[$.DATA_MASK_001,new At($.DATA_MASK_001,((e,t)=>0===(1&e)))],[$.DATA_MASK_010,new At($.DATA_MASK_010,((e,t)=>t%3===0))],[$.DATA_MASK_011,new At($.DATA_MASK_011,((e,t)=>(e+t)%3===0))],[$.DATA_MASK_100,new At($.DATA_MASK_100,((e,t)=>0===(Math.floor(e/2)+Math.floor(t/3)&1)))],[$.DATA_MASK_101,new At($.DATA_MASK_101,((e,t)=>e*t%6===0))],[$.DATA_MASK_110,new At($.DATA_MASK_110,((e,t)=>e*t%6<3))],[$.DATA_MASK_111,new At($.DATA_MASK_111,((e,t)=>0===(e+t+e*t%3&1)))]]);class Nt{constructor(e){const t=e.getHeight();if(t<21||1!==(3&t))throw new E;this.bitMatrix=e}readFormatInformation(){if(null!==this.parsedFormatInfo&&void 0!==this.parsedFormatInfo)return this.parsedFormatInfo;let e=0;for(let i=0;i<6;i++)e=this.copyBit(i,8,e);e=this.copyBit(7,8,e),e=this.copyBit(8,8,e),e=this.copyBit(8,7,e);for(let i=5;i>=0;i--)e=this.copyBit(8,i,e);const t=this.bitMatrix.getHeight();let r=0;const n=t-7;for(let i=t-1;i>=n;i--)r=this.copyBit(8,i,r);for(let i=t-8;i<t;i++)r=this.copyBit(i,8,r);if(this.parsedFormatInfo=xt.decodeFormatInformation(e,r),null!==this.parsedFormatInfo)return this.parsedFormatInfo;throw new E}readVersion(){if(null!==this.parsedVersion&&void 0!==this.parsedVersion)return this.parsedVersion;const e=this.bitMatrix.getHeight(),t=Math.floor((e-17)/4);if(t<=6)return St.getVersionForNumber(t);let r=0;const n=e-11;for(let o=5;o>=0;o--)for(let t=e-9;t>=n;t--)r=this.copyBit(t,o,r);let i=St.decodeVersionInformation(r);if(null!==i&&i.getDimensionForVersion()===e)return this.parsedVersion=i,i;r=0;for(let o=5;o>=0;o--)for(let t=e-9;t>=n;t--)r=this.copyBit(o,t,r);if(i=St.decodeVersionInformation(r),null!==i&&i.getDimensionForVersion()===e)return this.parsedVersion=i,i;throw new E}copyBit(e,t,r){return(this.isMirror?this.bitMatrix.get(t,e):this.bitMatrix.get(e,t))?r<<1|1:r<<1}readCodewords(){const e=this.readFormatInformation(),t=this.readVersion(),r=At.values.get(e.getDataMask()),n=this.bitMatrix.getHeight();r.unmaskBitMatrix(this.bitMatrix,n);const i=t.buildFunctionPattern();let o=!0;const s=new Uint8Array(t.getTotalCodewords());let a=0,l=0,c=0;for(let u=n-1;u>0;u-=2){6===u&&u--;for(let e=0;e<n;e++){const t=o?n-1-e:e;for(let e=0;e<2;e++)i.get(u-e,t)||(c++,l<<=1,this.bitMatrix.get(u-e,t)&&(l|=1),8===c&&(s[a++]=l,c=0,l=0))}o=!o}if(a!==t.getTotalCodewords())throw new E;return s}remask(){if(null===this.parsedFormatInfo)return;const e=At.values[this.parsedFormatInfo.getDataMask()],t=this.bitMatrix.getHeight();e.unmaskBitMatrix(this.bitMatrix,t)}setMirror(e){this.parsedVersion=null,this.parsedFormatInfo=null,this.isMirror=e}mirror(){const e=this.bitMatrix;for(let t=0,r=e.getWidth();t<r;t++)for(let n=t+1,i=e.getHeight();n<i;n++)e.get(t,n)!==e.get(n,t)&&(e.flip(n,t),e.flip(t,n))}}class It{constructor(e,t){this.numDataCodewords=e,this.codewords=t}static getDataBlocks(e,t,r){if(e.length!==t.getTotalCodewords())throw new d;const n=t.getECBlocksForLevel(r);let i=0;const o=n.getECBlocks();for(const d of o)i+=d.getCount();const s=new Array(i);let a=0;for(const d of o)for(let e=0;e<d.getCount();e++){const e=d.getDataCodewords(),t=n.getECCodewordsPerBlock()+e;s[a++]=new It(e,new Uint8Array(t))}const l=s[0].codewords.length;let c=s.length-1;for(;c>=0&&s[c].codewords.length!==l;)c--;c++;const u=l-n.getECCodewordsPerBlock();let h=0;for(let d=0;d<u;d++)for(let t=0;t<a;t++)s[t].codewords[d]=e[h++];for(let d=c;d<a;d++)s[d].codewords[u]=e[h++];const f=s[0].codewords.length;for(let d=u;d<f;d++)for(let t=0;t<a;t++){const r=t<c?d:d+1;s[t].codewords[r]=e[h++]}return s}getNumDataCodewords(){return this.numDataCodewords}getCodewords(){return this.codewords}}!function(e){e[e.TERMINATOR=0]="TERMINATOR",e[e.NUMERIC=1]="NUMERIC",e[e.ALPHANUMERIC=2]="ALPHANUMERIC",e[e.STRUCTURED_APPEND=3]="STRUCTURED_APPEND",e[e.BYTE=4]="BYTE",e[e.ECI=5]="ECI",e[e.KANJI=6]="KANJI",e[e.FNC1_FIRST_POSITION=7]="FNC1_FIRST_POSITION",e[e.FNC1_SECOND_POSITION=8]="FNC1_SECOND_POSITION",e[e.HANZI=9]="HANZI"}(X||(X={}));class Tt{constructor(e,t,r,n){this.value=e,this.stringValue=t,this.characterCountBitsForVersions=r,this.bits=n,Tt.FOR_BITS.set(n,this),Tt.FOR_VALUE.set(e,this)}static forBits(e){const t=Tt.FOR_BITS.get(e);if(void 0===t)throw new d;return t}getCharacterCountBits(e){const t=e.getVersionNumber();let r;return r=t<=9?0:t<=26?1:2,this.characterCountBitsForVersions[r]}getValue(){return this.value}getBits(){return this.bits}equals(e){if(!(e instanceof Tt))return!1;const t=e;return this.value===t.value}toString(){return this.stringValue}}Tt.FOR_BITS=new Map,Tt.FOR_VALUE=new Map,Tt.TERMINATOR=new Tt(X.TERMINATOR,"TERMINATOR",Int32Array.from([0,0,0]),0),Tt.NUMERIC=new Tt(X.NUMERIC,"NUMERIC",Int32Array.from([10,12,14]),1),Tt.ALPHANUMERIC=new Tt(X.ALPHANUMERIC,"ALPHANUMERIC",Int32Array.from([9,11,13]),2),Tt.STRUCTURED_APPEND=new Tt(X.STRUCTURED_APPEND,"STRUCTURED_APPEND",Int32Array.from([0,0,0]),3),Tt.BYTE=new Tt(X.BYTE,"BYTE",Int32Array.from([8,16,16]),4),Tt.ECI=new Tt(X.ECI,"ECI",Int32Array.from([0,0,0]),7),Tt.KANJI=new Tt(X.KANJI,"KANJI",Int32Array.from([8,10,12]),8),Tt.FNC1_FIRST_POSITION=new Tt(X.FNC1_FIRST_POSITION,"FNC1_FIRST_POSITION",Int32Array.from([0,0,0]),5),Tt.FNC1_SECOND_POSITION=new Tt(X.FNC1_SECOND_POSITION,"FNC1_SECOND_POSITION",Int32Array.from([0,0,0]),9),Tt.HANZI=new Tt(X.HANZI,"HANZI",Int32Array.from([8,10,12]),13);class Ot{static decode(e,t,r,n){const i=new mt(e);let o=new I;const s=new Array;let a=-1,l=-1;try{let e,r=null,c=!1;do{if(i.available()<4)e=Tt.TERMINATOR;else{const t=i.readBits(4);e=Tt.forBits(t)}switch(e){case Tt.TERMINATOR:break;case Tt.FNC1_FIRST_POSITION:case Tt.FNC1_SECOND_POSITION:c=!0;break;case Tt.STRUCTURED_APPEND:if(i.available()<16)throw new E;a=i.readBits(8),l=i.readBits(8);break;case Tt.ECI:const u=Ot.parseECIValue(i);if(r=C.getCharacterSetECIByValue(u),null===r)throw new E;break;case Tt.HANZI:const d=i.readBits(4),h=i.readBits(e.getCharacterCountBits(t));d===Ot.GB2312_SUBSET&&Ot.decodeHanziSegment(i,o,h);break;default:const f=i.readBits(e.getCharacterCountBits(t));switch(e){case Tt.NUMERIC:Ot.decodeNumericSegment(i,o,f);break;case Tt.ALPHANUMERIC:Ot.decodeAlphanumericSegment(i,o,f,c);break;case Tt.BYTE:Ot.decodeByteSegment(i,o,f,r,s,n);break;case Tt.KANJI:Ot.decodeKanjiSegment(i,o,f);break;default:throw new E}}}while(e!==Tt.TERMINATOR)}catch(c){throw new E}return new Q(e,o.toString(),0===s.length?null:s,null===r?null:r.toString(),a,l)}static decodeHanziSegment(e,t,r){if(13*r>e.available())throw new E;const n=new Uint8Array(2*r);let i=0;for(;r>0;){const t=e.readBits(13);let o=t/96<<8&4294967295|t%96;o+=o<959?41377:42657,n[i]=o>>8&255,n[i+1]=255&o,i+=2,r--}try{t.append(A.decode(n,N.GB2312))}catch(o){throw new E(o)}}static decodeKanjiSegment(e,t,r){if(13*r>e.available())throw new E;const n=new Uint8Array(2*r);let i=0;for(;r>0;){const t=e.readBits(13);let o=t/192<<8&4294967295|t%192;o+=o<7936?33088:49472,n[i]=o>>8,n[i+1]=o,i+=2,r--}try{t.append(A.decode(n,N.SHIFT_JIS))}catch(o){throw new E(o)}}static decodeByteSegment(e,t,r,n,i,o){if(8*r>e.available())throw new E;const s=new Uint8Array(r);for(let c=0;c<r;c++)s[c]=e.readBits(8);let a;a=null===n?N.guessEncoding(s,o):n.getName();try{t.append(A.decode(s,a))}catch(l){throw new E(l)}i.push(s)}static toAlphaNumericChar(e){if(e>=Ot.ALPHANUMERIC_CHARS.length)throw new E;return Ot.ALPHANUMERIC_CHARS[e]}static decodeAlphanumericSegment(e,t,r,n){const i=t.length();for(;r>1;){if(e.available()<11)throw new E;const n=e.readBits(11);t.append(Ot.toAlphaNumericChar(Math.floor(n/45))),t.append(Ot.toAlphaNumericChar(n%45)),r-=2}if(1===r){if(e.available()<6)throw new E;t.append(Ot.toAlphaNumericChar(e.readBits(6)))}if(n)for(let o=i;o<t.length();o++)"%"===t.charAt(o)&&(o<t.length()-1&&"%"===t.charAt(o+1)?t.deleteCharAt(o+1):t.setCharAt(o,String.fromCharCode(29)))}static decodeNumericSegment(e,t,r){for(;r>=3;){if(e.available()<10)throw new E;const n=e.readBits(10);if(n>=1e3)throw new E;t.append(Ot.toAlphaNumericChar(Math.floor(n/100))),t.append(Ot.toAlphaNumericChar(Math.floor(n/10)%10)),t.append(Ot.toAlphaNumericChar(n%10)),r-=3}if(2===r){if(e.available()<7)throw new E;const r=e.readBits(7);if(r>=100)throw new E;t.append(Ot.toAlphaNumericChar(Math.floor(r/10))),t.append(Ot.toAlphaNumericChar(r%10))}else if(1===r){if(e.available()<4)throw new E;const r=e.readBits(4);if(r>=10)throw new E;t.append(Ot.toAlphaNumericChar(r))}}static parseECIValue(e){const t=e.readBits(8);if(0===(128&t))return 127&t;if(128===(192&t))return(63&t)<<8&4294967295|e.readBits(8);if(192===(224&t))return(31&t)<<16&4294967295|e.readBits(16);throw new E}}Ot.ALPHANUMERIC_CHARS="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:",Ot.GB2312_SUBSET=1;class kt{constructor(e){this.mirrored=e}isMirrored(){return this.mirrored}applyMirroredCorrection(e){if(!this.mirrored||null===e||e.length<3)return;const t=e[0];e[0]=e[2],e[2]=t}}class Rt{constructor(){this.rsDecoder=new ne(ee.QR_CODE_FIELD_256)}decodeBooleanArray(e,t){return this.decodeBitMatrix(T.parseFromBooleanArray(e),t)}decodeBitMatrix(e,t){const r=new Nt(e);let n=null;try{return this.decodeBitMatrixParser(r,t)}catch(i){n=i}try{r.remask(),r.setMirror(!0),r.readVersion(),r.readFormatInformation(),r.mirror();const e=this.decodeBitMatrixParser(r,t);return e.setOther(new kt(!0)),e}catch(i){if(null!==n)throw n;throw i}}decodeBitMatrixParser(e,t){const r=e.readVersion(),n=e.readFormatInformation().getErrorCorrectionLevel(),i=e.readCodewords(),o=It.getDataBlocks(i,r,n);let s=0;for(const c of o)s+=c.getNumDataCodewords();const a=new Uint8Array(s);let l=0;for(const c of o){const e=c.getCodewords(),t=c.getNumDataCodewords();this.correctErrors(e,t);for(let r=0;r<t;r++)a[l++]=e[r]}return Ot.decode(a,r,n,t)}correctErrors(e,t){const r=new Int32Array(e);try{this.rsDecoder.decode(r,e.length-t)}catch(n){throw new f}for(let i=0;i<t;i++)e[i]=r[i]}}class Mt extends ae{constructor(e,t,r){super(e,t),this.estimatedModuleSize=r}aboutEquals(e,t,r){if(Math.abs(t-this.getY())<=e&&Math.abs(r-this.getX())<=e){const t=Math.abs(e-this.estimatedModuleSize);return t<=1||t<=this.estimatedModuleSize}return!1}combineEstimate(e,t,r){const n=(this.getX()+t)/2,i=(this.getY()+e)/2,o=(this.estimatedModuleSize+r)/2;return new Mt(n,i,o)}}class jt{constructor(e,t,r,n,i,o,s){this.image=e,this.startX=t,this.startY=r,this.width=n,this.height=i,this.moduleSize=o,this.resultPointCallback=s,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(3)}find(){const e=this.startX,t=this.height,r=e+this.width,n=this.startY+t/2,i=new Int32Array(3),o=this.image;for(let s=0;s<t;s++){const t=n+(0===(1&s)?Math.floor((s+1)/2):-Math.floor((s+1)/2));i[0]=0,i[1]=0,i[2]=0;let a=e;for(;a<r&&!o.get(a,t);)a++;let l=0;for(;a<r;){if(o.get(a,t))if(1===l)i[1]++;else if(2===l){if(this.foundPatternCross(i)){const e=this.handlePossibleCenter(i,t,a);if(null!==e)return e}i[0]=i[2],i[1]=1,i[2]=0,l=1}else i[++l]++;else 1===l&&l++,i[l]++;a++}if(this.foundPatternCross(i)){const e=this.handlePossibleCenter(i,t,r);if(null!==e)return e}}if(0!==this.possibleCenters.length)return this.possibleCenters[0];throw new O}static centerFromEnd(e,t){return t-e[2]-e[1]/2}foundPatternCross(e){const t=this.moduleSize,r=t/2;for(let n=0;n<3;n++)if(Math.abs(t-e[n])>=r)return!1;return!0}crossCheckVertical(e,t,r,n){const i=this.image,o=i.getHeight(),s=this.crossCheckStateCount;s[0]=0,s[1]=0,s[2]=0;let a=e;for(;a>=0&&i.get(t,a)&&s[1]<=r;)s[1]++,a--;if(a<0||s[1]>r)return NaN;for(;a>=0&&!i.get(t,a)&&s[0]<=r;)s[0]++,a--;if(s[0]>r)return NaN;for(a=e+1;a<o&&i.get(t,a)&&s[1]<=r;)s[1]++,a++;if(a===o||s[1]>r)return NaN;for(;a<o&&!i.get(t,a)&&s[2]<=r;)s[2]++,a++;if(s[2]>r)return NaN;const l=s[0]+s[1]+s[2];return 5*Math.abs(l-n)>=2*n?NaN:this.foundPatternCross(s)?jt.centerFromEnd(s,a):NaN}handlePossibleCenter(e,t,r){const n=e[0]+e[1]+e[2],i=jt.centerFromEnd(e,r),o=this.crossCheckVertical(t,i,2*e[1],n);if(!isNaN(o)){const t=(e[0]+e[1]+e[2])/3;for(const e of this.possibleCenters)if(e.aboutEquals(t,o,i))return e.combineEstimate(o,i,t);const r=new Mt(i,o,t);this.possibleCenters.push(r),null!==this.resultPointCallback&&void 0!==this.resultPointCallback&&this.resultPointCallback.foundPossibleResultPoint(r)}return null}}class Dt extends ae{constructor(e,t,r,n){super(e,t),this.estimatedModuleSize=r,this.count=n,void 0===n&&(this.count=1)}getEstimatedModuleSize(){return this.estimatedModuleSize}getCount(){return this.count}aboutEquals(e,t,r){if(Math.abs(t-this.getY())<=e&&Math.abs(r-this.getX())<=e){const t=Math.abs(e-this.estimatedModuleSize);return t<=1||t<=this.estimatedModuleSize}return!1}combineEstimate(e,t,r){const n=this.count+1,i=(this.count*this.getX()+t)/n,o=(this.count*this.getY()+e)/n,s=(this.count*this.estimatedModuleSize+r)/n;return new Dt(i,o,s,n)}}class Pt{constructor(e){this.bottomLeft=e[0],this.topLeft=e[1],this.topRight=e[2]}getBottomLeft(){return this.bottomLeft}getTopLeft(){return this.topLeft}getTopRight(){return this.topRight}}class Lt{constructor(e,t){this.image=e,this.resultPointCallback=t,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(5),this.resultPointCallback=t}getImage(){return this.image}getPossibleCenters(){return this.possibleCenters}find(e){const t=null!==e&&void 0!==e&&void 0!==e.get(x.TRY_HARDER),r=null!==e&&void 0!==e&&void 0!==e.get(x.PURE_BARCODE),n=this.image,i=n.getHeight(),o=n.getWidth();let s=Math.floor(3*i/(4*Lt.MAX_MODULES));(s<Lt.MIN_SKIP||t)&&(s=Lt.MIN_SKIP);let a=!1;const l=new Int32Array(5);for(let u=s-1;u<i&&!a;u+=s){l[0]=0,l[1]=0,l[2]=0,l[3]=0,l[4]=0;let e=0;for(let t=0;t<o;t++)if(n.get(t,u))1===(1&e)&&e++,l[e]++;else if(0===(1&e))if(4===e)if(Lt.foundPatternCross(l)){if(!0!==this.handlePossibleCenter(l,u,t,r)){l[0]=l[2],l[1]=l[3],l[2]=l[4],l[3]=1,l[4]=0,e=3;continue}if(s=2,!0===this.hasSkipped)a=this.haveMultiplyConfirmedCenters();else{const e=this.findRowSkip();e>l[2]&&(u+=e-l[2]-s,t=o-1)}e=0,l[0]=0,l[1]=0,l[2]=0,l[3]=0,l[4]=0}else l[0]=l[2],l[1]=l[3],l[2]=l[4],l[3]=1,l[4]=0,e=3;else l[++e]++;else l[e]++;Lt.foundPatternCross(l)&&!0===this.handlePossibleCenter(l,u,o,r)&&(s=l[0],this.hasSkipped&&(a=this.haveMultiplyConfirmedCenters()))}const c=this.selectBestPatterns();return ae.orderBestPatterns(c),new Pt(c)}static centerFromEnd(e,t){return t-e[4]-e[3]-e[2]/2}static foundPatternCross(e){let t=0;for(let i=0;i<5;i++){const r=e[i];if(0===r)return!1;t+=r}if(t<7)return!1;const r=t/7,n=r/2;return Math.abs(r-e[0])<n&&Math.abs(r-e[1])<n&&Math.abs(3*r-e[2])<3*n&&Math.abs(r-e[3])<n&&Math.abs(r-e[4])<n}getCrossCheckStateCount(){const e=this.crossCheckStateCount;return e[0]=0,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e}crossCheckDiagonal(e,t,r,n){const i=this.getCrossCheckStateCount();let o=0;const s=this.image;for(;e>=o&&t>=o&&s.get(t-o,e-o);)i[2]++,o++;if(e<o||t<o)return!1;for(;e>=o&&t>=o&&!s.get(t-o,e-o)&&i[1]<=r;)i[1]++,o++;if(e<o||t<o||i[1]>r)return!1;for(;e>=o&&t>=o&&s.get(t-o,e-o)&&i[0]<=r;)i[0]++,o++;if(i[0]>r)return!1;const a=s.getHeight(),l=s.getWidth();for(o=1;e+o<a&&t+o<l&&s.get(t+o,e+o);)i[2]++,o++;if(e+o>=a||t+o>=l)return!1;for(;e+o<a&&t+o<l&&!s.get(t+o,e+o)&&i[3]<r;)i[3]++,o++;if(e+o>=a||t+o>=l||i[3]>=r)return!1;for(;e+o<a&&t+o<l&&s.get(t+o,e+o)&&i[4]<r;)i[4]++,o++;if(i[4]>=r)return!1;const c=i[0]+i[1]+i[2]+i[3]+i[4];return Math.abs(c-n)<2*n&&Lt.foundPatternCross(i)}crossCheckVertical(e,t,r,n){const i=this.image,o=i.getHeight(),s=this.getCrossCheckStateCount();let a=e;for(;a>=0&&i.get(t,a);)s[2]++,a--;if(a<0)return NaN;for(;a>=0&&!i.get(t,a)&&s[1]<=r;)s[1]++,a--;if(a<0||s[1]>r)return NaN;for(;a>=0&&i.get(t,a)&&s[0]<=r;)s[0]++,a--;if(s[0]>r)return NaN;for(a=e+1;a<o&&i.get(t,a);)s[2]++,a++;if(a===o)return NaN;for(;a<o&&!i.get(t,a)&&s[3]<r;)s[3]++,a++;if(a===o||s[3]>=r)return NaN;for(;a<o&&i.get(t,a)&&s[4]<r;)s[4]++,a++;if(s[4]>=r)return NaN;const l=s[0]+s[1]+s[2]+s[3]+s[4];return 5*Math.abs(l-n)>=2*n?NaN:Lt.foundPatternCross(s)?Lt.centerFromEnd(s,a):NaN}crossCheckHorizontal(e,t,r,n){const i=this.image,o=i.getWidth(),s=this.getCrossCheckStateCount();let a=e;for(;a>=0&&i.get(a,t);)s[2]++,a--;if(a<0)return NaN;for(;a>=0&&!i.get(a,t)&&s[1]<=r;)s[1]++,a--;if(a<0||s[1]>r)return NaN;for(;a>=0&&i.get(a,t)&&s[0]<=r;)s[0]++,a--;if(s[0]>r)return NaN;for(a=e+1;a<o&&i.get(a,t);)s[2]++,a++;if(a===o)return NaN;for(;a<o&&!i.get(a,t)&&s[3]<r;)s[3]++,a++;if(a===o||s[3]>=r)return NaN;for(;a<o&&i.get(a,t)&&s[4]<r;)s[4]++,a++;if(s[4]>=r)return NaN;const l=s[0]+s[1]+s[2]+s[3]+s[4];return 5*Math.abs(l-n)>=n?NaN:Lt.foundPatternCross(s)?Lt.centerFromEnd(s,a):NaN}handlePossibleCenter(e,t,r,n){const i=e[0]+e[1]+e[2]+e[3]+e[4];let o=Lt.centerFromEnd(e,r),s=this.crossCheckVertical(t,Math.floor(o),e[2],i);if(!isNaN(s)&&(o=this.crossCheckHorizontal(Math.floor(o),Math.floor(s),e[2],i),!isNaN(o)&&(!n||this.crossCheckDiagonal(Math.floor(s),Math.floor(o),e[2],i)))){const e=i/7;let t=!1;const r=this.possibleCenters;for(let n=0,i=r.length;n<i;n++){const i=r[n];if(i.aboutEquals(e,s,o)){r[n]=i.combineEstimate(s,o,e),t=!0;break}}if(!t){const t=new Dt(o,s,e);r.push(t),null!==this.resultPointCallback&&void 0!==this.resultPointCallback&&this.resultPointCallback.foundPossibleResultPoint(t)}return!0}return!1}findRowSkip(){if(this.possibleCenters.length<=1)return 0;let e=null;for(const t of this.possibleCenters)if(t.getCount()>=Lt.CENTER_QUORUM){if(null!=e)return this.hasSkipped=!0,Math.floor((Math.abs(e.getX()-t.getX())-Math.abs(e.getY()-t.getY()))/2);e=t}return 0}haveMultiplyConfirmedCenters(){let e=0,t=0;const r=this.possibleCenters.length;for(const o of this.possibleCenters)o.getCount()>=Lt.CENTER_QUORUM&&(e++,t+=o.getEstimatedModuleSize());if(e<3)return!1;const n=t/r;let i=0;for(const o of this.possibleCenters)i+=Math.abs(o.getEstimatedModuleSize()-n);return i<=.05*t}selectBestPatterns(){const e=this.possibleCenters.length;if(e<3)throw new O;const t=this.possibleCenters;let r;if(e>3){let n=0,i=0;for(const e of this.possibleCenters){const t=e.getEstimatedModuleSize();n+=t,i+=t*t}r=n/e;let o=Math.sqrt(i/e-r*r);t.sort(((e,t)=>{const n=Math.abs(t.getEstimatedModuleSize()-r),i=Math.abs(e.getEstimatedModuleSize()-r);return n<i?-1:n>i?1:0}));const s=Math.max(.2*r,o);for(let e=0;e<t.length&&t.length>3;e++){const n=t[e];Math.abs(n.getEstimatedModuleSize()-r)>s&&(t.splice(e,1),e--)}}if(t.length>3){let e=0;for(const r of t)e+=r.getEstimatedModuleSize();r=e/t.length,t.sort(((e,t)=>{if(t.getCount()===e.getCount()){const n=Math.abs(t.getEstimatedModuleSize()-r),i=Math.abs(e.getEstimatedModuleSize()-r);return n<i?1:n>i?-1:0}return t.getCount()-e.getCount()})),t.splice(3)}return[t[0],t[1],t[2]]}}Lt.CENTER_QUORUM=2,Lt.MIN_SKIP=3,Lt.MAX_MODULES=57;class Bt{constructor(e){this.image=e}getImage(){return this.image}getResultPointCallback(){return this.resultPointCallback}detect(e){this.resultPointCallback=null===e||void 0===e?null:e.get(x.NEED_RESULT_POINT_CALLBACK);const t=new Lt(this.image,this.resultPointCallback).find(e);return this.processFinderPatternInfo(t)}processFinderPatternInfo(e){const t=e.getTopLeft(),r=e.getTopRight(),n=e.getBottomLeft(),i=this.calculateModuleSize(t,r,n);if(i<1)throw new O("No pattern found in proccess finder.");const o=Bt.computeDimension(t,r,n,i),s=St.getProvisionalVersionForDimension(o),a=s.getDimensionForVersion()-7;let l=null;if(s.getAlignmentPatternCenters().length>0){const e=r.getX()-t.getX()+n.getX(),o=r.getY()-t.getY()+n.getY(),s=1-3/a,c=Math.floor(t.getX()+s*(e-t.getX())),u=Math.floor(t.getY()+s*(o-t.getY()));for(let t=4;t<=16;t<<=1)try{l=this.findAlignmentInRegion(i,c,u,t);break}catch(h){if(!(h instanceof O))throw h}}const c=Bt.createTransform(t,r,n,l,o),u=Bt.sampleGrid(this.image,c,o);let d;return d=null===l?[n,t,r]:[n,t,r,l],new le(u,d)}static createTransform(e,t,r,n,i){const o=i-3.5;let s,a,l,c;return null!==n?(s=n.getX(),a=n.getY(),l=o-3,c=l):(s=t.getX()-e.getX()+r.getX(),a=t.getY()-e.getY()+r.getY(),l=o,c=o),he.quadrilateralToQuadrilateral(3.5,3.5,o,3.5,l,c,3.5,o,e.getX(),e.getY(),t.getX(),t.getY(),s,a,r.getX(),r.getY())}static sampleGrid(e,t,r){return pe.getInstance().sampleGridWithTransform(e,r,r,t)}static computeDimension(e,t,r,n){const i=oe.round(ae.distance(e,t)/n),o=oe.round(ae.distance(e,r)/n);let s=Math.floor((i+o)/2)+7;switch(3&s){case 0:s++;break;case 2:s--;break;case 3:throw new O("Dimensions could be not found.")}return s}calculateModuleSize(e,t,r){return(this.calculateModuleSizeOneWay(e,t)+this.calculateModuleSizeOneWay(e,r))/2}calculateModuleSizeOneWay(e,t){const r=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(e.getX()),Math.floor(e.getY()),Math.floor(t.getX()),Math.floor(t.getY())),n=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(t.getX()),Math.floor(t.getY()),Math.floor(e.getX()),Math.floor(e.getY()));return isNaN(r)?n/7:isNaN(n)?r/7:(r+n)/14}sizeOfBlackWhiteBlackRunBothWays(e,t,r,n){let i=this.sizeOfBlackWhiteBlackRun(e,t,r,n),o=1,s=e-(r-e);s<0?(o=e/(e-s),s=0):s>=this.image.getWidth()&&(o=(this.image.getWidth()-1-e)/(s-e),s=this.image.getWidth()-1);let a=Math.floor(t-(n-t)*o);return o=1,a<0?(o=t/(t-a),a=0):a>=this.image.getHeight()&&(o=(this.image.getHeight()-1-t)/(a-t),a=this.image.getHeight()-1),s=Math.floor(e+(s-e)*o),i+=this.sizeOfBlackWhiteBlackRun(e,t,s,a),i-1}sizeOfBlackWhiteBlackRun(e,t,r,n){const i=Math.abs(n-t)>Math.abs(r-e);if(i){let i=e;e=t,t=i,i=r,r=n,n=i}const o=Math.abs(r-e),s=Math.abs(n-t);let a=-o/2;const l=e<r?1:-1,c=t<n?1:-1;let u=0;const d=r+l;for(let h=e,f=t;h!==d;h+=l){const r=i?f:h,l=i?h:f;if(1===u===this.image.get(r,l)){if(2===u)return oe.distance(h,f,e,t);u++}if(a+=s,a>0){if(f===n)break;f+=c,a-=o}}return 2===u?oe.distance(r+l,n,e,t):NaN}findAlignmentInRegion(e,t,r,n){const i=Math.floor(n*e),o=Math.max(0,t-i),s=Math.min(this.image.getWidth()-1,t+i);if(s-o<3*e)throw new O("Alignment top exceeds estimated module size.");const a=Math.max(0,r-i),l=Math.min(this.image.getHeight()-1,r+i);if(l-a<3*e)throw new O("Alignment bottom exceeds estimated module size.");return new jt(this.image,o,a,s-o,l-a,e,this.resultPointCallback).find()}}class Ft{constructor(){this.decoder=new Rt}getDecoder(){return this.decoder}decode(e,t){let r,n;if(void 0!==t&&null!==t&&void 0!==t.get(x.PURE_BARCODE)){const i=Ft.extractPureBits(e.getBlackMatrix());r=this.decoder.decodeBitMatrix(i,t),n=Ft.NO_POINTS}else{const i=new Bt(e.getBlackMatrix()).detect(t);r=this.decoder.decodeBitMatrix(i.getBits(),t),n=i.getPoints()}r.getOther()instanceof kt&&r.getOther().applyMirroredCorrection(n);const i=new U(r.getText(),r.getRawBytes(),void 0,n,H.QR_CODE,void 0),o=r.getByteSegments();null!==o&&i.putMetadata(q.BYTE_SEGMENTS,o);const s=r.getECLevel();return null!==s&&i.putMetadata(q.ERROR_CORRECTION_LEVEL,s),r.hasStructuredAppend()&&(i.putMetadata(q.STRUCTURED_APPEND_SEQUENCE,r.getStructuredAppendSequenceNumber()),i.putMetadata(q.STRUCTURED_APPEND_PARITY,r.getStructuredAppendParity())),i}reset(){}static extractPureBits(e){const t=e.getTopLeftOnBit(),r=e.getBottomRightOnBit();if(null===t||null===r)throw new O;const n=this.moduleSize(t,e);let i=t[1],o=r[1],s=t[0],a=r[0];if(s>=a||i>=o)throw new O;if(o-i!==a-s&&(a=s+(o-i),a>=e.getWidth()))throw new O;const l=Math.round((a-s+1)/n),c=Math.round((o-i+1)/n);if(l<=0||c<=0)throw new O;if(c!==l)throw new O;const u=Math.floor(n/2);i+=u,s+=u;const d=s+Math.floor((l-1)*n)-a;if(d>0){if(d>u)throw new O;s-=d}const h=i+Math.floor((c-1)*n)-o;if(h>0){if(h>u)throw new O;i-=h}const f=new T(l,c);for(let p=0;p<c;p++){const t=i+Math.floor(p*n);for(let r=0;r<l;r++)e.get(s+Math.floor(r*n),t)&&f.set(r,p)}return f}static moduleSize(e,t){const r=t.getHeight(),n=t.getWidth();let i=e[0],o=e[1],s=!0,a=0;for(;i<n&&o<r;){if(s!==t.get(i,o)){if(5===++a)break;s=!s}i++,o++}if(i===n||o===r)throw new O;return(i-e[0])/7}}Ft.NO_POINTS=new Array;class Ut{PDF417Common(){}static getBitCountSum(e){return oe.sum(e)}static toIntArray(e){if(null==e||!e.length)return Ut.EMPTY_INT_ARRAY;const t=new Int32Array(e.length);let r=0;for(const n of e)t[r++]=n;return t}static getCodeword(e){const t=w.binarySearch(Ut.SYMBOL_TABLE,262143&e);return t<0?-1:(Ut.CODEWORD_TABLE[t]-1)%Ut.NUMBER_OF_CODEWORDS}}Ut.NUMBER_OF_CODEWORDS=929,Ut.MAX_CODEWORDS_IN_BARCODE=Ut.NUMBER_OF_CODEWORDS-1,Ut.MIN_ROWS_IN_BARCODE=3,Ut.MAX_ROWS_IN_BARCODE=90,Ut.MODULES_IN_CODEWORD=17,Ut.MODULES_IN_STOP_PATTERN=18,Ut.BARS_IN_MODULE=8,Ut.EMPTY_INT_ARRAY=new Int32Array([]),Ut.SYMBOL_TABLE=Int32Array.from([66142,66170,66206,66236,66290,66292,66350,66382,66396,66454,66470,66476,66594,66600,66614,66626,66628,66632,66640,66654,66662,66668,66682,66690,66718,66720,66748,66758,66776,66798,66802,66804,66820,66824,66832,66846,66848,66876,66880,66936,66950,66956,66968,66992,67006,67022,67036,67042,67044,67048,67062,67118,67150,67164,67214,67228,67256,67294,67322,67350,67366,67372,67398,67404,67416,67438,67474,67476,67490,67492,67496,67510,67618,67624,67650,67656,67664,67678,67686,67692,67706,67714,67716,67728,67742,67744,67772,67782,67788,67800,67822,67826,67828,67842,67848,67870,67872,67900,67904,67960,67974,67992,68016,68030,68046,68060,68066,68068,68072,68086,68104,68112,68126,68128,68156,68160,68216,68336,68358,68364,68376,68400,68414,68448,68476,68494,68508,68536,68546,68548,68552,68560,68574,68582,68588,68654,68686,68700,68706,68708,68712,68726,68750,68764,68792,68802,68804,68808,68816,68830,68838,68844,68858,68878,68892,68920,68976,68990,68994,68996,69e3,69008,69022,69024,69052,69062,69068,69080,69102,69106,69108,69142,69158,69164,69190,69208,69230,69254,69260,69272,69296,69310,69326,69340,69386,69394,69396,69410,69416,69430,69442,69444,69448,69456,69470,69478,69484,69554,69556,69666,69672,69698,69704,69712,69726,69754,69762,69764,69776,69790,69792,69820,69830,69836,69848,69870,69874,69876,69890,69918,69920,69948,69952,70008,70022,70040,70064,70078,70094,70108,70114,70116,70120,70134,70152,70174,70176,70264,70384,70412,70448,70462,70496,70524,70542,70556,70584,70594,70600,70608,70622,70630,70636,70664,70672,70686,70688,70716,70720,70776,70896,71136,71180,71192,71216,71230,71264,71292,71360,71416,71452,71480,71536,71550,71554,71556,71560,71568,71582,71584,71612,71622,71628,71640,71662,71726,71732,71758,71772,71778,71780,71784,71798,71822,71836,71864,71874,71880,71888,71902,71910,71916,71930,71950,71964,71992,72048,72062,72066,72068,72080,72094,72096,72124,72134,72140,72152,72174,72178,72180,72206,72220,72248,72304,72318,72416,72444,72456,72464,72478,72480,72508,72512,72568,72588,72600,72624,72638,72654,72668,72674,72676,72680,72694,72726,72742,72748,72774,72780,72792,72814,72838,72856,72880,72894,72910,72924,72930,72932,72936,72950,72966,72972,72984,73008,73022,73056,73084,73102,73116,73144,73156,73160,73168,73182,73190,73196,73210,73226,73234,73236,73250,73252,73256,73270,73282,73284,73296,73310,73318,73324,73346,73348,73352,73360,73374,73376,73404,73414,73420,73432,73454,73498,73518,73522,73524,73550,73564,73570,73572,73576,73590,73800,73822,73858,73860,73872,73886,73888,73916,73944,73970,73972,73992,74014,74016,74044,74048,74104,74118,74136,74160,74174,74210,74212,74216,74230,74244,74256,74270,74272,74360,74480,74502,74508,74544,74558,74592,74620,74638,74652,74680,74690,74696,74704,74726,74732,74782,74784,74812,74992,75232,75288,75326,75360,75388,75456,75512,75576,75632,75646,75650,75652,75664,75678,75680,75708,75718,75724,75736,75758,75808,75836,75840,75896,76016,76256,76736,76824,76848,76862,76896,76924,76992,77048,77296,77340,77368,77424,77438,77536,77564,77572,77576,77584,77600,77628,77632,77688,77702,77708,77720,77744,77758,77774,77788,77870,77902,77916,77922,77928,77966,77980,78008,78018,78024,78032,78046,78060,78074,78094,78136,78192,78206,78210,78212,78224,78238,78240,78268,78278,78284,78296,78322,78324,78350,78364,78448,78462,78560,78588,78600,78622,78624,78652,78656,78712,78726,78744,78768,78782,78798,78812,78818,78820,78824,78838,78862,78876,78904,78960,78974,79072,79100,79296,79352,79368,79376,79390,79392,79420,79424,79480,79600,79628,79640,79664,79678,79712,79740,79772,79800,79810,79812,79816,79824,79838,79846,79852,79894,79910,79916,79942,79948,79960,79982,79988,80006,80024,80048,80062,80078,80092,80098,80100,80104,80134,80140,80176,80190,80224,80252,80270,80284,80312,80328,80336,80350,80358,80364,80378,80390,80396,80408,80432,80446,80480,80508,80576,80632,80654,80668,80696,80752,80766,80776,80784,80798,80800,80828,80844,80856,80878,80882,80884,80914,80916,80930,80932,80936,80950,80962,80968,80976,80990,80998,81004,81026,81028,81040,81054,81056,81084,81094,81100,81112,81134,81154,81156,81160,81168,81182,81184,81212,81216,81272,81286,81292,81304,81328,81342,81358,81372,81380,81384,81398,81434,81454,81458,81460,81486,81500,81506,81508,81512,81526,81550,81564,81592,81602,81604,81608,81616,81630,81638,81644,81702,81708,81722,81734,81740,81752,81774,81778,81780,82050,82078,82080,82108,82180,82184,82192,82206,82208,82236,82240,82296,82316,82328,82352,82366,82402,82404,82408,82440,82448,82462,82464,82492,82496,82552,82672,82694,82700,82712,82736,82750,82784,82812,82830,82882,82884,82888,82896,82918,82924,82952,82960,82974,82976,83004,83008,83064,83184,83424,83468,83480,83504,83518,83552,83580,83648,83704,83740,83768,83824,83838,83842,83844,83848,83856,83872,83900,83910,83916,83928,83950,83984,84e3,84028,84032,84088,84208,84448,84928,85040,85054,85088,85116,85184,85240,85488,85560,85616,85630,85728,85756,85764,85768,85776,85790,85792,85820,85824,85880,85894,85900,85912,85936,85966,85980,86048,86080,86136,86256,86496,86976,88160,88188,88256,88312,88560,89056,89200,89214,89312,89340,89536,89592,89608,89616,89632,89664,89720,89840,89868,89880,89904,89952,89980,89998,90012,90040,90190,90204,90254,90268,90296,90306,90308,90312,90334,90382,90396,90424,90480,90494,90500,90504,90512,90526,90528,90556,90566,90572,90584,90610,90612,90638,90652,90680,90736,90750,90848,90876,90884,90888,90896,90910,90912,90940,90944,91e3,91014,91020,91032,91056,91070,91086,91100,91106,91108,91112,91126,91150,91164,91192,91248,91262,91360,91388,91584,91640,91664,91678,91680,91708,91712,91768,91888,91928,91952,91966,92e3,92028,92046,92060,92088,92098,92100,92104,92112,92126,92134,92140,92188,92216,92272,92384,92412,92608,92664,93168,93200,93214,93216,93244,93248,93304,93424,93664,93720,93744,93758,93792,93820,93888,93944,93980,94008,94064,94078,94084,94088,94096,94110,94112,94140,94150,94156,94168,94246,94252,94278,94284,94296,94318,94342,94348,94360,94384,94398,94414,94428,94440,94470,94476,94488,94512,94526,94560,94588,94606,94620,94648,94658,94660,94664,94672,94686,94694,94700,94714,94726,94732,94744,94768,94782,94816,94844,94912,94968,94990,95004,95032,95088,95102,95112,95120,95134,95136,95164,95180,95192,95214,95218,95220,95244,95256,95280,95294,95328,95356,95424,95480,95728,95758,95772,95800,95856,95870,95968,95996,96008,96016,96030,96032,96060,96064,96120,96152,96176,96190,96220,96226,96228,96232,96290,96292,96296,96310,96322,96324,96328,96336,96350,96358,96364,96386,96388,96392,96400,96414,96416,96444,96454,96460,96472,96494,96498,96500,96514,96516,96520,96528,96542,96544,96572,96576,96632,96646,96652,96664,96688,96702,96718,96732,96738,96740,96744,96758,96772,96776,96784,96798,96800,96828,96832,96888,97008,97030,97036,97048,97072,97086,97120,97148,97166,97180,97208,97220,97224,97232,97246,97254,97260,97326,97330,97332,97358,97372,97378,97380,97384,97398,97422,97436,97464,97474,97476,97480,97488,97502,97510,97516,97550,97564,97592,97648,97666,97668,97672,97680,97694,97696,97724,97734,97740,97752,97774,97830,97836,97850,97862,97868,97880,97902,97906,97908,97926,97932,97944,97968,97998,98012,98018,98020,98024,98038,98618,98674,98676,98838,98854,98874,98892,98904,98926,98930,98932,98968,99006,99042,99044,99048,99062,99166,99194,99246,99286,99350,99366,99372,99386,99398,99416,99438,99442,99444,99462,99504,99518,99534,99548,99554,99556,99560,99574,99590,99596,99608,99632,99646,99680,99708,99726,99740,99768,99778,99780,99784,99792,99806,99814,99820,99834,99858,99860,99874,99880,99894,99906,99920,99934,99962,99970,99972,99976,99984,99998,1e5,100028,100038,100044,100056,100078,100082,100084,100142,100174,100188,100246,100262,100268,100306,100308,100390,100396,100410,100422,100428,100440,100462,100466,100468,100486,100504,100528,100542,100558,100572,100578,100580,100584,100598,100620,100656,100670,100704,100732,100750,100792,100802,100808,100816,100830,100838,100844,100858,100888,100912,100926,100960,100988,101056,101112,101148,101176,101232,101246,101250,101252,101256,101264,101278,101280,101308,101318,101324,101336,101358,101362,101364,101410,101412,101416,101430,101442,101448,101456,101470,101478,101498,101506,101508,101520,101534,101536,101564,101580,101618,101620,101636,101640,101648,101662,101664,101692,101696,101752,101766,101784,101838,101858,101860,101864,101934,101938,101940,101966,101980,101986,101988,101992,102030,102044,102072,102082,102084,102088,102096,102138,102166,102182,102188,102214,102220,102232,102254,102282,102290,102292,102306,102308,102312,102326,102444,102458,102470,102476,102488,102514,102516,102534,102552,102576,102590,102606,102620,102626,102632,102646,102662,102668,102704,102718,102752,102780,102798,102812,102840,102850,102856,102864,102878,102886,102892,102906,102936,102974,103008,103036,103104,103160,103224,103280,103294,103298,103300,103312,103326,103328,103356,103366,103372,103384,103406,103410,103412,103472,103486,103520,103548,103616,103672,103920,103992,104048,104062,104160,104188,104194,104196,104200,104208,104224,104252,104256,104312,104326,104332,104344,104368,104382,104398,104412,104418,104420,104424,104482,104484,104514,104520,104528,104542,104550,104570,104578,104580,104592,104606,104608,104636,104652,104690,104692,104706,104712,104734,104736,104764,104768,104824,104838,104856,104910,104930,104932,104936,104968,104976,104990,104992,105020,105024,105080,105200,105240,105278,105312,105372,105410,105412,105416,105424,105446,105518,105524,105550,105564,105570,105572,105576,105614,105628,105656,105666,105672,105680,105702,105722,105742,105756,105784,105840,105854,105858,105860,105864,105872,105888,105932,105970,105972,106006,106022,106028,106054,106060,106072,106100,106118,106124,106136,106160,106174,106190,106210,106212,106216,106250,106258,106260,106274,106276,106280,106306,106308,106312,106320,106334,106348,106394,106414,106418,106420,106566,106572,106610,106612,106630,106636,106648,106672,106686,106722,106724,106728,106742,106758,106764,106776,106800,106814,106848,106876,106894,106908,106936,106946,106948,106952,106960,106974,106982,106988,107032,107056,107070,107104,107132,107200,107256,107292,107320,107376,107390,107394,107396,107400,107408,107422,107424,107452,107462,107468,107480,107502,107506,107508,107544,107568,107582,107616,107644,107712,107768,108016,108060,108088,108144,108158,108256,108284,108290,108292,108296,108304,108318,108320,108348,108352,108408,108422,108428,108440,108464,108478,108494,108508,108514,108516,108520,108592,108640,108668,108736,108792,109040,109536,109680,109694,109792,109820,110016,110072,110084,110088,110096,110112,110140,110144,110200,110320,110342,110348,110360,110384,110398,110432,110460,110478,110492,110520,110532,110536,110544,110558,110658,110686,110714,110722,110724,110728,110736,110750,110752,110780,110796,110834,110836,110850,110852,110856,110864,110878,110880,110908,110912,110968,110982,111e3,111054,111074,111076,111080,111108,111112,111120,111134,111136,111164,111168,111224,111344,111372,111422,111456,111516,111554,111556,111560,111568,111590,111632,111646,111648,111676,111680,111736,111856,112096,112152,112224,112252,112320,112440,112514,112516,112520,112528,112542,112544,112588,112686,112718,112732,112782,112796,112824,112834,112836,112840,112848,112870,112890,112910,112924,112952,113008,113022,113026,113028,113032,113040,113054,113056,113100,113138,113140,113166,113180,113208,113264,113278,113376,113404,113416,113424,113440,113468,113472,113560,113614,113634,113636,113640,113686,113702,113708,113734,113740,113752,113778,113780,113798,113804,113816,113840,113854,113870,113890,113892,113896,113926,113932,113944,113968,113982,114016,114044,114076,114114,114116,114120,114128,114150,114170,114194,114196,114210,114212,114216,114242,114244,114248,114256,114270,114278,114306,114308,114312,114320,114334,114336,114364,114380,114420,114458,114478,114482,114484,114510,114524,114530,114532,114536,114842,114866,114868,114970,114994,114996,115042,115044,115048,115062,115130,115226,115250,115252,115278,115292,115298,115300,115304,115318,115342,115394,115396,115400,115408,115422,115430,115436,115450,115478,115494,115514,115526,115532,115570,115572,115738,115758,115762,115764,115790,115804,115810,115812,115816,115830,115854,115868,115896,115906,115912,115920,115934,115942,115948,115962,115996,116024,116080,116094,116098,116100,116104,116112,116126,116128,116156,116166,116172,116184,116206,116210,116212,116246,116262,116268,116282,116294,116300,116312,116334,116338,116340,116358,116364,116376,116400,116414,116430,116444,116450,116452,116456,116498,116500,116514,116520,116534,116546,116548,116552,116560,116574,116582,116588,116602,116654,116694,116714,116762,116782,116786,116788,116814,116828,116834,116836,116840,116854,116878,116892,116920,116930,116936,116944,116958,116966,116972,116986,117006,117048,117104,117118,117122,117124,117136,117150,117152,117180,117190,117196,117208,117230,117234,117236,117304,117360,117374,117472,117500,117506,117508,117512,117520,117536,117564,117568,117624,117638,117644,117656,117680,117694,117710,117724,117730,117732,117736,117750,117782,117798,117804,117818,117830,117848,117874,117876,117894,117936,117950,117966,117986,117988,117992,118022,118028,118040,118064,118078,118112,118140,118172,118210,118212,118216,118224,118238,118246,118266,118306,118312,118338,118352,118366,118374,118394,118402,118404,118408,118416,118430,118432,118460,118476,118514,118516,118574,118578,118580,118606,118620,118626,118628,118632,118678,118694,118700,118730,118738,118740,118830,118834,118836,118862,118876,118882,118884,118888,118902,118926,118940,118968,118978,118980,118984,118992,119006,119014,119020,119034,119068,119096,119152,119166,119170,119172,119176,119184,119198,119200,119228,119238,119244,119256,119278,119282,119284,119324,119352,119408,119422,119520,119548,119554,119556,119560,119568,119582,119584,119612,119616,119672,119686,119692,119704,119728,119742,119758,119772,119778,119780,119784,119798,119920,119934,120032,120060,120256,120312,120324,120328,120336,120352,120384,120440,120560,120582,120588,120600,120624,120638,120672,120700,120718,120732,120760,120770,120772,120776,120784,120798,120806,120812,120870,120876,120890,120902,120908,120920,120946,120948,120966,120972,120984,121008,121022,121038,121058,121060,121064,121078,121100,121112,121136,121150,121184,121212,121244,121282,121284,121288,121296,121318,121338,121356,121368,121392,121406,121440,121468,121536,121592,121656,121730,121732,121736,121744,121758,121760,121804,121842,121844,121890,121922,121924,121928,121936,121950,121958,121978,121986,121988,121992,122e3,122014,122016,122044,122060,122098,122100,122116,122120,122128,122142,122144,122172,122176,122232,122246,122264,122318,122338,122340,122344,122414,122418,122420,122446,122460,122466,122468,122472,122510,122524,122552,122562,122564,122568,122576,122598,122618,122646,122662,122668,122694,122700,122712,122738,122740,122762,122770,122772,122786,122788,122792,123018,123026,123028,123042,123044,123048,123062,123098,123146,123154,123156,123170,123172,123176,123190,123202,123204,123208,123216,123238,123244,123258,123290,123314,123316,123402,123410,123412,123426,123428,123432,123446,123458,123464,123472,123486,123494,123500,123514,123522,123524,123528,123536,123552,123580,123590,123596,123608,123630,123634,123636,123674,123698,123700,123740,123746,123748,123752,123834,123914,123922,123924,123938,123944,123958,123970,123976,123984,123998,124006,124012,124026,124034,124036,124048,124062,124064,124092,124102,124108,124120,124142,124146,124148,124162,124164,124168,124176,124190,124192,124220,124224,124280,124294,124300,124312,124336,124350,124366,124380,124386,124388,124392,124406,124442,124462,124466,124468,124494,124508,124514,124520,124558,124572,124600,124610,124612,124616,124624,124646,124666,124694,124710,124716,124730,124742,124748,124760,124786,124788,124818,124820,124834,124836,124840,124854,124946,124948,124962,124964,124968,124982,124994,124996,125e3,125008,125022,125030,125036,125050,125058,125060,125064,125072,125086,125088,125116,125126,125132,125144,125166,125170,125172,125186,125188,125192,125200,125216,125244,125248,125304,125318,125324,125336,125360,125374,125390,125404,125410,125412,125416,125430,125444,125448,125456,125472,125504,125560,125680,125702,125708,125720,125744,125758,125792,125820,125838,125852,125880,125890,125892,125896,125904,125918,125926,125932,125978,125998,126002,126004,126030,126044,126050,126052,126056,126094,126108,126136,126146,126148,126152,126160,126182,126202,126222,126236,126264,126320,126334,126338,126340,126344,126352,126366,126368,126412,126450,126452,126486,126502,126508,126522,126534,126540,126552,126574,126578,126580,126598,126604,126616,126640,126654,126670,126684,126690,126692,126696,126738,126754,126756,126760,126774,126786,126788,126792,126800,126814,126822,126828,126842,126894,126898,126900,126934,127126,127142,127148,127162,127178,127186,127188,127254,127270,127276,127290,127302,127308,127320,127342,127346,127348,127370,127378,127380,127394,127396,127400,127450,127510,127526,127532,127546,127558,127576,127598,127602,127604,127622,127628,127640,127664,127678,127694,127708,127714,127716,127720,127734,127754,127762,127764,127778,127784,127810,127812,127816,127824,127838,127846,127866,127898,127918,127922,127924,128022,128038,128044,128058,128070,128076,128088,128110,128114,128116,128134,128140,128152,128176,128190,128206,128220,128226,128228,128232,128246,128262,128268,128280,128304,128318,128352,128380,128398,128412,128440,128450,128452,128456,128464,128478,128486,128492,128506,128522,128530,128532,128546,128548,128552,128566,128578,128580,128584,128592,128606,128614,128634,128642,128644,128648,128656,128670,128672,128700,128716,128754,128756,128794,128814,128818,128820,128846,128860,128866,128868,128872,128886,128918,128934,128940,128954,128978,128980,129178,129198,129202,129204,129238,129258,129306,129326,129330,129332,129358,129372,129378,129380,129384,129398,129430,129446,129452,129466,129482,129490,129492,129562,129582,129586,129588,129614,129628,129634,129636,129640,129654,129678,129692,129720,129730,129732,129736,129744,129758,129766,129772,129814,129830,129836,129850,129862,129868,129880,129902,129906,129908,129930,129938,129940,129954,129956,129960,129974,130010]),Ut.CODEWORD_TABLE=Int32Array.from([2627,1819,2622,2621,1813,1812,2729,2724,2723,2779,2774,2773,902,896,908,868,865,861,859,2511,873,871,1780,835,2493,825,2491,842,837,844,1764,1762,811,810,809,2483,807,2482,806,2480,815,814,813,812,2484,817,816,1745,1744,1742,1746,2655,2637,2635,2626,2625,2623,2628,1820,2752,2739,2737,2728,2727,2725,2730,2785,2783,2778,2777,2775,2780,787,781,747,739,736,2413,754,752,1719,692,689,681,2371,678,2369,700,697,694,703,1688,1686,642,638,2343,631,2341,627,2338,651,646,643,2345,654,652,1652,1650,1647,1654,601,599,2322,596,2321,594,2319,2317,611,610,608,606,2324,603,2323,615,614,612,1617,1616,1614,1612,616,1619,1618,2575,2538,2536,905,901,898,909,2509,2507,2504,870,867,864,860,2512,875,872,1781,2490,2489,2487,2485,1748,836,834,832,830,2494,827,2492,843,841,839,845,1765,1763,2701,2676,2674,2653,2648,2656,2634,2633,2631,2629,1821,2638,2636,2770,2763,2761,2750,2745,2753,2736,2735,2733,2731,1848,2740,2738,2786,2784,591,588,576,569,566,2296,1590,537,534,526,2276,522,2274,545,542,539,548,1572,1570,481,2245,466,2242,462,2239,492,485,482,2249,496,494,1534,1531,1528,1538,413,2196,406,2191,2188,425,419,2202,415,2199,432,430,427,1472,1467,1464,433,1476,1474,368,367,2160,365,2159,362,2157,2155,2152,378,377,375,2166,372,2165,369,2162,383,381,379,2168,1419,1418,1416,1414,385,1411,384,1423,1422,1420,1424,2461,802,2441,2439,790,786,783,794,2409,2406,2403,750,742,738,2414,756,753,1720,2367,2365,2362,2359,1663,693,691,684,2373,680,2370,702,699,696,704,1690,1687,2337,2336,2334,2332,1624,2329,1622,640,637,2344,634,2342,630,2340,650,648,645,2346,655,653,1653,1651,1649,1655,2612,2597,2595,2571,2568,2565,2576,2534,2529,2526,1787,2540,2537,907,904,900,910,2503,2502,2500,2498,1768,2495,1767,2510,2508,2506,869,866,863,2513,876,874,1782,2720,2713,2711,2697,2694,2691,2702,2672,2670,2664,1828,2678,2675,2647,2646,2644,2642,1823,2639,1822,2654,2652,2650,2657,2771,1855,2765,2762,1850,1849,2751,2749,2747,2754,353,2148,344,342,336,2142,332,2140,345,1375,1373,306,2130,299,2128,295,2125,319,314,311,2132,1354,1352,1349,1356,262,257,2101,253,2096,2093,274,273,267,2107,263,2104,280,278,275,1316,1311,1308,1320,1318,2052,202,2050,2044,2040,219,2063,212,2060,208,2055,224,221,2066,1260,1258,1252,231,1248,229,1266,1264,1261,1268,155,1998,153,1996,1994,1991,1988,165,164,2007,162,2006,159,2003,2e3,172,171,169,2012,166,2010,1186,1184,1182,1179,175,1176,173,1192,1191,1189,1187,176,1194,1193,2313,2307,2305,592,589,2294,2292,2289,578,572,568,2297,580,1591,2272,2267,2264,1547,538,536,529,2278,525,2275,547,544,541,1574,1571,2237,2235,2229,1493,2225,1489,478,2247,470,2244,465,2241,493,488,484,2250,498,495,1536,1533,1530,1539,2187,2186,2184,2182,1432,2179,1430,2176,1427,414,412,2197,409,2195,405,2193,2190,426,424,421,2203,418,2201,431,429,1473,1471,1469,1466,434,1477,1475,2478,2472,2470,2459,2457,2454,2462,803,2437,2432,2429,1726,2443,2440,792,789,785,2401,2399,2393,1702,2389,1699,2411,2408,2405,745,741,2415,758,755,1721,2358,2357,2355,2353,1661,2350,1660,2347,1657,2368,2366,2364,2361,1666,690,687,2374,683,2372,701,698,705,1691,1689,2619,2617,2610,2608,2605,2613,2593,2588,2585,1803,2599,2596,2563,2561,2555,1797,2551,1795,2573,2570,2567,2577,2525,2524,2522,2520,1786,2517,1785,2514,1783,2535,2533,2531,2528,1788,2541,2539,906,903,911,2721,1844,2715,2712,1838,1836,2699,2696,2693,2703,1827,1826,1824,2673,2671,2669,2666,1829,2679,2677,1858,1857,2772,1854,1853,1851,1856,2766,2764,143,1987,139,1986,135,133,131,1984,128,1983,125,1981,138,137,136,1985,1133,1132,1130,112,110,1974,107,1973,104,1971,1969,122,121,119,117,1977,114,1976,124,1115,1114,1112,1110,1117,1116,84,83,1953,81,1952,78,1950,1948,1945,94,93,91,1959,88,1958,85,1955,99,97,95,1961,1086,1085,1083,1081,1078,100,1090,1089,1087,1091,49,47,1917,44,1915,1913,1910,1907,59,1926,56,1925,53,1922,1919,66,64,1931,61,1929,1042,1040,1038,71,1035,70,1032,68,1048,1047,1045,1043,1050,1049,12,10,1869,1867,1864,1861,21,1880,19,1877,1874,1871,28,1888,25,1886,22,1883,982,980,977,974,32,30,991,989,987,984,34,995,994,992,2151,2150,2147,2146,2144,356,355,354,2149,2139,2138,2136,2134,1359,343,341,338,2143,335,2141,348,347,346,1376,1374,2124,2123,2121,2119,1326,2116,1324,310,308,305,2131,302,2129,298,2127,320,318,316,313,2133,322,321,1355,1353,1351,1357,2092,2091,2089,2087,1276,2084,1274,2081,1271,259,2102,256,2100,252,2098,2095,272,269,2108,266,2106,281,279,277,1317,1315,1313,1310,282,1321,1319,2039,2037,2035,2032,1203,2029,1200,1197,207,2053,205,2051,201,2049,2046,2043,220,218,2064,215,2062,211,2059,228,226,223,2069,1259,1257,1254,232,1251,230,1267,1265,1263,2316,2315,2312,2311,2309,2314,2304,2303,2301,2299,1593,2308,2306,590,2288,2287,2285,2283,1578,2280,1577,2295,2293,2291,579,577,574,571,2298,582,581,1592,2263,2262,2260,2258,1545,2255,1544,2252,1541,2273,2271,2269,2266,1550,535,532,2279,528,2277,546,543,549,1575,1573,2224,2222,2220,1486,2217,1485,2214,1482,1479,2238,2236,2234,2231,1496,2228,1492,480,477,2248,473,2246,469,2243,490,487,2251,497,1537,1535,1532,2477,2476,2474,2479,2469,2468,2466,2464,1730,2473,2471,2453,2452,2450,2448,1729,2445,1728,2460,2458,2456,2463,805,804,2428,2427,2425,2423,1725,2420,1724,2417,1722,2438,2436,2434,2431,1727,2444,2442,793,791,788,795,2388,2386,2384,1697,2381,1696,2378,1694,1692,2402,2400,2398,2395,1703,2392,1701,2412,2410,2407,751,748,744,2416,759,757,1807,2620,2618,1806,1805,2611,2609,2607,2614,1802,1801,1799,2594,2592,2590,2587,1804,2600,2598,1794,1793,1791,1789,2564,2562,2560,2557,1798,2554,1796,2574,2572,2569,2578,1847,1846,2722,1843,1842,1840,1845,2716,2714,1835,1834,1832,1830,1839,1837,2700,2698,2695,2704,1817,1811,1810,897,862,1777,829,826,838,1760,1758,808,2481,1741,1740,1738,1743,2624,1818,2726,2776,782,740,737,1715,686,679,695,1682,1680,639,628,2339,647,644,1645,1643,1640,1648,602,600,597,595,2320,593,2318,609,607,604,1611,1610,1608,1606,613,1615,1613,2328,926,924,892,886,899,857,850,2505,1778,824,823,821,819,2488,818,2486,833,831,828,840,1761,1759,2649,2632,2630,2746,2734,2732,2782,2781,570,567,1587,531,527,523,540,1566,1564,476,467,463,2240,486,483,1524,1521,1518,1529,411,403,2192,399,2189,423,416,1462,1457,1454,428,1468,1465,2210,366,363,2158,360,2156,357,2153,376,373,370,2163,1410,1409,1407,1405,382,1402,380,1417,1415,1412,1421,2175,2174,777,774,771,784,732,725,722,2404,743,1716,676,674,668,2363,665,2360,685,1684,1681,626,624,622,2335,620,2333,617,2330,641,635,649,1646,1644,1642,2566,928,925,2530,2527,894,891,888,2501,2499,2496,858,856,854,851,1779,2692,2668,2665,2645,2643,2640,2651,2768,2759,2757,2744,2743,2741,2748,352,1382,340,337,333,1371,1369,307,300,296,2126,315,312,1347,1342,1350,261,258,250,2097,246,2094,271,268,264,1306,1301,1298,276,1312,1309,2115,203,2048,195,2045,191,2041,213,209,2056,1246,1244,1238,225,1234,222,1256,1253,1249,1262,2080,2079,154,1997,150,1995,147,1992,1989,163,160,2004,156,2001,1175,1174,1172,1170,1167,170,1164,167,1185,1183,1180,1177,174,1190,1188,2025,2024,2022,587,586,564,559,556,2290,573,1588,520,518,512,2268,508,2265,530,1568,1565,461,457,2233,450,2230,446,2226,479,471,489,1526,1523,1520,397,395,2185,392,2183,389,2180,2177,410,2194,402,422,1463,1461,1459,1456,1470,2455,799,2433,2430,779,776,773,2397,2394,2390,734,728,724,746,1717,2356,2354,2351,2348,1658,677,675,673,670,667,688,1685,1683,2606,2589,2586,2559,2556,2552,927,2523,2521,2518,2515,1784,2532,895,893,890,2718,2709,2707,2689,2687,2684,2663,2662,2660,2658,1825,2667,2769,1852,2760,2758,142,141,1139,1138,134,132,129,126,1982,1129,1128,1126,1131,113,111,108,105,1972,101,1970,120,118,115,1109,1108,1106,1104,123,1113,1111,82,79,1951,75,1949,72,1946,92,89,86,1956,1077,1076,1074,1072,98,1069,96,1084,1082,1079,1088,1968,1967,48,45,1916,42,1914,39,1911,1908,60,57,54,1923,50,1920,1031,1030,1028,1026,67,1023,65,1020,62,1041,1039,1036,1033,69,1046,1044,1944,1943,1941,11,9,1868,7,1865,1862,1859,20,1878,16,1875,13,1872,970,968,966,963,29,960,26,23,983,981,978,975,33,971,31,990,988,985,1906,1904,1902,993,351,2145,1383,331,330,328,326,2137,323,2135,339,1372,1370,294,293,291,289,2122,286,2120,283,2117,309,303,317,1348,1346,1344,245,244,242,2090,239,2088,236,2085,2082,260,2099,249,270,1307,1305,1303,1300,1314,189,2038,186,2036,183,2033,2030,2026,206,198,2047,194,216,1247,1245,1243,1240,227,1237,1255,2310,2302,2300,2286,2284,2281,565,563,561,558,575,1589,2261,2259,2256,2253,1542,521,519,517,514,2270,511,533,1569,1567,2223,2221,2218,2215,1483,2211,1480,459,456,453,2232,449,474,491,1527,1525,1522,2475,2467,2465,2451,2449,2446,801,800,2426,2424,2421,2418,1723,2435,780,778,775,2387,2385,2382,2379,1695,2375,1693,2396,735,733,730,727,749,1718,2616,2615,2604,2603,2601,2584,2583,2581,2579,1800,2591,2550,2549,2547,2545,1792,2542,1790,2558,929,2719,1841,2710,2708,1833,1831,2690,2688,2686,1815,1809,1808,1774,1756,1754,1737,1736,1734,1739,1816,1711,1676,1674,633,629,1638,1636,1633,1641,598,1605,1604,1602,1600,605,1609,1607,2327,887,853,1775,822,820,1757,1755,1584,524,1560,1558,468,464,1514,1511,1508,1519,408,404,400,1452,1447,1444,417,1458,1455,2208,364,361,358,2154,1401,1400,1398,1396,374,1393,371,1408,1406,1403,1413,2173,2172,772,726,723,1712,672,669,666,682,1678,1675,625,623,621,618,2331,636,632,1639,1637,1635,920,918,884,880,889,849,848,847,846,2497,855,852,1776,2641,2742,2787,1380,334,1367,1365,301,297,1340,1338,1335,1343,255,251,247,1296,1291,1288,265,1302,1299,2113,204,196,192,2042,1232,1230,1224,214,1220,210,1242,1239,1235,1250,2077,2075,151,148,1993,144,1990,1163,1162,1160,1158,1155,161,1152,157,1173,1171,1168,1165,168,1181,1178,2021,2020,2018,2023,585,560,557,1585,516,509,1562,1559,458,447,2227,472,1516,1513,1510,398,396,393,390,2181,386,2178,407,1453,1451,1449,1446,420,1460,2209,769,764,720,712,2391,729,1713,664,663,661,659,2352,656,2349,671,1679,1677,2553,922,919,2519,2516,885,883,881,2685,2661,2659,2767,2756,2755,140,1137,1136,130,127,1125,1124,1122,1127,109,106,102,1103,1102,1100,1098,116,1107,1105,1980,80,76,73,1947,1068,1067,1065,1063,90,1060,87,1075,1073,1070,1080,1966,1965,46,43,40,1912,36,1909,1019,1018,1016,1014,58,1011,55,1008,51,1029,1027,1024,1021,63,1037,1034,1940,1939,1937,1942,8,1866,4,1863,1,1860,956,954,952,949,946,17,14,969,967,964,961,27,957,24,979,976,972,1901,1900,1898,1896,986,1905,1903,350,349,1381,329,327,324,1368,1366,292,290,287,284,2118,304,1341,1339,1337,1345,243,240,237,2086,233,2083,254,1297,1295,1293,1290,1304,2114,190,187,184,2034,180,2031,177,2027,199,1233,1231,1229,1226,217,1223,1241,2078,2076,584,555,554,552,550,2282,562,1586,507,506,504,502,2257,499,2254,515,1563,1561,445,443,441,2219,438,2216,435,2212,460,454,475,1517,1515,1512,2447,798,797,2422,2419,770,768,766,2383,2380,2376,721,719,717,714,731,1714,2602,2582,2580,2548,2546,2543,923,921,2717,2706,2705,2683,2682,2680,1771,1752,1750,1733,1732,1731,1735,1814,1707,1670,1668,1631,1629,1626,1634,1599,1598,1596,1594,1603,1601,2326,1772,1753,1751,1581,1554,1552,1504,1501,1498,1509,1442,1437,1434,401,1448,1445,2206,1392,1391,1389,1387,1384,359,1399,1397,1394,1404,2171,2170,1708,1672,1669,619,1632,1630,1628,1773,1378,1363,1361,1333,1328,1336,1286,1281,1278,248,1292,1289,2111,1218,1216,1210,197,1206,193,1228,1225,1221,1236,2073,2071,1151,1150,1148,1146,152,1143,149,1140,145,1161,1159,1156,1153,158,1169,1166,2017,2016,2014,2019,1582,510,1556,1553,452,448,1506,1500,394,391,387,1443,1441,1439,1436,1450,2207,765,716,713,1709,662,660,657,1673,1671,916,914,879,878,877,882,1135,1134,1121,1120,1118,1123,1097,1096,1094,1092,103,1101,1099,1979,1059,1058,1056,1054,77,1051,74,1066,1064,1061,1071,1964,1963,1007,1006,1004,1002,999,41,996,37,1017,1015,1012,1009,52,1025,1022,1936,1935,1933,1938,942,940,938,935,932,5,2,955,953,950,947,18,943,15,965,962,958,1895,1894,1892,1890,973,1899,1897,1379,325,1364,1362,288,285,1334,1332,1330,241,238,234,1287,1285,1283,1280,1294,2112,188,185,181,178,2028,1219,1217,1215,1212,200,1209,1227,2074,2072,583,553,551,1583,505,503,500,513,1557,1555,444,442,439,436,2213,455,451,1507,1505,1502,796,763,762,760,767,711,710,708,706,2377,718,715,1710,2544,917,915,2681,1627,1597,1595,2325,1769,1749,1747,1499,1438,1435,2204,1390,1388,1385,1395,2169,2167,1704,1665,1662,1625,1623,1620,1770,1329,1282,1279,2109,1214,1207,1222,2068,2065,1149,1147,1144,1141,146,1157,1154,2013,2011,2008,2015,1579,1549,1546,1495,1487,1433,1431,1428,1425,388,1440,2205,1705,658,1667,1664,1119,1095,1093,1978,1057,1055,1052,1062,1962,1960,1005,1003,1e3,997,38,1013,1010,1932,1930,1927,1934,941,939,936,933,6,930,3,951,948,944,1889,1887,1884,1881,959,1893,1891,35,1377,1360,1358,1327,1325,1322,1331,1277,1275,1272,1269,235,1284,2110,1205,1204,1201,1198,182,1195,179,1213,2070,2067,1580,501,1551,1548,440,437,1497,1494,1490,1503,761,709,707,1706,913,912,2198,1386,2164,2161,1621,1766,2103,1208,2058,2054,1145,1142,2005,2002,1999,2009,1488,1429,1426,2200,1698,1659,1656,1975,1053,1957,1954,1001,998,1924,1921,1918,1928,937,934,931,1879,1876,1873,1870,945,1885,1882,1323,1273,1270,2105,1202,1199,1196,1211,2061,2057,1576,1543,1540,1484,1481,1478,1491,1700]);class zt{constructor(e,t){this.bits=e,this.points=t}getBits(){return this.bits}getPoints(){return this.points}}class Ht{static detectMultiple(e,t,r){let n=e.getBlackMatrix(),i=Ht.detect(r,n);return i.length||(n=n.clone(),n.rotate180(),i=Ht.detect(r,n)),new zt(n,i)}static detect(e,t){const r=new Array;let n=0,i=0,o=!1;for(;n<t.getHeight();){const s=Ht.findVertices(t,n,i);if(null!=s[0]||null!=s[3]){if(o=!0,r.push(s),!e)break;null!=s[2]?(i=Math.trunc(s[2].getX()),n=Math.trunc(s[2].getY())):(i=Math.trunc(s[4].getX()),n=Math.trunc(s[4].getY()))}else{if(!o)break;o=!1,i=0;for(const e of r)null!=e[1]&&(n=Math.trunc(Math.max(n,e[1].getY()))),null!=e[3]&&(n=Math.max(n,Math.trunc(e[3].getY())));n+=Ht.ROW_STEP}}return r}static findVertices(e,t,r){const n=e.getHeight(),i=e.getWidth(),o=new Array(8);return Ht.copyToResult(o,Ht.findRowsWithPattern(e,n,i,t,r,Ht.START_PATTERN),Ht.INDEXES_START_PATTERN),null!=o[4]&&(r=Math.trunc(o[4].getX()),t=Math.trunc(o[4].getY())),Ht.copyToResult(o,Ht.findRowsWithPattern(e,n,i,t,r,Ht.STOP_PATTERN),Ht.INDEXES_STOP_PATTERN),o}static copyToResult(e,t,r){for(let n=0;n<r.length;n++)e[r[n]]=t[n]}static findRowsWithPattern(e,t,r,n,i,o){const s=new Array(4);let a=!1;const l=new Int32Array(o.length);for(;n<t;n+=Ht.ROW_STEP){let t=Ht.findGuardPattern(e,i,n,r,!1,o,l);if(null!=t){for(;n>0;){const s=Ht.findGuardPattern(e,i,--n,r,!1,o,l);if(null==s){n++;break}t=s}s[0]=new ae(t[0],n),s[1]=new ae(t[1],n),a=!0;break}}let c=n+1;if(a){let n=0,i=Int32Array.from([Math.trunc(s[0].getX()),Math.trunc(s[1].getX())]);for(;c<t;c++){const t=Ht.findGuardPattern(e,i[0],c,r,!1,o,l);if(null!=t&&Math.abs(i[0]-t[0])<Ht.MAX_PATTERN_DRIFT&&Math.abs(i[1]-t[1])<Ht.MAX_PATTERN_DRIFT)i=t,n=0;else{if(n>Ht.SKIPPED_ROW_COUNT_MAX)break;n++}}c-=n+1,s[2]=new ae(i[0],c),s[3]=new ae(i[1],c)}return c-n<Ht.BARCODE_MIN_HEIGHT&&w.fill(s,null),s}static findGuardPattern(e,t,r,n,i,o,s){w.fillWithin(s,0,s.length,0);let a=t,l=0;for(;e.get(a,r)&&a>0&&l++<Ht.MAX_PIXEL_DRIFT;)a--;let c=a,u=0,d=o.length;for(let h=i;c<n;c++)if(e.get(c,r)!==h)s[u]++;else{if(u===d-1){if(Ht.patternMatchVariance(s,o,Ht.MAX_INDIVIDUAL_VARIANCE)<Ht.MAX_AVG_VARIANCE)return new Int32Array([a,c]);a+=s[0]+s[1],m.arraycopy(s,2,s,0,u-1),s[u-1]=0,s[u]=0,u--}else u++;s[u]=1,h=!h}return u===d-1&&Ht.patternMatchVariance(s,o,Ht.MAX_INDIVIDUAL_VARIANCE)<Ht.MAX_AVG_VARIANCE?new Int32Array([a,c-1]):null}static patternMatchVariance(e,t,r){let n=e.length,i=0,o=0;for(let l=0;l<n;l++)i+=e[l],o+=t[l];if(i<o)return 1/0;let s=i/o;r*=s;let a=0;for(let l=0;l<n;l++){let n=e[l],i=t[l]*s,o=n>i?n-i:i-n;if(o>r)return 1/0;a+=o}return a/i}}Ht.INDEXES_START_PATTERN=Int32Array.from([0,4,1,5]),Ht.INDEXES_STOP_PATTERN=Int32Array.from([6,2,7,3]),Ht.MAX_AVG_VARIANCE=.42,Ht.MAX_INDIVIDUAL_VARIANCE=.8,Ht.START_PATTERN=Int32Array.from([8,1,1,1,1,1,1,3]),Ht.STOP_PATTERN=Int32Array.from([7,1,1,3,1,1,1,2,1]),Ht.MAX_PIXEL_DRIFT=3,Ht.MAX_PATTERN_DRIFT=5,Ht.SKIPPED_ROW_COUNT_MAX=25,Ht.ROW_STEP=5,Ht.BARCODE_MIN_HEIGHT=10;class Vt{constructor(e,t){if(0===t.length)throw new d;this.field=e;let r=t.length;if(r>1&&0===t[0]){let e=1;for(;e<r&&0===t[e];)e++;e===r?this.coefficients=new Int32Array([0]):(this.coefficients=new Int32Array(r-e),m.arraycopy(t,e,this.coefficients,0,this.coefficients.length))}else this.coefficients=t}getCoefficients(){return this.coefficients}getDegree(){return this.coefficients.length-1}isZero(){return 0===this.coefficients[0]}getCoefficient(e){return this.coefficients[this.coefficients.length-1-e]}evaluateAt(e){if(0===e)return this.getCoefficient(0);if(1===e){let e=0;for(let t of this.coefficients)e=this.field.add(e,t);return e}let t=this.coefficients[0],r=this.coefficients.length;for(let n=1;n<r;n++)t=this.field.add(this.field.multiply(e,t),this.coefficients[n]);return t}add(e){if(!this.field.equals(e.field))throw new d("ModulusPolys do not have same ModulusGF field");if(this.isZero())return e;if(e.isZero())return this;let t=this.coefficients,r=e.coefficients;if(t.length>r.length){let e=t;t=r,r=e}let n=new Int32Array(r.length),i=r.length-t.length;m.arraycopy(r,0,n,0,i);for(let o=i;o<r.length;o++)n[o]=this.field.add(t[o-i],r[o]);return new Vt(this.field,n)}subtract(e){if(!this.field.equals(e.field))throw new d("ModulusPolys do not have same ModulusGF field");return e.isZero()?this:this.add(e.negative())}multiply(e){return e instanceof Vt?this.multiplyOther(e):this.multiplyScalar(e)}multiplyOther(e){if(!this.field.equals(e.field))throw new d("ModulusPolys do not have same ModulusGF field");if(this.isZero()||e.isZero())return new Vt(this.field,new Int32Array([0]));let t=this.coefficients,r=t.length,n=e.coefficients,i=n.length,o=new Int32Array(r+i-1);for(let s=0;s<r;s++){let e=t[s];for(let t=0;t<i;t++)o[s+t]=this.field.add(o[s+t],this.field.multiply(e,n[t]))}return new Vt(this.field,o)}negative(){let e=this.coefficients.length,t=new Int32Array(e);for(let r=0;r<e;r++)t[r]=this.field.subtract(0,this.coefficients[r]);return new Vt(this.field,t)}multiplyScalar(e){if(0===e)return new Vt(this.field,new Int32Array([0]));if(1===e)return this;let t=this.coefficients.length,r=new Int32Array(t);for(let n=0;n<t;n++)r[n]=this.field.multiply(this.coefficients[n],e);return new Vt(this.field,r)}multiplyByMonomial(e,t){if(e<0)throw new d;if(0===t)return new Vt(this.field,new Int32Array([0]));let r=this.coefficients.length,n=new Int32Array(r+e);for(let i=0;i<r;i++)n[i]=this.field.multiply(this.coefficients[i],t);return new Vt(this.field,n)}toString(){let e=new I;for(let t=this.getDegree();t>=0;t--){let r=this.getCoefficient(t);0!==r&&(r<0?(e.append(" - "),r=-r):e.length()>0&&e.append(" + "),0!==t&&1===r||e.append(r),0!==t&&(1===t?e.append("x"):(e.append("x^"),e.append(t))))}return e.toString()}}class Wt{add(e,t){return(e+t)%this.modulus}subtract(e,t){return(this.modulus+e-t)%this.modulus}exp(e){return this.expTable[e]}log(e){if(0===e)throw new d;return this.logTable[e]}inverse(e){if(0===e)throw new J;return this.expTable[this.modulus-this.logTable[e]-1]}multiply(e,t){return 0===e||0===t?0:this.expTable[(this.logTable[e]+this.logTable[t])%(this.modulus-1)]}getSize(){return this.modulus}equals(e){return e===this}}class Gt extends Wt{constructor(e,t){super(),this.modulus=e,this.expTable=new Int32Array(e),this.logTable=new Int32Array(e);let r=1;for(let n=0;n<e;n++)this.expTable[n]=r,r=r*t%e;for(let n=0;n<e-1;n++)this.logTable[this.expTable[n]]=n;this.zero=new Vt(this,new Int32Array([0])),this.one=new Vt(this,new Int32Array([1]))}getZero(){return this.zero}getOne(){return this.one}buildMonomial(e,t){if(e<0)throw new d;if(0===t)return this.zero;let r=new Int32Array(e+1);return r[0]=t,new Vt(this,r)}}Gt.PDF417_GF=new Gt(Ut.NUMBER_OF_CODEWORDS,3);class $t{constructor(){this.field=Gt.PDF417_GF}decode(e,t,r){let n=new Vt(this.field,e),i=new Int32Array(t),o=!1;for(let f=t;f>0;f--){let e=n.evaluateAt(this.field.exp(f));i[t-f]=e,0!==e&&(o=!0)}if(!o)return 0;let s=this.field.getOne();if(null!=r)for(const f of r){let t=this.field.exp(e.length-1-f),r=new Vt(this.field,new Int32Array([this.field.subtract(0,t),1]));s=s.multiply(r)}let a=new Vt(this.field,i),l=this.runEuclideanAlgorithm(this.field.buildMonomial(t,1),a,t),c=l[0],u=l[1],d=this.findErrorLocations(c),h=this.findErrorMagnitudes(u,c,d);for(let p=0;p<d.length;p++){let t=e.length-1-this.field.log(d[p]);if(t<0)throw f.getChecksumInstance();e[t]=this.field.subtract(e[t],h[p])}return d.length}runEuclideanAlgorithm(e,t,r){if(e.getDegree()<t.getDegree()){let r=e;e=t,t=r}let n=e,i=t,o=this.field.getZero(),s=this.field.getOne();for(;i.getDegree()>=Math.round(r/2);){let e=n,t=o;if(n=i,o=s,n.isZero())throw f.getChecksumInstance();i=e;let r=this.field.getZero(),a=n.getCoefficient(n.getDegree()),l=this.field.inverse(a);for(;i.getDegree()>=n.getDegree()&&!i.isZero();){let e=i.getDegree()-n.getDegree(),t=this.field.multiply(i.getCoefficient(i.getDegree()),l);r=r.add(this.field.buildMonomial(e,t)),i=i.subtract(n.multiplyByMonomial(e,t))}s=r.multiply(o).subtract(t).negative()}let a=s.getCoefficient(0);if(0===a)throw f.getChecksumInstance();let l=this.field.inverse(a);return[s.multiply(l),i.multiply(l)]}findErrorLocations(e){let t=e.getDegree(),r=new Int32Array(t),n=0;for(let i=1;i<this.field.getSize()&&n<t;i++)0===e.evaluateAt(i)&&(r[n]=this.field.inverse(i),n++);if(n!==t)throw f.getChecksumInstance();return r}findErrorMagnitudes(e,t,r){let n=t.getDegree(),i=new Int32Array(n);for(let l=1;l<=n;l++)i[n-l]=this.field.multiply(l,t.getCoefficient(l));let o=new Vt(this.field,i),s=r.length,a=new Int32Array(s);for(let l=0;l<s;l++){let t=this.field.inverse(r[l]),n=this.field.subtract(0,e.evaluateAt(t)),i=this.field.inverse(o.evaluateAt(t));a[l]=this.field.multiply(n,i)}return a}}class Xt{constructor(e,t,r,n,i){e instanceof Xt?this.constructor_2(e):this.constructor_1(e,t,r,n,i)}constructor_1(e,t,r,n,i){const o=null==t||null==r,s=null==n||null==i;if(o&&s)throw new O;o?(t=new ae(0,n.getY()),r=new ae(0,i.getY())):s&&(n=new ae(e.getWidth()-1,t.getY()),i=new ae(e.getWidth()-1,r.getY())),this.image=e,this.topLeft=t,this.bottomLeft=r,this.topRight=n,this.bottomRight=i,this.minX=Math.trunc(Math.min(t.getX(),r.getX())),this.maxX=Math.trunc(Math.max(n.getX(),i.getX())),this.minY=Math.trunc(Math.min(t.getY(),n.getY())),this.maxY=Math.trunc(Math.max(r.getY(),i.getY()))}constructor_2(e){this.image=e.image,this.topLeft=e.getTopLeft(),this.bottomLeft=e.getBottomLeft(),this.topRight=e.getTopRight(),this.bottomRight=e.getBottomRight(),this.minX=e.getMinX(),this.maxX=e.getMaxX(),this.minY=e.getMinY(),this.maxY=e.getMaxY()}static merge(e,t){return null==e?t:null==t?e:new Xt(e.image,e.topLeft,e.bottomLeft,t.topRight,t.bottomRight)}addMissingRows(e,t,r){let n=this.topLeft,i=this.bottomLeft,o=this.topRight,s=this.bottomRight;if(e>0){let t=r?this.topLeft:this.topRight,i=Math.trunc(t.getY()-e);i<0&&(i=0);let s=new ae(t.getX(),i);r?n=s:o=s}if(t>0){let e=r?this.bottomLeft:this.bottomRight,n=Math.trunc(e.getY()+t);n>=this.image.getHeight()&&(n=this.image.getHeight()-1);let o=new ae(e.getX(),n);r?i=o:s=o}return new Xt(this.image,n,i,o,s)}getMinX(){return this.minX}getMaxX(){return this.maxX}getMinY(){return this.minY}getMaxY(){return this.maxY}getTopLeft(){return this.topLeft}getTopRight(){return this.topRight}getBottomLeft(){return this.bottomLeft}getBottomRight(){return this.bottomRight}}class Yt{constructor(e,t,r,n){this.columnCount=e,this.errorCorrectionLevel=n,this.rowCountUpperPart=t,this.rowCountLowerPart=r,this.rowCount=t+r}getColumnCount(){return this.columnCount}getErrorCorrectionLevel(){return this.errorCorrectionLevel}getRowCount(){return this.rowCount}getRowCountUpperPart(){return this.rowCountUpperPart}getRowCountLowerPart(){return this.rowCountLowerPart}}class qt{constructor(){this.buffer=""}static form(e,t){let r=-1;function n(e,n,i,o,s,a){if("%%"===e)return"%";if(void 0===t[++r])return;e=o?parseInt(o.substr(1)):void 0;let l,c=s?parseInt(s.substr(1)):void 0;switch(a){case"s":l=t[r];break;case"c":l=t[r][0];break;case"f":l=parseFloat(t[r]).toFixed(e);break;case"p":l=parseFloat(t[r]).toPrecision(e);break;case"e":l=parseFloat(t[r]).toExponential(e);break;case"x":l=parseInt(t[r]).toString(c||16);break;case"d":l=parseFloat(parseInt(t[r],c||10).toPrecision(e)).toFixed(0)}l="object"===typeof l?JSON.stringify(l):(+l).toString(c);let u=parseInt(i),d=i&&i[0]+""==="0"?"0":" ";for(;l.length<u;)l=void 0!==n?l+d:d+l;return l}let i=/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g;return e.replace(i,n)}format(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];this.buffer+=qt.form(e,r)}toString(){return this.buffer}}class Qt{constructor(e){this.boundingBox=new Xt(e),this.codewords=new Array(e.getMaxY()-e.getMinY()+1)}getCodewordNearby(e){let t=this.getCodeword(e);if(null!=t)return t;for(let r=1;r<Qt.MAX_NEARBY_DISTANCE;r++){let n=this.imageRowToCodewordIndex(e)-r;if(n>=0&&(t=this.codewords[n],null!=t))return t;if(n=this.imageRowToCodewordIndex(e)+r,n<this.codewords.length&&(t=this.codewords[n],null!=t))return t}return null}imageRowToCodewordIndex(e){return e-this.boundingBox.getMinY()}setCodeword(e,t){this.codewords[this.imageRowToCodewordIndex(e)]=t}getCodeword(e){return this.codewords[this.imageRowToCodewordIndex(e)]}getBoundingBox(){return this.boundingBox}getCodewords(){return this.codewords}toString(){const e=new qt;let t=0;for(const r of this.codewords)null!=r?e.format("%3d: %3d|%3d%n",t++,r.getRowNumber(),r.getValue()):e.format("%3d:    |   %n",t++);return e.toString()}}Qt.MAX_NEARBY_DISTANCE=5;class Zt{constructor(){this.values=new Map}setValue(e){e=Math.trunc(e);let t=this.values.get(e);null==t&&(t=0),t++,this.values.set(e,t)}getValue(){let e=-1,t=new Array;for(const[r,n]of this.values.entries()){const i={getKey:()=>r,getValue:()=>n};i.getValue()>e?(e=i.getValue(),t=[],t.push(i.getKey())):i.getValue()===e&&t.push(i.getKey())}return Ut.toIntArray(t)}getConfidence(e){return this.values.get(e)}}class Kt extends Qt{constructor(e,t){super(e),this._isLeft=t}setRowNumbers(){for(let e of this.getCodewords())null!=e&&e.setRowNumberAsRowIndicatorColumn()}adjustCompleteIndicatorColumnRowNumbers(e){let t=this.getCodewords();this.setRowNumbers(),this.removeIncorrectCodewords(t,e);let r=this.getBoundingBox(),n=this._isLeft?r.getTopLeft():r.getTopRight(),i=this._isLeft?r.getBottomLeft():r.getBottomRight(),o=this.imageRowToCodewordIndex(Math.trunc(n.getY())),s=this.imageRowToCodewordIndex(Math.trunc(i.getY())),a=-1,l=1,c=0;for(let u=o;u<s;u++){if(null==t[u])continue;let r=t[u],n=r.getRowNumber()-a;if(0===n)c++;else if(1===n)l=Math.max(l,c),c=1,a=r.getRowNumber();else if(n<0||r.getRowNumber()>=e.getRowCount()||n>u)t[u]=null;else{let e;e=l>2?(l-2)*n:n;let i=e>=u;for(let r=1;r<=e&&!i;r++)i=null!=t[u-r];i?t[u]=null:(a=r.getRowNumber(),c=1)}}}getRowHeights(){let e=this.getBarcodeMetadata();if(null==e)return null;this.adjustIncompleteIndicatorColumnRowNumbers(e);let t=new Int32Array(e.getRowCount());for(let r of this.getCodewords())if(null!=r){let e=r.getRowNumber();if(e>=t.length)continue;t[e]++}return t}adjustIncompleteIndicatorColumnRowNumbers(e){let t=this.getBoundingBox(),r=this._isLeft?t.getTopLeft():t.getTopRight(),n=this._isLeft?t.getBottomLeft():t.getBottomRight(),i=this.imageRowToCodewordIndex(Math.trunc(r.getY())),o=this.imageRowToCodewordIndex(Math.trunc(n.getY())),s=this.getCodewords(),a=-1;for(let l=i;l<o;l++){if(null==s[l])continue;let t=s[l];t.setRowNumberAsRowIndicatorColumn();let r=t.getRowNumber()-a;0===r||(1===r?a=t.getRowNumber():t.getRowNumber()>=e.getRowCount()?s[l]=null:a=t.getRowNumber())}}getBarcodeMetadata(){let e=this.getCodewords(),t=new Zt,r=new Zt,n=new Zt,i=new Zt;for(let s of e){if(null==s)continue;s.setRowNumberAsRowIndicatorColumn();let e=s.getValue()%30,o=s.getRowNumber();switch(this._isLeft||(o+=2),o%3){case 0:r.setValue(3*e+1);break;case 1:i.setValue(e/3),n.setValue(e%3);break;case 2:t.setValue(e+1)}}if(0===t.getValue().length||0===r.getValue().length||0===n.getValue().length||0===i.getValue().length||t.getValue()[0]<1||r.getValue()[0]+n.getValue()[0]<Ut.MIN_ROWS_IN_BARCODE||r.getValue()[0]+n.getValue()[0]>Ut.MAX_ROWS_IN_BARCODE)return null;let o=new Yt(t.getValue()[0],r.getValue()[0],n.getValue()[0],i.getValue()[0]);return this.removeIncorrectCodewords(e,o),o}removeIncorrectCodewords(e,t){for(let r=0;r<e.length;r++){let n=e[r];if(null==e[r])continue;let i=n.getValue()%30,o=n.getRowNumber();if(o>t.getRowCount())e[r]=null;else switch(this._isLeft||(o+=2),o%3){case 0:3*i+1!==t.getRowCountUpperPart()&&(e[r]=null);break;case 1:Math.trunc(i/3)===t.getErrorCorrectionLevel()&&i%3===t.getRowCountLowerPart()||(e[r]=null);break;case 2:i+1!==t.getColumnCount()&&(e[r]=null)}}}isLeft(){return this._isLeft}toString(){return"IsLeft: "+this._isLeft+"\n"+super.toString()}}class Jt{constructor(e,t){this.ADJUST_ROW_NUMBER_SKIP=2,this.barcodeMetadata=e,this.barcodeColumnCount=e.getColumnCount(),this.boundingBox=t,this.detectionResultColumns=new Array(this.barcodeColumnCount+2)}getDetectionResultColumns(){this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[0]),this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[this.barcodeColumnCount+1]);let e,t=Ut.MAX_CODEWORDS_IN_BARCODE;do{e=t,t=this.adjustRowNumbersAndGetCount()}while(t>0&&t<e);return this.detectionResultColumns}adjustIndicatorColumnRowNumbers(e){null!=e&&e.adjustCompleteIndicatorColumnRowNumbers(this.barcodeMetadata)}adjustRowNumbersAndGetCount(){let e=this.adjustRowNumbersByRow();if(0===e)return 0;for(let t=1;t<this.barcodeColumnCount+1;t++){let e=this.detectionResultColumns[t].getCodewords();for(let r=0;r<e.length;r++)null!=e[r]&&(e[r].hasValidRowNumber()||this.adjustRowNumbers(t,r,e))}return e}adjustRowNumbersByRow(){return this.adjustRowNumbersFromBothRI(),this.adjustRowNumbersFromLRI()+this.adjustRowNumbersFromRRI()}adjustRowNumbersFromBothRI(){if(null==this.detectionResultColumns[0]||null==this.detectionResultColumns[this.barcodeColumnCount+1])return;let e=this.detectionResultColumns[0].getCodewords(),t=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords();for(let r=0;r<e.length;r++)if(null!=e[r]&&null!=t[r]&&e[r].getRowNumber()===t[r].getRowNumber())for(let t=1;t<=this.barcodeColumnCount;t++){let n=this.detectionResultColumns[t].getCodewords()[r];null!=n&&(n.setRowNumber(e[r].getRowNumber()),n.hasValidRowNumber()||(this.detectionResultColumns[t].getCodewords()[r]=null))}}adjustRowNumbersFromRRI(){if(null==this.detectionResultColumns[this.barcodeColumnCount+1])return 0;let e=0,t=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords();for(let r=0;r<t.length;r++){if(null==t[r])continue;let n=t[r].getRowNumber(),i=0;for(let t=this.barcodeColumnCount+1;t>0&&i<this.ADJUST_ROW_NUMBER_SKIP;t--){let o=this.detectionResultColumns[t].getCodewords()[r];null!=o&&(i=Jt.adjustRowNumberIfValid(n,i,o),o.hasValidRowNumber()||e++)}}return e}adjustRowNumbersFromLRI(){if(null==this.detectionResultColumns[0])return 0;let e=0,t=this.detectionResultColumns[0].getCodewords();for(let r=0;r<t.length;r++){if(null==t[r])continue;let n=t[r].getRowNumber(),i=0;for(let t=1;t<this.barcodeColumnCount+1&&i<this.ADJUST_ROW_NUMBER_SKIP;t++){let o=this.detectionResultColumns[t].getCodewords()[r];null!=o&&(i=Jt.adjustRowNumberIfValid(n,i,o),o.hasValidRowNumber()||e++)}}return e}static adjustRowNumberIfValid(e,t,r){return null==r||r.hasValidRowNumber()||(r.isValidRowNumber(e)?(r.setRowNumber(e),t=0):++t),t}adjustRowNumbers(e,t,r){if(!this.detectionResultColumns[e-1])return;let n=r[t],i=this.detectionResultColumns[e-1].getCodewords(),o=i;null!=this.detectionResultColumns[e+1]&&(o=this.detectionResultColumns[e+1].getCodewords());let s=new Array(14);s[2]=i[t],s[3]=o[t],t>0&&(s[0]=r[t-1],s[4]=i[t-1],s[5]=o[t-1]),t>1&&(s[8]=r[t-2],s[10]=i[t-2],s[11]=o[t-2]),t<r.length-1&&(s[1]=r[t+1],s[6]=i[t+1],s[7]=o[t+1]),t<r.length-2&&(s[9]=r[t+2],s[12]=i[t+2],s[13]=o[t+2]);for(let a of s)if(Jt.adjustRowNumber(n,a))return}static adjustRowNumber(e,t){return null!=t&&!(!t.hasValidRowNumber()||t.getBucket()!==e.getBucket())&&(e.setRowNumber(t.getRowNumber()),!0)}getBarcodeColumnCount(){return this.barcodeColumnCount}getBarcodeRowCount(){return this.barcodeMetadata.getRowCount()}getBarcodeECLevel(){return this.barcodeMetadata.getErrorCorrectionLevel()}setBoundingBox(e){this.boundingBox=e}getBoundingBox(){return this.boundingBox}setDetectionResultColumn(e,t){this.detectionResultColumns[e]=t}getDetectionResultColumn(e){return this.detectionResultColumns[e]}toString(){let e=this.detectionResultColumns[0];null==e&&(e=this.detectionResultColumns[this.barcodeColumnCount+1]);let t=new qt;for(let r=0;r<e.getCodewords().length;r++){t.format("CW %3d:",r);for(let e=0;e<this.barcodeColumnCount+2;e++){if(null==this.detectionResultColumns[e]){t.format("    |   ");continue}let n=this.detectionResultColumns[e].getCodewords()[r];null!=n?t.format(" %3d|%3d",n.getRowNumber(),n.getValue()):t.format("    |   ")}t.format("%n")}return t.toString()}}class er{constructor(e,t,r,n){this.rowNumber=er.BARCODE_ROW_UNKNOWN,this.startX=Math.trunc(e),this.endX=Math.trunc(t),this.bucket=Math.trunc(r),this.value=Math.trunc(n)}hasValidRowNumber(){return this.isValidRowNumber(this.rowNumber)}isValidRowNumber(e){return e!==er.BARCODE_ROW_UNKNOWN&&this.bucket===e%3*3}setRowNumberAsRowIndicatorColumn(){this.rowNumber=Math.trunc(3*Math.trunc(this.value/30)+Math.trunc(this.bucket/3))}getWidth(){return this.endX-this.startX}getStartX(){return this.startX}getEndX(){return this.endX}getBucket(){return this.bucket}getValue(){return this.value}getRowNumber(){return this.rowNumber}setRowNumber(e){this.rowNumber=e}toString(){return this.rowNumber+"|"+this.value}}er.BARCODE_ROW_UNKNOWN=-1;class tr{static initialize(){for(let e=0;e<Ut.SYMBOL_TABLE.length;e++){let t=Ut.SYMBOL_TABLE[e],r=1&t;for(let n=0;n<Ut.BARS_IN_MODULE;n++){let i=0;for(;(1&t)===r;)i+=1,t>>=1;r=1&t,tr.RATIOS_TABLE[e]||(tr.RATIOS_TABLE[e]=new Array(Ut.BARS_IN_MODULE)),tr.RATIOS_TABLE[e][Ut.BARS_IN_MODULE-n-1]=Math.fround(i/Ut.MODULES_IN_CODEWORD)}}this.bSymbolTableReady=!0}static getDecodedValue(e){let t=tr.getDecodedCodewordValue(tr.sampleBitCounts(e));return-1!==t?t:tr.getClosestDecodedValue(e)}static sampleBitCounts(e){let t=oe.sum(e),r=new Int32Array(Ut.BARS_IN_MODULE),n=0,i=0;for(let o=0;o<Ut.MODULES_IN_CODEWORD;o++){let s=t/(2*Ut.MODULES_IN_CODEWORD)+o*t/Ut.MODULES_IN_CODEWORD;i+e[n]<=s&&(i+=e[n],n++),r[n]++}return r}static getDecodedCodewordValue(e){let t=tr.getBitValue(e);return-1===Ut.getCodeword(t)?-1:t}static getBitValue(e){let t=0;for(let r=0;r<e.length;r++)for(let n=0;n<e[r];n++)t=t<<1|(r%2===0?1:0);return Math.trunc(t)}static getClosestDecodedValue(e){let t=oe.sum(e),r=new Array(Ut.BARS_IN_MODULE);if(t>1)for(let o=0;o<r.length;o++)r[o]=Math.fround(e[o]/t);let n=se.MAX_VALUE,i=-1;this.bSymbolTableReady||tr.initialize();for(let o=0;o<tr.RATIOS_TABLE.length;o++){let e=0,t=tr.RATIOS_TABLE[o];for(let i=0;i<Ut.BARS_IN_MODULE;i++){let o=Math.fround(t[i]-r[i]);if(e+=Math.fround(o*o),e>=n)break}e<n&&(n=e,i=Ut.SYMBOL_TABLE[o])}return i}}tr.bSymbolTableReady=!1,tr.RATIOS_TABLE=new Array(Ut.SYMBOL_TABLE.length).map((e=>new Array(Ut.BARS_IN_MODULE)));class rr{constructor(){this.segmentCount=-1,this.fileSize=-1,this.timestamp=-1,this.checksum=-1}getSegmentIndex(){return this.segmentIndex}setSegmentIndex(e){this.segmentIndex=e}getFileId(){return this.fileId}setFileId(e){this.fileId=e}getOptionalData(){return this.optionalData}setOptionalData(e){this.optionalData=e}isLastSegment(){return this.lastSegment}setLastSegment(e){this.lastSegment=e}getSegmentCount(){return this.segmentCount}setSegmentCount(e){this.segmentCount=e}getSender(){return this.sender||null}setSender(e){this.sender=e}getAddressee(){return this.addressee||null}setAddressee(e){this.addressee=e}getFileName(){return this.fileName}setFileName(e){this.fileName=e}getFileSize(){return this.fileSize}setFileSize(e){this.fileSize=e}getChecksum(){return this.checksum}setChecksum(e){this.checksum=e}getTimestamp(){return this.timestamp}setTimestamp(e){this.timestamp=e}}class nr{static parseLong(e){return parseInt(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0)}}class ir extends c{}ir.kind="NullPointerException";class or{writeBytes(e){this.writeBytesOffset(e,0,e.length)}writeBytesOffset(e,t,r){if(null==e)throw new ir;if(t<0||t>e.length||r<0||t+r>e.length||t+r<0)throw new g;if(0!==r)for(let n=0;n<r;n++)this.write(e[t+n])}flush(){}close(){}}class sr extends c{}class ar extends or{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:32;if(super(),this.count=0,e<0)throw new d("Negative initial size: "+e);this.buf=new Uint8Array(e)}ensureCapacity(e){e-this.buf.length>0&&this.grow(e)}grow(e){let t=this.buf.length<<1;if(t-e<0&&(t=e),t<0){if(e<0)throw new sr;t=b.MAX_VALUE}this.buf=w.copyOfUint8Array(this.buf,t)}write(e){this.ensureCapacity(this.count+1),this.buf[this.count]=e,this.count+=1}writeBytesOffset(e,t,r){if(t<0||t>e.length||r<0||t+r-e.length>0)throw new g;this.ensureCapacity(this.count+r),m.arraycopy(e,t,this.buf,this.count,r),this.count+=r}writeTo(e){e.writeBytesOffset(this.buf,0,this.count)}reset(){this.count=0}toByteArray(){return w.copyOfUint8Array(this.buf,this.count)}size(){return this.count}toString(e){return e?"string"===typeof e?this.toString_string(e):this.toString_number(e):this.toString_void()}toString_void(){return new String(this.buf).toString()}toString_string(e){return new String(this.buf).toString()}toString_number(e){return new String(this.buf).toString()}close(){}}function lr(){if("undefined"!==typeof window)return window.BigInt||null;if("undefined"!==typeof r.g)return r.g.BigInt||null;if("undefined"!==typeof self)return self.BigInt||null;throw new Error("Can't search globals for BigInt!")}let cr;function ur(e){if("undefined"===typeof cr&&(cr=lr()),null===cr)throw new Error("BigInt is not supported!");return cr(e)}function dr(){let e=[];e[0]=ur(1);let t=ur(900);e[1]=t;for(let r=2;r<16;r++)e[r]=e[r-1]*t;return e}!function(e){e[e.ALPHA=0]="ALPHA",e[e.LOWER=1]="LOWER",e[e.MIXED=2]="MIXED",e[e.PUNCT=3]="PUNCT",e[e.ALPHA_SHIFT=4]="ALPHA_SHIFT",e[e.PUNCT_SHIFT=5]="PUNCT_SHIFT"}(Y||(Y={}));class hr{static decode(e,t){let r=new I(""),n=C.ISO8859_1;r.enableDecoding(n);let i=1,o=e[i++],s=new rr;for(;i<e[0];){switch(o){case hr.TEXT_COMPACTION_MODE_LATCH:i=hr.textCompaction(e,i,r);break;case hr.BYTE_COMPACTION_MODE_LATCH:case hr.BYTE_COMPACTION_MODE_LATCH_6:i=hr.byteCompaction(o,e,n,i,r);break;case hr.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:r.append(e[i++]);break;case hr.NUMERIC_COMPACTION_MODE_LATCH:i=hr.numericCompaction(e,i,r);break;case hr.ECI_CHARSET:C.getCharacterSetECIByValue(e[i++]);break;case hr.ECI_GENERAL_PURPOSE:i+=2;break;case hr.ECI_USER_DEFINED:i++;break;case hr.BEGIN_MACRO_PDF417_CONTROL_BLOCK:i=hr.decodeMacroBlock(e,i,s);break;case hr.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case hr.MACRO_PDF417_TERMINATOR:throw new E;default:i--,i=hr.textCompaction(e,i,r)}if(!(i<e.length))throw E.getFormatInstance();o=e[i++]}if(0===r.length())throw E.getFormatInstance();let a=new Q(null,r.toString(),null,t);return a.setOther(s),a}static decodeMacroBlock(e,t,r){if(t+hr.NUMBER_OF_SEQUENCE_CODEWORDS>e[0])throw E.getFormatInstance();let n=new Int32Array(hr.NUMBER_OF_SEQUENCE_CODEWORDS);for(let s=0;s<hr.NUMBER_OF_SEQUENCE_CODEWORDS;s++,t++)n[s]=e[t];r.setSegmentIndex(b.parseInt(hr.decodeBase900toBase10(n,hr.NUMBER_OF_SEQUENCE_CODEWORDS)));let i=new I;t=hr.textCompaction(e,t,i),r.setFileId(i.toString());let o=-1;for(e[t]===hr.BEGIN_MACRO_PDF417_OPTIONAL_FIELD&&(o=t+1);t<e[0];)switch(e[t]){case hr.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:switch(e[++t]){case hr.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME:let n=new I;t=hr.textCompaction(e,t+1,n),r.setFileName(n.toString());break;case hr.MACRO_PDF417_OPTIONAL_FIELD_SENDER:let i=new I;t=hr.textCompaction(e,t+1,i),r.setSender(i.toString());break;case hr.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE:let o=new I;t=hr.textCompaction(e,t+1,o),r.setAddressee(o.toString());break;case hr.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT:let s=new I;t=hr.numericCompaction(e,t+1,s),r.setSegmentCount(b.parseInt(s.toString()));break;case hr.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP:let a=new I;t=hr.numericCompaction(e,t+1,a),r.setTimestamp(nr.parseLong(a.toString()));break;case hr.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM:let l=new I;t=hr.numericCompaction(e,t+1,l),r.setChecksum(b.parseInt(l.toString()));break;case hr.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE:let c=new I;t=hr.numericCompaction(e,t+1,c),r.setFileSize(nr.parseLong(c.toString()));break;default:throw E.getFormatInstance()}break;case hr.MACRO_PDF417_TERMINATOR:t++,r.setLastSegment(!0);break;default:throw E.getFormatInstance()}if(-1!==o){let n=t-o;r.isLastSegment()&&n--,r.setOptionalData(w.copyOfRange(e,o,o+n))}return t}static textCompaction(e,t,r){let n=new Int32Array(2*(e[0]-t)),i=new Int32Array(2*(e[0]-t)),o=0,s=!1;for(;t<e[0]&&!s;){let r=e[t++];if(r<hr.TEXT_COMPACTION_MODE_LATCH)n[o]=r/30,n[o+1]=r%30,o+=2;else switch(r){case hr.TEXT_COMPACTION_MODE_LATCH:n[o++]=hr.TEXT_COMPACTION_MODE_LATCH;break;case hr.BYTE_COMPACTION_MODE_LATCH:case hr.BYTE_COMPACTION_MODE_LATCH_6:case hr.NUMERIC_COMPACTION_MODE_LATCH:case hr.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case hr.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case hr.MACRO_PDF417_TERMINATOR:t--,s=!0;break;case hr.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:n[o]=hr.MODE_SHIFT_TO_BYTE_COMPACTION_MODE,r=e[t++],i[o]=r,o++}}return hr.decodeTextCompaction(n,i,o,r),t}static decodeTextCompaction(e,t,r,n){let i=Y.ALPHA,o=Y.ALPHA,s=0;for(;s<r;){let r=e[s],a="";switch(i){case Y.ALPHA:if(r<26)a=String.fromCharCode(65+r);else switch(r){case 26:a=" ";break;case hr.LL:i=Y.LOWER;break;case hr.ML:i=Y.MIXED;break;case hr.PS:o=i,i=Y.PUNCT_SHIFT;break;case hr.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:n.append(t[s]);break;case hr.TEXT_COMPACTION_MODE_LATCH:i=Y.ALPHA}break;case Y.LOWER:if(r<26)a=String.fromCharCode(97+r);else switch(r){case 26:a=" ";break;case hr.AS:o=i,i=Y.ALPHA_SHIFT;break;case hr.ML:i=Y.MIXED;break;case hr.PS:o=i,i=Y.PUNCT_SHIFT;break;case hr.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:n.append(t[s]);break;case hr.TEXT_COMPACTION_MODE_LATCH:i=Y.ALPHA}break;case Y.MIXED:if(r<hr.PL)a=hr.MIXED_CHARS[r];else switch(r){case hr.PL:i=Y.PUNCT;break;case 26:a=" ";break;case hr.LL:i=Y.LOWER;break;case hr.AL:i=Y.ALPHA;break;case hr.PS:o=i,i=Y.PUNCT_SHIFT;break;case hr.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:n.append(t[s]);break;case hr.TEXT_COMPACTION_MODE_LATCH:i=Y.ALPHA}break;case Y.PUNCT:if(r<hr.PAL)a=hr.PUNCT_CHARS[r];else switch(r){case hr.PAL:i=Y.ALPHA;break;case hr.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:n.append(t[s]);break;case hr.TEXT_COMPACTION_MODE_LATCH:i=Y.ALPHA}break;case Y.ALPHA_SHIFT:if(i=o,r<26)a=String.fromCharCode(65+r);else switch(r){case 26:a=" ";break;case hr.TEXT_COMPACTION_MODE_LATCH:i=Y.ALPHA}break;case Y.PUNCT_SHIFT:if(i=o,r<hr.PAL)a=hr.PUNCT_CHARS[r];else switch(r){case hr.PAL:i=Y.ALPHA;break;case hr.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:n.append(t[s]);break;case hr.TEXT_COMPACTION_MODE_LATCH:i=Y.ALPHA}}""!==a&&n.append(a),s++}}static byteCompaction(e,t,r,n,i){let o=new ar,s=0,a=0,l=!1;switch(e){case hr.BYTE_COMPACTION_MODE_LATCH:let e=new Int32Array(6),r=t[n++];for(;n<t[0]&&!l;)switch(e[s++]=r,a=900*a+r,r=t[n++],r){case hr.TEXT_COMPACTION_MODE_LATCH:case hr.BYTE_COMPACTION_MODE_LATCH:case hr.NUMERIC_COMPACTION_MODE_LATCH:case hr.BYTE_COMPACTION_MODE_LATCH_6:case hr.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case hr.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case hr.MACRO_PDF417_TERMINATOR:n--,l=!0;break;default:if(s%5===0&&s>0){for(let e=0;e<6;++e)o.write(Number(ur(a)>>ur(8*(5-e))));a=0,s=0}}n===t[0]&&r<hr.TEXT_COMPACTION_MODE_LATCH&&(e[s++]=r);for(let t=0;t<s;t++)o.write(e[t]);break;case hr.BYTE_COMPACTION_MODE_LATCH_6:for(;n<t[0]&&!l;){let e=t[n++];if(e<hr.TEXT_COMPACTION_MODE_LATCH)s++,a=900*a+e;else switch(e){case hr.TEXT_COMPACTION_MODE_LATCH:case hr.BYTE_COMPACTION_MODE_LATCH:case hr.NUMERIC_COMPACTION_MODE_LATCH:case hr.BYTE_COMPACTION_MODE_LATCH_6:case hr.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case hr.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case hr.MACRO_PDF417_TERMINATOR:n--,l=!0}if(s%5===0&&s>0){for(let e=0;e<6;++e)o.write(Number(ur(a)>>ur(8*(5-e))));a=0,s=0}}}return i.append(A.decode(o.toByteArray(),r)),n}static numericCompaction(e,t,r){let n=0,i=!1,o=new Int32Array(hr.MAX_NUMERIC_CODEWORDS);for(;t<e[0]&&!i;){let s=e[t++];if(t===e[0]&&(i=!0),s<hr.TEXT_COMPACTION_MODE_LATCH)o[n]=s,n++;else switch(s){case hr.TEXT_COMPACTION_MODE_LATCH:case hr.BYTE_COMPACTION_MODE_LATCH:case hr.BYTE_COMPACTION_MODE_LATCH_6:case hr.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case hr.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case hr.MACRO_PDF417_TERMINATOR:t--,i=!0}(n%hr.MAX_NUMERIC_CODEWORDS===0||s===hr.NUMERIC_COMPACTION_MODE_LATCH||i)&&n>0&&(r.append(hr.decodeBase900toBase10(o,n)),n=0)}return t}static decodeBase900toBase10(e,t){let r=ur(0);for(let i=0;i<t;i++)r+=hr.EXP900[t-i-1]*ur(e[i]);let n=r.toString();if("1"!==n.charAt(0))throw new E;return n.substring(1)}}hr.TEXT_COMPACTION_MODE_LATCH=900,hr.BYTE_COMPACTION_MODE_LATCH=901,hr.NUMERIC_COMPACTION_MODE_LATCH=902,hr.BYTE_COMPACTION_MODE_LATCH_6=924,hr.ECI_USER_DEFINED=925,hr.ECI_GENERAL_PURPOSE=926,hr.ECI_CHARSET=927,hr.BEGIN_MACRO_PDF417_CONTROL_BLOCK=928,hr.BEGIN_MACRO_PDF417_OPTIONAL_FIELD=923,hr.MACRO_PDF417_TERMINATOR=922,hr.MODE_SHIFT_TO_BYTE_COMPACTION_MODE=913,hr.MAX_NUMERIC_CODEWORDS=15,hr.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME=0,hr.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT=1,hr.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP=2,hr.MACRO_PDF417_OPTIONAL_FIELD_SENDER=3,hr.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE=4,hr.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE=5,hr.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM=6,hr.PL=25,hr.LL=27,hr.AS=27,hr.ML=28,hr.AL=28,hr.PS=29,hr.PAL=29,hr.PUNCT_CHARS=";<>@[\\]_`~!\r\t,:\n-.$/\"|*()?{}'",hr.MIXED_CHARS="0123456789&\r\t,:#-.$/+%*=^",hr.EXP900=lr()?dr():[],hr.NUMBER_OF_SEQUENCE_CODEWORDS=2;class fr{constructor(){}static decode(e,t,r,n,i,o,s){let a,l=new Xt(e,t,r,n,i),c=null,u=null;for(let f=!0;;f=!1){if(null!=t&&(c=fr.getRowIndicatorColumn(e,l,t,!0,o,s)),null!=n&&(u=fr.getRowIndicatorColumn(e,l,n,!1,o,s)),a=fr.merge(c,u),null==a)throw O.getNotFoundInstance();let r=a.getBoundingBox();if(!f||null==r||!(r.getMinY()<l.getMinY()||r.getMaxY()>l.getMaxY()))break;l=r}a.setBoundingBox(l);let d=a.getBarcodeColumnCount()+1;a.setDetectionResultColumn(0,c),a.setDetectionResultColumn(d,u);let h=null!=c;for(let f=1;f<=d;f++){let t,r=h?f:d-f;if(void 0!==a.getDetectionResultColumn(r))continue;t=0===r||r===d?new Kt(l,0===r):new Qt(l),a.setDetectionResultColumn(r,t);let n=-1,i=n;for(let c=l.getMinY();c<=l.getMaxY();c++){if(n=fr.getStartColumn(a,r,c,h),n<0||n>l.getMaxX()){if(-1===i)continue;n=i}let u=fr.detectCodeword(e,l.getMinX(),l.getMaxX(),h,n,c,o,s);null!=u&&(t.setCodeword(c,u),i=n,o=Math.min(o,u.getWidth()),s=Math.max(s,u.getWidth()))}}return fr.createDecoderResult(a)}static merge(e,t){if(null==e&&null==t)return null;let r=fr.getBarcodeMetadata(e,t);if(null==r)return null;let n=Xt.merge(fr.adjustBoundingBox(e),fr.adjustBoundingBox(t));return new Jt(r,n)}static adjustBoundingBox(e){if(null==e)return null;let t=e.getRowHeights();if(null==t)return null;let r=fr.getMax(t),n=0;for(let s of t)if(n+=r-s,s>0)break;let i=e.getCodewords();for(let s=0;n>0&&null==i[s];s++)n--;let o=0;for(let s=t.length-1;s>=0&&(o+=r-t[s],!(t[s]>0));s--);for(let s=i.length-1;o>0&&null==i[s];s--)o--;return e.getBoundingBox().addMissingRows(n,o,e.isLeft())}static getMax(e){let t=-1;for(let r of e)t=Math.max(t,r);return t}static getBarcodeMetadata(e,t){let r,n;return null==e||null==(r=e.getBarcodeMetadata())?null==t?null:t.getBarcodeMetadata():null==t||null==(n=t.getBarcodeMetadata())?r:r.getColumnCount()!==n.getColumnCount()&&r.getErrorCorrectionLevel()!==n.getErrorCorrectionLevel()&&r.getRowCount()!==n.getRowCount()?null:r}static getRowIndicatorColumn(e,t,r,n,i,o){let s=new Kt(t,n);for(let a=0;a<2;a++){let l=0===a?1:-1,c=Math.trunc(Math.trunc(r.getX()));for(let a=Math.trunc(Math.trunc(r.getY()));a<=t.getMaxY()&&a>=t.getMinY();a+=l){let t=fr.detectCodeword(e,0,e.getWidth(),n,c,a,i,o);null!=t&&(s.setCodeword(a,t),c=n?t.getStartX():t.getEndX())}}return s}static adjustCodewordCount(e,t){let r=t[0][1],n=r.getValue(),i=e.getBarcodeColumnCount()*e.getBarcodeRowCount()-fr.getNumberOfECCodeWords(e.getBarcodeECLevel());if(0===n.length){if(i<1||i>Ut.MAX_CODEWORDS_IN_BARCODE)throw O.getNotFoundInstance();r.setValue(i)}else n[0]!==i&&r.setValue(i)}static createDecoderResult(e){let t=fr.createBarcodeMatrix(e);fr.adjustCodewordCount(e,t);let r=new Array,n=new Int32Array(e.getBarcodeRowCount()*e.getBarcodeColumnCount()),i=[],o=new Array;for(let a=0;a<e.getBarcodeRowCount();a++)for(let s=0;s<e.getBarcodeColumnCount();s++){let l=t[a][s+1].getValue(),c=a*e.getBarcodeColumnCount()+s;0===l.length?r.push(c):1===l.length?n[c]=l[0]:(o.push(c),i.push(l))}let s=new Array(i.length);for(let a=0;a<s.length;a++)s[a]=i[a];return fr.createDecoderResultFromAmbiguousValues(e.getBarcodeECLevel(),n,Ut.toIntArray(r),Ut.toIntArray(o),s)}static createDecoderResultFromAmbiguousValues(e,t,r,n,i){let o=new Int32Array(n.length),s=100;for(;s-- >0;){for(let e=0;e<o.length;e++)t[n[e]]=i[e][o[e]];try{return fr.decodeCodewords(t,e,r)}catch(a){if(!(a instanceof f))throw a}if(0===o.length)throw f.getChecksumInstance();for(let e=0;e<o.length;e++){if(o[e]<i[e].length-1){o[e]++;break}if(o[e]=0,e===o.length-1)throw f.getChecksumInstance()}}throw f.getChecksumInstance()}static createBarcodeMatrix(e){let t=Array.from({length:e.getBarcodeRowCount()},(()=>new Array(e.getBarcodeColumnCount()+2)));for(let n=0;n<t.length;n++)for(let e=0;e<t[n].length;e++)t[n][e]=new Zt;let r=0;for(let n of e.getDetectionResultColumns()){if(null!=n)for(let e of n.getCodewords())if(null!=e){let n=e.getRowNumber();if(n>=0){if(n>=t.length)continue;t[n][r].setValue(e.getValue())}}r++}return t}static isValidBarcodeColumn(e,t){return t>=0&&t<=e.getBarcodeColumnCount()+1}static getStartColumn(e,t,r,n){let i=n?1:-1,o=null;if(fr.isValidBarcodeColumn(e,t-i)&&(o=e.getDetectionResultColumn(t-i).getCodeword(r)),null!=o)return n?o.getEndX():o.getStartX();if(o=e.getDetectionResultColumn(t).getCodewordNearby(r),null!=o)return n?o.getStartX():o.getEndX();if(fr.isValidBarcodeColumn(e,t-i)&&(o=e.getDetectionResultColumn(t-i).getCodewordNearby(r)),null!=o)return n?o.getEndX():o.getStartX();let s=0;for(;fr.isValidBarcodeColumn(e,t-i);){t-=i;for(let r of e.getDetectionResultColumn(t).getCodewords())if(null!=r)return(n?r.getEndX():r.getStartX())+i*s*(r.getEndX()-r.getStartX());s++}return n?e.getBoundingBox().getMinX():e.getBoundingBox().getMaxX()}static detectCodeword(e,t,r,n,i,o,s,a){i=fr.adjustCodewordStartColumn(e,t,r,n,i,o);let l,c=fr.getModuleBitCount(e,t,r,n,i,o);if(null==c)return null;let u=oe.sum(c);if(n)l=i+u;else{for(let e=0;e<c.length/2;e++){let t=c[e];c[e]=c[c.length-1-e],c[c.length-1-e]=t}l=i,i=l-u}if(!fr.checkCodewordSkew(u,s,a))return null;let d=tr.getDecodedValue(c),h=Ut.getCodeword(d);return-1===h?null:new er(i,l,fr.getCodewordBucketNumber(d),h)}static getModuleBitCount(e,t,r,n,i,o){let s=i,a=new Int32Array(8),l=0,c=n?1:-1,u=n;for(;(n?s<r:s>=t)&&l<a.length;)e.get(s,o)===u?(a[l]++,s+=c):(l++,u=!u);return l===a.length||s===(n?r:t)&&l===a.length-1?a:null}static getNumberOfECCodeWords(e){return 2<<e}static adjustCodewordStartColumn(e,t,r,n,i,o){let s=i,a=n?-1:1;for(let l=0;l<2;l++){for(;(n?s>=t:s<r)&&n===e.get(s,o);){if(Math.abs(i-s)>fr.CODEWORD_SKEW_SIZE)return i;s+=a}a=-a,n=!n}return s}static checkCodewordSkew(e,t,r){return t-fr.CODEWORD_SKEW_SIZE<=e&&e<=r+fr.CODEWORD_SKEW_SIZE}static decodeCodewords(e,t,r){if(0===e.length)throw E.getFormatInstance();let n=1<<t+1,i=fr.correctErrors(e,r,n);fr.verifyCodewordCount(e,n);let o=hr.decode(e,""+t);return o.setErrorsCorrected(i),o.setErasures(r.length),o}static correctErrors(e,t,r){if(null!=t&&t.length>r/2+fr.MAX_ERRORS||r<0||r>fr.MAX_EC_CODEWORDS)throw f.getChecksumInstance();return fr.errorCorrection.decode(e,r,t)}static verifyCodewordCount(e,t){if(e.length<4)throw E.getFormatInstance();let r=e[0];if(r>e.length)throw E.getFormatInstance();if(0===r){if(!(t<e.length))throw E.getFormatInstance();e[0]=e.length-t}}static getBitCountForCodeword(e){let t=new Int32Array(8),r=0,n=t.length-1;for(;!((1&e)!==r&&(r=1&e,n--,n<0));)t[n]++,e>>=1;return t}static getCodewordBucketNumber(e){return e instanceof Int32Array?this.getCodewordBucketNumber_Int32Array(e):this.getCodewordBucketNumber_number(e)}static getCodewordBucketNumber_number(e){return fr.getCodewordBucketNumber(fr.getBitCountForCodeword(e))}static getCodewordBucketNumber_Int32Array(e){return(e[0]-e[2]+e[4]-e[6]+9)%9}static toString(e){let t=new qt;for(let r=0;r<e.length;r++){t.format("Row %2d: ",r);for(let n=0;n<e[r].length;n++){let i=e[r][n];0===i.getValue().length?t.format("        ",null):t.format("%4d(%2d)",i.getValue()[0],i.getConfidence(i.getValue()[0]))}t.format("%n")}return t.toString()}}fr.CODEWORD_SKEW_SIZE=2,fr.MAX_ERRORS=3,fr.MAX_EC_CODEWORDS=512,fr.errorCorrection=new $t;class pr{decode(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=pr.decode(e,t,!1);if(null==r||0===r.length||null==r[0])throw O.getNotFoundInstance();return r[0]}decodeMultiple(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;try{return pr.decode(e,t,!0)}catch(r){if(r instanceof E||r instanceof f)throw O.getNotFoundInstance();throw r}}static decode(e,t,r){const n=new Array,i=Ht.detectMultiple(e,t,r);for(const o of i.getPoints()){const e=fr.decode(i.getBits(),o[4],o[5],o[6],o[7],pr.getMinCodewordWidth(o),pr.getMaxCodewordWidth(o)),t=new U(e.getText(),e.getRawBytes(),void 0,o,H.PDF_417);t.putMetadata(q.ERROR_CORRECTION_LEVEL,e.getECLevel());const r=e.getOther();null!=r&&t.putMetadata(q.PDF417_EXTRA_METADATA,r),n.push(t)}return n.map((e=>e))}static getMaxWidth(e,t){return null==e||null==t?0:Math.trunc(Math.abs(e.getX()-t.getX()))}static getMinWidth(e,t){return null==e||null==t?b.MAX_VALUE:Math.trunc(Math.abs(e.getX()-t.getX()))}static getMaxCodewordWidth(e){return Math.floor(Math.max(Math.max(pr.getMaxWidth(e[0],e[4]),pr.getMaxWidth(e[6],e[2])*Ut.MODULES_IN_CODEWORD/Ut.MODULES_IN_STOP_PATTERN),Math.max(pr.getMaxWidth(e[1],e[5]),pr.getMaxWidth(e[7],e[3])*Ut.MODULES_IN_CODEWORD/Ut.MODULES_IN_STOP_PATTERN)))}static getMinCodewordWidth(e){return Math.floor(Math.min(Math.min(pr.getMinWidth(e[0],e[4]),pr.getMinWidth(e[6],e[2])*Ut.MODULES_IN_CODEWORD/Ut.MODULES_IN_STOP_PATTERN),Math.min(pr.getMinWidth(e[1],e[5]),pr.getMinWidth(e[7],e[3])*Ut.MODULES_IN_CODEWORD/Ut.MODULES_IN_STOP_PATTERN)))}reset(){}}class mr extends c{}mr.kind="ReaderException";class gr{constructor(e,t){this.verbose=!0===e,t&&this.setHints(t)}decode(e,t){return t&&this.setHints(t),this.decodeInternal(e)}decodeWithState(e){return null!==this.readers&&void 0!==this.readers||this.setHints(null),this.decodeInternal(e)}setHints(e){this.hints=e;const r=!t(e)&&!0===e.get(x.TRY_HARDER),n=t(e)?null:e.get(x.POSSIBLE_FORMATS),i=new Array;if(!t(n)){const t=n.some((e=>e===H.UPC_A||e===H.UPC_E||e===H.EAN_13||e===H.EAN_8||e===H.CODABAR||e===H.CODE_39||e===H.CODE_93||e===H.CODE_128||e===H.ITF||e===H.RSS_14||e===H.RSS_EXPANDED));t&&!r&&i.push(new lt(e,this.verbose)),n.includes(H.QR_CODE)&&i.push(new Ft),n.includes(H.DATA_MATRIX)&&i.push(new bt),n.includes(H.AZTEC)&&i.push(new ye),n.includes(H.PDF_417)&&i.push(new pr),t&&r&&i.push(new lt(e,this.verbose))}0===i.length&&(r||i.push(new lt(e,this.verbose)),i.push(new Ft),i.push(new bt),i.push(new ye),i.push(new pr),r&&i.push(new lt(e,this.verbose))),this.readers=i}reset(){if(null!==this.readers)for(const e of this.readers)e.reset()}decodeInternal(e){if(null===this.readers)throw new mr("No readers where selected, nothing can be read.");for(const r of this.readers)try{return r.decode(e,this.hints)}catch(t){if(t instanceof mr)continue}throw new O("No MultiFormat Readers were able to detect the code.")}}class yr extends F{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:500;const r=new gr;r.setHints(e),super(r,t)}decodeBitmap(e){return this.reader.decodeWithState(e)}}class wr extends F{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:500;super(new pr,e)}}class br extends F{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:500;super(new Ft,e)}}var vr;!function(e){e[e.ERROR_CORRECTION=0]="ERROR_CORRECTION",e[e.CHARACTER_SET=1]="CHARACTER_SET",e[e.DATA_MATRIX_SHAPE=2]="DATA_MATRIX_SHAPE",e[e.MIN_SIZE=3]="MIN_SIZE",e[e.MAX_SIZE=4]="MAX_SIZE",e[e.MARGIN=5]="MARGIN",e[e.PDF417_COMPACT=6]="PDF417_COMPACT",e[e.PDF417_COMPACTION=7]="PDF417_COMPACTION",e[e.PDF417_DIMENSIONS=8]="PDF417_DIMENSIONS",e[e.AZTEC_LAYERS=9]="AZTEC_LAYERS",e[e.QR_VERSION=10]="QR_VERSION"}(vr||(vr={}));var _r=vr;class xr{constructor(e){this.field=e,this.cachedGenerators=[],this.cachedGenerators.push(new K(e,Int32Array.from([1])))}buildGenerator(e){const t=this.cachedGenerators;if(e>=t.length){let r=t[t.length-1];const n=this.field;for(let i=t.length;i<=e;i++){const e=r.multiply(new K(n,Int32Array.from([1,n.exp(i-1+n.getGeneratorBase())])));t.push(e),r=e}}return t[e]}encode(e,t){if(0===t)throw new d("No error correction bytes");const r=e.length-t;if(r<=0)throw new d("No data bytes provided");const n=this.buildGenerator(t),i=new Int32Array(r);m.arraycopy(e,0,i,0,r);let o=new K(this.field,i);o=o.multiplyByMonomial(t,1);const s=o.divide(n)[1].getCoefficients(),a=t-s.length;for(let l=0;l<a;l++)e[r+l]=0;m.arraycopy(s,0,e,r+a,s.length)}}class Er{constructor(){}static applyMaskPenaltyRule1(e){return Er.applyMaskPenaltyRule1Internal(e,!0)+Er.applyMaskPenaltyRule1Internal(e,!1)}static applyMaskPenaltyRule2(e){let t=0;const r=e.getArray(),n=e.getWidth(),i=e.getHeight();for(let o=0;o<i-1;o++){const e=r[o];for(let i=0;i<n-1;i++){const n=e[i];n===e[i+1]&&n===r[o+1][i]&&n===r[o+1][i+1]&&t++}}return Er.N2*t}static applyMaskPenaltyRule3(e){let t=0;const r=e.getArray(),n=e.getWidth(),i=e.getHeight();for(let o=0;o<i;o++)for(let e=0;e<n;e++){const s=r[o];e+6<n&&1===s[e]&&0===s[e+1]&&1===s[e+2]&&1===s[e+3]&&1===s[e+4]&&0===s[e+5]&&1===s[e+6]&&(Er.isWhiteHorizontal(s,e-4,e)||Er.isWhiteHorizontal(s,e+7,e+11))&&t++,o+6<i&&1===r[o][e]&&0===r[o+1][e]&&1===r[o+2][e]&&1===r[o+3][e]&&1===r[o+4][e]&&0===r[o+5][e]&&1===r[o+6][e]&&(Er.isWhiteVertical(r,e,o-4,o)||Er.isWhiteVertical(r,e,o+7,o+11))&&t++}return t*Er.N3}static isWhiteHorizontal(e,t,r){t=Math.max(t,0),r=Math.min(r,e.length);for(let n=t;n<r;n++)if(1===e[n])return!1;return!0}static isWhiteVertical(e,t,r,n){r=Math.max(r,0),n=Math.min(n,e.length);for(let i=r;i<n;i++)if(1===e[i][t])return!1;return!0}static applyMaskPenaltyRule4(e){let t=0;const r=e.getArray(),n=e.getWidth(),i=e.getHeight();for(let s=0;s<i;s++){const e=r[s];for(let r=0;r<n;r++)1===e[r]&&t++}const o=e.getHeight()*e.getWidth();return Math.floor(10*Math.abs(2*t-o)/o)*Er.N4}static getDataMaskBit(e,t,r){let n,i;switch(e){case 0:n=r+t&1;break;case 1:n=1&r;break;case 2:n=t%3;break;case 3:n=(r+t)%3;break;case 4:n=Math.floor(r/2)+Math.floor(t/3)&1;break;case 5:i=r*t,n=(1&i)+i%3;break;case 6:i=r*t,n=(1&i)+i%3&1;break;case 7:i=r*t,n=i%3+(r+t&1)&1;break;default:throw new d("Invalid mask pattern: "+e)}return 0===n}static applyMaskPenaltyRule1Internal(e,t){let r=0;const n=t?e.getHeight():e.getWidth(),i=t?e.getWidth():e.getHeight(),o=e.getArray();for(let s=0;s<n;s++){let e=0,n=-1;for(let a=0;a<i;a++){const i=t?o[s][a]:o[a][s];i===n?e++:(e>=5&&(r+=Er.N1+(e-5)),e=1,n=i)}e>=5&&(r+=Er.N1+(e-5))}return r}}Er.N1=3,Er.N2=3,Er.N3=40,Er.N4=10;class Cr{constructor(e,t){this.width=e,this.height=t;const r=new Array(t);for(let n=0;n!==t;n++)r[n]=new Uint8Array(e);this.bytes=r}getHeight(){return this.height}getWidth(){return this.width}get(e,t){return this.bytes[t][e]}getArray(){return this.bytes}setNumber(e,t,r){this.bytes[t][e]=r}setBoolean(e,t,r){this.bytes[t][e]=r?1:0}clear(e){for(const t of this.bytes)w.fill(t,e)}equals(e){if(!(e instanceof Cr))return!1;const t=e;if(this.width!==t.width)return!1;if(this.height!==t.height)return!1;for(let r=0,n=this.height;r<n;++r){const e=this.bytes[r],n=t.bytes[r];for(let t=0,r=this.width;t<r;++t)if(e[t]!==n[t])return!1}return!0}toString(){const e=new I;for(let t=0,r=this.height;t<r;++t){const r=this.bytes[t];for(let t=0,n=this.width;t<n;++t)switch(r[t]){case 0:e.append(" 0");break;case 1:e.append(" 1");break;default:e.append("  ")}e.append("\n")}return e.toString()}}class Sr{constructor(){this.maskPattern=-1}getMode(){return this.mode}getECLevel(){return this.ecLevel}getVersion(){return this.version}getMaskPattern(){return this.maskPattern}getMatrix(){return this.matrix}toString(){const e=new I;return e.append("<<\n"),e.append(" mode: "),e.append(this.mode?this.mode.toString():"null"),e.append("\n ecLevel: "),e.append(this.ecLevel?this.ecLevel.toString():"null"),e.append("\n version: "),e.append(this.version?this.version.toString():"null"),e.append("\n maskPattern: "),e.append(this.maskPattern.toString()),this.matrix?(e.append("\n matrix:\n"),e.append(this.matrix.toString())):e.append("\n matrix: null\n"),e.append(">>\n"),e.toString()}setMode(e){this.mode=e}setECLevel(e){this.ecLevel=e}setVersion(e){this.version=e}setMaskPattern(e){this.maskPattern=e}setMatrix(e){this.matrix=e}static isValidMaskPattern(e){return e>=0&&e<Sr.NUM_MASK_PATTERNS}}Sr.NUM_MASK_PATTERNS=8;class Ar extends c{}Ar.kind="WriterException";class Nr{constructor(){}static clearMatrix(e){e.clear(255)}static buildMatrix(e,t,r,n,i){Nr.clearMatrix(i),Nr.embedBasicPatterns(r,i),Nr.embedTypeInfo(t,n,i),Nr.maybeEmbedVersionInfo(r,i),Nr.embedDataBits(e,n,i)}static embedBasicPatterns(e,t){Nr.embedPositionDetectionPatternsAndSeparators(t),Nr.embedDarkDotAtLeftBottomCorner(t),Nr.maybeEmbedPositionAdjustmentPatterns(e,t),Nr.embedTimingPatterns(t)}static embedTypeInfo(e,t,r){const n=new v;Nr.makeTypeInfoBits(e,t,n);for(let i=0,o=n.getSize();i<o;++i){const e=n.get(n.getSize()-1-i),t=Nr.TYPE_INFO_COORDINATES[i],o=t[0],s=t[1];if(r.setBoolean(o,s,e),i<8){const t=r.getWidth()-i-1,n=8;r.setBoolean(t,n,e)}else{const t=8,n=r.getHeight()-7+(i-8);r.setBoolean(t,n,e)}}}static maybeEmbedVersionInfo(e,t){if(e.getVersionNumber()<7)return;const r=new v;Nr.makeVersionInfoBits(e,r);let n=17;for(let i=0;i<6;++i)for(let e=0;e<3;++e){const o=r.get(n);n--,t.setBoolean(i,t.getHeight()-11+e,o),t.setBoolean(t.getHeight()-11+e,i,o)}}static embedDataBits(e,t,r){let n=0,i=-1,o=r.getWidth()-1,s=r.getHeight()-1;for(;o>0;){for(6===o&&(o-=1);s>=0&&s<r.getHeight();){for(let i=0;i<2;++i){const a=o-i;if(!Nr.isEmpty(r.get(a,s)))continue;let l;n<e.getSize()?(l=e.get(n),++n):l=!1,255!==t&&Er.getDataMaskBit(t,a,s)&&(l=!l),r.setBoolean(a,s,l)}s+=i}i=-i,s+=i,o-=2}if(n!==e.getSize())throw new Ar("Not all bits consumed: "+n+"/"+e.getSize())}static findMSBSet(e){return 32-b.numberOfLeadingZeros(e)}static calculateBCHCode(e,t){if(0===t)throw new d("0 polynomial");const r=Nr.findMSBSet(t);for(e<<=r-1;Nr.findMSBSet(e)>=r;)e^=t<<Nr.findMSBSet(e)-r;return e}static makeTypeInfoBits(e,t,r){if(!Sr.isValidMaskPattern(t))throw new Ar("Invalid mask pattern");const n=e.getBits()<<3|t;r.appendBits(n,5);const i=Nr.calculateBCHCode(n,Nr.TYPE_INFO_POLY);r.appendBits(i,10);const o=new v;if(o.appendBits(Nr.TYPE_INFO_MASK_PATTERN,15),r.xor(o),15!==r.getSize())throw new Ar("should not happen but we got: "+r.getSize())}static makeVersionInfoBits(e,t){t.appendBits(e.getVersionNumber(),6);const r=Nr.calculateBCHCode(e.getVersionNumber(),Nr.VERSION_INFO_POLY);if(t.appendBits(r,12),18!==t.getSize())throw new Ar("should not happen but we got: "+t.getSize())}static isEmpty(e){return 255===e}static embedTimingPatterns(e){for(let t=8;t<e.getWidth()-8;++t){const r=(t+1)%2;Nr.isEmpty(e.get(t,6))&&e.setNumber(t,6,r),Nr.isEmpty(e.get(6,t))&&e.setNumber(6,t,r)}}static embedDarkDotAtLeftBottomCorner(e){if(0===e.get(8,e.getHeight()-8))throw new Ar;e.setNumber(8,e.getHeight()-8,1)}static embedHorizontalSeparationPattern(e,t,r){for(let n=0;n<8;++n){if(!Nr.isEmpty(r.get(e+n,t)))throw new Ar;r.setNumber(e+n,t,0)}}static embedVerticalSeparationPattern(e,t,r){for(let n=0;n<7;++n){if(!Nr.isEmpty(r.get(e,t+n)))throw new Ar;r.setNumber(e,t+n,0)}}static embedPositionAdjustmentPattern(e,t,r){for(let n=0;n<5;++n){const i=Nr.POSITION_ADJUSTMENT_PATTERN[n];for(let o=0;o<5;++o)r.setNumber(e+o,t+n,i[o])}}static embedPositionDetectionPattern(e,t,r){for(let n=0;n<7;++n){const i=Nr.POSITION_DETECTION_PATTERN[n];for(let o=0;o<7;++o)r.setNumber(e+o,t+n,i[o])}}static embedPositionDetectionPatternsAndSeparators(e){const t=Nr.POSITION_DETECTION_PATTERN[0].length;Nr.embedPositionDetectionPattern(0,0,e),Nr.embedPositionDetectionPattern(e.getWidth()-t,0,e),Nr.embedPositionDetectionPattern(0,e.getWidth()-t,e);const r=8;Nr.embedHorizontalSeparationPattern(0,r-1,e),Nr.embedHorizontalSeparationPattern(e.getWidth()-r,r-1,e),Nr.embedHorizontalSeparationPattern(0,e.getWidth()-r,e);const n=7;Nr.embedVerticalSeparationPattern(n,0,e),Nr.embedVerticalSeparationPattern(e.getHeight()-n-1,0,e),Nr.embedVerticalSeparationPattern(n,e.getHeight()-n,e)}static maybeEmbedPositionAdjustmentPatterns(e,t){if(e.getVersionNumber()<2)return;const r=e.getVersionNumber()-1,n=Nr.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE[r];for(let i=0,o=n.length;i!==o;i++){const e=n[i];if(e>=0)for(let r=0;r!==o;r++){const i=n[r];i>=0&&Nr.isEmpty(t.get(i,e))&&Nr.embedPositionAdjustmentPattern(i-2,e-2,t)}}}}Nr.POSITION_DETECTION_PATTERN=Array.from([Int32Array.from([1,1,1,1,1,1,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,1,1,1,1,1,1])]),Nr.POSITION_ADJUSTMENT_PATTERN=Array.from([Int32Array.from([1,1,1,1,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,0,1,0,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,1,1,1,1])]),Nr.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE=Array.from([Int32Array.from([-1,-1,-1,-1,-1,-1,-1]),Int32Array.from([6,18,-1,-1,-1,-1,-1]),Int32Array.from([6,22,-1,-1,-1,-1,-1]),Int32Array.from([6,26,-1,-1,-1,-1,-1]),Int32Array.from([6,30,-1,-1,-1,-1,-1]),Int32Array.from([6,34,-1,-1,-1,-1,-1]),Int32Array.from([6,22,38,-1,-1,-1,-1]),Int32Array.from([6,24,42,-1,-1,-1,-1]),Int32Array.from([6,26,46,-1,-1,-1,-1]),Int32Array.from([6,28,50,-1,-1,-1,-1]),Int32Array.from([6,30,54,-1,-1,-1,-1]),Int32Array.from([6,32,58,-1,-1,-1,-1]),Int32Array.from([6,34,62,-1,-1,-1,-1]),Int32Array.from([6,26,46,66,-1,-1,-1]),Int32Array.from([6,26,48,70,-1,-1,-1]),Int32Array.from([6,26,50,74,-1,-1,-1]),Int32Array.from([6,30,54,78,-1,-1,-1]),Int32Array.from([6,30,56,82,-1,-1,-1]),Int32Array.from([6,30,58,86,-1,-1,-1]),Int32Array.from([6,34,62,90,-1,-1,-1]),Int32Array.from([6,28,50,72,94,-1,-1]),Int32Array.from([6,26,50,74,98,-1,-1]),Int32Array.from([6,30,54,78,102,-1,-1]),Int32Array.from([6,28,54,80,106,-1,-1]),Int32Array.from([6,32,58,84,110,-1,-1]),Int32Array.from([6,30,58,86,114,-1,-1]),Int32Array.from([6,34,62,90,118,-1,-1]),Int32Array.from([6,26,50,74,98,122,-1]),Int32Array.from([6,30,54,78,102,126,-1]),Int32Array.from([6,26,52,78,104,130,-1]),Int32Array.from([6,30,56,82,108,134,-1]),Int32Array.from([6,34,60,86,112,138,-1]),Int32Array.from([6,30,58,86,114,142,-1]),Int32Array.from([6,34,62,90,118,146,-1]),Int32Array.from([6,30,54,78,102,126,150]),Int32Array.from([6,24,50,76,102,128,154]),Int32Array.from([6,28,54,80,106,132,158]),Int32Array.from([6,32,58,84,110,136,162]),Int32Array.from([6,26,54,82,110,138,166]),Int32Array.from([6,30,58,86,114,142,170])]),Nr.TYPE_INFO_COORDINATES=Array.from([Int32Array.from([8,0]),Int32Array.from([8,1]),Int32Array.from([8,2]),Int32Array.from([8,3]),Int32Array.from([8,4]),Int32Array.from([8,5]),Int32Array.from([8,7]),Int32Array.from([8,8]),Int32Array.from([7,8]),Int32Array.from([5,8]),Int32Array.from([4,8]),Int32Array.from([3,8]),Int32Array.from([2,8]),Int32Array.from([1,8]),Int32Array.from([0,8])]),Nr.VERSION_INFO_POLY=7973,Nr.TYPE_INFO_POLY=1335,Nr.TYPE_INFO_MASK_PATTERN=21522;class Ir{constructor(e,t){this.dataBytes=e,this.errorCorrectionBytes=t}getDataBytes(){return this.dataBytes}getErrorCorrectionBytes(){return this.errorCorrectionBytes}}class Tr{constructor(){}static calculateMaskPenalty(e){return Er.applyMaskPenaltyRule1(e)+Er.applyMaskPenaltyRule2(e)+Er.applyMaskPenaltyRule3(e)+Er.applyMaskPenaltyRule4(e)}static encode(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,n=Tr.DEFAULT_BYTE_MODE_ENCODING;const i=null!==r&&void 0!==r.get(_r.CHARACTER_SET);i&&(n=r.get(_r.CHARACTER_SET).toString());const o=this.chooseMode(e,n),s=new v;if(o===Tt.BYTE&&(i||Tr.DEFAULT_BYTE_MODE_ENCODING!==n)){const e=C.getCharacterSetECIByName(n);void 0!==e&&this.appendECI(e,s)}this.appendModeInfo(o,s);const a=new v;let l;if(this.appendBytes(e,o,a,n),null!==r&&void 0!==r.get(_r.QR_VERSION)){const e=Number.parseInt(r.get(_r.QR_VERSION).toString(),10);l=St.getVersionForNumber(e);const n=this.calculateBitsNeeded(o,s,a,l);if(!this.willFit(n,l,t))throw new Ar("Data too big for requested version")}else l=this.recommendVersion(t,o,s,a);const c=new v;c.appendBitArray(s);const u=o===Tt.BYTE?a.getSizeInBytes():e.length;this.appendLengthInfo(u,l,o,c),c.appendBitArray(a);const d=l.getECBlocksForLevel(t),h=l.getTotalCodewords()-d.getTotalECCodewords();this.terminateBits(h,c);const f=this.interleaveWithECBytes(c,l.getTotalCodewords(),h,d.getNumBlocks()),p=new Sr;p.setECLevel(t),p.setMode(o),p.setVersion(l);const m=l.getDimensionForVersion(),g=new Cr(m,m),y=this.chooseMaskPattern(f,t,l,g);return p.setMaskPattern(y),Nr.buildMatrix(f,t,l,y,g),p.setMatrix(g),p}static recommendVersion(e,t,r,n){const i=this.calculateBitsNeeded(t,r,n,St.getVersionForNumber(1)),o=this.chooseVersion(i,e),s=this.calculateBitsNeeded(t,r,n,o);return this.chooseVersion(s,e)}static calculateBitsNeeded(e,t,r,n){return t.getSize()+e.getCharacterCountBits(n)+r.getSize()}static getAlphanumericCode(e){return e<Tr.ALPHANUMERIC_TABLE.length?Tr.ALPHANUMERIC_TABLE[e]:-1}static chooseMode(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(C.SJIS.getName()===t&&this.isOnlyDoubleByteKanji(e))return Tt.KANJI;let r=!1,n=!1;for(let i=0,o=e.length;i<o;++i){const t=e.charAt(i);if(Tr.isDigit(t))r=!0;else{if(-1===this.getAlphanumericCode(t.charCodeAt(0)))return Tt.BYTE;n=!0}}return n?Tt.ALPHANUMERIC:r?Tt.NUMERIC:Tt.BYTE}static isOnlyDoubleByteKanji(e){let t;try{t=A.encode(e,C.SJIS)}catch(n){return!1}const r=t.length;if(r%2!==0)return!1;for(let i=0;i<r;i+=2){const e=255&t[i];if((e<129||e>159)&&(e<224||e>235))return!1}return!0}static chooseMaskPattern(e,t,r,n){let i=Number.MAX_SAFE_INTEGER,o=-1;for(let s=0;s<Sr.NUM_MASK_PATTERNS;s++){Nr.buildMatrix(e,t,r,s,n);let a=this.calculateMaskPenalty(n);a<i&&(i=a,o=s)}return o}static chooseVersion(e,t){for(let r=1;r<=40;r++){const n=St.getVersionForNumber(r);if(Tr.willFit(e,n,t))return n}throw new Ar("Data too big")}static willFit(e,t,r){return t.getTotalCodewords()-t.getECBlocksForLevel(r).getTotalECCodewords()>=(e+7)/8}static terminateBits(e,t){const r=8*e;if(t.getSize()>r)throw new Ar("data bits cannot fit in the QR Code"+t.getSize()+" > "+r);for(let o=0;o<4&&t.getSize()<r;++o)t.appendBit(!1);const n=7&t.getSize();if(n>0)for(let o=n;o<8;o++)t.appendBit(!1);const i=e-t.getSizeInBytes();for(let o=0;o<i;++o)t.appendBits(0===(1&o)?236:17,8);if(t.getSize()!==r)throw new Ar("Bits size does not equal capacity")}static getNumDataBytesAndNumECBytesForBlockID(e,t,r,n,i,o){if(n>=r)throw new Ar("Block ID too large");const s=e%r,a=r-s,l=Math.floor(e/r),c=l+1,u=Math.floor(t/r),d=u+1,h=l-u,f=c-d;if(h!==f)throw new Ar("EC bytes mismatch");if(r!==a+s)throw new Ar("RS blocks mismatch");if(e!==(u+h)*a+(d+f)*s)throw new Ar("Total bytes mismatch");n<a?(i[0]=u,o[0]=h):(i[0]=d,o[0]=f)}static interleaveWithECBytes(e,t,r,n){if(e.getSizeInBytes()!==r)throw new Ar("Number of bits and data bytes does not match");let i=0,o=0,s=0;const a=new Array;for(let c=0;c<n;++c){const l=new Int32Array(1),u=new Int32Array(1);Tr.getNumDataBytesAndNumECBytesForBlockID(t,r,n,c,l,u);const d=l[0],h=new Uint8Array(d);e.toBytes(8*i,h,0,d);const f=Tr.generateECBytes(h,u[0]);a.push(new Ir(h,f)),o=Math.max(o,d),s=Math.max(s,f.length),i+=l[0]}if(r!==i)throw new Ar("Data bytes does not match offset");const l=new v;for(let c=0;c<o;++c)for(const e of a){const t=e.getDataBytes();c<t.length&&l.appendBits(t[c],8)}for(let c=0;c<s;++c)for(const e of a){const t=e.getErrorCorrectionBytes();c<t.length&&l.appendBits(t[c],8)}if(t!==l.getSizeInBytes())throw new Ar("Interleaving error: "+t+" and "+l.getSizeInBytes()+" differ.");return l}static generateECBytes(e,t){const r=e.length,n=new Int32Array(r+t);for(let o=0;o<r;o++)n[o]=255&e[o];new xr(ee.QR_CODE_FIELD_256).encode(n,t);const i=new Uint8Array(t);for(let o=0;o<t;o++)i[o]=n[r+o];return i}static appendModeInfo(e,t){t.appendBits(e.getBits(),4)}static appendLengthInfo(e,t,r,n){const i=r.getCharacterCountBits(t);if(e>=1<<i)throw new Ar(e+" is bigger than "+((1<<i)-1));n.appendBits(e,i)}static appendBytes(e,t,r,n){switch(t){case Tt.NUMERIC:Tr.appendNumericBytes(e,r);break;case Tt.ALPHANUMERIC:Tr.appendAlphanumericBytes(e,r);break;case Tt.BYTE:Tr.append8BitBytes(e,r,n);break;case Tt.KANJI:Tr.appendKanjiBytes(e,r);break;default:throw new Ar("Invalid mode: "+t)}}static getDigit(e){return e.charCodeAt(0)-48}static isDigit(e){const t=Tr.getDigit(e);return t>=0&&t<=9}static appendNumericBytes(e,t){const r=e.length;let n=0;for(;n<r;){const i=Tr.getDigit(e.charAt(n));if(n+2<r){const r=Tr.getDigit(e.charAt(n+1)),o=Tr.getDigit(e.charAt(n+2));t.appendBits(100*i+10*r+o,10),n+=3}else if(n+1<r){const r=Tr.getDigit(e.charAt(n+1));t.appendBits(10*i+r,7),n+=2}else t.appendBits(i,4),n++}}static appendAlphanumericBytes(e,t){const r=e.length;let n=0;for(;n<r;){const i=Tr.getAlphanumericCode(e.charCodeAt(n));if(-1===i)throw new Ar;if(n+1<r){const r=Tr.getAlphanumericCode(e.charCodeAt(n+1));if(-1===r)throw new Ar;t.appendBits(45*i+r,11),n+=2}else t.appendBits(i,6),n++}}static append8BitBytes(e,t,r){let n;try{n=A.encode(e,r)}catch(i){throw new Ar(i)}for(let o=0,s=n.length;o!==s;o++){const e=n[o];t.appendBits(e,8)}}static appendKanjiBytes(e,t){let r;try{r=A.encode(e,C.SJIS)}catch(i){throw new Ar(i)}const n=r.length;for(let o=0;o<n;o+=2){const e=(255&r[o])<<8&4294967295|255&r[o+1];let n=-1;if(e>=33088&&e<=40956?n=e-33088:e>=57408&&e<=60351&&(n=e-49472),-1===n)throw new Ar("Invalid byte sequence");const i=192*(n>>8)+(255&n);t.appendBits(i,13)}}static appendECI(e,t){t.appendBits(Tt.ECI.getBits(),4),t.appendBits(e.getValue(),8)}}Tr.ALPHANUMERIC_TABLE=Int32Array.from([-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,36,-1,-1,-1,37,38,-1,-1,-1,-1,39,40,-1,41,42,43,0,1,2,3,4,5,6,7,8,9,44,-1,-1,-1,-1,-1,-1,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,-1,-1,-1,-1,-1]),Tr.DEFAULT_BYTE_MODE_ENCODING=C.UTF8.getName();class Or{write(e,t,r){let n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;if(0===e.length)throw new d("Found empty contents");if(t<0||r<0)throw new d("Requested dimensions are too small: "+t+"x"+r);let i=_t.L,o=Or.QUIET_ZONE_SIZE;null!==n&&(void 0!==n.get(_r.ERROR_CORRECTION)&&(i=_t.fromString(n.get(_r.ERROR_CORRECTION).toString())),void 0!==n.get(_r.MARGIN)&&(o=Number.parseInt(n.get(_r.MARGIN).toString(),10)));const s=Tr.encode(e,i,n);return this.renderResult(s,t,r,o)}writeToDom(e,t,r,n){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null;"string"===typeof e&&(e=document.querySelector(e));const o=this.write(t,r,n,i);e&&e.appendChild(o)}renderResult(e,t,r,n){const i=e.getMatrix();if(null===i)throw new re;const o=i.getWidth(),s=i.getHeight(),a=o+2*n,l=s+2*n,c=Math.max(t,a),u=Math.max(r,l),d=Math.min(Math.floor(c/a),Math.floor(u/l)),h=Math.floor((c-o*d)/2),f=Math.floor((u-s*d)/2),p=this.createSVGElement(c,u);for(let m=0,g=f;m<s;m++,g+=d)for(let e=0,t=h;e<o;e++,t+=d)if(1===i.get(e,m)){const e=this.createSvgRectElement(t,g,d,d);p.appendChild(e)}return p}createSVGElement(e,t){const r=document.createElementNS(Or.SVG_NS,"svg");return r.setAttributeNS(null,"height",e.toString()),r.setAttributeNS(null,"width",t.toString()),r}createSvgRectElement(e,t,r,n){const i=document.createElementNS(Or.SVG_NS,"rect");return i.setAttributeNS(null,"x",e.toString()),i.setAttributeNS(null,"y",t.toString()),i.setAttributeNS(null,"height",r.toString()),i.setAttributeNS(null,"width",n.toString()),i.setAttributeNS(null,"fill","#000000"),i}}Or.QUIET_ZONE_SIZE=4,Or.SVG_NS="http://www.w3.org/2000/svg";class kr{encode(e,t,r,n,i){if(0===e.length)throw new d("Found empty contents");if(t!==H.QR_CODE)throw new d("Can only encode QR_CODE, but got "+t);if(r<0||n<0)throw new d(`Requested dimensions are too small: ${r}x${n}`);let o=_t.L,s=kr.QUIET_ZONE_SIZE;null!==i&&(void 0!==i.get(_r.ERROR_CORRECTION)&&(o=_t.fromString(i.get(_r.ERROR_CORRECTION).toString())),void 0!==i.get(_r.MARGIN)&&(s=Number.parseInt(i.get(_r.MARGIN).toString(),10)));const a=Tr.encode(e,o,i);return kr.renderResult(a,r,n,s)}static renderResult(e,t,r,n){const i=e.getMatrix();if(null===i)throw new re;const o=i.getWidth(),s=i.getHeight(),a=o+2*n,l=s+2*n,c=Math.max(t,a),u=Math.max(r,l),d=Math.min(Math.floor(c/a),Math.floor(u/l)),h=Math.floor((c-o*d)/2),f=Math.floor((u-s*d)/2),p=new T(c,u);for(let m=0,g=f;m<s;m++,g+=d)for(let e=0,t=h;e<o;e++,t+=d)1===i.get(e,m)&&p.setRegion(t,g,d,d);return p}}kr.QUIET_ZONE_SIZE=4;class Rr{encode(e,t,r,n,i){let o;if(t!==H.QR_CODE)throw new d("No encoder available for format "+t);return o=new kr,o.encode(e,t,r,n,i)}}class Mr extends M{constructor(e,t,r,n,i,o,s,a){if(super(o,s),this.yuvData=e,this.dataWidth=t,this.dataHeight=r,this.left=n,this.top=i,n+o>t||i+s>r)throw new d("Crop rectangle does not fit within image data.");a&&this.reverseHorizontal(o,s)}getRow(e,t){if(e<0||e>=this.getHeight())throw new d("Requested row is outside the image: "+e);const r=this.getWidth();(null===t||void 0===t||t.length<r)&&(t=new Uint8ClampedArray(r));const n=(e+this.top)*this.dataWidth+this.left;return m.arraycopy(this.yuvData,n,t,0,r),t}getMatrix(){const e=this.getWidth(),t=this.getHeight();if(e===this.dataWidth&&t===this.dataHeight)return this.yuvData;const r=e*t,n=new Uint8ClampedArray(r);let i=this.top*this.dataWidth+this.left;if(e===this.dataWidth)return m.arraycopy(this.yuvData,i,n,0,r),n;for(let o=0;o<t;o++){const t=o*e;m.arraycopy(this.yuvData,i,n,t,e),i+=this.dataWidth}return n}isCropSupported(){return!0}crop(e,t,r,n){return new Mr(this.yuvData,this.dataWidth,this.dataHeight,this.left+e,this.top+t,r,n,!1)}renderThumbnail(){const e=this.getWidth()/Mr.THUMBNAIL_SCALE_FACTOR,t=this.getHeight()/Mr.THUMBNAIL_SCALE_FACTOR,r=new Int32Array(e*t),n=this.yuvData;let i=this.top*this.dataWidth+this.left;for(let o=0;o<t;o++){const t=o*e;for(let o=0;o<e;o++){const e=255&n[i+o*Mr.THUMBNAIL_SCALE_FACTOR];r[t+o]=4278190080|65793*e}i+=this.dataWidth*Mr.THUMBNAIL_SCALE_FACTOR}return r}getThumbnailWidth(){return this.getWidth()/Mr.THUMBNAIL_SCALE_FACTOR}getThumbnailHeight(){return this.getHeight()/Mr.THUMBNAIL_SCALE_FACTOR}reverseHorizontal(e,t){const r=this.yuvData;for(let n=0,i=this.top*this.dataWidth+this.left;n<t;n++,i+=this.dataWidth){const t=i+e/2;for(let n=i,o=i+e-1;n<t;n++,o--){const e=r[n];r[n]=r[o],r[o]=e}}}invert(){return new j(this)}}Mr.THUMBNAIL_SCALE_FACTOR=2;class jr extends M{constructor(e,t,r,n,i,o,s){if(super(t,r),this.dataWidth=n,this.dataHeight=i,this.left=o,this.top=s,4===e.BYTES_PER_ELEMENT){const n=t*r,i=new Uint8ClampedArray(n);for(let t=0;t<n;t++){const r=e[t],n=r>>16&255,o=r>>7&510,s=255&r;i[t]=(n+o+s)/4&255}this.luminances=i}else this.luminances=e;if(void 0===n&&(this.dataWidth=t),void 0===i&&(this.dataHeight=r),void 0===o&&(this.left=0),void 0===s&&(this.top=0),this.left+t>this.dataWidth||this.top+r>this.dataHeight)throw new d("Crop rectangle does not fit within image data.")}getRow(e,t){if(e<0||e>=this.getHeight())throw new d("Requested row is outside the image: "+e);const r=this.getWidth();(null===t||void 0===t||t.length<r)&&(t=new Uint8ClampedArray(r));const n=(e+this.top)*this.dataWidth+this.left;return m.arraycopy(this.luminances,n,t,0,r),t}getMatrix(){const e=this.getWidth(),t=this.getHeight();if(e===this.dataWidth&&t===this.dataHeight)return this.luminances;const r=e*t,n=new Uint8ClampedArray(r);let i=this.top*this.dataWidth+this.left;if(e===this.dataWidth)return m.arraycopy(this.luminances,i,n,0,r),n;for(let o=0;o<t;o++){const t=o*e;m.arraycopy(this.luminances,i,n,t,e),i+=this.dataWidth}return n}isCropSupported(){return!0}crop(e,t,r,n){return new jr(this.luminances,r,n,this.dataWidth,this.dataHeight,this.left+e,this.top+t)}invert(){return new j(this)}}class Dr extends C{static forName(e){return this.getCharacterSetECIByName(e)}}class Pr{}Pr.ISO_8859_1=C.ISO8859_1;class Lr{isCompact(){return this.compact}setCompact(e){this.compact=e}getSize(){return this.size}setSize(e){this.size=e}getLayers(){return this.layers}setLayers(e){this.layers=e}getCodeWords(){return this.codeWords}setCodeWords(e){this.codeWords=e}getMatrix(){return this.matrix}setMatrix(e){this.matrix=e}}class Br{static singletonList(e){return[e]}static min(e,t){return e.sort(t)[0]}}class Fr{constructor(e){this.previous=e}getPrevious(){return this.previous}}class Ur extends Fr{constructor(e,t,r){super(e),this.value=t,this.bitCount=r}appendTo(e,t){e.appendBits(this.value,this.bitCount)}add(e,t){return new Ur(this,e,t)}addBinaryShift(e,t){return console.warn("addBinaryShift on SimpleToken, this simply returns a copy of this token"),new Ur(this,e,t)}toString(){let e=this.value&(1<<this.bitCount)-1;return e|=1<<this.bitCount,"<"+b.toBinaryString(e|1<<this.bitCount).substring(1)+">"}}class zr extends Ur{constructor(e,t,r){super(e,0,0),this.binaryShiftStart=t,this.binaryShiftByteCount=r}appendTo(e,t){for(let r=0;r<this.binaryShiftByteCount;r++)(0===r||31===r&&this.binaryShiftByteCount<=62)&&(e.appendBits(31,5),this.binaryShiftByteCount>62?e.appendBits(this.binaryShiftByteCount-31,16):0===r?e.appendBits(Math.min(this.binaryShiftByteCount,31),5):e.appendBits(this.binaryShiftByteCount-31,5)),e.appendBits(t[this.binaryShiftStart+r],8)}addBinaryShift(e,t){return new zr(this,e,t)}toString(){return"<"+this.binaryShiftStart+"::"+(this.binaryShiftStart+this.binaryShiftByteCount-1)+">"}}function Hr(e,t,r){return new zr(e,t,r)}function Vr(e,t,r){return new Ur(e,t,r)}const Wr=["UPPER","LOWER","DIGIT","MIXED","PUNCT"],Gr=0,$r=1,Xr=2,Yr=3,qr=4,Qr=new Ur(null,0,0),Zr=[Int32Array.from([0,327708,327710,327709,656318]),Int32Array.from([590318,0,327710,327709,656318]),Int32Array.from([262158,590300,0,590301,932798]),Int32Array.from([327709,327708,656318,0,327710]),Int32Array.from([327711,656380,656382,656381,0])];function Kr(e){for(let t of e)w.fill(t,-1);return e[Gr][qr]=0,e[$r][qr]=0,e[$r][Gr]=28,e[Yr][qr]=0,e[Xr][qr]=0,e[Xr][Gr]=15,e}const Jr=Kr(w.createInt32Array(6,6));class en{constructor(e,t,r,n){this.token=e,this.mode=t,this.binaryShiftByteCount=r,this.bitCount=n}getMode(){return this.mode}getToken(){return this.token}getBinaryShiftByteCount(){return this.binaryShiftByteCount}getBitCount(){return this.bitCount}latchAndAppend(e,t){let r=this.bitCount,n=this.token;if(e!==this.mode){let t=Zr[this.mode][e];n=Vr(n,65535&t,t>>16),r+=t>>16}let i=e===Xr?4:5;return n=Vr(n,t,i),new en(n,e,0,r+i)}shiftAndAppend(e,t){let r=this.token,n=this.mode===Xr?4:5;return r=Vr(r,Jr[this.mode][e],n),r=Vr(r,t,5),new en(r,this.mode,0,this.bitCount+n+5)}addBinaryShiftChar(e){let t=this.token,r=this.mode,n=this.bitCount;if(this.mode===qr||this.mode===Xr){let e=Zr[r][Gr];t=Vr(t,65535&e,e>>16),n+=e>>16,r=Gr}let i=0===this.binaryShiftByteCount||31===this.binaryShiftByteCount?18:62===this.binaryShiftByteCount?9:8,o=new en(t,r,this.binaryShiftByteCount+1,n+i);return 2078===o.binaryShiftByteCount&&(o=o.endBinaryShift(e+1)),o}endBinaryShift(e){if(0===this.binaryShiftByteCount)return this;let t=this.token;return t=Hr(t,e-this.binaryShiftByteCount,this.binaryShiftByteCount),new en(t,this.mode,0,this.bitCount)}isBetterThanOrEqualTo(e){let t=this.bitCount+(Zr[this.mode][e.mode]>>16);return this.binaryShiftByteCount<e.binaryShiftByteCount?t+=en.calculateBinaryShiftCost(e)-en.calculateBinaryShiftCost(this):this.binaryShiftByteCount>e.binaryShiftByteCount&&e.binaryShiftByteCount>0&&(t+=10),t<=e.bitCount}toBitArray(e){let t=[];for(let n=this.endBinaryShift(e.length).token;null!==n;n=n.getPrevious())t.unshift(n);let r=new v;for(const n of t)n.appendTo(r,e);return r}toString(){return N.format("%s bits=%d bytes=%d",Wr[this.mode],this.bitCount,this.binaryShiftByteCount)}static calculateBinaryShiftCost(e){return e.binaryShiftByteCount>62?21:e.binaryShiftByteCount>31?20:e.binaryShiftByteCount>0?10:0}}function tn(e){const t=N.getCharCode(" "),r=N.getCharCode("."),n=N.getCharCode(",");e[Gr][t]=1;const i=N.getCharCode("Z"),o=N.getCharCode("A");for(let h=o;h<=i;h++)e[Gr][h]=h-o+2;e[$r][t]=1;const s=N.getCharCode("z"),a=N.getCharCode("a");for(let h=a;h<=s;h++)e[$r][h]=h-a+2;e[Xr][t]=1;const l=N.getCharCode("9"),c=N.getCharCode("0");for(let h=c;h<=l;h++)e[Xr][h]=h-c+2;e[Xr][n]=12,e[Xr][r]=13;const u=["\0"," ","\x01","\x02","\x03","\x04","\x05","\x06","\x07","\b","\t","\n","\v","\f","\r","\x1b","\x1c","\x1d","\x1e","\x1f","@","\\","^","_","`","|","~","\x7f"];for(let h=0;h<u.length;h++)e[Yr][N.getCharCode(u[h])]=h;const d=["\0","\r","\0","\0","\0","\0","!","'","#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}"];for(let h=0;h<d.length;h++)N.getCharCode(d[h])>0&&(e[qr][N.getCharCode(d[h])]=h);return e}en.INITIAL_STATE=new en(Qr,Gr,0,0);const rn=tn(w.createInt32Array(5,256));class nn{constructor(e){this.text=e}encode(){const e=N.getCharCode(" "),t=N.getCharCode("\n");let r=Br.singletonList(en.INITIAL_STATE);for(let n=0;n<this.text.length;n++){let i,o=n+1<this.text.length?this.text[n+1]:0;switch(this.text[n]){case N.getCharCode("\r"):i=o===t?2:0;break;case N.getCharCode("."):i=o===e?3:0;break;case N.getCharCode(","):i=o===e?4:0;break;case N.getCharCode(":"):i=o===e?5:0;break;default:i=0}i>0?(r=nn.updateStateListForPair(r,n,i),n++):r=this.updateStateListForChar(r,n)}return Br.min(r,((e,t)=>e.getBitCount()-t.getBitCount())).toBitArray(this.text)}updateStateListForChar(e,t){const r=[];for(let n of e)this.updateStateForChar(n,t,r);return nn.simplifyStates(r)}updateStateForChar(e,t,r){let n=255&this.text[t],i=rn[e.getMode()][n]>0,o=null;for(let s=0;s<=qr;s++){let a=rn[s][n];if(a>0){if(null==o&&(o=e.endBinaryShift(t)),!i||s===e.getMode()||s===Xr){const e=o.latchAndAppend(s,a);r.push(e)}if(!i&&Jr[e.getMode()][s]>=0){const e=o.shiftAndAppend(s,a);r.push(e)}}}if(e.getBinaryShiftByteCount()>0||0===rn[e.getMode()][n]){let n=e.addBinaryShiftChar(t);r.push(n)}}static updateStateListForPair(e,t,r){const n=[];for(let i of e)this.updateStateForPair(i,t,r,n);return this.simplifyStates(n)}static updateStateForPair(e,t,r,n){let i=e.endBinaryShift(t);if(n.push(i.latchAndAppend(qr,r)),e.getMode()!==qr&&n.push(i.shiftAndAppend(qr,r)),3===r||4===r){let e=i.latchAndAppend(Xr,16-r).latchAndAppend(Xr,1);n.push(e)}if(e.getBinaryShiftByteCount()>0){let r=e.addBinaryShiftChar(t).addBinaryShiftChar(t+1);n.push(r)}}static simplifyStates(e){let t=[];for(const r of e){let e=!0;for(const n of t){if(n.isBetterThanOrEqualTo(r)){e=!1;break}r.isBetterThanOrEqualTo(n)&&(t=t.filter((e=>e!==n)))}e&&t.push(r)}return t}}class on{constructor(){}static encodeBytes(e){return on.encode(e,on.DEFAULT_EC_PERCENT,on.DEFAULT_AZTEC_LAYERS)}static encode(e,t,r){let n,i,o,s,a,l=new nn(e).encode(),c=b.truncDivision(l.getSize()*t,100)+11,u=l.getSize()+c;if(r!==on.DEFAULT_AZTEC_LAYERS){if(n=r<0,i=Math.abs(r),i>(n?on.MAX_NB_BITS_COMPACT:on.MAX_NB_BITS))throw new d(N.format("Illegal value %s for layers",r));o=on.totalBitsInLayer(i,n),s=on.WORD_SIZE[i];let e=o-o%s;if(a=on.stuffBits(l,s),a.getSize()+c>e)throw new d("Data to large for user specified layer");if(n&&a.getSize()>64*s)throw new d("Data to large for user specified layer")}else{s=0,a=null;for(let e=0;;e++){if(e>on.MAX_NB_BITS)throw new d("Data too large for an Aztec code");if(n=e<=3,i=n?e+1:e,o=on.totalBitsInLayer(i,n),u>o)continue;null!=a&&s===on.WORD_SIZE[i]||(s=on.WORD_SIZE[i],a=on.stuffBits(l,s));let t=o-o%s;if(!(n&&a.getSize()>64*s)&&a.getSize()+c<=t)break}}let h,f=on.generateCheckWords(a,o,s),p=a.getSize()/s,m=on.generateModeMessage(n,i,p),g=(n?11:14)+4*i,y=new Int32Array(g);if(n){h=g;for(let e=0;e<y.length;e++)y[e]=e}else{h=g+1+2*b.truncDivision(b.truncDivision(g,2)-1,15);let e=b.truncDivision(g,2),t=b.truncDivision(h,2);for(let r=0;r<e;r++){let n=r+b.truncDivision(r,15);y[e-r-1]=t-n-1,y[e+r]=t+n+1}}let w=new T(h);for(let d=0,b=0;d<i;d++){let e=4*(i-d)+(n?9:12);for(let t=0;t<e;t++){let r=2*t;for(let n=0;n<2;n++)f.get(b+r+n)&&w.set(y[2*d+n],y[2*d+t]),f.get(b+2*e+r+n)&&w.set(y[2*d+t],y[g-1-2*d-n]),f.get(b+4*e+r+n)&&w.set(y[g-1-2*d-n],y[g-1-2*d-t]),f.get(b+6*e+r+n)&&w.set(y[g-1-2*d-t],y[2*d+n])}b+=8*e}if(on.drawModeMessage(w,n,h,m),n)on.drawBullsEye(w,b.truncDivision(h,2),5);else{on.drawBullsEye(w,b.truncDivision(h,2),7);for(let e=0,t=0;e<b.truncDivision(g,2)-1;e+=15,t+=16)for(let r=1&b.truncDivision(h,2);r<h;r+=2)w.set(b.truncDivision(h,2)-t,r),w.set(b.truncDivision(h,2)+t,r),w.set(r,b.truncDivision(h,2)-t),w.set(r,b.truncDivision(h,2)+t)}let v=new Lr;return v.setCompact(n),v.setSize(h),v.setLayers(i),v.setCodeWords(p),v.setMatrix(w),v}static drawBullsEye(e,t,r){for(let n=0;n<r;n+=2)for(let r=t-n;r<=t+n;r++)e.set(r,t-n),e.set(r,t+n),e.set(t-n,r),e.set(t+n,r);e.set(t-r,t-r),e.set(t-r+1,t-r),e.set(t-r,t-r+1),e.set(t+r,t-r),e.set(t+r,t-r+1),e.set(t+r,t+r-1)}static generateModeMessage(e,t,r){let n=new v;return e?(n.appendBits(t-1,2),n.appendBits(r-1,6),n=on.generateCheckWords(n,28,4)):(n.appendBits(t-1,5),n.appendBits(r-1,11),n=on.generateCheckWords(n,40,4)),n}static drawModeMessage(e,t,r,n){let i=b.truncDivision(r,2);if(t)for(let o=0;o<7;o++){let t=i-3+o;n.get(o)&&e.set(t,i-5),n.get(o+7)&&e.set(i+5,t),n.get(20-o)&&e.set(t,i+5),n.get(27-o)&&e.set(i-5,t)}else for(let o=0;o<10;o++){let t=i-5+o+b.truncDivision(o,5);n.get(o)&&e.set(t,i-7),n.get(o+10)&&e.set(i+7,t),n.get(29-o)&&e.set(t,i+7),n.get(39-o)&&e.set(i-7,t)}}static generateCheckWords(e,t,r){let n=e.getSize()/r,i=new xr(on.getGF(r)),o=b.truncDivision(t,r),s=on.bitsToWords(e,r,o);i.encode(s,o-n);let a=t%r,l=new v;l.appendBits(0,a);for(const c of Array.from(s))l.appendBits(c,r);return l}static bitsToWords(e,t,r){let n,i,o=new Int32Array(r);for(n=0,i=e.getSize()/t;n<i;n++){let r=0;for(let i=0;i<t;i++)r|=e.get(n*t+i)?1<<t-i-1:0;o[n]=r}return o}static getGF(e){switch(e){case 4:return ee.AZTEC_PARAM;case 6:return ee.AZTEC_DATA_6;case 8:return ee.AZTEC_DATA_8;case 10:return ee.AZTEC_DATA_10;case 12:return ee.AZTEC_DATA_12;default:throw new d("Unsupported word size "+e)}}static stuffBits(e,t){let r=new v,n=e.getSize(),i=(1<<t)-2;for(let o=0;o<n;o+=t){let s=0;for(let r=0;r<t;r++)(o+r>=n||e.get(o+r))&&(s|=1<<t-1-r);(s&i)===i?(r.appendBits(s&i,t),o--):0===(s&i)?(r.appendBits(1|s,t),o--):r.appendBits(s,t)}return r}static totalBitsInLayer(e,t){return((t?88:112)+16*e)*e}}on.DEFAULT_EC_PERCENT=33,on.DEFAULT_AZTEC_LAYERS=0,on.MAX_NB_BITS=32,on.MAX_NB_BITS_COMPACT=4,on.WORD_SIZE=Int32Array.from([4,6,6,8,8,8,8,8,8,10,10,10,10,10,10,10,10,10,10,10,10,10,10,12,12,12,12,12,12,12,12,12,12]);class sn{encode(e,t,r,n){return this.encodeWithHints(e,t,r,n,null)}encodeWithHints(e,t,r,n,i){let o=Pr.ISO_8859_1,s=on.DEFAULT_EC_PERCENT,a=on.DEFAULT_AZTEC_LAYERS;return null!=i&&(i.has(_r.CHARACTER_SET)&&(o=Dr.forName(i.get(_r.CHARACTER_SET).toString())),i.has(_r.ERROR_CORRECTION)&&(s=b.parseInt(i.get(_r.ERROR_CORRECTION).toString())),i.has(_r.AZTEC_LAYERS)&&(a=b.parseInt(i.get(_r.AZTEC_LAYERS).toString()))),sn.encodeLayers(e,t,r,n,o,s,a)}static encodeLayers(e,t,r,n,i,o,s){if(t!==H.AZTEC)throw new d("Can only encode AZTEC, but got "+t);let a=on.encode(N.getBytes(e,i),o,s);return sn.renderResult(a,r,n)}static renderResult(e,t,r){let n=e.getMatrix();if(null==n)throw new re;let i=n.getWidth(),o=n.getHeight(),s=Math.max(t,i),a=Math.max(r,o),l=Math.min(s/i,a/o),c=(s-i*l)/2,u=(a-o*l)/2,d=new T(s,a);for(let h=0,f=u;h<o;h++,f+=l)for(let e=0,t=c;e<i;e++,t+=l)n.get(e,h)&&d.setRegion(t,f,l,l);return d}}e.AbstractExpandedDecoder=Ge,e.ArgumentException=u,e.ArithmeticException=J,e.AztecCode=Lr,e.AztecCodeReader=ye,e.AztecCodeWriter=sn,e.AztecDecoder=ie,e.AztecDetector=ge,e.AztecDetectorResult=ce,e.AztecEncoder=on,e.AztecHighLevelEncoder=nn,e.AztecPoint=me,e.BarcodeFormat=H,e.Binarizer=p,e.BinaryBitmap=h,e.BitArray=v,e.BitMatrix=T,e.BitSource=mt,e.BrowserAztecCodeReader=we,e.BrowserBarcodeReader=ct,e.BrowserCodeReader=F,e.BrowserDatamatrixCodeReader=vt,e.BrowserMultiFormatReader=yr,e.BrowserPDF417Reader=wr,e.BrowserQRCodeReader=br,e.BrowserQRCodeSvgWriter=Or,e.CharacterSetECI=C,e.ChecksumException=f,e.Code128Reader=ve,e.Code39Reader=_e,e.DataMatrixDecodedBitStreamParser=gt,e.DataMatrixReader=bt,e.DecodeHintType=x,e.DecoderResult=Q,e.DefaultGridSampler=fe,e.DetectorResult=le,e.EAN13Reader=Ie,e.EncodeHintType=_r,e.Exception=c,e.FormatException=E,e.GenericGF=ee,e.GenericGFPoly=K,e.GlobalHistogramBinarizer=k,e.GridSampler=de,e.GridSamplerInstance=pe,e.HTMLCanvasElementLuminanceSource=D,e.HybridBinarizer=R,e.ITFReader=xe,e.IllegalArgumentException=d,e.IllegalStateException=re,e.InvertedLuminanceSource=j,e.LuminanceSource=M,e.MathUtils=oe,e.MultiFormatOneDReader=lt,e.MultiFormatReader=gr,e.MultiFormatWriter=Rr,e.NotFoundException=O,e.OneDReader=be,e.PDF417DecodedBitStreamParser=hr,e.PDF417DecoderErrorCorrection=$t,e.PDF417Reader=pr,e.PDF417ResultMetadata=rr,e.PerspectiveTransform=he,e.PlanarYUVLuminanceSource=Mr,e.QRCodeByteMatrix=Cr,e.QRCodeDataMask=At,e.QRCodeDecodedBitStreamParser=Ot,e.QRCodeDecoderErrorCorrectionLevel=_t,e.QRCodeDecoderFormatInformation=xt,e.QRCodeEncoder=Tr,e.QRCodeEncoderQRCode=Sr,e.QRCodeMaskUtil=Er,e.QRCodeMatrixUtil=Nr,e.QRCodeMode=Tt,e.QRCodeReader=Ft,e.QRCodeVersion=St,e.QRCodeWriter=kr,e.RGBLuminanceSource=jr,e.RSS14Reader=at,e.RSSExpandedReader=ot,e.ReaderException=mr,e.ReedSolomonDecoder=ne,e.ReedSolomonEncoder=xr,e.ReedSolomonException=te,e.Result=U,e.ResultMetadataType=q,e.ResultPoint=ae,e.StringUtils=N,e.UnsupportedOperationException=S,e.VideoInputDevice=P,e.WhiteRectangleDetector=ue,e.WriterException=Ar,e.ZXingArrays=w,e.ZXingCharset=Dr,e.ZXingInteger=b,e.ZXingStandardCharsets=Pr,e.ZXingStringBuilder=I,e.ZXingStringEncoding=A,e.ZXingSystem=m,e.createAbstractExpandedDecoder=rt,Object.defineProperty(e,"__esModule",{value:!0})}(t)},652:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(2677);t.default=function(e,t,r){var i=e.split("").map((function(e,r){return n.BINARIES[t[r]]})).map((function(t,r){return t?t[e[r]]:""}));if(r){var o=e.length-1;i=i.map((function(e,t){return t<o?e+r:e}))}return i.join("")}},959:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=[];return function e(r){if(Array.isArray(r))for(var n=0;n<r.length;n++)e(r[n]);else r.text=r.text||"",r.data=r.data||"",t.push(r)}(e),t}},1053:function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.PostgrestError=t.PostgrestBuilder=t.PostgrestTransformBuilder=t.PostgrestFilterBuilder=t.PostgrestQueryBuilder=t.PostgrestClient=void 0;const i=n(r(5071));t.PostgrestClient=i.default;const o=n(r(47));t.PostgrestQueryBuilder=o.default;const s=n(r(4011));t.PostgrestFilterBuilder=s.default;const a=n(r(7427));t.PostgrestTransformBuilder=a.default;const l=n(r(6569));t.PostgrestBuilder=l.default;const c=n(r(5732));t.PostgrestError=c.default,t.default={PostgrestClient:i.default,PostgrestQueryBuilder:o.default,PostgrestFilterBuilder:s.default,PostgrestTransformBuilder:a.default,PostgrestBuilder:l.default,PostgrestError:c.default}},1086:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n,i=r(3785),o=(n=i)&&n.__esModule?n:{default:n},s=r(2450);var a=function(e){function t(e,r){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),e+=(0,s.mod11)(e),e+=(0,s.mod10)(e),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,r))}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t}(o.default);t.default=a},1178:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MSI1110=t.MSI1010=t.MSI11=t.MSI10=t.MSI=void 0;var n=l(r(3785)),i=l(r(9172)),o=l(r(6171)),s=l(r(4977)),a=l(r(1086));function l(e){return e&&e.__esModule?e:{default:e}}t.MSI=n.default,t.MSI10=i.default,t.MSI11=o.default,t.MSI1010=s.default,t.MSI1110=a.default},1330:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CODE39=void 0;var n,i=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),o=r(1810);var s=function(e){function t(e,r){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),e=e.toUpperCase(),r.mod43&&(e+=function(e){return a[e]}(function(e){for(var t=0,r=0;r<e.length;r++)t+=u(e[r]);return t%=43}(e))),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,r))}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),i(t,[{key:"encode",value:function(){for(var e=c("*"),t=0;t<this.data.length;t++)e+=c(this.data[t])+"0";return{data:e+=c("*"),text:this.text}}},{key:"valid",value:function(){return-1!==this.data.search(/^[0-9A-Z\-\.\ \$\/\+\%]+$/)}}]),t}(((n=o)&&n.__esModule?n:{default:n}).default),a=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","-","."," ","$","/","+","%","*"],l=[20957,29783,23639,30485,20951,29813,23669,20855,29789,23645,29975,23831,30533,22295,30149,24005,21623,29981,23837,22301,30023,23879,30545,22343,30161,24017,21959,30065,23921,22385,29015,18263,29141,17879,29045,18293,17783,29021,18269,17477,17489,17681,20753,35770];function c(e){return function(e){return l[e].toString(2)}(u(e))}function u(e){return a.indexOf(e)}t.CODE39=s},1352:(e,t,r)=>{"use strict";var n=r(7119);t.createRoot=n.createRoot,t.hydrateRoot=n.hydrateRoot},1503:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CODE128C=t.CODE128B=t.CODE128A=t.CODE128=void 0;var n=a(r(7931)),i=a(r(3810)),o=a(r(9711)),s=a(r(5352));function a(e){return e&&e.__esModule?e:{default:e}}t.CODE128=n.default,t.CODE128A=i.default,t.CODE128B=o.default,t.CODE128C=s.default},1761:(e,t)=>{"use strict";function r(e,t){var r=e.length;e.push(t);e:for(;0<r;){var n=r-1>>>1,i=e[n];if(!(0<o(i,t)))break e;e[n]=t,e[r]=i,r=n}}function n(e){return 0===e.length?null:e[0]}function i(e){if(0===e.length)return null;var t=e[0],r=e.pop();if(r!==t){e[0]=r;e:for(var n=0,i=e.length,s=i>>>1;n<s;){var a=2*(n+1)-1,l=e[a],c=a+1,u=e[c];if(0>o(l,r))c<i&&0>o(u,l)?(e[n]=u,e[c]=r,n=c):(e[n]=l,e[a]=r,n=a);else{if(!(c<i&&0>o(u,r)))break e;e[n]=u,e[c]=r,n=c}}}return t}function o(e,t){var r=e.sortIndex-t.sortIndex;return 0!==r?r:e.id-t.id}if("object"===typeof performance&&"function"===typeof performance.now){var s=performance;t.unstable_now=function(){return s.now()}}else{var a=Date,l=a.now();t.unstable_now=function(){return a.now()-l}}var c=[],u=[],d=1,h=null,f=3,p=!1,m=!1,g=!1,y="function"===typeof setTimeout?setTimeout:null,w="function"===typeof clearTimeout?clearTimeout:null,b="undefined"!==typeof setImmediate?setImmediate:null;function v(e){for(var t=n(u);null!==t;){if(null===t.callback)i(u);else{if(!(t.startTime<=e))break;i(u),t.sortIndex=t.expirationTime,r(c,t)}t=n(u)}}function _(e){if(g=!1,v(e),!m)if(null!==n(c))m=!0,M(x);else{var t=n(u);null!==t&&j(_,t.startTime-e)}}function x(e,r){m=!1,g&&(g=!1,w(A),A=-1),p=!0;var o=f;try{for(v(r),h=n(c);null!==h&&(!(h.expirationTime>r)||e&&!T());){var s=h.callback;if("function"===typeof s){h.callback=null,f=h.priorityLevel;var a=s(h.expirationTime<=r);r=t.unstable_now(),"function"===typeof a?h.callback=a:h===n(c)&&i(c),v(r)}else i(c);h=n(c)}if(null!==h)var l=!0;else{var d=n(u);null!==d&&j(_,d.startTime-r),l=!1}return l}finally{h=null,f=o,p=!1}}"undefined"!==typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var E,C=!1,S=null,A=-1,N=5,I=-1;function T(){return!(t.unstable_now()-I<N)}function O(){if(null!==S){var e=t.unstable_now();I=e;var r=!0;try{r=S(!0,e)}finally{r?E():(C=!1,S=null)}}else C=!1}if("function"===typeof b)E=function(){b(O)};else if("undefined"!==typeof MessageChannel){var k=new MessageChannel,R=k.port2;k.port1.onmessage=O,E=function(){R.postMessage(null)}}else E=function(){y(O,0)};function M(e){S=e,C||(C=!0,E())}function j(e,r){A=y((function(){e(t.unstable_now())}),r)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){m||p||(m=!0,M(x))},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):N=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return f},t.unstable_getFirstCallbackNode=function(){return n(c)},t.unstable_next=function(e){switch(f){case 1:case 2:case 3:var t=3;break;default:t=f}var r=f;f=t;try{return e()}finally{f=r}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var r=f;f=e;try{return t()}finally{f=r}},t.unstable_scheduleCallback=function(e,i,o){var s=t.unstable_now();switch("object"===typeof o&&null!==o?o="number"===typeof(o=o.delay)&&0<o?s+o:s:o=s,e){case 1:var a=-1;break;case 2:a=250;break;case 5:a=1073741823;break;case 4:a=1e4;break;default:a=5e3}return e={id:d++,callback:i,priorityLevel:e,startTime:o,expirationTime:a=o+a,sortIndex:-1},o>s?(e.sortIndex=o,r(u,e),null===n(c)&&e===n(u)&&(g?(w(A),A=-1):g=!0,j(_,o-s))):(e.sortIndex=a,r(c,e),m||p||(m=!0,M(x))),e},t.unstable_shouldYield=T,t.unstable_wrapCallback=function(e){var t=f;return function(){var r=f;f=t;try{return e.apply(this,arguments)}finally{f=r}}}},1810:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default=function e(t,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.data=t,this.text=r.text||t,this.options=r}},1813:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r={width:2,height:100,format:"auto",displayValue:!0,fontOptions:"",font:"monospace",text:void 0,textAlign:"center",textPosition:"bottom",textMargin:2,fontSize:20,background:"#ffffff",lineColor:"#000000",margin:10,marginTop:void 0,marginBottom:void 0,marginLeft:void 0,marginRight:void 0,valid:function(){}};t.default=r},1942:(e,t,r)=>{e.exports=r(3488)()},2049:(e,t)=>{"use strict";var r=Symbol.for("react.element"),n=Symbol.for("react.portal"),i=Symbol.for("react.fragment"),o=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),a=Symbol.for("react.provider"),l=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),u=Symbol.for("react.suspense"),d=Symbol.for("react.memo"),h=Symbol.for("react.lazy"),f=Symbol.iterator;var p={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},m=Object.assign,g={};function y(e,t,r){this.props=e,this.context=t,this.refs=g,this.updater=r||p}function w(){}function b(e,t,r){this.props=e,this.context=t,this.refs=g,this.updater=r||p}y.prototype.isReactComponent={},y.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},y.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},w.prototype=y.prototype;var v=b.prototype=new w;v.constructor=b,m(v,y.prototype),v.isPureReactComponent=!0;var _=Array.isArray,x=Object.prototype.hasOwnProperty,E={current:null},C={key:!0,ref:!0,__self:!0,__source:!0};function S(e,t,n){var i,o={},s=null,a=null;if(null!=t)for(i in void 0!==t.ref&&(a=t.ref),void 0!==t.key&&(s=""+t.key),t)x.call(t,i)&&!C.hasOwnProperty(i)&&(o[i]=t[i]);var l=arguments.length-2;if(1===l)o.children=n;else if(1<l){for(var c=Array(l),u=0;u<l;u++)c[u]=arguments[u+2];o.children=c}if(e&&e.defaultProps)for(i in l=e.defaultProps)void 0===o[i]&&(o[i]=l[i]);return{$$typeof:r,type:e,key:s,ref:a,props:o,_owner:E.current}}function A(e){return"object"===typeof e&&null!==e&&e.$$typeof===r}var N=/\/+/g;function I(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,(function(e){return t[e]}))}(""+e.key):t.toString(36)}function T(e,t,i,o,s){var a=typeof e;"undefined"!==a&&"boolean"!==a||(e=null);var l=!1;if(null===e)l=!0;else switch(a){case"string":case"number":l=!0;break;case"object":switch(e.$$typeof){case r:case n:l=!0}}if(l)return s=s(l=e),e=""===o?"."+I(l,0):o,_(s)?(i="",null!=e&&(i=e.replace(N,"$&/")+"/"),T(s,t,i,"",(function(e){return e}))):null!=s&&(A(s)&&(s=function(e,t){return{$$typeof:r,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(s,i+(!s.key||l&&l.key===s.key?"":(""+s.key).replace(N,"$&/")+"/")+e)),t.push(s)),1;if(l=0,o=""===o?".":o+":",_(e))for(var c=0;c<e.length;c++){var u=o+I(a=e[c],c);l+=T(a,t,i,u,s)}else if(u=function(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=f&&e[f]||e["@@iterator"])?e:null}(e),"function"===typeof u)for(e=u.call(e),c=0;!(a=e.next()).done;)l+=T(a=a.value,t,i,u=o+I(a,c++),s);else if("object"===a)throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return l}function O(e,t,r){if(null==e)return e;var n=[],i=0;return T(e,n,"","",(function(e){return t.call(r,e,i++)})),n}function k(e){if(-1===e._status){var t=e._result;(t=t()).then((function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)}),(function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)})),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var R={current:null},M={transition:null},j={ReactCurrentDispatcher:R,ReactCurrentBatchConfig:M,ReactCurrentOwner:E};function D(){throw Error("act(...) is not supported in production builds of React.")}t.Children={map:O,forEach:function(e,t,r){O(e,(function(){t.apply(this,arguments)}),r)},count:function(e){var t=0;return O(e,(function(){t++})),t},toArray:function(e){return O(e,(function(e){return e}))||[]},only:function(e){if(!A(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},t.Component=y,t.Fragment=i,t.Profiler=s,t.PureComponent=b,t.StrictMode=o,t.Suspense=u,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=j,t.act=D,t.cloneElement=function(e,t,n){if(null===e||void 0===e)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var i=m({},e.props),o=e.key,s=e.ref,a=e._owner;if(null!=t){if(void 0!==t.ref&&(s=t.ref,a=E.current),void 0!==t.key&&(o=""+t.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(c in t)x.call(t,c)&&!C.hasOwnProperty(c)&&(i[c]=void 0===t[c]&&void 0!==l?l[c]:t[c])}var c=arguments.length-2;if(1===c)i.children=n;else if(1<c){l=Array(c);for(var u=0;u<c;u++)l[u]=arguments[u+2];i.children=l}return{$$typeof:r,type:e.type,key:o,ref:s,props:i,_owner:a}},t.createContext=function(e){return(e={$$typeof:l,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:a,_context:e},e.Consumer=e},t.createElement=S,t.createFactory=function(e){var t=S.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:c,render:e}},t.isValidElement=A,t.lazy=function(e){return{$$typeof:h,_payload:{_status:-1,_result:e},_init:k}},t.memo=function(e,t){return{$$typeof:d,type:e,compare:void 0===t?null:t}},t.startTransition=function(e){var t=M.transition;M.transition={};try{e()}finally{M.transition=t}},t.unstable_act=D,t.useCallback=function(e,t){return R.current.useCallback(e,t)},t.useContext=function(e){return R.current.useContext(e)},t.useDebugValue=function(){},t.useDeferredValue=function(e){return R.current.useDeferredValue(e)},t.useEffect=function(e,t){return R.current.useEffect(e,t)},t.useId=function(){return R.current.useId()},t.useImperativeHandle=function(e,t,r){return R.current.useImperativeHandle(e,t,r)},t.useInsertionEffect=function(e,t){return R.current.useInsertionEffect(e,t)},t.useLayoutEffect=function(e,t){return R.current.useLayoutEffect(e,t)},t.useMemo=function(e,t){return R.current.useMemo(e,t)},t.useReducer=function(e,t,r){return R.current.useReducer(e,t,r)},t.useRef=function(e){return R.current.useRef(e)},t.useState=function(e){return R.current.useState(e)},t.useSyncExternalStore=function(e,t,r){return R.current.useSyncExternalStore(e,t,r)},t.useTransition=function(){return R.current.useTransition()},t.version="18.3.1"},2450:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.mod10=function(e){for(var t=0,r=0;r<e.length;r++){var n=parseInt(e[r]);(r+e.length)%2===0?t+=n:t+=2*n%10+Math.floor(2*n/10)}return(10-t%10)%10},t.mod11=function(e){for(var t=0,r=[2,3,4,5,6,7],n=0;n<e.length;n++){var i=parseInt(e[e.length-1-n]);t+=r[n%r.length]*i}return(11-t%11)%11}},2620:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),i=r(2677),o=s(r(652));function s(e){return e&&e.__esModule?e:{default:e}}var a=function(e){function t(e,r){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,r))}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),n(t,[{key:"valid",value:function(){return-1!==this.data.search(/^[0-9]{2}$/)}},{key:"encode",value:function(){var e=i.EAN2_STRUCTURE[parseInt(this.data)%4];return{data:"1011"+(0,o.default)(this.data,e,"01"),text:this.text}}}]),t}(s(r(1810)).default);t.default=a},2654:(e,t,r)=>{"use strict";var n=r(9950),i=Symbol.for("react.element"),o=Symbol.for("react.fragment"),s=Object.prototype.hasOwnProperty,a=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,l={key:!0,ref:!0,__self:!0,__source:!0};function c(e,t,r){var n,o={},c=null,u=null;for(n in void 0!==r&&(c=""+r),void 0!==t.key&&(c=""+t.key),void 0!==t.ref&&(u=t.ref),t)s.call(t,n)&&!l.hasOwnProperty(n)&&(o[n]=t[n]);if(e&&e.defaultProps)for(n in t=e.defaultProps)void 0===o[n]&&(o[n]=t[n]);return{$$typeof:i,type:e,key:c,ref:u,props:o,_owner:a.current}}t.Fragment=o,t.jsx=c,t.jsxs=c},2677:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.SIDE_BIN="101",t.MIDDLE_BIN="01010",t.BINARIES={L:["0001101","0011001","0010011","0111101","0100011","0110001","0101111","0111011","0110111","0001011"],G:["0100111","0110011","0011011","0100001","0011101","0111001","0000101","0010001","0001001","0010111"],R:["1110010","1100110","1101100","1000010","1011100","1001110","1010000","1000100","1001000","1110100"],O:["0001101","0011001","0010011","0111101","0100011","0110001","0101111","0111011","0110111","0001011"],E:["0100111","0110011","0011011","0100001","0011101","0111001","0000101","0010001","0001001","0010111"]},t.EAN2_STRUCTURE=["LL","LG","GL","GG"],t.EAN5_STRUCTURE=["GGLLL","GLGLL","GLLGL","GLLLG","LGGLL","LLGGL","LLLGG","LGLGL","LGLLG","LLGLG"],t.EAN13_STRUCTURE=["LLLLLL","LLGLGG","LLGGLG","LLGGGL","LGLLGG","LGGLLG","LGGGLL","LGLGLG","LGLGGL","LGGLGL"]},2709:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.version=void 0,t.version="0.0.0-automated"},2928:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.GenericBarcode=void 0;var n,i=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),o=r(1810);var s=function(e){function t(e,r){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,r))}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),i(t,[{key:"encode",value:function(){return{data:"10101010101010101010101010101010101010101",text:this.text}}},{key:"valid",value:function(){return!0}}]),t}(((n=o)&&n.__esModule?n:{default:n}).default);t.GenericBarcode=s},3051:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n,i=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),o=r(7084),s=(n=o)&&n.__esModule?n:{default:n},a=r(8488);var l="http://www.w3.org/2000/svg",c=function(){function e(t,r,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.svg=t,this.encodings=r,this.options=n,this.document=n.xmlDocument||document}return i(e,[{key:"render",value:function(){var e=this.options.marginLeft;this.prepareSVG();for(var t=0;t<this.encodings.length;t++){var r=this.encodings[t],n=(0,s.default)(this.options,r.options),i=this.createGroup(e,n.marginTop,this.svg);this.setGroupOptions(i,n),this.drawSvgBarcode(i,n,r),this.drawSVGText(i,n,r),e+=r.width}}},{key:"prepareSVG",value:function(){for(;this.svg.firstChild;)this.svg.removeChild(this.svg.firstChild);(0,a.calculateEncodingAttributes)(this.encodings,this.options);var e=(0,a.getTotalWidthOfEncodings)(this.encodings),t=(0,a.getMaximumHeightOfEncodings)(this.encodings),r=e+this.options.marginLeft+this.options.marginRight;this.setSvgAttributes(r,t),this.options.background&&this.drawRect(0,0,r,t,this.svg).setAttribute("style","fill:"+this.options.background+";")}},{key:"drawSvgBarcode",value:function(e,t,r){var n,i=r.data;n="top"==t.textPosition?t.fontSize+t.textMargin:0;for(var o=0,s=0,a=0;a<i.length;a++)s=a*t.width+r.barcodePadding,"1"===i[a]?o++:o>0&&(this.drawRect(s-t.width*o,n,t.width*o,t.height,e),o=0);o>0&&this.drawRect(s-t.width*(o-1),n,t.width*o,t.height,e)}},{key:"drawSVGText",value:function(e,t,r){var n,i,o=this.document.createElementNS(l,"text");t.displayValue&&(o.setAttribute("style","font:"+t.fontOptions+" "+t.fontSize+"px "+t.font),i="top"==t.textPosition?t.fontSize-t.textMargin:t.height+t.textMargin+t.fontSize,"left"==t.textAlign||r.barcodePadding>0?(n=0,o.setAttribute("text-anchor","start")):"right"==t.textAlign?(n=r.width-1,o.setAttribute("text-anchor","end")):(n=r.width/2,o.setAttribute("text-anchor","middle")),o.setAttribute("x",n),o.setAttribute("y",i),o.appendChild(this.document.createTextNode(r.text)),e.appendChild(o))}},{key:"setSvgAttributes",value:function(e,t){var r=this.svg;r.setAttribute("width",e+"px"),r.setAttribute("height",t+"px"),r.setAttribute("x","0px"),r.setAttribute("y","0px"),r.setAttribute("viewBox","0 0 "+e+" "+t),r.setAttribute("xmlns",l),r.setAttribute("version","1.1"),r.setAttribute("style","transform: translate(0,0)")}},{key:"createGroup",value:function(e,t,r){var n=this.document.createElementNS(l,"g");return n.setAttribute("transform","translate("+e+", "+t+")"),r.appendChild(n),n}},{key:"setGroupOptions",value:function(e,t){e.setAttribute("style","fill:"+t.lineColor+";")}},{key:"drawRect",value:function(e,t,r,n,i){var o=this.document.createElementNS(l,"rect");return o.setAttribute("x",e),o.setAttribute("y",t),o.setAttribute("width",r),o.setAttribute("height",n),i.appendChild(o),o}}]),e}();t.default=c},3291:(e,t,r)=>{"use strict";var n=h(r(562)),i=h(r(7084)),o=h(r(959)),s=h(r(4377)),a=h(r(5141)),l=h(r(7530)),c=h(r(355)),u=r(6739),d=h(r(1813));function h(e){return e&&e.__esModule?e:{default:e}}var f=function(){},p=function(e,t,r){var n=new f;if("undefined"===typeof e)throw Error("No element to render on was provided.");return n._renderProperties=(0,a.default)(e),n._encodings=[],n._options=d.default,n._errorHandler=new c.default(n),"undefined"!==typeof t&&((r=r||{}).format||(r.format=w()),n.options(r)[r.format](t,r).render()),n};for(var m in p.getModule=function(e){return n.default[e]},n.default)n.default.hasOwnProperty(m)&&g(n.default,m);function g(e,t){f.prototype[t]=f.prototype[t.toUpperCase()]=f.prototype[t.toLowerCase()]=function(r,n){var o=this;return o._errorHandler.wrapBarcodeCall((function(){n.text="undefined"===typeof n.text?void 0:""+n.text;var s=(0,i.default)(o._options,n);s=(0,l.default)(s);var a=e[t],c=y(r,a,s);return o._encodings.push(c),o}))}}function y(e,t,r){var n=new t(e=""+e,r);if(!n.valid())throw new u.InvalidInputException(n.constructor.name,e);var s=n.encode();s=(0,o.default)(s);for(var a=0;a<s.length;a++)s[a].options=(0,i.default)(r,s[a].options);return s}function w(){return n.default.CODE128?"CODE128":Object.keys(n.default)[0]}function b(e,t,r){t=(0,o.default)(t);for(var n=0;n<t.length;n++)t[n].options=(0,i.default)(r,t[n].options),(0,s.default)(t[n].options);(0,s.default)(r),new(0,e.renderer)(e.element,t,r).render(),e.afterRender&&e.afterRender()}f.prototype.options=function(e){return this._options=(0,i.default)(this._options,e),this},f.prototype.blank=function(e){var t=new Array(e+1).join("0");return this._encodings.push({data:t}),this},f.prototype.init=function(){var e;if(this._renderProperties)for(var t in Array.isArray(this._renderProperties)||(this._renderProperties=[this._renderProperties]),this._renderProperties){e=this._renderProperties[t];var r=(0,i.default)(this._options,e.options);"auto"==r.format&&(r.format=w()),this._errorHandler.wrapBarcodeCall((function(){var t=y(r.value,n.default[r.format.toUpperCase()],r);b(e,t,r)}))}},f.prototype.render=function(){if(!this._renderProperties)throw new u.NoElementException;if(Array.isArray(this._renderProperties))for(var e=0;e<this._renderProperties.length;e++)b(this._renderProperties[e],this._encodings,this._options);else b(this._renderProperties,this._encodings,this._options);return this},f.prototype._defaults=d.default,"undefined"!==typeof window&&(window.JsBarcode=p),"undefined"!==typeof jQuery&&(jQuery.fn.JsBarcode=function(e,t){var r=[];return jQuery(this).each((function(){r.push(this)})),p(r,e,t)}),e.exports=p},3415:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.pharmacode=void 0;var n,i=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),o=r(1810);var s=function(e){function t(e,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,r));return n.number=parseInt(e,10),n}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),i(t,[{key:"encode",value:function(){for(var e=this.number,t="";!isNaN(e)&&0!=e;)e%2===0?(t="11100"+t,e=(e-2)/2):(t="100"+t,e=(e-1)/2);return{data:t=t.slice(0,-2),text:this.text}}},{key:"valid",value:function(){return this.number>=3&&this.number<=131070}}]),t}(((n=o)&&n.__esModule?n:{default:n}).default);t.pharmacode=s},3488:(e,t,r)=>{"use strict";var n=r(3959);function i(){}function o(){}o.resetWarningCache=i,e.exports=function(){function e(e,t,r,i,o,s){if(s!==n){var a=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw a.name="Invariant Violation",a}}function t(){return e}e.isRequired=e;var r={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:o,resetWarningCache:i};return r.PropTypes=r,r}},3785:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n,i=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),o=r(1810);var s=function(e){function t(e,r){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,r))}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),i(t,[{key:"encode",value:function(){for(var e="110",t=0;t<this.data.length;t++){var r=parseInt(this.data[t]).toString(2);r=a(r,4-r.length);for(var n=0;n<r.length;n++)e+="0"==r[n]?"100":"110"}return{data:e+="1001",text:this.text}}},{key:"valid",value:function(){return-1!==this.data.search(/^[0-9]+$/)}}]),t}(((n=o)&&n.__esModule?n:{default:n}).default);function a(e,t){for(var r=0;r<t;r++)e="0"+e;return e}t.default=s},3810:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n,i=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),o=r(5629),s=(n=o)&&n.__esModule?n:{default:n},a=r(6866);var l=function(e){function t(e,r){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,a.A_START_CHAR+e,r))}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),i(t,[{key:"valid",value:function(){return new RegExp("^"+a.A_CHARS+"+$").test(this.data)}}]),t}(s.default);t.default=l},3959:e=>{"use strict";e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},4011:function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const i=n(r(7427));class o extends i.default{eq(e,t){return this.url.searchParams.append(e,`eq.${t}`),this}neq(e,t){return this.url.searchParams.append(e,`neq.${t}`),this}gt(e,t){return this.url.searchParams.append(e,`gt.${t}`),this}gte(e,t){return this.url.searchParams.append(e,`gte.${t}`),this}lt(e,t){return this.url.searchParams.append(e,`lt.${t}`),this}lte(e,t){return this.url.searchParams.append(e,`lte.${t}`),this}like(e,t){return this.url.searchParams.append(e,`like.${t}`),this}likeAllOf(e,t){return this.url.searchParams.append(e,`like(all).{${t.join(",")}}`),this}likeAnyOf(e,t){return this.url.searchParams.append(e,`like(any).{${t.join(",")}}`),this}ilike(e,t){return this.url.searchParams.append(e,`ilike.${t}`),this}ilikeAllOf(e,t){return this.url.searchParams.append(e,`ilike(all).{${t.join(",")}}`),this}ilikeAnyOf(e,t){return this.url.searchParams.append(e,`ilike(any).{${t.join(",")}}`),this}is(e,t){return this.url.searchParams.append(e,`is.${t}`),this}in(e,t){const r=Array.from(new Set(t)).map((e=>"string"===typeof e&&new RegExp("[,()]").test(e)?`"${e}"`:`${e}`)).join(",");return this.url.searchParams.append(e,`in.(${r})`),this}contains(e,t){return"string"===typeof t?this.url.searchParams.append(e,`cs.${t}`):Array.isArray(t)?this.url.searchParams.append(e,`cs.{${t.join(",")}}`):this.url.searchParams.append(e,`cs.${JSON.stringify(t)}`),this}containedBy(e,t){return"string"===typeof t?this.url.searchParams.append(e,`cd.${t}`):Array.isArray(t)?this.url.searchParams.append(e,`cd.{${t.join(",")}}`):this.url.searchParams.append(e,`cd.${JSON.stringify(t)}`),this}rangeGt(e,t){return this.url.searchParams.append(e,`sr.${t}`),this}rangeGte(e,t){return this.url.searchParams.append(e,`nxl.${t}`),this}rangeLt(e,t){return this.url.searchParams.append(e,`sl.${t}`),this}rangeLte(e,t){return this.url.searchParams.append(e,`nxr.${t}`),this}rangeAdjacent(e,t){return this.url.searchParams.append(e,`adj.${t}`),this}overlaps(e,t){return"string"===typeof t?this.url.searchParams.append(e,`ov.${t}`):this.url.searchParams.append(e,`ov.{${t.join(",")}}`),this}textSearch(e,t){let{config:r,type:n}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i="";"plain"===n?i="pl":"phrase"===n?i="ph":"websearch"===n&&(i="w");const o=void 0===r?"":`(${r})`;return this.url.searchParams.append(e,`${i}fts${o}.${t}`),this}match(e){return Object.entries(e).forEach((e=>{let[t,r]=e;this.url.searchParams.append(t,`eq.${r}`)})),this}not(e,t,r){return this.url.searchParams.append(e,`not.${t}.${r}`),this}or(e){let{foreignTable:t,referencedTable:r=t}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n=r?`${r}.or`:"or";return this.url.searchParams.append(n,`(${e})`),this}filter(e,t,r){return this.url.searchParams.append(e,`${t}.${r}`),this}}t.default=o},4181:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=s(r(6645)),i=s(r(3051)),o=s(r(8582));function s(e){return e&&e.__esModule?e:{default:e}}t.default={CanvasRenderer:n.default,SVGRenderer:i.default,ObjectRenderer:o.default}},4286:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n,i=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),o=function e(t,r,n){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,r);if(void 0===i){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,r,n)}if("value"in i)return i.value;var s=i.get;return void 0!==s?s.call(n):void 0},s=r(9452),a=(n=s)&&n.__esModule?n:{default:n};var l=function(e){return(10-e.substr(0,7).split("").map((function(e){return+e})).reduce((function(e,t,r){return r%2?e+t:e+3*t}),0)%10)%10},c=function(e){function t(e,r){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),-1!==e.search(/^[0-9]{7}$/)&&(e+=l(e)),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,r))}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),i(t,[{key:"valid",value:function(){return-1!==this.data.search(/^[0-9]{8}$/)&&+this.data[7]===l(this.data)}},{key:"leftText",value:function(){return o(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"leftText",this).call(this,0,4)}},{key:"leftEncode",value:function(){var e=this.data.substr(0,4);return o(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"leftEncode",this).call(this,e,"LLLL")}},{key:"rightText",value:function(){return o(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"rightText",this).call(this,4,4)}},{key:"rightEncode",value:function(){var e=this.data.substr(4,4);return o(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"rightEncode",this).call(this,e,"RRRR")}}]),t}(a.default);t.default=c},4353:(e,t,r)=>{"use strict";function n(e){return n="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}var i,o=l(r(9950)),s=l(r(3291)),a=l(r(1942));function l(e){return e&&e.__esModule?e:{default:e}}function c(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function u(e){return u=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},u(e)}function d(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function h(e,t){return h=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},h(e,t)}var f=o.default.version.split(/[.-]/);i="0"!==f[0]||"13"!==f[1]&&"12"!==f[1]?function(e){return e}:function(e){return e.getDOMNode()};var p=function(e){function t(e){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(r=function(e,t){return!t||"object"!==n(t)&&"function"!==typeof t?d(e):t}(this,u(t).call(this,e))).renderElementRef=o.default.createRef(),r.update=r.update.bind(d(r)),r}var r,a,l;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&h(e,t)}(t,e),r=t,(a=[{key:"shouldComponentUpdate",value:function(e){var r=this;return Object.keys(t.propTypes).some((function(t){return r.props[t]!==e[t]}))}},{key:"componentDidMount",value:function(){this.update()}},{key:"componentDidUpdate",value:function(){this.update()}},{key:"update",value:function(){var e=i(this.renderElementRef.current);try{new s.default(e,this.props.value,Object.assign({},this.props))}catch(t){window.console.error(t)}}},{key:"render",value:function(){var e=this.props,t=e.id,r=e.className;return"svg"===this.props.renderer?o.default.createElement("svg",{ref:this.renderElementRef,id:t,className:r}):"canvas"===this.props.renderer?o.default.createElement("canvas",{ref:this.renderElementRef,id:t,className:r}):"img"===this.props.renderer?o.default.createElement("img",{ref:this.renderElementRef,id:t,className:r}):void 0}}])&&c(r.prototype,a),l&&c(r,l),t}(o.default.Component);p.propTypes={value:a.default.string.isRequired,renderer:a.default.string,format:a.default.string,width:a.default.number,height:a.default.number,displayValue:a.default.bool,fontOptions:a.default.string,font:a.default.string,textAlign:a.default.string,textPosition:a.default.string,textMargin:a.default.number,fontSize:a.default.number,background:a.default.string,lineColor:a.default.string,margin:a.default.number,marginTop:a.default.number,marginBottom:a.default.number,marginLeft:a.default.number,marginRight:a.default.number,id:a.default.string,className:a.default.string,ean128:a.default.bool},p.defaultProps={format:"CODE128",renderer:"svg",width:2,height:100,displayValue:!0,fontOptions:"",font:"monospace",textAlign:"center",textPosition:"bottom",textMargin:2,fontSize:20,background:"#ffffff",lineColor:"#000000",margin:10,className:"",ean128:!1},e.exports=p},4377:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return e.marginTop=e.marginTop||e.margin,e.marginBottom=e.marginBottom||e.margin,e.marginRight=e.marginRight||e.margin,e.marginLeft=e.marginLeft||e.margin,e}},4414:(e,t,r)=>{"use strict";e.exports=r(2654)},4621:(e,t,r)=>{"use strict";r.r(t),r.d(t,{Headers:()=>s,Request:()=>a,Response:()=>l,default:()=>o,fetch:()=>i});var n=function(){if("undefined"!==typeof self)return self;if("undefined"!==typeof window)return window;if("undefined"!==typeof r.g)return r.g;throw new Error("unable to locate global object")}();const i=n.fetch,o=n.fetch.bind(n),s=n.Headers,a=n.Request,l=n.Response},4789:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n,i=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),o=r(8877),s=r(1810);var a=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),i(t,[{key:"valid",value:function(){return-1!==this.data.search(/^([0-9]{2})+$/)}},{key:"encode",value:function(){var e=this,t=this.data.match(/.{2}/g).map((function(t){return e.encodePair(t)})).join("");return{data:o.START_BIN+t+o.END_BIN,text:this.text}}},{key:"encodePair",value:function(e){var t=o.BINARIES[e[1]];return o.BINARIES[e[0]].split("").map((function(e,r){return("1"===e?"111":"1")+("1"===t[r]?"000":"0")})).join("")}}]),t}(((n=s)&&n.__esModule?n:{default:n}).default);t.default=a},4977:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n,i=r(3785),o=(n=i)&&n.__esModule?n:{default:n},s=r(2450);var a=function(e){function t(e,r){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),e+=(0,s.mod10)(e),e+=(0,s.mod10)(e),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,r))}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t}(o.default);t.default=a},5071:function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const i=n(r(47)),o=n(r(4011)),s=r(6724);class a{constructor(e){let{headers:t={},schema:r,fetch:n}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.url=e,this.headers=Object.assign(Object.assign({},s.DEFAULT_HEADERS),t),this.schemaName=r,this.fetch=n}from(e){const t=new URL(`${this.url}/${e}`);return new i.default(t,{headers:Object.assign({},this.headers),schema:this.schemaName,fetch:this.fetch})}schema(e){return new a(this.url,{headers:this.headers,schema:e,fetch:this.fetch})}rpc(e){let t,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{head:n=!1,get:i=!1,count:s}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const a=new URL(`${this.url}/rpc/${e}`);let l;n||i?(t=n?"HEAD":"GET",Object.entries(r).filter((e=>{let[t,r]=e;return void 0!==r})).map((e=>{let[t,r]=e;return[t,Array.isArray(r)?`{${r.join(",")}}`:`${r}`]})).forEach((e=>{let[t,r]=e;a.searchParams.append(t,r)}))):(t="POST",l=r);const c=Object.assign({},this.headers);return s&&(c.Prefer=`count=${s}`),new o.default({method:t,url:a,headers:c,schema:this.schemaName,body:l,fetch:this.fetch,allowEmpty:!1})}}t.default=a},5141:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i=a(r(5738)),o=a(r(4181)),s=r(6739);function a(e){return e&&e.__esModule?e:{default:e}}function l(e){if("string"===typeof e)return function(e){var t=document.querySelectorAll(e);if(0===t.length)return;for(var r=[],n=0;n<t.length;n++)r.push(l(t[n]));return r}(e);if(Array.isArray(e)){for(var t=[],r=0;r<e.length;r++)t.push(l(e[r]));return t}if("undefined"!==typeof HTMLCanvasElement&&e instanceof HTMLImageElement)return function(e){var t=document.createElement("canvas");return{element:t,options:(0,i.default)(e),renderer:o.default.CanvasRenderer,afterRender:function(){e.setAttribute("src",t.toDataURL())}}}(e);if(e&&e.nodeName&&"svg"===e.nodeName.toLowerCase()||"undefined"!==typeof SVGElement&&e instanceof SVGElement)return{element:e,options:(0,i.default)(e),renderer:o.default.SVGRenderer};if("undefined"!==typeof HTMLCanvasElement&&e instanceof HTMLCanvasElement)return{element:e,options:(0,i.default)(e),renderer:o.default.CanvasRenderer};if(e&&e.getContext)return{element:e,renderer:o.default.CanvasRenderer};if(e&&"object"===("undefined"===typeof e?"undefined":n(e))&&!e.nodeName)return{element:e,renderer:o.default.ObjectRenderer};throw new s.InvalidElementException}t.default=l},5340:(e,t,r)=>{"use strict";e.exports=r(1761)},5352:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n,i=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),o=r(5629),s=(n=o)&&n.__esModule?n:{default:n},a=r(6866);var l=function(e){function t(e,r){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,a.C_START_CHAR+e,r))}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),i(t,[{key:"valid",value:function(){return new RegExp("^"+a.C_CHARS+"+$").test(this.data)}}]),t}(s.default);t.default=l},5619:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.codabar=void 0;var n,i=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),o=r(1810);var s=function(e){function t(e,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),0===e.search(/^[0-9\-\$\:\.\+\/]+$/)&&(e="A"+e+"A");var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e.toUpperCase(),r));return n.text=n.options.text||n.text.replace(/[A-D]/g,""),n}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),i(t,[{key:"valid",value:function(){return-1!==this.data.search(/^[A-D][0-9\-\$\:\.\+\/]+[A-D]$/)}},{key:"encode",value:function(){for(var e=[],t=this.getEncodings(),r=0;r<this.data.length;r++)e.push(t[this.data.charAt(r)]),r!==this.data.length-1&&e.push("0");return{text:this.text,data:e.join("")}}},{key:"getEncodings",value:function(){return{0:"101010011",1:"101011001",2:"101001011",3:"110010101",4:"101101001",5:"110101001",6:"100101011",7:"100101101",8:"100110101",9:"110100101","-":"101001101",$:"101100101",":":"1101011011","/":"1101101011",".":"1101101101","+":"1011011011",A:"1011001001",B:"1001001011",C:"1010010011",D:"1010011001"}}}]),t}(((n=o)&&n.__esModule?n:{default:n}).default);t.codabar=s},5629:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n,i=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),o=r(1810),s=(n=o)&&n.__esModule?n:{default:n},a=r(6866);var l=function(e){function t(e,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e.substring(1),r));return n.bytes=e.split("").map((function(e){return e.charCodeAt(0)})),n}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),i(t,[{key:"valid",value:function(){return/^[\x00-\x7F\xC8-\xD3]+$/.test(this.data)}},{key:"encode",value:function(){var e=this.bytes,r=e.shift()-105,n=a.SET_BY_CODE[r];if(void 0===n)throw new RangeError("The encoding does not start with a start character.");!0===this.shouldEncodeAsEan128()&&e.unshift(a.FNC1);var i=t.next(e,1,n);return{text:this.text===this.data?this.text.replace(/[^\x20-\x7E]/g,""):this.text,data:t.getBar(r)+i.result+t.getBar((i.checksum+r)%a.MODULO)+t.getBar(a.STOP)}}},{key:"shouldEncodeAsEan128",value:function(){var e=this.options.ean128||!1;return"string"===typeof e&&(e="true"===e.toLowerCase()),e}}],[{key:"getBar",value:function(e){return a.BARS[e]?a.BARS[e].toString():""}},{key:"correctIndex",value:function(e,t){if(t===a.SET_A){var r=e.shift();return r<32?r+64:r-32}return t===a.SET_B?e.shift()-32:10*(e.shift()-48)+e.shift()-48}},{key:"next",value:function(e,r,n){if(!e.length)return{result:"",checksum:0};var i=void 0,o=void 0;if(e[0]>=200){o=e.shift()-105;var s=a.SWAP[o];void 0!==s?i=t.next(e,r+1,s):(n!==a.SET_A&&n!==a.SET_B||o!==a.SHIFT||(e[0]=n===a.SET_A?e[0]>95?e[0]-96:e[0]:e[0]<32?e[0]+96:e[0]),i=t.next(e,r+1,n))}else o=t.correctIndex(e,n),i=t.next(e,r+1,n);var l=o*r;return{result:t.getBar(o)+i.result,checksum:l+i.checksum}}}]),t}(s.default);t.default=l},5732:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});class r extends Error{constructor(e){super(e.message),this.name="PostgrestError",this.details=e.details,this.hint=e.hint,this.code=e.code}}t.default=r},5738:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=o(r(7530)),i=o(r(1813));function o(e){return e&&e.__esModule?e:{default:e}}t.default=function(e){var t={};for(var r in i.default)i.default.hasOwnProperty(r)&&(e.hasAttribute("jsbarcode-"+r.toLowerCase())&&(t[r]=e.getAttribute("jsbarcode-"+r.toLowerCase())),e.hasAttribute("data-"+r.toLowerCase())&&(t[r]=e.getAttribute("data-"+r.toLowerCase())));return t.value=e.getAttribute("jsbarcode-value")||e.getAttribute("data-value"),t=(0,n.default)(t)}},5884:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n,i=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),o=r(4789),s=(n=o)&&n.__esModule?n:{default:n};var a=function(e){var t=e.substr(0,13).split("").map((function(e){return parseInt(e,10)})).reduce((function(e,t,r){return e+t*(3-r%2*2)}),0);return 10*Math.ceil(t/10)-t},l=function(e){function t(e,r){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),-1!==e.search(/^[0-9]{13}$/)&&(e+=a(e)),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,r))}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),i(t,[{key:"valid",value:function(){return-1!==this.data.search(/^[0-9]{14}$/)&&+this.data[13]===a(this.data)}}]),t}(s.default);t.default=l},6171:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n,i=r(3785),o=(n=i)&&n.__esModule?n:{default:n},s=r(2450);var a=function(e){function t(e,r){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e+(0,s.mod11)(e),r))}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t}(o.default);t.default=a},6569:function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const i=n(r(4621)),o=n(r(5732));t.default=class{constructor(e){this.shouldThrowOnError=!1,this.method=e.method,this.url=e.url,this.headers=e.headers,this.schema=e.schema,this.body=e.body,this.shouldThrowOnError=e.shouldThrowOnError,this.signal=e.signal,this.isMaybeSingle=e.isMaybeSingle,e.fetch?this.fetch=e.fetch:"undefined"===typeof fetch?this.fetch=i.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(e,t){return this.headers=Object.assign({},this.headers),this.headers[e]=t,this}then(e,t){void 0===this.schema||(["GET","HEAD"].includes(this.method)?this.headers["Accept-Profile"]=this.schema:this.headers["Content-Profile"]=this.schema),"GET"!==this.method&&"HEAD"!==this.method&&(this.headers["Content-Type"]="application/json");let r=(0,this.fetch)(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then((async e=>{var t,r,n;let i=null,s=null,a=null,l=e.status,c=e.statusText;if(e.ok){if("HEAD"!==this.method){const t=await e.text();""===t||(s="text/csv"===this.headers.Accept||this.headers.Accept&&this.headers.Accept.includes("application/vnd.pgrst.plan+text")?t:JSON.parse(t))}const n=null===(t=this.headers.Prefer)||void 0===t?void 0:t.match(/count=(exact|planned|estimated)/),o=null===(r=e.headers.get("content-range"))||void 0===r?void 0:r.split("/");n&&o&&o.length>1&&(a=parseInt(o[1])),this.isMaybeSingle&&"GET"===this.method&&Array.isArray(s)&&(s.length>1?(i={code:"PGRST116",details:`Results contain ${s.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},s=null,a=null,l=406,c="Not Acceptable"):s=1===s.length?s[0]:null)}else{const t=await e.text();try{i=JSON.parse(t),Array.isArray(i)&&404===e.status&&(s=[],i=null,l=200,c="OK")}catch(u){404===e.status&&""===t?(l=204,c="No Content"):i={message:t}}if(i&&this.isMaybeSingle&&(null===(n=null===i||void 0===i?void 0:i.details)||void 0===n?void 0:n.includes("0 rows"))&&(i=null,l=200,c="OK"),i&&this.shouldThrowOnError)throw new o.default(i)}return{error:i,data:s,count:a,status:l,statusText:c}}));return this.shouldThrowOnError||(r=r.catch((e=>{var t,r,n;return{error:{message:`${null!==(t=null===e||void 0===e?void 0:e.name)&&void 0!==t?t:"FetchError"}: ${null===e||void 0===e?void 0:e.message}`,details:`${null!==(r=null===e||void 0===e?void 0:e.stack)&&void 0!==r?r:""}`,hint:"",code:`${null!==(n=null===e||void 0===e?void 0:e.code)&&void 0!==n?n:""}`},data:null,count:null,status:0,statusText:""}}))),r.then(e,t)}returns(){return this}overrideTypes(){return this}}},6645:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n,i=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),o=r(7084),s=(n=o)&&n.__esModule?n:{default:n},a=r(8488);var l=function(){function e(t,r,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.canvas=t,this.encodings=r,this.options=n}return i(e,[{key:"render",value:function(){if(!this.canvas.getContext)throw new Error("The browser does not support canvas.");this.prepareCanvas();for(var e=0;e<this.encodings.length;e++){var t=(0,s.default)(this.options,this.encodings[e].options);this.drawCanvasBarcode(t,this.encodings[e]),this.drawCanvasText(t,this.encodings[e]),this.moveCanvasDrawing(this.encodings[e])}this.restoreCanvas()}},{key:"prepareCanvas",value:function(){var e=this.canvas.getContext("2d");e.save(),(0,a.calculateEncodingAttributes)(this.encodings,this.options,e);var t=(0,a.getTotalWidthOfEncodings)(this.encodings),r=(0,a.getMaximumHeightOfEncodings)(this.encodings);this.canvas.width=t+this.options.marginLeft+this.options.marginRight,this.canvas.height=r,e.clearRect(0,0,this.canvas.width,this.canvas.height),this.options.background&&(e.fillStyle=this.options.background,e.fillRect(0,0,this.canvas.width,this.canvas.height)),e.translate(this.options.marginLeft,0)}},{key:"drawCanvasBarcode",value:function(e,t){var r,n=this.canvas.getContext("2d"),i=t.data;r="top"==e.textPosition?e.marginTop+e.fontSize+e.textMargin:e.marginTop,n.fillStyle=e.lineColor;for(var o=0;o<i.length;o++){var s=o*e.width+t.barcodePadding;"1"===i[o]?n.fillRect(s,r,e.width,e.height):i[o]&&n.fillRect(s,r,e.width,e.height*i[o])}}},{key:"drawCanvasText",value:function(e,t){var r,n,i=this.canvas.getContext("2d"),o=e.fontOptions+" "+e.fontSize+"px "+e.font;e.displayValue&&(n="top"==e.textPosition?e.marginTop+e.fontSize-e.textMargin:e.height+e.textMargin+e.marginTop+e.fontSize,i.font=o,"left"==e.textAlign||t.barcodePadding>0?(r=0,i.textAlign="left"):"right"==e.textAlign?(r=t.width-1,i.textAlign="right"):(r=t.width/2,i.textAlign="center"),i.fillText(t.text,r,n))}},{key:"moveCanvasDrawing",value:function(e){this.canvas.getContext("2d").translate(e.width,0)}},{key:"restoreCanvas",value:function(){this.canvas.getContext("2d").restore()}}]),e}();t.default=l},6724:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DEFAULT_HEADERS=void 0;const n=r(2709);t.DEFAULT_HEADERS={"X-Client-Info":`postgrest-js/${n.version}`}},6739:(e,t)=>{"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function n(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function i(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(t,i){r(this,e);var o=n(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return o.name="InvalidInputException",o.symbology=t,o.input=i,o.message='"'+o.input+'" is not a valid input for '+o.symbology,o}return i(e,Error),e}(),s=function(){function e(){r(this,e);var t=n(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return t.name="InvalidElementException",t.message="Not supported type to render on",t}return i(e,Error),e}(),a=function(){function e(){r(this,e);var t=n(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return t.name="NoElementException",t.message="No element to render on.",t}return i(e,Error),e}();t.InvalidInputException=o,t.InvalidElementException=s,t.NoElementException=a},6800:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.UPCE=t.UPC=t.EAN2=t.EAN5=t.EAN8=t.EAN13=void 0;var n=c(r(7952)),i=c(r(4286)),o=c(r(7257)),s=c(r(2620)),a=c(r(9474)),l=c(r(8747));function c(e){return e&&e.__esModule?e:{default:e}}t.EAN13=n.default,t.EAN8=i.default,t.EAN5=o.default,t.EAN2=s.default,t.UPC=a.default,t.UPCE=l.default},6866:(e,t)=>{"use strict";var r;function n(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}Object.defineProperty(t,"__esModule",{value:!0});var i=t.SET_A=0,o=t.SET_B=1,s=t.SET_C=2,a=(t.SHIFT=98,t.START_A=103),l=t.START_B=104,c=t.START_C=105;t.MODULO=103,t.STOP=106,t.FNC1=207,t.SET_BY_CODE=(n(r={},a,i),n(r,l,o),n(r,c,s),r),t.SWAP={101:i,100:o,99:s},t.A_START_CHAR=String.fromCharCode(208),t.B_START_CHAR=String.fromCharCode(209),t.C_START_CHAR=String.fromCharCode(210),t.A_CHARS="[\0-_\xc8-\xcf]",t.B_CHARS="[ -\x7f\xc8-\xcf]",t.C_CHARS="(\xcf*[0-9]{2}\xcf*)",t.BARS=[11011001100,11001101100,11001100110,10010011e3,10010001100,10001001100,10011001e3,10011000100,10001100100,11001001e3,11001000100,11000100100,10110011100,10011011100,10011001110,10111001100,10011101100,10011100110,11001110010,11001011100,11001001110,11011100100,11001110100,11101101110,11101001100,11100101100,11100100110,11101100100,11100110100,11100110010,11011011e3,11011000110,11000110110,10100011e3,10001011e3,10001000110,10110001e3,10001101e3,10001100010,11010001e3,11000101e3,11000100010,10110111e3,10110001110,10001101110,10111011e3,10111000110,10001110110,11101110110,11010001110,11000101110,11011101e3,11011100010,11011101110,11101011e3,11101000110,11100010110,11101101e3,11101100010,11100011010,11101111010,11001000010,11110001010,1010011e4,10100001100,1001011e4,10010000110,10000101100,10000100110,1011001e4,10110000100,1001101e4,10011000010,10000110100,10000110010,11000010010,1100101e4,11110111010,11000010100,10001111010,10100111100,10010111100,10010011110,10111100100,10011110100,10011110010,11110100100,11110010100,11110010010,11011011110,11011110110,11110110110,10101111e3,10100011110,10001011110,10111101e3,10111100010,11110101e3,11110100010,10111011110,10111101110,11101011110,11110101110,11010000100,1101001e4,11010011100,1100011101011]},7084:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e};t.default=function(e,t){return r({},e,t)}},7119:(e,t,r)=>{"use strict";!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=r(8345)},7257:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),i=r(2677),o=a(r(652)),s=a(r(1810));function a(e){return e&&e.__esModule?e:{default:e}}var l=function(e){function t(e,r){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,r))}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),n(t,[{key:"valid",value:function(){return-1!==this.data.search(/^[0-9]{5}$/)}},{key:"encode",value:function(){var e,t=i.EAN5_STRUCTURE[(e=this.data,e.split("").map((function(e){return+e})).reduce((function(e,t,r){return r%2?e+9*t:e+3*t}),0)%10)];return{data:"1011"+(0,o.default)(this.data,t,"01"),text:this.text}}}]),t}(s.default);t.default=l},7427:function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const i=n(r(6569));class o extends i.default{select(e){let t=!1;const r=(null!==e&&void 0!==e?e:"*").split("").map((e=>/\s/.test(e)&&!t?"":('"'===e&&(t=!t),e))).join("");return this.url.searchParams.set("select",r),this.headers.Prefer&&(this.headers.Prefer+=","),this.headers.Prefer+="return=representation",this}order(e){let{ascending:t=!0,nullsFirst:r,foreignTable:n,referencedTable:i=n}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const o=i?`${i}.order`:"order",s=this.url.searchParams.get(o);return this.url.searchParams.set(o,`${s?`${s},`:""}${e}.${t?"asc":"desc"}${void 0===r?"":r?".nullsfirst":".nullslast"}`),this}limit(e){let{foreignTable:t,referencedTable:r=t}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n="undefined"===typeof r?"limit":`${r}.limit`;return this.url.searchParams.set(n,`${e}`),this}range(e,t){let{foreignTable:r,referencedTable:n=r}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const i="undefined"===typeof n?"offset":`${n}.offset`,o="undefined"===typeof n?"limit":`${n}.limit`;return this.url.searchParams.set(i,`${e}`),this.url.searchParams.set(o,""+(t-e+1)),this}abortSignal(e){return this.signal=e,this}single(){return this.headers.Accept="application/vnd.pgrst.object+json",this}maybeSingle(){return"GET"===this.method?this.headers.Accept="application/json":this.headers.Accept="application/vnd.pgrst.object+json",this.isMaybeSingle=!0,this}csv(){return this.headers.Accept="text/csv",this}geojson(){return this.headers.Accept="application/geo+json",this}explain(){let{analyze:e=!1,verbose:t=!1,settings:r=!1,buffers:n=!1,wal:i=!1,format:o="text"}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};var s;const a=[e?"analyze":null,t?"verbose":null,r?"settings":null,n?"buffers":null,i?"wal":null].filter(Boolean).join("|"),l=null!==(s=this.headers.Accept)&&void 0!==s?s:"application/json";return this.headers.Accept=`application/vnd.pgrst.plan+${o}; for="${l}"; options=${a};`,this}rollback(){var e;return(null!==(e=this.headers.Prefer)&&void 0!==e?e:"").trim().length>0?this.headers.Prefer+=",tx=rollback":this.headers.Prefer="tx=rollback",this}returns(){return this}}t.default=o},7530:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=["width","height","textMargin","fontSize","margin","marginTop","marginBottom","marginLeft","marginRight"];for(var r in t)t.hasOwnProperty(r)&&"string"===typeof e[r=t[r]]&&(e[r]=parseInt(e[r],10));"string"===typeof e.displayValue&&(e.displayValue="false"!=e.displayValue);return e}},7931:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=o(r(5629)),i=o(r(9680));function o(e){return e&&e.__esModule?e:{default:e}}function s(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}var a=function(e){function t(e,r){if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),/^[\x00-\x7F\xC8-\xD3]+$/.test(e))var n=s(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,(0,i.default)(e),r));else n=s(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,r));return s(n)}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t}(n.default);t.default=a},7952:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n,i=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),o=function e(t,r,n){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,r);if(void 0===i){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,r,n)}if("value"in i)return i.value;var s=i.get;return void 0!==s?s.call(n):void 0},s=r(2677),a=r(9452),l=(n=a)&&n.__esModule?n:{default:n};var c=function(e){return(10-e.substr(0,12).split("").map((function(e){return+e})).reduce((function(e,t,r){return r%2?e+3*t:e+t}),0)%10)%10},u=function(e){function t(e,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),-1!==e.search(/^[0-9]{12}$/)&&(e+=c(e));var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,r));return n.lastChar=r.lastChar,n}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),i(t,[{key:"valid",value:function(){return-1!==this.data.search(/^[0-9]{13}$/)&&+this.data[12]===c(this.data)}},{key:"leftText",value:function(){return o(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"leftText",this).call(this,1,6)}},{key:"leftEncode",value:function(){var e=this.data.substr(1,6),r=s.EAN13_STRUCTURE[this.data[0]];return o(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"leftEncode",this).call(this,e,r)}},{key:"rightText",value:function(){return o(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"rightText",this).call(this,7,6)}},{key:"rightEncode",value:function(){var e=this.data.substr(7,6);return o(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"rightEncode",this).call(this,e,"RRRRRR")}},{key:"encodeGuarded",value:function(){var e=o(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"encodeGuarded",this).call(this);return this.options.displayValue&&(e.unshift({data:"000000000000",text:this.text.substr(0,1),options:{textAlign:"left",fontSize:this.fontSize}}),this.options.lastChar&&(e.push({data:"00"}),e.push({data:"00000",text:this.options.lastChar,options:{fontSize:this.fontSize}}))),e}}]),t}(l.default);t.default=u},8184:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ITF14=t.ITF=void 0;var n=o(r(4789)),i=o(r(5884));function o(e){return e&&e.__esModule?e:{default:e}}t.ITF=n.default,t.ITF14=i.default},8345:(e,t,r)=>{"use strict";var n=r(9950),i=r(5340);function o(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,r=1;r<arguments.length;r++)t+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var s=new Set,a={};function l(e,t){c(e,t),c(e+"Capture",t)}function c(e,t){for(a[e]=t,e=0;e<t.length;e++)s.add(t[e])}var u=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),d=Object.prototype.hasOwnProperty,h=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,f={},p={};function m(e,t,r,n,i,o,s){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=n,this.attributeNamespace=i,this.mustUseProperty=r,this.propertyName=e,this.type=t,this.sanitizeURL=o,this.removeEmptyString=s}var g={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach((function(e){g[e]=new m(e,0,!1,e,null,!1,!1)})),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach((function(e){var t=e[0];g[t]=new m(t,1,!1,e[1],null,!1,!1)})),["contentEditable","draggable","spellCheck","value"].forEach((function(e){g[e]=new m(e,2,!1,e.toLowerCase(),null,!1,!1)})),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach((function(e){g[e]=new m(e,2,!1,e,null,!1,!1)})),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach((function(e){g[e]=new m(e,3,!1,e.toLowerCase(),null,!1,!1)})),["checked","multiple","muted","selected"].forEach((function(e){g[e]=new m(e,3,!0,e,null,!1,!1)})),["capture","download"].forEach((function(e){g[e]=new m(e,4,!1,e,null,!1,!1)})),["cols","rows","size","span"].forEach((function(e){g[e]=new m(e,6,!1,e,null,!1,!1)})),["rowSpan","start"].forEach((function(e){g[e]=new m(e,5,!1,e.toLowerCase(),null,!1,!1)}));var y=/[\-:]([a-z])/g;function w(e){return e[1].toUpperCase()}function b(e,t,r,n){var i=g.hasOwnProperty(t)?g[t]:null;(null!==i?0!==i.type:n||!(2<t.length)||"o"!==t[0]&&"O"!==t[0]||"n"!==t[1]&&"N"!==t[1])&&(function(e,t,r,n){if(null===t||"undefined"===typeof t||function(e,t,r,n){if(null!==r&&0===r.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!n&&(null!==r?!r.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,r,n))return!0;if(n)return!1;if(null!==r)switch(r.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,r,i,n)&&(r=null),n||null===i?function(e){return!!d.call(p,e)||!d.call(f,e)&&(h.test(e)?p[e]=!0:(f[e]=!0,!1))}(t)&&(null===r?e.removeAttribute(t):e.setAttribute(t,""+r)):i.mustUseProperty?e[i.propertyName]=null===r?3!==i.type&&"":r:(t=i.attributeName,n=i.attributeNamespace,null===r?e.removeAttribute(t):(r=3===(i=i.type)||4===i&&!0===r?"":""+r,n?e.setAttributeNS(n,t,r):e.setAttribute(t,r))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach((function(e){var t=e.replace(y,w);g[t]=new m(t,1,!1,e,null,!1,!1)})),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach((function(e){var t=e.replace(y,w);g[t]=new m(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)})),["xml:base","xml:lang","xml:space"].forEach((function(e){var t=e.replace(y,w);g[t]=new m(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)})),["tabIndex","crossOrigin"].forEach((function(e){g[e]=new m(e,1,!1,e.toLowerCase(),null,!1,!1)})),g.xlinkHref=new m("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach((function(e){g[e]=new m(e,1,!1,e.toLowerCase(),null,!0,!0)}));var v=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,_=Symbol.for("react.element"),x=Symbol.for("react.portal"),E=Symbol.for("react.fragment"),C=Symbol.for("react.strict_mode"),S=Symbol.for("react.profiler"),A=Symbol.for("react.provider"),N=Symbol.for("react.context"),I=Symbol.for("react.forward_ref"),T=Symbol.for("react.suspense"),O=Symbol.for("react.suspense_list"),k=Symbol.for("react.memo"),R=Symbol.for("react.lazy");Symbol.for("react.scope"),Symbol.for("react.debug_trace_mode");var M=Symbol.for("react.offscreen");Symbol.for("react.legacy_hidden"),Symbol.for("react.cache"),Symbol.for("react.tracing_marker");var j=Symbol.iterator;function D(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=j&&e[j]||e["@@iterator"])?e:null}var P,L=Object.assign;function B(e){if(void 0===P)try{throw Error()}catch(r){var t=r.stack.trim().match(/\n( *(at )?)/);P=t&&t[1]||""}return"\n"+P+e}var F=!1;function U(e,t){if(!e||F)return"";F=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(c){var n=c}Reflect.construct(e,[],t)}else{try{t.call()}catch(c){n=c}e.call(t.prototype)}else{try{throw Error()}catch(c){n=c}e()}}catch(c){if(c&&n&&"string"===typeof c.stack){for(var i=c.stack.split("\n"),o=n.stack.split("\n"),s=i.length-1,a=o.length-1;1<=s&&0<=a&&i[s]!==o[a];)a--;for(;1<=s&&0<=a;s--,a--)if(i[s]!==o[a]){if(1!==s||1!==a)do{if(s--,0>--a||i[s]!==o[a]){var l="\n"+i[s].replace(" at new "," at ");return e.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",e.displayName)),l}}while(1<=s&&0<=a);break}}}finally{F=!1,Error.prepareStackTrace=r}return(e=e?e.displayName||e.name:"")?B(e):""}function z(e){switch(e.tag){case 5:return B(e.type);case 16:return B("Lazy");case 13:return B("Suspense");case 19:return B("SuspenseList");case 0:case 2:case 15:return e=U(e.type,!1);case 11:return e=U(e.type.render,!1);case 1:return e=U(e.type,!0);default:return""}}function H(e){if(null==e)return null;if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case E:return"Fragment";case x:return"Portal";case S:return"Profiler";case C:return"StrictMode";case T:return"Suspense";case O:return"SuspenseList"}if("object"===typeof e)switch(e.$$typeof){case N:return(e.displayName||"Context")+".Consumer";case A:return(e._context.displayName||"Context")+".Provider";case I:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case k:return null!==(t=e.displayName||null)?t:H(e.type)||"Memo";case R:t=e._payload,e=e._init;try{return H(e(t))}catch(r){}}return null}function V(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=(e=t.render).displayName||e.name||"",t.displayName||(""!==e?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return H(t);case 8:return t===C?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"===typeof t)return t.displayName||t.name||null;if("string"===typeof t)return t}return null}function W(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function G(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function $(e){e._valueTracker||(e._valueTracker=function(e){var t=G(e)?"checked":"value",r=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),n=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof r&&"function"===typeof r.get&&"function"===typeof r.set){var i=r.get,o=r.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(e){n=""+e,o.call(this,e)}}),Object.defineProperty(e,t,{enumerable:r.enumerable}),{getValue:function(){return n},setValue:function(e){n=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function X(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var r=t.getValue(),n="";return e&&(n=G(e)?e.checked?"true":"false":e.value),(e=n)!==r&&(t.setValue(e),!0)}function Y(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function q(e,t){var r=t.checked;return L({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=r?r:e._wrapperState.initialChecked})}function Q(e,t){var r=null==t.defaultValue?"":t.defaultValue,n=null!=t.checked?t.checked:t.defaultChecked;r=W(null!=t.value?t.value:r),e._wrapperState={initialChecked:n,initialValue:r,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function Z(e,t){null!=(t=t.checked)&&b(e,"checked",t,!1)}function K(e,t){Z(e,t);var r=W(t.value),n=t.type;if(null!=r)"number"===n?(0===r&&""===e.value||e.value!=r)&&(e.value=""+r):e.value!==""+r&&(e.value=""+r);else if("submit"===n||"reset"===n)return void e.removeAttribute("value");t.hasOwnProperty("value")?ee(e,t.type,r):t.hasOwnProperty("defaultValue")&&ee(e,t.type,W(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function J(e,t,r){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var n=t.type;if(!("submit"!==n&&"reset"!==n||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,r||t===e.value||(e.value=t),e.defaultValue=t}""!==(r=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==r&&(e.name=r)}function ee(e,t,r){"number"===t&&Y(e.ownerDocument)===e||(null==r?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+r&&(e.defaultValue=""+r))}var te=Array.isArray;function re(e,t,r,n){if(e=e.options,t){t={};for(var i=0;i<r.length;i++)t["$"+r[i]]=!0;for(r=0;r<e.length;r++)i=t.hasOwnProperty("$"+e[r].value),e[r].selected!==i&&(e[r].selected=i),i&&n&&(e[r].defaultSelected=!0)}else{for(r=""+W(r),t=null,i=0;i<e.length;i++){if(e[i].value===r)return e[i].selected=!0,void(n&&(e[i].defaultSelected=!0));null!==t||e[i].disabled||(t=e[i])}null!==t&&(t.selected=!0)}}function ne(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(o(91));return L({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function ie(e,t){var r=t.value;if(null==r){if(r=t.children,t=t.defaultValue,null!=r){if(null!=t)throw Error(o(92));if(te(r)){if(1<r.length)throw Error(o(93));r=r[0]}t=r}null==t&&(t=""),r=t}e._wrapperState={initialValue:W(r)}}function oe(e,t){var r=W(t.value),n=W(t.defaultValue);null!=r&&((r=""+r)!==e.value&&(e.value=r),null==t.defaultValue&&e.defaultValue!==r&&(e.defaultValue=r)),null!=n&&(e.defaultValue=""+n)}function se(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}function ae(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function le(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?ae(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var ce,ue,de=(ue=function(e,t){if("http://www.w3.org/2000/svg"!==e.namespaceURI||"innerHTML"in e)e.innerHTML=t;else{for((ce=ce||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=ce.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,r,n){MSApp.execUnsafeLocalFunction((function(){return ue(e,t)}))}:ue);function he(e,t){if(t){var r=e.firstChild;if(r&&r===e.lastChild&&3===r.nodeType)return void(r.nodeValue=t)}e.textContent=t}var fe={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},pe=["Webkit","ms","Moz","O"];function me(e,t,r){return null==t||"boolean"===typeof t||""===t?"":r||"number"!==typeof t||0===t||fe.hasOwnProperty(e)&&fe[e]?(""+t).trim():t+"px"}function ge(e,t){for(var r in e=e.style,t)if(t.hasOwnProperty(r)){var n=0===r.indexOf("--"),i=me(r,t[r],n);"float"===r&&(r="cssFloat"),n?e.setProperty(r,i):e[r]=i}}Object.keys(fe).forEach((function(e){pe.forEach((function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),fe[t]=fe[e]}))}));var ye=L({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function we(e,t){if(t){if(ye[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(o(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(o(60));if("object"!==typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(o(61))}if(null!=t.style&&"object"!==typeof t.style)throw Error(o(62))}}function be(e,t){if(-1===e.indexOf("-"))return"string"===typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var ve=null;function _e(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var xe=null,Ee=null,Ce=null;function Se(e){if(e=bi(e)){if("function"!==typeof xe)throw Error(o(280));var t=e.stateNode;t&&(t=_i(t),xe(e.stateNode,e.type,t))}}function Ae(e){Ee?Ce?Ce.push(e):Ce=[e]:Ee=e}function Ne(){if(Ee){var e=Ee,t=Ce;if(Ce=Ee=null,Se(e),t)for(e=0;e<t.length;e++)Se(t[e])}}function Ie(e,t){return e(t)}function Te(){}var Oe=!1;function ke(e,t,r){if(Oe)return e(t,r);Oe=!0;try{return Ie(e,t,r)}finally{Oe=!1,(null!==Ee||null!==Ce)&&(Te(),Ne())}}function Re(e,t){var r=e.stateNode;if(null===r)return null;var n=_i(r);if(null===n)return null;r=n[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(n=!n.disabled)||(n=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!n;break e;default:e=!1}if(e)return null;if(r&&"function"!==typeof r)throw Error(o(231,t,typeof r));return r}var Me=!1;if(u)try{var je={};Object.defineProperty(je,"passive",{get:function(){Me=!0}}),window.addEventListener("test",je,je),window.removeEventListener("test",je,je)}catch(ue){Me=!1}function De(e,t,r,n,i,o,s,a,l){var c=Array.prototype.slice.call(arguments,3);try{t.apply(r,c)}catch(u){this.onError(u)}}var Pe=!1,Le=null,Be=!1,Fe=null,Ue={onError:function(e){Pe=!0,Le=e}};function ze(e,t,r,n,i,o,s,a,l){Pe=!1,Le=null,De.apply(Ue,arguments)}function He(e){var t=e,r=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(4098&(t=e).flags)&&(r=t.return),e=t.return}while(e)}return 3===t.tag?r:null}function Ve(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function We(e){if(He(e)!==e)throw Error(o(188))}function Ge(e){return null!==(e=function(e){var t=e.alternate;if(!t){if(null===(t=He(e)))throw Error(o(188));return t!==e?null:e}for(var r=e,n=t;;){var i=r.return;if(null===i)break;var s=i.alternate;if(null===s){if(null!==(n=i.return)){r=n;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===r)return We(i),e;if(s===n)return We(i),t;s=s.sibling}throw Error(o(188))}if(r.return!==n.return)r=i,n=s;else{for(var a=!1,l=i.child;l;){if(l===r){a=!0,r=i,n=s;break}if(l===n){a=!0,n=i,r=s;break}l=l.sibling}if(!a){for(l=s.child;l;){if(l===r){a=!0,r=s,n=i;break}if(l===n){a=!0,n=s,r=i;break}l=l.sibling}if(!a)throw Error(o(189))}}if(r.alternate!==n)throw Error(o(190))}if(3!==r.tag)throw Error(o(188));return r.stateNode.current===r?e:t}(e))?$e(e):null}function $e(e){if(5===e.tag||6===e.tag)return e;for(e=e.child;null!==e;){var t=$e(e);if(null!==t)return t;e=e.sibling}return null}var Xe=i.unstable_scheduleCallback,Ye=i.unstable_cancelCallback,qe=i.unstable_shouldYield,Qe=i.unstable_requestPaint,Ze=i.unstable_now,Ke=i.unstable_getCurrentPriorityLevel,Je=i.unstable_ImmediatePriority,et=i.unstable_UserBlockingPriority,tt=i.unstable_NormalPriority,rt=i.unstable_LowPriority,nt=i.unstable_IdlePriority,it=null,ot=null;var st=Math.clz32?Math.clz32:function(e){return e>>>=0,0===e?32:31-(at(e)/lt|0)|0},at=Math.log,lt=Math.LN2;var ct=64,ut=4194304;function dt(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&e;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&e;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function ht(e,t){var r=e.pendingLanes;if(0===r)return 0;var n=0,i=e.suspendedLanes,o=e.pingedLanes,s=268435455&r;if(0!==s){var a=s&~i;0!==a?n=dt(a):0!==(o&=s)&&(n=dt(o))}else 0!==(s=r&~i)?n=dt(s):0!==o&&(n=dt(o));if(0===n)return 0;if(0!==t&&t!==n&&0===(t&i)&&((i=n&-n)>=(o=t&-t)||16===i&&0!==(4194240&o)))return t;if(0!==(4&n)&&(n|=16&r),0!==(t=e.entangledLanes))for(e=e.entanglements,t&=n;0<t;)i=1<<(r=31-st(t)),n|=e[r],t&=~i;return n}function ft(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function pt(e){return 0!==(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function mt(){var e=ct;return 0===(4194240&(ct<<=1))&&(ct=64),e}function gt(e){for(var t=[],r=0;31>r;r++)t.push(e);return t}function yt(e,t,r){e.pendingLanes|=t,536870912!==t&&(e.suspendedLanes=0,e.pingedLanes=0),(e=e.eventTimes)[t=31-st(t)]=r}function wt(e,t){var r=e.entangledLanes|=t;for(e=e.entanglements;r;){var n=31-st(r),i=1<<n;i&t|e[n]&t&&(e[n]|=t),r&=~i}}var bt=0;function vt(e){return 1<(e&=-e)?4<e?0!==(268435455&e)?16:536870912:4:1}var _t,xt,Et,Ct,St,At=!1,Nt=[],It=null,Tt=null,Ot=null,kt=new Map,Rt=new Map,Mt=[],jt="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Dt(e,t){switch(e){case"focusin":case"focusout":It=null;break;case"dragenter":case"dragleave":Tt=null;break;case"mouseover":case"mouseout":Ot=null;break;case"pointerover":case"pointerout":kt.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Rt.delete(t.pointerId)}}function Pt(e,t,r,n,i,o){return null===e||e.nativeEvent!==o?(e={blockedOn:t,domEventName:r,eventSystemFlags:n,nativeEvent:o,targetContainers:[i]},null!==t&&(null!==(t=bi(t))&&xt(t)),e):(e.eventSystemFlags|=n,t=e.targetContainers,null!==i&&-1===t.indexOf(i)&&t.push(i),e)}function Lt(e){var t=wi(e.target);if(null!==t){var r=He(t);if(null!==r)if(13===(t=r.tag)){if(null!==(t=Ve(r)))return e.blockedOn=t,void St(e.priority,(function(){Et(r)}))}else if(3===t&&r.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===r.tag?r.stateNode.containerInfo:null)}e.blockedOn=null}function Bt(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var r=qt(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==r)return null!==(t=bi(r))&&xt(t),e.blockedOn=r,!1;var n=new(r=e.nativeEvent).constructor(r.type,r);ve=n,r.target.dispatchEvent(n),ve=null,t.shift()}return!0}function Ft(e,t,r){Bt(e)&&r.delete(t)}function Ut(){At=!1,null!==It&&Bt(It)&&(It=null),null!==Tt&&Bt(Tt)&&(Tt=null),null!==Ot&&Bt(Ot)&&(Ot=null),kt.forEach(Ft),Rt.forEach(Ft)}function zt(e,t){e.blockedOn===t&&(e.blockedOn=null,At||(At=!0,i.unstable_scheduleCallback(i.unstable_NormalPriority,Ut)))}function Ht(e){function t(t){return zt(t,e)}if(0<Nt.length){zt(Nt[0],e);for(var r=1;r<Nt.length;r++){var n=Nt[r];n.blockedOn===e&&(n.blockedOn=null)}}for(null!==It&&zt(It,e),null!==Tt&&zt(Tt,e),null!==Ot&&zt(Ot,e),kt.forEach(t),Rt.forEach(t),r=0;r<Mt.length;r++)(n=Mt[r]).blockedOn===e&&(n.blockedOn=null);for(;0<Mt.length&&null===(r=Mt[0]).blockedOn;)Lt(r),null===r.blockedOn&&Mt.shift()}var Vt=v.ReactCurrentBatchConfig,Wt=!0;function Gt(e,t,r,n){var i=bt,o=Vt.transition;Vt.transition=null;try{bt=1,Xt(e,t,r,n)}finally{bt=i,Vt.transition=o}}function $t(e,t,r,n){var i=bt,o=Vt.transition;Vt.transition=null;try{bt=4,Xt(e,t,r,n)}finally{bt=i,Vt.transition=o}}function Xt(e,t,r,n){if(Wt){var i=qt(e,t,r,n);if(null===i)Wn(e,t,n,Yt,r),Dt(e,n);else if(function(e,t,r,n,i){switch(t){case"focusin":return It=Pt(It,e,t,r,n,i),!0;case"dragenter":return Tt=Pt(Tt,e,t,r,n,i),!0;case"mouseover":return Ot=Pt(Ot,e,t,r,n,i),!0;case"pointerover":var o=i.pointerId;return kt.set(o,Pt(kt.get(o)||null,e,t,r,n,i)),!0;case"gotpointercapture":return o=i.pointerId,Rt.set(o,Pt(Rt.get(o)||null,e,t,r,n,i)),!0}return!1}(i,e,t,r,n))n.stopPropagation();else if(Dt(e,n),4&t&&-1<jt.indexOf(e)){for(;null!==i;){var o=bi(i);if(null!==o&&_t(o),null===(o=qt(e,t,r,n))&&Wn(e,t,n,Yt,r),o===i)break;i=o}null!==i&&n.stopPropagation()}else Wn(e,t,n,null,r)}}var Yt=null;function qt(e,t,r,n){if(Yt=null,null!==(e=wi(e=_e(n))))if(null===(t=He(e)))e=null;else if(13===(r=t.tag)){if(null!==(e=Ve(t)))return e;e=null}else if(3===r){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Yt=e,null}function Qt(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Ke()){case Je:return 1;case et:return 4;case tt:case rt:return 16;case nt:return 536870912;default:return 16}default:return 16}}var Zt=null,Kt=null,Jt=null;function er(){if(Jt)return Jt;var e,t,r=Kt,n=r.length,i="value"in Zt?Zt.value:Zt.textContent,o=i.length;for(e=0;e<n&&r[e]===i[e];e++);var s=n-e;for(t=1;t<=s&&r[n-t]===i[o-t];t++);return Jt=i.slice(e,1<t?1-t:void 0)}function tr(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function rr(){return!0}function nr(){return!1}function ir(e){function t(t,r,n,i,o){for(var s in this._reactName=t,this._targetInst=n,this.type=r,this.nativeEvent=i,this.target=o,this.currentTarget=null,e)e.hasOwnProperty(s)&&(t=e[s],this[s]=t?t(i):i[s]);return this.isDefaultPrevented=(null!=i.defaultPrevented?i.defaultPrevented:!1===i.returnValue)?rr:nr,this.isPropagationStopped=nr,this}return L(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=rr)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=rr)},persist:function(){},isPersistent:rr}),t}var or,sr,ar,lr={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},cr=ir(lr),ur=L({},lr,{view:0,detail:0}),dr=ir(ur),hr=L({},ur,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Cr,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==ar&&(ar&&"mousemove"===e.type?(or=e.screenX-ar.screenX,sr=e.screenY-ar.screenY):sr=or=0,ar=e),or)},movementY:function(e){return"movementY"in e?e.movementY:sr}}),fr=ir(hr),pr=ir(L({},hr,{dataTransfer:0})),mr=ir(L({},ur,{relatedTarget:0})),gr=ir(L({},lr,{animationName:0,elapsedTime:0,pseudoElement:0})),yr=L({},lr,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),wr=ir(yr),br=ir(L({},lr,{data:0})),vr={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},_r={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},xr={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Er(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=xr[e])&&!!t[e]}function Cr(){return Er}var Sr=L({},ur,{key:function(e){if(e.key){var t=vr[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=tr(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?_r[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Cr,charCode:function(e){return"keypress"===e.type?tr(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?tr(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),Ar=ir(Sr),Nr=ir(L({},hr,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),Ir=ir(L({},ur,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Cr})),Tr=ir(L({},lr,{propertyName:0,elapsedTime:0,pseudoElement:0})),Or=L({},hr,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),kr=ir(Or),Rr=[9,13,27,32],Mr=u&&"CompositionEvent"in window,jr=null;u&&"documentMode"in document&&(jr=document.documentMode);var Dr=u&&"TextEvent"in window&&!jr,Pr=u&&(!Mr||jr&&8<jr&&11>=jr),Lr=String.fromCharCode(32),Br=!1;function Fr(e,t){switch(e){case"keyup":return-1!==Rr.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Ur(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var zr=!1;var Hr={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Vr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!Hr[e.type]:"textarea"===t}function Wr(e,t,r,n){Ae(n),0<(t=$n(t,"onChange")).length&&(r=new cr("onChange","change",null,r,n),e.push({event:r,listeners:t}))}var Gr=null,$r=null;function Xr(e){Bn(e,0)}function Yr(e){if(X(vi(e)))return e}function qr(e,t){if("change"===e)return t}var Qr=!1;if(u){var Zr;if(u){var Kr="oninput"in document;if(!Kr){var Jr=document.createElement("div");Jr.setAttribute("oninput","return;"),Kr="function"===typeof Jr.oninput}Zr=Kr}else Zr=!1;Qr=Zr&&(!document.documentMode||9<document.documentMode)}function en(){Gr&&(Gr.detachEvent("onpropertychange",tn),$r=Gr=null)}function tn(e){if("value"===e.propertyName&&Yr($r)){var t=[];Wr(t,$r,e,_e(e)),ke(Xr,t)}}function rn(e,t,r){"focusin"===e?(en(),$r=r,(Gr=t).attachEvent("onpropertychange",tn)):"focusout"===e&&en()}function nn(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Yr($r)}function on(e,t){if("click"===e)return Yr(t)}function sn(e,t){if("input"===e||"change"===e)return Yr(t)}var an="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t};function ln(e,t){if(an(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var r=Object.keys(e),n=Object.keys(t);if(r.length!==n.length)return!1;for(n=0;n<r.length;n++){var i=r[n];if(!d.call(t,i)||!an(e[i],t[i]))return!1}return!0}function cn(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function un(e,t){var r,n=cn(e);for(e=0;n;){if(3===n.nodeType){if(r=e+n.textContent.length,e<=t&&r>=t)return{node:n,offset:t-e};e=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=cn(n)}}function dn(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?dn(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function hn(){for(var e=window,t=Y();t instanceof e.HTMLIFrameElement;){try{var r="string"===typeof t.contentWindow.location.href}catch(n){r=!1}if(!r)break;t=Y((e=t.contentWindow).document)}return t}function fn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}function pn(e){var t=hn(),r=e.focusedElem,n=e.selectionRange;if(t!==r&&r&&r.ownerDocument&&dn(r.ownerDocument.documentElement,r)){if(null!==n&&fn(r))if(t=n.start,void 0===(e=n.end)&&(e=t),"selectionStart"in r)r.selectionStart=t,r.selectionEnd=Math.min(e,r.value.length);else if((e=(t=r.ownerDocument||document)&&t.defaultView||window).getSelection){e=e.getSelection();var i=r.textContent.length,o=Math.min(n.start,i);n=void 0===n.end?o:Math.min(n.end,i),!e.extend&&o>n&&(i=n,n=o,o=i),i=un(r,o);var s=un(r,n);i&&s&&(1!==e.rangeCount||e.anchorNode!==i.node||e.anchorOffset!==i.offset||e.focusNode!==s.node||e.focusOffset!==s.offset)&&((t=t.createRange()).setStart(i.node,i.offset),e.removeAllRanges(),o>n?(e.addRange(t),e.extend(s.node,s.offset)):(t.setEnd(s.node,s.offset),e.addRange(t)))}for(t=[],e=r;e=e.parentNode;)1===e.nodeType&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for("function"===typeof r.focus&&r.focus(),r=0;r<t.length;r++)(e=t[r]).element.scrollLeft=e.left,e.element.scrollTop=e.top}}var mn=u&&"documentMode"in document&&11>=document.documentMode,gn=null,yn=null,wn=null,bn=!1;function vn(e,t,r){var n=r.window===r?r.document:9===r.nodeType?r:r.ownerDocument;bn||null==gn||gn!==Y(n)||("selectionStart"in(n=gn)&&fn(n)?n={start:n.selectionStart,end:n.selectionEnd}:n={anchorNode:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset},wn&&ln(wn,n)||(wn=n,0<(n=$n(yn,"onSelect")).length&&(t=new cr("onSelect","select",null,t,r),e.push({event:t,listeners:n}),t.target=gn)))}function _n(e,t){var r={};return r[e.toLowerCase()]=t.toLowerCase(),r["Webkit"+e]="webkit"+t,r["Moz"+e]="moz"+t,r}var xn={animationend:_n("Animation","AnimationEnd"),animationiteration:_n("Animation","AnimationIteration"),animationstart:_n("Animation","AnimationStart"),transitionend:_n("Transition","TransitionEnd")},En={},Cn={};function Sn(e){if(En[e])return En[e];if(!xn[e])return e;var t,r=xn[e];for(t in r)if(r.hasOwnProperty(t)&&t in Cn)return En[e]=r[t];return e}u&&(Cn=document.createElement("div").style,"AnimationEvent"in window||(delete xn.animationend.animation,delete xn.animationiteration.animation,delete xn.animationstart.animation),"TransitionEvent"in window||delete xn.transitionend.transition);var An=Sn("animationend"),Nn=Sn("animationiteration"),In=Sn("animationstart"),Tn=Sn("transitionend"),On=new Map,kn="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Rn(e,t){On.set(e,t),l(t,[e])}for(var Mn=0;Mn<kn.length;Mn++){var jn=kn[Mn];Rn(jn.toLowerCase(),"on"+(jn[0].toUpperCase()+jn.slice(1)))}Rn(An,"onAnimationEnd"),Rn(Nn,"onAnimationIteration"),Rn(In,"onAnimationStart"),Rn("dblclick","onDoubleClick"),Rn("focusin","onFocus"),Rn("focusout","onBlur"),Rn(Tn,"onTransitionEnd"),c("onMouseEnter",["mouseout","mouseover"]),c("onMouseLeave",["mouseout","mouseover"]),c("onPointerEnter",["pointerout","pointerover"]),c("onPointerLeave",["pointerout","pointerover"]),l("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),l("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),l("onBeforeInput",["compositionend","keypress","textInput","paste"]),l("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Dn="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Pn=new Set("cancel close invalid load scroll toggle".split(" ").concat(Dn));function Ln(e,t,r){var n=e.type||"unknown-event";e.currentTarget=r,function(e,t,r,n,i,s,a,l,c){if(ze.apply(this,arguments),Pe){if(!Pe)throw Error(o(198));var u=Le;Pe=!1,Le=null,Be||(Be=!0,Fe=u)}}(n,t,void 0,e),e.currentTarget=null}function Bn(e,t){t=0!==(4&t);for(var r=0;r<e.length;r++){var n=e[r],i=n.event;n=n.listeners;e:{var o=void 0;if(t)for(var s=n.length-1;0<=s;s--){var a=n[s],l=a.instance,c=a.currentTarget;if(a=a.listener,l!==o&&i.isPropagationStopped())break e;Ln(i,a,c),o=l}else for(s=0;s<n.length;s++){if(l=(a=n[s]).instance,c=a.currentTarget,a=a.listener,l!==o&&i.isPropagationStopped())break e;Ln(i,a,c),o=l}}}if(Be)throw e=Fe,Be=!1,Fe=null,e}function Fn(e,t){var r=t[mi];void 0===r&&(r=t[mi]=new Set);var n=e+"__bubble";r.has(n)||(Vn(t,e,2,!1),r.add(n))}function Un(e,t,r){var n=0;t&&(n|=4),Vn(r,e,n,t)}var zn="_reactListening"+Math.random().toString(36).slice(2);function Hn(e){if(!e[zn]){e[zn]=!0,s.forEach((function(t){"selectionchange"!==t&&(Pn.has(t)||Un(t,!1,e),Un(t,!0,e))}));var t=9===e.nodeType?e:e.ownerDocument;null===t||t[zn]||(t[zn]=!0,Un("selectionchange",!1,t))}}function Vn(e,t,r,n){switch(Qt(t)){case 1:var i=Gt;break;case 4:i=$t;break;default:i=Xt}r=i.bind(null,t,r,e),i=void 0,!Me||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(i=!0),n?void 0!==i?e.addEventListener(t,r,{capture:!0,passive:i}):e.addEventListener(t,r,!0):void 0!==i?e.addEventListener(t,r,{passive:i}):e.addEventListener(t,r,!1)}function Wn(e,t,r,n,i){var o=n;if(0===(1&t)&&0===(2&t)&&null!==n)e:for(;;){if(null===n)return;var s=n.tag;if(3===s||4===s){var a=n.stateNode.containerInfo;if(a===i||8===a.nodeType&&a.parentNode===i)break;if(4===s)for(s=n.return;null!==s;){var l=s.tag;if((3===l||4===l)&&((l=s.stateNode.containerInfo)===i||8===l.nodeType&&l.parentNode===i))return;s=s.return}for(;null!==a;){if(null===(s=wi(a)))return;if(5===(l=s.tag)||6===l){n=o=s;continue e}a=a.parentNode}}n=n.return}ke((function(){var n=o,i=_e(r),s=[];e:{var a=On.get(e);if(void 0!==a){var l=cr,c=e;switch(e){case"keypress":if(0===tr(r))break e;case"keydown":case"keyup":l=Ar;break;case"focusin":c="focus",l=mr;break;case"focusout":c="blur",l=mr;break;case"beforeblur":case"afterblur":l=mr;break;case"click":if(2===r.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":l=fr;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":l=pr;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":l=Ir;break;case An:case Nn:case In:l=gr;break;case Tn:l=Tr;break;case"scroll":l=dr;break;case"wheel":l=kr;break;case"copy":case"cut":case"paste":l=wr;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":l=Nr}var u=0!==(4&t),d=!u&&"scroll"===e,h=u?null!==a?a+"Capture":null:a;u=[];for(var f,p=n;null!==p;){var m=(f=p).stateNode;if(5===f.tag&&null!==m&&(f=m,null!==h&&(null!=(m=Re(p,h))&&u.push(Gn(p,m,f)))),d)break;p=p.return}0<u.length&&(a=new l(a,c,null,r,i),s.push({event:a,listeners:u}))}}if(0===(7&t)){if(l="mouseout"===e||"pointerout"===e,(!(a="mouseover"===e||"pointerover"===e)||r===ve||!(c=r.relatedTarget||r.fromElement)||!wi(c)&&!c[pi])&&(l||a)&&(a=i.window===i?i:(a=i.ownerDocument)?a.defaultView||a.parentWindow:window,l?(l=n,null!==(c=(c=r.relatedTarget||r.toElement)?wi(c):null)&&(c!==(d=He(c))||5!==c.tag&&6!==c.tag)&&(c=null)):(l=null,c=n),l!==c)){if(u=fr,m="onMouseLeave",h="onMouseEnter",p="mouse","pointerout"!==e&&"pointerover"!==e||(u=Nr,m="onPointerLeave",h="onPointerEnter",p="pointer"),d=null==l?a:vi(l),f=null==c?a:vi(c),(a=new u(m,p+"leave",l,r,i)).target=d,a.relatedTarget=f,m=null,wi(i)===n&&((u=new u(h,p+"enter",c,r,i)).target=f,u.relatedTarget=d,m=u),d=m,l&&c)e:{for(h=c,p=0,f=u=l;f;f=Xn(f))p++;for(f=0,m=h;m;m=Xn(m))f++;for(;0<p-f;)u=Xn(u),p--;for(;0<f-p;)h=Xn(h),f--;for(;p--;){if(u===h||null!==h&&u===h.alternate)break e;u=Xn(u),h=Xn(h)}u=null}else u=null;null!==l&&Yn(s,a,l,u,!1),null!==c&&null!==d&&Yn(s,d,c,u,!0)}if("select"===(l=(a=n?vi(n):window).nodeName&&a.nodeName.toLowerCase())||"input"===l&&"file"===a.type)var g=qr;else if(Vr(a))if(Qr)g=sn;else{g=nn;var y=rn}else(l=a.nodeName)&&"input"===l.toLowerCase()&&("checkbox"===a.type||"radio"===a.type)&&(g=on);switch(g&&(g=g(e,n))?Wr(s,g,r,i):(y&&y(e,a,n),"focusout"===e&&(y=a._wrapperState)&&y.controlled&&"number"===a.type&&ee(a,"number",a.value)),y=n?vi(n):window,e){case"focusin":(Vr(y)||"true"===y.contentEditable)&&(gn=y,yn=n,wn=null);break;case"focusout":wn=yn=gn=null;break;case"mousedown":bn=!0;break;case"contextmenu":case"mouseup":case"dragend":bn=!1,vn(s,r,i);break;case"selectionchange":if(mn)break;case"keydown":case"keyup":vn(s,r,i)}var w;if(Mr)e:{switch(e){case"compositionstart":var b="onCompositionStart";break e;case"compositionend":b="onCompositionEnd";break e;case"compositionupdate":b="onCompositionUpdate";break e}b=void 0}else zr?Fr(e,r)&&(b="onCompositionEnd"):"keydown"===e&&229===r.keyCode&&(b="onCompositionStart");b&&(Pr&&"ko"!==r.locale&&(zr||"onCompositionStart"!==b?"onCompositionEnd"===b&&zr&&(w=er()):(Kt="value"in(Zt=i)?Zt.value:Zt.textContent,zr=!0)),0<(y=$n(n,b)).length&&(b=new br(b,e,null,r,i),s.push({event:b,listeners:y}),w?b.data=w:null!==(w=Ur(r))&&(b.data=w))),(w=Dr?function(e,t){switch(e){case"compositionend":return Ur(t);case"keypress":return 32!==t.which?null:(Br=!0,Lr);case"textInput":return(e=t.data)===Lr&&Br?null:e;default:return null}}(e,r):function(e,t){if(zr)return"compositionend"===e||!Mr&&Fr(e,t)?(e=er(),Jt=Kt=Zt=null,zr=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Pr&&"ko"!==t.locale?null:t.data}}(e,r))&&(0<(n=$n(n,"onBeforeInput")).length&&(i=new br("onBeforeInput","beforeinput",null,r,i),s.push({event:i,listeners:n}),i.data=w))}Bn(s,t)}))}function Gn(e,t,r){return{instance:e,listener:t,currentTarget:r}}function $n(e,t){for(var r=t+"Capture",n=[];null!==e;){var i=e,o=i.stateNode;5===i.tag&&null!==o&&(i=o,null!=(o=Re(e,r))&&n.unshift(Gn(e,o,i)),null!=(o=Re(e,t))&&n.push(Gn(e,o,i))),e=e.return}return n}function Xn(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function Yn(e,t,r,n,i){for(var o=t._reactName,s=[];null!==r&&r!==n;){var a=r,l=a.alternate,c=a.stateNode;if(null!==l&&l===n)break;5===a.tag&&null!==c&&(a=c,i?null!=(l=Re(r,o))&&s.unshift(Gn(r,l,a)):i||null!=(l=Re(r,o))&&s.push(Gn(r,l,a))),r=r.return}0!==s.length&&e.push({event:t,listeners:s})}var qn=/\r\n?/g,Qn=/\u0000|\uFFFD/g;function Zn(e){return("string"===typeof e?e:""+e).replace(qn,"\n").replace(Qn,"")}function Kn(e,t,r){if(t=Zn(t),Zn(e)!==t&&r)throw Error(o(425))}function Jn(){}var ei=null,ti=null;function ri(e,t){return"textarea"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var ni="function"===typeof setTimeout?setTimeout:void 0,ii="function"===typeof clearTimeout?clearTimeout:void 0,oi="function"===typeof Promise?Promise:void 0,si="function"===typeof queueMicrotask?queueMicrotask:"undefined"!==typeof oi?function(e){return oi.resolve(null).then(e).catch(ai)}:ni;function ai(e){setTimeout((function(){throw e}))}function li(e,t){var r=t,n=0;do{var i=r.nextSibling;if(e.removeChild(r),i&&8===i.nodeType)if("/$"===(r=i.data)){if(0===n)return e.removeChild(i),void Ht(t);n--}else"$"!==r&&"$?"!==r&&"$!"!==r||n++;r=i}while(r);Ht(t)}function ci(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t)break;if("/$"===t)return null}}return e}function ui(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var r=e.data;if("$"===r||"$!"===r||"$?"===r){if(0===t)return e;t--}else"/$"===r&&t++}e=e.previousSibling}return null}var di=Math.random().toString(36).slice(2),hi="__reactFiber$"+di,fi="__reactProps$"+di,pi="__reactContainer$"+di,mi="__reactEvents$"+di,gi="__reactListeners$"+di,yi="__reactHandles$"+di;function wi(e){var t=e[hi];if(t)return t;for(var r=e.parentNode;r;){if(t=r[pi]||r[hi]){if(r=t.alternate,null!==t.child||null!==r&&null!==r.child)for(e=ui(e);null!==e;){if(r=e[hi])return r;e=ui(e)}return t}r=(e=r).parentNode}return null}function bi(e){return!(e=e[hi]||e[pi])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function vi(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(o(33))}function _i(e){return e[fi]||null}var xi=[],Ei=-1;function Ci(e){return{current:e}}function Si(e){0>Ei||(e.current=xi[Ei],xi[Ei]=null,Ei--)}function Ai(e,t){Ei++,xi[Ei]=e.current,e.current=t}var Ni={},Ii=Ci(Ni),Ti=Ci(!1),Oi=Ni;function ki(e,t){var r=e.type.contextTypes;if(!r)return Ni;var n=e.stateNode;if(n&&n.__reactInternalMemoizedUnmaskedChildContext===t)return n.__reactInternalMemoizedMaskedChildContext;var i,o={};for(i in r)o[i]=t[i];return n&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=o),o}function Ri(e){return null!==(e=e.childContextTypes)&&void 0!==e}function Mi(){Si(Ti),Si(Ii)}function ji(e,t,r){if(Ii.current!==Ni)throw Error(o(168));Ai(Ii,t),Ai(Ti,r)}function Di(e,t,r){var n=e.stateNode;if(t=t.childContextTypes,"function"!==typeof n.getChildContext)return r;for(var i in n=n.getChildContext())if(!(i in t))throw Error(o(108,V(e)||"Unknown",i));return L({},r,n)}function Pi(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Ni,Oi=Ii.current,Ai(Ii,e),Ai(Ti,Ti.current),!0}function Li(e,t,r){var n=e.stateNode;if(!n)throw Error(o(169));r?(e=Di(e,t,Oi),n.__reactInternalMemoizedMergedChildContext=e,Si(Ti),Si(Ii),Ai(Ii,e)):Si(Ti),Ai(Ti,r)}var Bi=null,Fi=!1,Ui=!1;function zi(e){null===Bi?Bi=[e]:Bi.push(e)}function Hi(){if(!Ui&&null!==Bi){Ui=!0;var e=0,t=bt;try{var r=Bi;for(bt=1;e<r.length;e++){var n=r[e];do{n=n(!0)}while(null!==n)}Bi=null,Fi=!1}catch(i){throw null!==Bi&&(Bi=Bi.slice(e+1)),Xe(Je,Hi),i}finally{bt=t,Ui=!1}}return null}var Vi=[],Wi=0,Gi=null,$i=0,Xi=[],Yi=0,qi=null,Qi=1,Zi="";function Ki(e,t){Vi[Wi++]=$i,Vi[Wi++]=Gi,Gi=e,$i=t}function Ji(e,t,r){Xi[Yi++]=Qi,Xi[Yi++]=Zi,Xi[Yi++]=qi,qi=e;var n=Qi;e=Zi;var i=32-st(n)-1;n&=~(1<<i),r+=1;var o=32-st(t)+i;if(30<o){var s=i-i%5;o=(n&(1<<s)-1).toString(32),n>>=s,i-=s,Qi=1<<32-st(t)+i|r<<i|n,Zi=o+e}else Qi=1<<o|r<<i|n,Zi=e}function eo(e){null!==e.return&&(Ki(e,1),Ji(e,1,0))}function to(e){for(;e===Gi;)Gi=Vi[--Wi],Vi[Wi]=null,$i=Vi[--Wi],Vi[Wi]=null;for(;e===qi;)qi=Xi[--Yi],Xi[Yi]=null,Zi=Xi[--Yi],Xi[Yi]=null,Qi=Xi[--Yi],Xi[Yi]=null}var ro=null,no=null,io=!1,oo=null;function so(e,t){var r=kc(5,null,null,0);r.elementType="DELETED",r.stateNode=t,r.return=e,null===(t=e.deletions)?(e.deletions=[r],e.flags|=16):t.push(r)}function ao(e,t){switch(e.tag){case 5:var r=e.type;return null!==(t=1!==t.nodeType||r.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,ro=e,no=ci(t.firstChild),!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,ro=e,no=null,!0);case 13:return null!==(t=8!==t.nodeType?null:t)&&(r=null!==qi?{id:Qi,overflow:Zi}:null,e.memoizedState={dehydrated:t,treeContext:r,retryLane:1073741824},(r=kc(18,null,null,0)).stateNode=t,r.return=e,e.child=r,ro=e,no=null,!0);default:return!1}}function lo(e){return 0!==(1&e.mode)&&0===(128&e.flags)}function co(e){if(io){var t=no;if(t){var r=t;if(!ao(e,t)){if(lo(e))throw Error(o(418));t=ci(r.nextSibling);var n=ro;t&&ao(e,t)?so(n,r):(e.flags=-4097&e.flags|2,io=!1,ro=e)}}else{if(lo(e))throw Error(o(418));e.flags=-4097&e.flags|2,io=!1,ro=e}}}function uo(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;ro=e}function ho(e){if(e!==ro)return!1;if(!io)return uo(e),io=!0,!1;var t;if((t=3!==e.tag)&&!(t=5!==e.tag)&&(t="head"!==(t=e.type)&&"body"!==t&&!ri(e.type,e.memoizedProps)),t&&(t=no)){if(lo(e))throw fo(),Error(o(418));for(;t;)so(e,t),t=ci(t.nextSibling)}if(uo(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(o(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var r=e.data;if("/$"===r){if(0===t){no=ci(e.nextSibling);break e}t--}else"$"!==r&&"$!"!==r&&"$?"!==r||t++}e=e.nextSibling}no=null}}else no=ro?ci(e.stateNode.nextSibling):null;return!0}function fo(){for(var e=no;e;)e=ci(e.nextSibling)}function po(){no=ro=null,io=!1}function mo(e){null===oo?oo=[e]:oo.push(e)}var go=v.ReactCurrentBatchConfig;function yo(e,t,r){if(null!==(e=r.ref)&&"function"!==typeof e&&"object"!==typeof e){if(r._owner){if(r=r._owner){if(1!==r.tag)throw Error(o(309));var n=r.stateNode}if(!n)throw Error(o(147,e));var i=n,s=""+e;return null!==t&&null!==t.ref&&"function"===typeof t.ref&&t.ref._stringRef===s?t.ref:(t=function(e){var t=i.refs;null===e?delete t[s]:t[s]=e},t._stringRef=s,t)}if("string"!==typeof e)throw Error(o(284));if(!r._owner)throw Error(o(290,e))}return e}function wo(e,t){throw e=Object.prototype.toString.call(t),Error(o(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function bo(e){return(0,e._init)(e._payload)}function vo(e){function t(t,r){if(e){var n=t.deletions;null===n?(t.deletions=[r],t.flags|=16):n.push(r)}}function r(r,n){if(!e)return null;for(;null!==n;)t(r,n),n=n.sibling;return null}function n(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function i(e,t){return(e=Mc(e,t)).index=0,e.sibling=null,e}function s(t,r,n){return t.index=n,e?null!==(n=t.alternate)?(n=n.index)<r?(t.flags|=2,r):n:(t.flags|=2,r):(t.flags|=1048576,r)}function a(t){return e&&null===t.alternate&&(t.flags|=2),t}function l(e,t,r,n){return null===t||6!==t.tag?((t=Lc(r,e.mode,n)).return=e,t):((t=i(t,r)).return=e,t)}function c(e,t,r,n){var o=r.type;return o===E?d(e,t,r.props.children,n,r.key):null!==t&&(t.elementType===o||"object"===typeof o&&null!==o&&o.$$typeof===R&&bo(o)===t.type)?((n=i(t,r.props)).ref=yo(e,t,r),n.return=e,n):((n=jc(r.type,r.key,r.props,null,e.mode,n)).ref=yo(e,t,r),n.return=e,n)}function u(e,t,r,n){return null===t||4!==t.tag||t.stateNode.containerInfo!==r.containerInfo||t.stateNode.implementation!==r.implementation?((t=Bc(r,e.mode,n)).return=e,t):((t=i(t,r.children||[])).return=e,t)}function d(e,t,r,n,o){return null===t||7!==t.tag?((t=Dc(r,e.mode,n,o)).return=e,t):((t=i(t,r)).return=e,t)}function h(e,t,r){if("string"===typeof t&&""!==t||"number"===typeof t)return(t=Lc(""+t,e.mode,r)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case _:return(r=jc(t.type,t.key,t.props,null,e.mode,r)).ref=yo(e,null,t),r.return=e,r;case x:return(t=Bc(t,e.mode,r)).return=e,t;case R:return h(e,(0,t._init)(t._payload),r)}if(te(t)||D(t))return(t=Dc(t,e.mode,r,null)).return=e,t;wo(e,t)}return null}function f(e,t,r,n){var i=null!==t?t.key:null;if("string"===typeof r&&""!==r||"number"===typeof r)return null!==i?null:l(e,t,""+r,n);if("object"===typeof r&&null!==r){switch(r.$$typeof){case _:return r.key===i?c(e,t,r,n):null;case x:return r.key===i?u(e,t,r,n):null;case R:return f(e,t,(i=r._init)(r._payload),n)}if(te(r)||D(r))return null!==i?null:d(e,t,r,n,null);wo(e,r)}return null}function p(e,t,r,n,i){if("string"===typeof n&&""!==n||"number"===typeof n)return l(t,e=e.get(r)||null,""+n,i);if("object"===typeof n&&null!==n){switch(n.$$typeof){case _:return c(t,e=e.get(null===n.key?r:n.key)||null,n,i);case x:return u(t,e=e.get(null===n.key?r:n.key)||null,n,i);case R:return p(e,t,r,(0,n._init)(n._payload),i)}if(te(n)||D(n))return d(t,e=e.get(r)||null,n,i,null);wo(t,n)}return null}function m(i,o,a,l){for(var c=null,u=null,d=o,m=o=0,g=null;null!==d&&m<a.length;m++){d.index>m?(g=d,d=null):g=d.sibling;var y=f(i,d,a[m],l);if(null===y){null===d&&(d=g);break}e&&d&&null===y.alternate&&t(i,d),o=s(y,o,m),null===u?c=y:u.sibling=y,u=y,d=g}if(m===a.length)return r(i,d),io&&Ki(i,m),c;if(null===d){for(;m<a.length;m++)null!==(d=h(i,a[m],l))&&(o=s(d,o,m),null===u?c=d:u.sibling=d,u=d);return io&&Ki(i,m),c}for(d=n(i,d);m<a.length;m++)null!==(g=p(d,i,m,a[m],l))&&(e&&null!==g.alternate&&d.delete(null===g.key?m:g.key),o=s(g,o,m),null===u?c=g:u.sibling=g,u=g);return e&&d.forEach((function(e){return t(i,e)})),io&&Ki(i,m),c}function g(i,a,l,c){var u=D(l);if("function"!==typeof u)throw Error(o(150));if(null==(l=u.call(l)))throw Error(o(151));for(var d=u=null,m=a,g=a=0,y=null,w=l.next();null!==m&&!w.done;g++,w=l.next()){m.index>g?(y=m,m=null):y=m.sibling;var b=f(i,m,w.value,c);if(null===b){null===m&&(m=y);break}e&&m&&null===b.alternate&&t(i,m),a=s(b,a,g),null===d?u=b:d.sibling=b,d=b,m=y}if(w.done)return r(i,m),io&&Ki(i,g),u;if(null===m){for(;!w.done;g++,w=l.next())null!==(w=h(i,w.value,c))&&(a=s(w,a,g),null===d?u=w:d.sibling=w,d=w);return io&&Ki(i,g),u}for(m=n(i,m);!w.done;g++,w=l.next())null!==(w=p(m,i,g,w.value,c))&&(e&&null!==w.alternate&&m.delete(null===w.key?g:w.key),a=s(w,a,g),null===d?u=w:d.sibling=w,d=w);return e&&m.forEach((function(e){return t(i,e)})),io&&Ki(i,g),u}return function e(n,o,s,l){if("object"===typeof s&&null!==s&&s.type===E&&null===s.key&&(s=s.props.children),"object"===typeof s&&null!==s){switch(s.$$typeof){case _:e:{for(var c=s.key,u=o;null!==u;){if(u.key===c){if((c=s.type)===E){if(7===u.tag){r(n,u.sibling),(o=i(u,s.props.children)).return=n,n=o;break e}}else if(u.elementType===c||"object"===typeof c&&null!==c&&c.$$typeof===R&&bo(c)===u.type){r(n,u.sibling),(o=i(u,s.props)).ref=yo(n,u,s),o.return=n,n=o;break e}r(n,u);break}t(n,u),u=u.sibling}s.type===E?((o=Dc(s.props.children,n.mode,l,s.key)).return=n,n=o):((l=jc(s.type,s.key,s.props,null,n.mode,l)).ref=yo(n,o,s),l.return=n,n=l)}return a(n);case x:e:{for(u=s.key;null!==o;){if(o.key===u){if(4===o.tag&&o.stateNode.containerInfo===s.containerInfo&&o.stateNode.implementation===s.implementation){r(n,o.sibling),(o=i(o,s.children||[])).return=n,n=o;break e}r(n,o);break}t(n,o),o=o.sibling}(o=Bc(s,n.mode,l)).return=n,n=o}return a(n);case R:return e(n,o,(u=s._init)(s._payload),l)}if(te(s))return m(n,o,s,l);if(D(s))return g(n,o,s,l);wo(n,s)}return"string"===typeof s&&""!==s||"number"===typeof s?(s=""+s,null!==o&&6===o.tag?(r(n,o.sibling),(o=i(o,s)).return=n,n=o):(r(n,o),(o=Lc(s,n.mode,l)).return=n,n=o),a(n)):r(n,o)}}var _o=vo(!0),xo=vo(!1),Eo=Ci(null),Co=null,So=null,Ao=null;function No(){Ao=So=Co=null}function Io(e){var t=Eo.current;Si(Eo),e._currentValue=t}function To(e,t,r){for(;null!==e;){var n=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==n&&(n.childLanes|=t)):null!==n&&(n.childLanes&t)!==t&&(n.childLanes|=t),e===r)break;e=e.return}}function Oo(e,t){Co=e,Ao=So=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!==(e.lanes&t)&&(ba=!0),e.firstContext=null)}function ko(e){var t=e._currentValue;if(Ao!==e)if(e={context:e,memoizedValue:t,next:null},null===So){if(null===Co)throw Error(o(308));So=e,Co.dependencies={lanes:0,firstContext:e}}else So=So.next=e;return t}var Ro=null;function Mo(e){null===Ro?Ro=[e]:Ro.push(e)}function jo(e,t,r,n){var i=t.interleaved;return null===i?(r.next=r,Mo(t)):(r.next=i.next,i.next=r),t.interleaved=r,Do(e,n)}function Do(e,t){e.lanes|=t;var r=e.alternate;for(null!==r&&(r.lanes|=t),r=e,e=e.return;null!==e;)e.childLanes|=t,null!==(r=e.alternate)&&(r.childLanes|=t),r=e,e=e.return;return 3===r.tag?r.stateNode:null}var Po=!1;function Lo(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Bo(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Fo(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Uo(e,t,r){var n=e.updateQueue;if(null===n)return null;if(n=n.shared,0!==(2&Il)){var i=n.pending;return null===i?t.next=t:(t.next=i.next,i.next=t),n.pending=t,Do(e,r)}return null===(i=n.interleaved)?(t.next=t,Mo(n)):(t.next=i.next,i.next=t),n.interleaved=t,Do(e,r)}function zo(e,t,r){if(null!==(t=t.updateQueue)&&(t=t.shared,0!==(4194240&r))){var n=t.lanes;r|=n&=e.pendingLanes,t.lanes=r,wt(e,r)}}function Ho(e,t){var r=e.updateQueue,n=e.alternate;if(null!==n&&r===(n=n.updateQueue)){var i=null,o=null;if(null!==(r=r.firstBaseUpdate)){do{var s={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};null===o?i=o=s:o=o.next=s,r=r.next}while(null!==r);null===o?i=o=t:o=o.next=t}else i=o=t;return r={baseState:n.baseState,firstBaseUpdate:i,lastBaseUpdate:o,shared:n.shared,effects:n.effects},void(e.updateQueue=r)}null===(e=r.lastBaseUpdate)?r.firstBaseUpdate=t:e.next=t,r.lastBaseUpdate=t}function Vo(e,t,r,n){var i=e.updateQueue;Po=!1;var o=i.firstBaseUpdate,s=i.lastBaseUpdate,a=i.shared.pending;if(null!==a){i.shared.pending=null;var l=a,c=l.next;l.next=null,null===s?o=c:s.next=c,s=l;var u=e.alternate;null!==u&&((a=(u=u.updateQueue).lastBaseUpdate)!==s&&(null===a?u.firstBaseUpdate=c:a.next=c,u.lastBaseUpdate=l))}if(null!==o){var d=i.baseState;for(s=0,u=c=l=null,a=o;;){var h=a.lane,f=a.eventTime;if((n&h)===h){null!==u&&(u=u.next={eventTime:f,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var p=e,m=a;switch(h=t,f=r,m.tag){case 1:if("function"===typeof(p=m.payload)){d=p.call(f,d,h);break e}d=p;break e;case 3:p.flags=-65537&p.flags|128;case 0:if(null===(h="function"===typeof(p=m.payload)?p.call(f,d,h):p)||void 0===h)break e;d=L({},d,h);break e;case 2:Po=!0}}null!==a.callback&&0!==a.lane&&(e.flags|=64,null===(h=i.effects)?i.effects=[a]:h.push(a))}else f={eventTime:f,lane:h,tag:a.tag,payload:a.payload,callback:a.callback,next:null},null===u?(c=u=f,l=d):u=u.next=f,s|=h;if(null===(a=a.next)){if(null===(a=i.shared.pending))break;a=(h=a).next,h.next=null,i.lastBaseUpdate=h,i.shared.pending=null}}if(null===u&&(l=d),i.baseState=l,i.firstBaseUpdate=c,i.lastBaseUpdate=u,null!==(t=i.shared.interleaved)){i=t;do{s|=i.lane,i=i.next}while(i!==t)}else null===o&&(i.shared.lanes=0);Pl|=s,e.lanes=s,e.memoizedState=d}}function Wo(e,t,r){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var n=e[t],i=n.callback;if(null!==i){if(n.callback=null,n=r,"function"!==typeof i)throw Error(o(191,i));i.call(n)}}}var Go={},$o=Ci(Go),Xo=Ci(Go),Yo=Ci(Go);function qo(e){if(e===Go)throw Error(o(174));return e}function Qo(e,t){switch(Ai(Yo,t),Ai(Xo,e),Ai($o,Go),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:le(null,"");break;default:t=le(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}Si($o),Ai($o,t)}function Zo(){Si($o),Si(Xo),Si(Yo)}function Ko(e){qo(Yo.current);var t=qo($o.current),r=le(t,e.type);t!==r&&(Ai(Xo,e),Ai($o,r))}function Jo(e){Xo.current===e&&(Si($o),Si(Xo))}var es=Ci(0);function ts(e){for(var t=e;null!==t;){if(13===t.tag){var r=t.memoizedState;if(null!==r&&(null===(r=r.dehydrated)||"$?"===r.data||"$!"===r.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(128&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var rs=[];function ns(){for(var e=0;e<rs.length;e++)rs[e]._workInProgressVersionPrimary=null;rs.length=0}var is=v.ReactCurrentDispatcher,os=v.ReactCurrentBatchConfig,ss=0,as=null,ls=null,cs=null,us=!1,ds=!1,hs=0,fs=0;function ps(){throw Error(o(321))}function ms(e,t){if(null===t)return!1;for(var r=0;r<t.length&&r<e.length;r++)if(!an(e[r],t[r]))return!1;return!0}function gs(e,t,r,n,i,s){if(ss=s,as=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,is.current=null===e||null===e.memoizedState?Js:ea,e=r(n,i),ds){s=0;do{if(ds=!1,hs=0,25<=s)throw Error(o(301));s+=1,cs=ls=null,t.updateQueue=null,is.current=ta,e=r(n,i)}while(ds)}if(is.current=Ks,t=null!==ls&&null!==ls.next,ss=0,cs=ls=as=null,us=!1,t)throw Error(o(300));return e}function ys(){var e=0!==hs;return hs=0,e}function ws(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===cs?as.memoizedState=cs=e:cs=cs.next=e,cs}function bs(){if(null===ls){var e=as.alternate;e=null!==e?e.memoizedState:null}else e=ls.next;var t=null===cs?as.memoizedState:cs.next;if(null!==t)cs=t,ls=e;else{if(null===e)throw Error(o(310));e={memoizedState:(ls=e).memoizedState,baseState:ls.baseState,baseQueue:ls.baseQueue,queue:ls.queue,next:null},null===cs?as.memoizedState=cs=e:cs=cs.next=e}return cs}function vs(e,t){return"function"===typeof t?t(e):t}function _s(e){var t=bs(),r=t.queue;if(null===r)throw Error(o(311));r.lastRenderedReducer=e;var n=ls,i=n.baseQueue,s=r.pending;if(null!==s){if(null!==i){var a=i.next;i.next=s.next,s.next=a}n.baseQueue=i=s,r.pending=null}if(null!==i){s=i.next,n=n.baseState;var l=a=null,c=null,u=s;do{var d=u.lane;if((ss&d)===d)null!==c&&(c=c.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),n=u.hasEagerState?u.eagerState:e(n,u.action);else{var h={lane:d,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};null===c?(l=c=h,a=n):c=c.next=h,as.lanes|=d,Pl|=d}u=u.next}while(null!==u&&u!==s);null===c?a=n:c.next=l,an(n,t.memoizedState)||(ba=!0),t.memoizedState=n,t.baseState=a,t.baseQueue=c,r.lastRenderedState=n}if(null!==(e=r.interleaved)){i=e;do{s=i.lane,as.lanes|=s,Pl|=s,i=i.next}while(i!==e)}else null===i&&(r.lanes=0);return[t.memoizedState,r.dispatch]}function xs(e){var t=bs(),r=t.queue;if(null===r)throw Error(o(311));r.lastRenderedReducer=e;var n=r.dispatch,i=r.pending,s=t.memoizedState;if(null!==i){r.pending=null;var a=i=i.next;do{s=e(s,a.action),a=a.next}while(a!==i);an(s,t.memoizedState)||(ba=!0),t.memoizedState=s,null===t.baseQueue&&(t.baseState=s),r.lastRenderedState=s}return[s,n]}function Es(){}function Cs(e,t){var r=as,n=bs(),i=t(),s=!an(n.memoizedState,i);if(s&&(n.memoizedState=i,ba=!0),n=n.queue,Ps(Ns.bind(null,r,n,e),[e]),n.getSnapshot!==t||s||null!==cs&&1&cs.memoizedState.tag){if(r.flags|=2048,ks(9,As.bind(null,r,n,i,t),void 0,null),null===Tl)throw Error(o(349));0!==(30&ss)||Ss(r,t,i)}return i}function Ss(e,t,r){e.flags|=16384,e={getSnapshot:t,value:r},null===(t=as.updateQueue)?(t={lastEffect:null,stores:null},as.updateQueue=t,t.stores=[e]):null===(r=t.stores)?t.stores=[e]:r.push(e)}function As(e,t,r,n){t.value=r,t.getSnapshot=n,Is(t)&&Ts(e)}function Ns(e,t,r){return r((function(){Is(t)&&Ts(e)}))}function Is(e){var t=e.getSnapshot;e=e.value;try{var r=t();return!an(e,r)}catch(n){return!0}}function Ts(e){var t=Do(e,1);null!==t&&rc(t,e,1,-1)}function Os(e){var t=ws();return"function"===typeof e&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:vs,lastRenderedState:e},t.queue=e,e=e.dispatch=Ys.bind(null,as,e),[t.memoizedState,e]}function ks(e,t,r,n){return e={tag:e,create:t,destroy:r,deps:n,next:null},null===(t=as.updateQueue)?(t={lastEffect:null,stores:null},as.updateQueue=t,t.lastEffect=e.next=e):null===(r=t.lastEffect)?t.lastEffect=e.next=e:(n=r.next,r.next=e,e.next=n,t.lastEffect=e),e}function Rs(){return bs().memoizedState}function Ms(e,t,r,n){var i=ws();as.flags|=e,i.memoizedState=ks(1|t,r,void 0,void 0===n?null:n)}function js(e,t,r,n){var i=bs();n=void 0===n?null:n;var o=void 0;if(null!==ls){var s=ls.memoizedState;if(o=s.destroy,null!==n&&ms(n,s.deps))return void(i.memoizedState=ks(t,r,o,n))}as.flags|=e,i.memoizedState=ks(1|t,r,o,n)}function Ds(e,t){return Ms(8390656,8,e,t)}function Ps(e,t){return js(2048,8,e,t)}function Ls(e,t){return js(4,2,e,t)}function Bs(e,t){return js(4,4,e,t)}function Fs(e,t){return"function"===typeof t?(e=e(),t(e),function(){t(null)}):null!==t&&void 0!==t?(e=e(),t.current=e,function(){t.current=null}):void 0}function Us(e,t,r){return r=null!==r&&void 0!==r?r.concat([e]):null,js(4,4,Fs.bind(null,t,e),r)}function zs(){}function Hs(e,t){var r=bs();t=void 0===t?null:t;var n=r.memoizedState;return null!==n&&null!==t&&ms(t,n[1])?n[0]:(r.memoizedState=[e,t],e)}function Vs(e,t){var r=bs();t=void 0===t?null:t;var n=r.memoizedState;return null!==n&&null!==t&&ms(t,n[1])?n[0]:(e=e(),r.memoizedState=[e,t],e)}function Ws(e,t,r){return 0===(21&ss)?(e.baseState&&(e.baseState=!1,ba=!0),e.memoizedState=r):(an(r,t)||(r=mt(),as.lanes|=r,Pl|=r,e.baseState=!0),t)}function Gs(e,t){var r=bt;bt=0!==r&&4>r?r:4,e(!0);var n=os.transition;os.transition={};try{e(!1),t()}finally{bt=r,os.transition=n}}function $s(){return bs().memoizedState}function Xs(e,t,r){var n=tc(e);if(r={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null},qs(e))Qs(t,r);else if(null!==(r=jo(e,t,r,n))){rc(r,e,n,ec()),Zs(r,t,n)}}function Ys(e,t,r){var n=tc(e),i={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null};if(qs(e))Qs(t,i);else{var o=e.alternate;if(0===e.lanes&&(null===o||0===o.lanes)&&null!==(o=t.lastRenderedReducer))try{var s=t.lastRenderedState,a=o(s,r);if(i.hasEagerState=!0,i.eagerState=a,an(a,s)){var l=t.interleaved;return null===l?(i.next=i,Mo(t)):(i.next=l.next,l.next=i),void(t.interleaved=i)}}catch(c){}null!==(r=jo(e,t,i,n))&&(rc(r,e,n,i=ec()),Zs(r,t,n))}}function qs(e){var t=e.alternate;return e===as||null!==t&&t===as}function Qs(e,t){ds=us=!0;var r=e.pending;null===r?t.next=t:(t.next=r.next,r.next=t),e.pending=t}function Zs(e,t,r){if(0!==(4194240&r)){var n=t.lanes;r|=n&=e.pendingLanes,t.lanes=r,wt(e,r)}}var Ks={readContext:ko,useCallback:ps,useContext:ps,useEffect:ps,useImperativeHandle:ps,useInsertionEffect:ps,useLayoutEffect:ps,useMemo:ps,useReducer:ps,useRef:ps,useState:ps,useDebugValue:ps,useDeferredValue:ps,useTransition:ps,useMutableSource:ps,useSyncExternalStore:ps,useId:ps,unstable_isNewReconciler:!1},Js={readContext:ko,useCallback:function(e,t){return ws().memoizedState=[e,void 0===t?null:t],e},useContext:ko,useEffect:Ds,useImperativeHandle:function(e,t,r){return r=null!==r&&void 0!==r?r.concat([e]):null,Ms(4194308,4,Fs.bind(null,t,e),r)},useLayoutEffect:function(e,t){return Ms(4194308,4,e,t)},useInsertionEffect:function(e,t){return Ms(4,2,e,t)},useMemo:function(e,t){var r=ws();return t=void 0===t?null:t,e=e(),r.memoizedState=[e,t],e},useReducer:function(e,t,r){var n=ws();return t=void 0!==r?r(t):t,n.memoizedState=n.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},n.queue=e,e=e.dispatch=Xs.bind(null,as,e),[n.memoizedState,e]},useRef:function(e){return e={current:e},ws().memoizedState=e},useState:Os,useDebugValue:zs,useDeferredValue:function(e){return ws().memoizedState=e},useTransition:function(){var e=Os(!1),t=e[0];return e=Gs.bind(null,e[1]),ws().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,r){var n=as,i=ws();if(io){if(void 0===r)throw Error(o(407));r=r()}else{if(r=t(),null===Tl)throw Error(o(349));0!==(30&ss)||Ss(n,t,r)}i.memoizedState=r;var s={value:r,getSnapshot:t};return i.queue=s,Ds(Ns.bind(null,n,s,e),[e]),n.flags|=2048,ks(9,As.bind(null,n,s,r,t),void 0,null),r},useId:function(){var e=ws(),t=Tl.identifierPrefix;if(io){var r=Zi;t=":"+t+"R"+(r=(Qi&~(1<<32-st(Qi)-1)).toString(32)+r),0<(r=hs++)&&(t+="H"+r.toString(32)),t+=":"}else t=":"+t+"r"+(r=fs++).toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},ea={readContext:ko,useCallback:Hs,useContext:ko,useEffect:Ps,useImperativeHandle:Us,useInsertionEffect:Ls,useLayoutEffect:Bs,useMemo:Vs,useReducer:_s,useRef:Rs,useState:function(){return _s(vs)},useDebugValue:zs,useDeferredValue:function(e){return Ws(bs(),ls.memoizedState,e)},useTransition:function(){return[_s(vs)[0],bs().memoizedState]},useMutableSource:Es,useSyncExternalStore:Cs,useId:$s,unstable_isNewReconciler:!1},ta={readContext:ko,useCallback:Hs,useContext:ko,useEffect:Ps,useImperativeHandle:Us,useInsertionEffect:Ls,useLayoutEffect:Bs,useMemo:Vs,useReducer:xs,useRef:Rs,useState:function(){return xs(vs)},useDebugValue:zs,useDeferredValue:function(e){var t=bs();return null===ls?t.memoizedState=e:Ws(t,ls.memoizedState,e)},useTransition:function(){return[xs(vs)[0],bs().memoizedState]},useMutableSource:Es,useSyncExternalStore:Cs,useId:$s,unstable_isNewReconciler:!1};function ra(e,t){if(e&&e.defaultProps){for(var r in t=L({},t),e=e.defaultProps)void 0===t[r]&&(t[r]=e[r]);return t}return t}function na(e,t,r,n){r=null===(r=r(n,t=e.memoizedState))||void 0===r?t:L({},t,r),e.memoizedState=r,0===e.lanes&&(e.updateQueue.baseState=r)}var ia={isMounted:function(e){return!!(e=e._reactInternals)&&He(e)===e},enqueueSetState:function(e,t,r){e=e._reactInternals;var n=ec(),i=tc(e),o=Fo(n,i);o.payload=t,void 0!==r&&null!==r&&(o.callback=r),null!==(t=Uo(e,o,i))&&(rc(t,e,i,n),zo(t,e,i))},enqueueReplaceState:function(e,t,r){e=e._reactInternals;var n=ec(),i=tc(e),o=Fo(n,i);o.tag=1,o.payload=t,void 0!==r&&null!==r&&(o.callback=r),null!==(t=Uo(e,o,i))&&(rc(t,e,i,n),zo(t,e,i))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var r=ec(),n=tc(e),i=Fo(r,n);i.tag=2,void 0!==t&&null!==t&&(i.callback=t),null!==(t=Uo(e,i,n))&&(rc(t,e,n,r),zo(t,e,n))}};function oa(e,t,r,n,i,o,s){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(n,o,s):!t.prototype||!t.prototype.isPureReactComponent||(!ln(r,n)||!ln(i,o))}function sa(e,t,r){var n=!1,i=Ni,o=t.contextType;return"object"===typeof o&&null!==o?o=ko(o):(i=Ri(t)?Oi:Ii.current,o=(n=null!==(n=t.contextTypes)&&void 0!==n)?ki(e,i):Ni),t=new t(r,o),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=ia,e.stateNode=t,t._reactInternals=e,n&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=o),t}function aa(e,t,r,n){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(r,n),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(r,n),t.state!==e&&ia.enqueueReplaceState(t,t.state,null)}function la(e,t,r,n){var i=e.stateNode;i.props=r,i.state=e.memoizedState,i.refs={},Lo(e);var o=t.contextType;"object"===typeof o&&null!==o?i.context=ko(o):(o=Ri(t)?Oi:Ii.current,i.context=ki(e,o)),i.state=e.memoizedState,"function"===typeof(o=t.getDerivedStateFromProps)&&(na(e,t,o,r),i.state=e.memoizedState),"function"===typeof t.getDerivedStateFromProps||"function"===typeof i.getSnapshotBeforeUpdate||"function"!==typeof i.UNSAFE_componentWillMount&&"function"!==typeof i.componentWillMount||(t=i.state,"function"===typeof i.componentWillMount&&i.componentWillMount(),"function"===typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount(),t!==i.state&&ia.enqueueReplaceState(i,i.state,null),Vo(e,r,i,n),i.state=e.memoizedState),"function"===typeof i.componentDidMount&&(e.flags|=4194308)}function ca(e,t){try{var r="",n=t;do{r+=z(n),n=n.return}while(n);var i=r}catch(o){i="\nError generating stack: "+o.message+"\n"+o.stack}return{value:e,source:t,stack:i,digest:null}}function ua(e,t,r){return{value:e,source:null,stack:null!=r?r:null,digest:null!=t?t:null}}function da(e,t){try{console.error(t.value)}catch(r){setTimeout((function(){throw r}))}}var ha="function"===typeof WeakMap?WeakMap:Map;function fa(e,t,r){(r=Fo(-1,r)).tag=3,r.payload={element:null};var n=t.value;return r.callback=function(){Wl||(Wl=!0,Gl=n),da(0,t)},r}function pa(e,t,r){(r=Fo(-1,r)).tag=3;var n=e.type.getDerivedStateFromError;if("function"===typeof n){var i=t.value;r.payload=function(){return n(i)},r.callback=function(){da(0,t)}}var o=e.stateNode;return null!==o&&"function"===typeof o.componentDidCatch&&(r.callback=function(){da(0,t),"function"!==typeof n&&(null===$l?$l=new Set([this]):$l.add(this));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),r}function ma(e,t,r){var n=e.pingCache;if(null===n){n=e.pingCache=new ha;var i=new Set;n.set(t,i)}else void 0===(i=n.get(t))&&(i=new Set,n.set(t,i));i.has(r)||(i.add(r),e=Sc.bind(null,e,t,r),t.then(e,e))}function ga(e){do{var t;if((t=13===e.tag)&&(t=null===(t=e.memoizedState)||null!==t.dehydrated),t)return e;e=e.return}while(null!==e);return null}function ya(e,t,r,n,i){return 0===(1&e.mode)?(e===t?e.flags|=65536:(e.flags|=128,r.flags|=131072,r.flags&=-52805,1===r.tag&&(null===r.alternate?r.tag=17:((t=Fo(-1,1)).tag=2,Uo(r,t,1))),r.lanes|=1),e):(e.flags|=65536,e.lanes=i,e)}var wa=v.ReactCurrentOwner,ba=!1;function va(e,t,r,n){t.child=null===e?xo(t,null,r,n):_o(t,e.child,r,n)}function _a(e,t,r,n,i){r=r.render;var o=t.ref;return Oo(t,i),n=gs(e,t,r,n,o,i),r=ys(),null===e||ba?(io&&r&&eo(t),t.flags|=1,va(e,t,n,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Wa(e,t,i))}function xa(e,t,r,n,i){if(null===e){var o=r.type;return"function"!==typeof o||Rc(o)||void 0!==o.defaultProps||null!==r.compare||void 0!==r.defaultProps?((e=jc(r.type,null,n,t,t.mode,i)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=o,Ea(e,t,o,n,i))}if(o=e.child,0===(e.lanes&i)){var s=o.memoizedProps;if((r=null!==(r=r.compare)?r:ln)(s,n)&&e.ref===t.ref)return Wa(e,t,i)}return t.flags|=1,(e=Mc(o,n)).ref=t.ref,e.return=t,t.child=e}function Ea(e,t,r,n,i){if(null!==e){var o=e.memoizedProps;if(ln(o,n)&&e.ref===t.ref){if(ba=!1,t.pendingProps=n=o,0===(e.lanes&i))return t.lanes=e.lanes,Wa(e,t,i);0!==(131072&e.flags)&&(ba=!0)}}return Aa(e,t,r,n,i)}function Ca(e,t,r){var n=t.pendingProps,i=n.children,o=null!==e?e.memoizedState:null;if("hidden"===n.mode)if(0===(1&t.mode))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ai(Ml,Rl),Rl|=r;else{if(0===(1073741824&r))return e=null!==o?o.baseLanes|r:r,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Ai(Ml,Rl),Rl|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},n=null!==o?o.baseLanes:r,Ai(Ml,Rl),Rl|=n}else null!==o?(n=o.baseLanes|r,t.memoizedState=null):n=r,Ai(Ml,Rl),Rl|=n;return va(e,t,i,r),t.child}function Sa(e,t){var r=t.ref;(null===e&&null!==r||null!==e&&e.ref!==r)&&(t.flags|=512,t.flags|=2097152)}function Aa(e,t,r,n,i){var o=Ri(r)?Oi:Ii.current;return o=ki(t,o),Oo(t,i),r=gs(e,t,r,n,o,i),n=ys(),null===e||ba?(io&&n&&eo(t),t.flags|=1,va(e,t,r,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Wa(e,t,i))}function Na(e,t,r,n,i){if(Ri(r)){var o=!0;Pi(t)}else o=!1;if(Oo(t,i),null===t.stateNode)Va(e,t),sa(t,r,n),la(t,r,n,i),n=!0;else if(null===e){var s=t.stateNode,a=t.memoizedProps;s.props=a;var l=s.context,c=r.contextType;"object"===typeof c&&null!==c?c=ko(c):c=ki(t,c=Ri(r)?Oi:Ii.current);var u=r.getDerivedStateFromProps,d="function"===typeof u||"function"===typeof s.getSnapshotBeforeUpdate;d||"function"!==typeof s.UNSAFE_componentWillReceiveProps&&"function"!==typeof s.componentWillReceiveProps||(a!==n||l!==c)&&aa(t,s,n,c),Po=!1;var h=t.memoizedState;s.state=h,Vo(t,n,s,i),l=t.memoizedState,a!==n||h!==l||Ti.current||Po?("function"===typeof u&&(na(t,r,u,n),l=t.memoizedState),(a=Po||oa(t,r,a,n,h,l,c))?(d||"function"!==typeof s.UNSAFE_componentWillMount&&"function"!==typeof s.componentWillMount||("function"===typeof s.componentWillMount&&s.componentWillMount(),"function"===typeof s.UNSAFE_componentWillMount&&s.UNSAFE_componentWillMount()),"function"===typeof s.componentDidMount&&(t.flags|=4194308)):("function"===typeof s.componentDidMount&&(t.flags|=4194308),t.memoizedProps=n,t.memoizedState=l),s.props=n,s.state=l,s.context=c,n=a):("function"===typeof s.componentDidMount&&(t.flags|=4194308),n=!1)}else{s=t.stateNode,Bo(e,t),a=t.memoizedProps,c=t.type===t.elementType?a:ra(t.type,a),s.props=c,d=t.pendingProps,h=s.context,"object"===typeof(l=r.contextType)&&null!==l?l=ko(l):l=ki(t,l=Ri(r)?Oi:Ii.current);var f=r.getDerivedStateFromProps;(u="function"===typeof f||"function"===typeof s.getSnapshotBeforeUpdate)||"function"!==typeof s.UNSAFE_componentWillReceiveProps&&"function"!==typeof s.componentWillReceiveProps||(a!==d||h!==l)&&aa(t,s,n,l),Po=!1,h=t.memoizedState,s.state=h,Vo(t,n,s,i);var p=t.memoizedState;a!==d||h!==p||Ti.current||Po?("function"===typeof f&&(na(t,r,f,n),p=t.memoizedState),(c=Po||oa(t,r,c,n,h,p,l)||!1)?(u||"function"!==typeof s.UNSAFE_componentWillUpdate&&"function"!==typeof s.componentWillUpdate||("function"===typeof s.componentWillUpdate&&s.componentWillUpdate(n,p,l),"function"===typeof s.UNSAFE_componentWillUpdate&&s.UNSAFE_componentWillUpdate(n,p,l)),"function"===typeof s.componentDidUpdate&&(t.flags|=4),"function"===typeof s.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!==typeof s.componentDidUpdate||a===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof s.getSnapshotBeforeUpdate||a===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),t.memoizedProps=n,t.memoizedState=p),s.props=n,s.state=p,s.context=l,n=c):("function"!==typeof s.componentDidUpdate||a===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof s.getSnapshotBeforeUpdate||a===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),n=!1)}return Ia(e,t,r,n,o,i)}function Ia(e,t,r,n,i,o){Sa(e,t);var s=0!==(128&t.flags);if(!n&&!s)return i&&Li(t,r,!1),Wa(e,t,o);n=t.stateNode,wa.current=t;var a=s&&"function"!==typeof r.getDerivedStateFromError?null:n.render();return t.flags|=1,null!==e&&s?(t.child=_o(t,e.child,null,o),t.child=_o(t,null,a,o)):va(e,t,a,o),t.memoizedState=n.state,i&&Li(t,r,!0),t.child}function Ta(e){var t=e.stateNode;t.pendingContext?ji(0,t.pendingContext,t.pendingContext!==t.context):t.context&&ji(0,t.context,!1),Qo(e,t.containerInfo)}function Oa(e,t,r,n,i){return po(),mo(i),t.flags|=256,va(e,t,r,n),t.child}var ka,Ra,Ma,ja,Da={dehydrated:null,treeContext:null,retryLane:0};function Pa(e){return{baseLanes:e,cachePool:null,transitions:null}}function La(e,t,r){var n,i=t.pendingProps,s=es.current,a=!1,l=0!==(128&t.flags);if((n=l)||(n=(null===e||null!==e.memoizedState)&&0!==(2&s)),n?(a=!0,t.flags&=-129):null!==e&&null===e.memoizedState||(s|=1),Ai(es,1&s),null===e)return co(t),null!==(e=t.memoizedState)&&null!==(e=e.dehydrated)?(0===(1&t.mode)?t.lanes=1:"$!"===e.data?t.lanes=8:t.lanes=1073741824,null):(l=i.children,e=i.fallback,a?(i=t.mode,a=t.child,l={mode:"hidden",children:l},0===(1&i)&&null!==a?(a.childLanes=0,a.pendingProps=l):a=Pc(l,i,0,null),e=Dc(e,i,r,null),a.return=t,e.return=t,a.sibling=e,t.child=a,t.child.memoizedState=Pa(r),t.memoizedState=Da,e):Ba(t,l));if(null!==(s=e.memoizedState)&&null!==(n=s.dehydrated))return function(e,t,r,n,i,s,a){if(r)return 256&t.flags?(t.flags&=-257,Fa(e,t,a,n=ua(Error(o(422))))):null!==t.memoizedState?(t.child=e.child,t.flags|=128,null):(s=n.fallback,i=t.mode,n=Pc({mode:"visible",children:n.children},i,0,null),(s=Dc(s,i,a,null)).flags|=2,n.return=t,s.return=t,n.sibling=s,t.child=n,0!==(1&t.mode)&&_o(t,e.child,null,a),t.child.memoizedState=Pa(a),t.memoizedState=Da,s);if(0===(1&t.mode))return Fa(e,t,a,null);if("$!"===i.data){if(n=i.nextSibling&&i.nextSibling.dataset)var l=n.dgst;return n=l,Fa(e,t,a,n=ua(s=Error(o(419)),n,void 0))}if(l=0!==(a&e.childLanes),ba||l){if(null!==(n=Tl)){switch(a&-a){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}0!==(i=0!==(i&(n.suspendedLanes|a))?0:i)&&i!==s.retryLane&&(s.retryLane=i,Do(e,i),rc(n,e,i,-1))}return mc(),Fa(e,t,a,n=ua(Error(o(421))))}return"$?"===i.data?(t.flags|=128,t.child=e.child,t=Nc.bind(null,e),i._reactRetry=t,null):(e=s.treeContext,no=ci(i.nextSibling),ro=t,io=!0,oo=null,null!==e&&(Xi[Yi++]=Qi,Xi[Yi++]=Zi,Xi[Yi++]=qi,Qi=e.id,Zi=e.overflow,qi=t),t=Ba(t,n.children),t.flags|=4096,t)}(e,t,l,i,n,s,r);if(a){a=i.fallback,l=t.mode,n=(s=e.child).sibling;var c={mode:"hidden",children:i.children};return 0===(1&l)&&t.child!==s?((i=t.child).childLanes=0,i.pendingProps=c,t.deletions=null):(i=Mc(s,c)).subtreeFlags=14680064&s.subtreeFlags,null!==n?a=Mc(n,a):(a=Dc(a,l,r,null)).flags|=2,a.return=t,i.return=t,i.sibling=a,t.child=i,i=a,a=t.child,l=null===(l=e.child.memoizedState)?Pa(r):{baseLanes:l.baseLanes|r,cachePool:null,transitions:l.transitions},a.memoizedState=l,a.childLanes=e.childLanes&~r,t.memoizedState=Da,i}return e=(a=e.child).sibling,i=Mc(a,{mode:"visible",children:i.children}),0===(1&t.mode)&&(i.lanes=r),i.return=t,i.sibling=null,null!==e&&(null===(r=t.deletions)?(t.deletions=[e],t.flags|=16):r.push(e)),t.child=i,t.memoizedState=null,i}function Ba(e,t){return(t=Pc({mode:"visible",children:t},e.mode,0,null)).return=e,e.child=t}function Fa(e,t,r,n){return null!==n&&mo(n),_o(t,e.child,null,r),(e=Ba(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function Ua(e,t,r){e.lanes|=t;var n=e.alternate;null!==n&&(n.lanes|=t),To(e.return,t,r)}function za(e,t,r,n,i){var o=e.memoizedState;null===o?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:n,tail:r,tailMode:i}:(o.isBackwards=t,o.rendering=null,o.renderingStartTime=0,o.last=n,o.tail=r,o.tailMode=i)}function Ha(e,t,r){var n=t.pendingProps,i=n.revealOrder,o=n.tail;if(va(e,t,n.children,r),0!==(2&(n=es.current)))n=1&n|2,t.flags|=128;else{if(null!==e&&0!==(128&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&Ua(e,r,t);else if(19===e.tag)Ua(e,r,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}n&=1}if(Ai(es,n),0===(1&t.mode))t.memoizedState=null;else switch(i){case"forwards":for(r=t.child,i=null;null!==r;)null!==(e=r.alternate)&&null===ts(e)&&(i=r),r=r.sibling;null===(r=i)?(i=t.child,t.child=null):(i=r.sibling,r.sibling=null),za(t,!1,i,r,o);break;case"backwards":for(r=null,i=t.child,t.child=null;null!==i;){if(null!==(e=i.alternate)&&null===ts(e)){t.child=i;break}e=i.sibling,i.sibling=r,r=i,i=e}za(t,!0,r,null,o);break;case"together":za(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Va(e,t){0===(1&t.mode)&&null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Wa(e,t,r){if(null!==e&&(t.dependencies=e.dependencies),Pl|=t.lanes,0===(r&t.childLanes))return null;if(null!==e&&t.child!==e.child)throw Error(o(153));if(null!==t.child){for(r=Mc(e=t.child,e.pendingProps),t.child=r,r.return=t;null!==e.sibling;)e=e.sibling,(r=r.sibling=Mc(e,e.pendingProps)).return=t;r.sibling=null}return t.child}function Ga(e,t){if(!io)switch(e.tailMode){case"hidden":t=e.tail;for(var r=null;null!==t;)null!==t.alternate&&(r=t),t=t.sibling;null===r?e.tail=null:r.sibling=null;break;case"collapsed":r=e.tail;for(var n=null;null!==r;)null!==r.alternate&&(n=r),r=r.sibling;null===n?t||null===e.tail?e.tail=null:e.tail.sibling=null:n.sibling=null}}function $a(e){var t=null!==e.alternate&&e.alternate.child===e.child,r=0,n=0;if(t)for(var i=e.child;null!==i;)r|=i.lanes|i.childLanes,n|=14680064&i.subtreeFlags,n|=14680064&i.flags,i.return=e,i=i.sibling;else for(i=e.child;null!==i;)r|=i.lanes|i.childLanes,n|=i.subtreeFlags,n|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=n,e.childLanes=r,t}function Xa(e,t,r){var n=t.pendingProps;switch(to(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return $a(t),null;case 1:case 17:return Ri(t.type)&&Mi(),$a(t),null;case 3:return n=t.stateNode,Zo(),Si(Ti),Si(Ii),ns(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),null!==e&&null!==e.child||(ho(t)?t.flags|=4:null===e||e.memoizedState.isDehydrated&&0===(256&t.flags)||(t.flags|=1024,null!==oo&&(sc(oo),oo=null))),Ra(e,t),$a(t),null;case 5:Jo(t);var i=qo(Yo.current);if(r=t.type,null!==e&&null!=t.stateNode)Ma(e,t,r,n,i),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!n){if(null===t.stateNode)throw Error(o(166));return $a(t),null}if(e=qo($o.current),ho(t)){n=t.stateNode,r=t.type;var s=t.memoizedProps;switch(n[hi]=t,n[fi]=s,e=0!==(1&t.mode),r){case"dialog":Fn("cancel",n),Fn("close",n);break;case"iframe":case"object":case"embed":Fn("load",n);break;case"video":case"audio":for(i=0;i<Dn.length;i++)Fn(Dn[i],n);break;case"source":Fn("error",n);break;case"img":case"image":case"link":Fn("error",n),Fn("load",n);break;case"details":Fn("toggle",n);break;case"input":Q(n,s),Fn("invalid",n);break;case"select":n._wrapperState={wasMultiple:!!s.multiple},Fn("invalid",n);break;case"textarea":ie(n,s),Fn("invalid",n)}for(var l in we(r,s),i=null,s)if(s.hasOwnProperty(l)){var c=s[l];"children"===l?"string"===typeof c?n.textContent!==c&&(!0!==s.suppressHydrationWarning&&Kn(n.textContent,c,e),i=["children",c]):"number"===typeof c&&n.textContent!==""+c&&(!0!==s.suppressHydrationWarning&&Kn(n.textContent,c,e),i=["children",""+c]):a.hasOwnProperty(l)&&null!=c&&"onScroll"===l&&Fn("scroll",n)}switch(r){case"input":$(n),J(n,s,!0);break;case"textarea":$(n),se(n);break;case"select":case"option":break;default:"function"===typeof s.onClick&&(n.onclick=Jn)}n=i,t.updateQueue=n,null!==n&&(t.flags|=4)}else{l=9===i.nodeType?i:i.ownerDocument,"http://www.w3.org/1999/xhtml"===e&&(e=ae(r)),"http://www.w3.org/1999/xhtml"===e?"script"===r?((e=l.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"===typeof n.is?e=l.createElement(r,{is:n.is}):(e=l.createElement(r),"select"===r&&(l=e,n.multiple?l.multiple=!0:n.size&&(l.size=n.size))):e=l.createElementNS(e,r),e[hi]=t,e[fi]=n,ka(e,t,!1,!1),t.stateNode=e;e:{switch(l=be(r,n),r){case"dialog":Fn("cancel",e),Fn("close",e),i=n;break;case"iframe":case"object":case"embed":Fn("load",e),i=n;break;case"video":case"audio":for(i=0;i<Dn.length;i++)Fn(Dn[i],e);i=n;break;case"source":Fn("error",e),i=n;break;case"img":case"image":case"link":Fn("error",e),Fn("load",e),i=n;break;case"details":Fn("toggle",e),i=n;break;case"input":Q(e,n),i=q(e,n),Fn("invalid",e);break;case"option":default:i=n;break;case"select":e._wrapperState={wasMultiple:!!n.multiple},i=L({},n,{value:void 0}),Fn("invalid",e);break;case"textarea":ie(e,n),i=ne(e,n),Fn("invalid",e)}for(s in we(r,i),c=i)if(c.hasOwnProperty(s)){var u=c[s];"style"===s?ge(e,u):"dangerouslySetInnerHTML"===s?null!=(u=u?u.__html:void 0)&&de(e,u):"children"===s?"string"===typeof u?("textarea"!==r||""!==u)&&he(e,u):"number"===typeof u&&he(e,""+u):"suppressContentEditableWarning"!==s&&"suppressHydrationWarning"!==s&&"autoFocus"!==s&&(a.hasOwnProperty(s)?null!=u&&"onScroll"===s&&Fn("scroll",e):null!=u&&b(e,s,u,l))}switch(r){case"input":$(e),J(e,n,!1);break;case"textarea":$(e),se(e);break;case"option":null!=n.value&&e.setAttribute("value",""+W(n.value));break;case"select":e.multiple=!!n.multiple,null!=(s=n.value)?re(e,!!n.multiple,s,!1):null!=n.defaultValue&&re(e,!!n.multiple,n.defaultValue,!0);break;default:"function"===typeof i.onClick&&(e.onclick=Jn)}switch(r){case"button":case"input":case"select":case"textarea":n=!!n.autoFocus;break e;case"img":n=!0;break e;default:n=!1}}n&&(t.flags|=4)}null!==t.ref&&(t.flags|=512,t.flags|=2097152)}return $a(t),null;case 6:if(e&&null!=t.stateNode)ja(e,t,e.memoizedProps,n);else{if("string"!==typeof n&&null===t.stateNode)throw Error(o(166));if(r=qo(Yo.current),qo($o.current),ho(t)){if(n=t.stateNode,r=t.memoizedProps,n[hi]=t,(s=n.nodeValue!==r)&&null!==(e=ro))switch(e.tag){case 3:Kn(n.nodeValue,r,0!==(1&e.mode));break;case 5:!0!==e.memoizedProps.suppressHydrationWarning&&Kn(n.nodeValue,r,0!==(1&e.mode))}s&&(t.flags|=4)}else(n=(9===r.nodeType?r:r.ownerDocument).createTextNode(n))[hi]=t,t.stateNode=n}return $a(t),null;case 13:if(Si(es),n=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(io&&null!==no&&0!==(1&t.mode)&&0===(128&t.flags))fo(),po(),t.flags|=98560,s=!1;else if(s=ho(t),null!==n&&null!==n.dehydrated){if(null===e){if(!s)throw Error(o(318));if(!(s=null!==(s=t.memoizedState)?s.dehydrated:null))throw Error(o(317));s[hi]=t}else po(),0===(128&t.flags)&&(t.memoizedState=null),t.flags|=4;$a(t),s=!1}else null!==oo&&(sc(oo),oo=null),s=!0;if(!s)return 65536&t.flags?t:null}return 0!==(128&t.flags)?(t.lanes=r,t):((n=null!==n)!==(null!==e&&null!==e.memoizedState)&&n&&(t.child.flags|=8192,0!==(1&t.mode)&&(null===e||0!==(1&es.current)?0===jl&&(jl=3):mc())),null!==t.updateQueue&&(t.flags|=4),$a(t),null);case 4:return Zo(),Ra(e,t),null===e&&Hn(t.stateNode.containerInfo),$a(t),null;case 10:return Io(t.type._context),$a(t),null;case 19:if(Si(es),null===(s=t.memoizedState))return $a(t),null;if(n=0!==(128&t.flags),null===(l=s.rendering))if(n)Ga(s,!1);else{if(0!==jl||null!==e&&0!==(128&e.flags))for(e=t.child;null!==e;){if(null!==(l=ts(e))){for(t.flags|=128,Ga(s,!1),null!==(n=l.updateQueue)&&(t.updateQueue=n,t.flags|=4),t.subtreeFlags=0,n=r,r=t.child;null!==r;)e=n,(s=r).flags&=14680066,null===(l=s.alternate)?(s.childLanes=0,s.lanes=e,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=l.childLanes,s.lanes=l.lanes,s.child=l.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=l.memoizedProps,s.memoizedState=l.memoizedState,s.updateQueue=l.updateQueue,s.type=l.type,e=l.dependencies,s.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),r=r.sibling;return Ai(es,1&es.current|2),t.child}e=e.sibling}null!==s.tail&&Ze()>Hl&&(t.flags|=128,n=!0,Ga(s,!1),t.lanes=4194304)}else{if(!n)if(null!==(e=ts(l))){if(t.flags|=128,n=!0,null!==(r=e.updateQueue)&&(t.updateQueue=r,t.flags|=4),Ga(s,!0),null===s.tail&&"hidden"===s.tailMode&&!l.alternate&&!io)return $a(t),null}else 2*Ze()-s.renderingStartTime>Hl&&1073741824!==r&&(t.flags|=128,n=!0,Ga(s,!1),t.lanes=4194304);s.isBackwards?(l.sibling=t.child,t.child=l):(null!==(r=s.last)?r.sibling=l:t.child=l,s.last=l)}return null!==s.tail?(t=s.tail,s.rendering=t,s.tail=t.sibling,s.renderingStartTime=Ze(),t.sibling=null,r=es.current,Ai(es,n?1&r|2:1&r),t):($a(t),null);case 22:case 23:return dc(),n=null!==t.memoizedState,null!==e&&null!==e.memoizedState!==n&&(t.flags|=8192),n&&0!==(1&t.mode)?0!==(1073741824&Rl)&&($a(t),6&t.subtreeFlags&&(t.flags|=8192)):$a(t),null;case 24:case 25:return null}throw Error(o(156,t.tag))}function Ya(e,t){switch(to(t),t.tag){case 1:return Ri(t.type)&&Mi(),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return Zo(),Si(Ti),Si(Ii),ns(),0!==(65536&(e=t.flags))&&0===(128&e)?(t.flags=-65537&e|128,t):null;case 5:return Jo(t),null;case 13:if(Si(es),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(o(340));po()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return Si(es),null;case 4:return Zo(),null;case 10:return Io(t.type._context),null;case 22:case 23:return dc(),null;default:return null}}ka=function(e,t){for(var r=t.child;null!==r;){if(5===r.tag||6===r.tag)e.appendChild(r.stateNode);else if(4!==r.tag&&null!==r.child){r.child.return=r,r=r.child;continue}if(r===t)break;for(;null===r.sibling;){if(null===r.return||r.return===t)return;r=r.return}r.sibling.return=r.return,r=r.sibling}},Ra=function(){},Ma=function(e,t,r,n){var i=e.memoizedProps;if(i!==n){e=t.stateNode,qo($o.current);var o,s=null;switch(r){case"input":i=q(e,i),n=q(e,n),s=[];break;case"select":i=L({},i,{value:void 0}),n=L({},n,{value:void 0}),s=[];break;case"textarea":i=ne(e,i),n=ne(e,n),s=[];break;default:"function"!==typeof i.onClick&&"function"===typeof n.onClick&&(e.onclick=Jn)}for(u in we(r,n),r=null,i)if(!n.hasOwnProperty(u)&&i.hasOwnProperty(u)&&null!=i[u])if("style"===u){var l=i[u];for(o in l)l.hasOwnProperty(o)&&(r||(r={}),r[o]="")}else"dangerouslySetInnerHTML"!==u&&"children"!==u&&"suppressContentEditableWarning"!==u&&"suppressHydrationWarning"!==u&&"autoFocus"!==u&&(a.hasOwnProperty(u)?s||(s=[]):(s=s||[]).push(u,null));for(u in n){var c=n[u];if(l=null!=i?i[u]:void 0,n.hasOwnProperty(u)&&c!==l&&(null!=c||null!=l))if("style"===u)if(l){for(o in l)!l.hasOwnProperty(o)||c&&c.hasOwnProperty(o)||(r||(r={}),r[o]="");for(o in c)c.hasOwnProperty(o)&&l[o]!==c[o]&&(r||(r={}),r[o]=c[o])}else r||(s||(s=[]),s.push(u,r)),r=c;else"dangerouslySetInnerHTML"===u?(c=c?c.__html:void 0,l=l?l.__html:void 0,null!=c&&l!==c&&(s=s||[]).push(u,c)):"children"===u?"string"!==typeof c&&"number"!==typeof c||(s=s||[]).push(u,""+c):"suppressContentEditableWarning"!==u&&"suppressHydrationWarning"!==u&&(a.hasOwnProperty(u)?(null!=c&&"onScroll"===u&&Fn("scroll",e),s||l===c||(s=[])):(s=s||[]).push(u,c))}r&&(s=s||[]).push("style",r);var u=s;(t.updateQueue=u)&&(t.flags|=4)}},ja=function(e,t,r,n){r!==n&&(t.flags|=4)};var qa=!1,Qa=!1,Za="function"===typeof WeakSet?WeakSet:Set,Ka=null;function Ja(e,t){var r=e.ref;if(null!==r)if("function"===typeof r)try{r(null)}catch(n){Cc(e,t,n)}else r.current=null}function el(e,t,r){try{r()}catch(n){Cc(e,t,n)}}var tl=!1;function rl(e,t,r){var n=t.updateQueue;if(null!==(n=null!==n?n.lastEffect:null)){var i=n=n.next;do{if((i.tag&e)===e){var o=i.destroy;i.destroy=void 0,void 0!==o&&el(t,r,o)}i=i.next}while(i!==n)}}function nl(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var r=t=t.next;do{if((r.tag&e)===e){var n=r.create;r.destroy=n()}r=r.next}while(r!==t)}}function il(e){var t=e.ref;if(null!==t){var r=e.stateNode;e.tag,e=r,"function"===typeof t?t(e):t.current=e}}function ol(e){var t=e.alternate;null!==t&&(e.alternate=null,ol(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&(delete t[hi],delete t[fi],delete t[mi],delete t[gi],delete t[yi])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function sl(e){return 5===e.tag||3===e.tag||4===e.tag}function al(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||sl(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function ll(e,t,r){var n=e.tag;if(5===n||6===n)e=e.stateNode,t?8===r.nodeType?r.parentNode.insertBefore(e,t):r.insertBefore(e,t):(8===r.nodeType?(t=r.parentNode).insertBefore(e,r):(t=r).appendChild(e),null!==(r=r._reactRootContainer)&&void 0!==r||null!==t.onclick||(t.onclick=Jn));else if(4!==n&&null!==(e=e.child))for(ll(e,t,r),e=e.sibling;null!==e;)ll(e,t,r),e=e.sibling}function cl(e,t,r){var n=e.tag;if(5===n||6===n)e=e.stateNode,t?r.insertBefore(e,t):r.appendChild(e);else if(4!==n&&null!==(e=e.child))for(cl(e,t,r),e=e.sibling;null!==e;)cl(e,t,r),e=e.sibling}var ul=null,dl=!1;function hl(e,t,r){for(r=r.child;null!==r;)fl(e,t,r),r=r.sibling}function fl(e,t,r){if(ot&&"function"===typeof ot.onCommitFiberUnmount)try{ot.onCommitFiberUnmount(it,r)}catch(a){}switch(r.tag){case 5:Qa||Ja(r,t);case 6:var n=ul,i=dl;ul=null,hl(e,t,r),dl=i,null!==(ul=n)&&(dl?(e=ul,r=r.stateNode,8===e.nodeType?e.parentNode.removeChild(r):e.removeChild(r)):ul.removeChild(r.stateNode));break;case 18:null!==ul&&(dl?(e=ul,r=r.stateNode,8===e.nodeType?li(e.parentNode,r):1===e.nodeType&&li(e,r),Ht(e)):li(ul,r.stateNode));break;case 4:n=ul,i=dl,ul=r.stateNode.containerInfo,dl=!0,hl(e,t,r),ul=n,dl=i;break;case 0:case 11:case 14:case 15:if(!Qa&&(null!==(n=r.updateQueue)&&null!==(n=n.lastEffect))){i=n=n.next;do{var o=i,s=o.destroy;o=o.tag,void 0!==s&&(0!==(2&o)||0!==(4&o))&&el(r,t,s),i=i.next}while(i!==n)}hl(e,t,r);break;case 1:if(!Qa&&(Ja(r,t),"function"===typeof(n=r.stateNode).componentWillUnmount))try{n.props=r.memoizedProps,n.state=r.memoizedState,n.componentWillUnmount()}catch(a){Cc(r,t,a)}hl(e,t,r);break;case 21:hl(e,t,r);break;case 22:1&r.mode?(Qa=(n=Qa)||null!==r.memoizedState,hl(e,t,r),Qa=n):hl(e,t,r);break;default:hl(e,t,r)}}function pl(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var r=e.stateNode;null===r&&(r=e.stateNode=new Za),t.forEach((function(t){var n=Ic.bind(null,e,t);r.has(t)||(r.add(t),t.then(n,n))}))}}function ml(e,t){var r=t.deletions;if(null!==r)for(var n=0;n<r.length;n++){var i=r[n];try{var s=e,a=t,l=a;e:for(;null!==l;){switch(l.tag){case 5:ul=l.stateNode,dl=!1;break e;case 3:case 4:ul=l.stateNode.containerInfo,dl=!0;break e}l=l.return}if(null===ul)throw Error(o(160));fl(s,a,i),ul=null,dl=!1;var c=i.alternate;null!==c&&(c.return=null),i.return=null}catch(u){Cc(i,t,u)}}if(12854&t.subtreeFlags)for(t=t.child;null!==t;)gl(t,e),t=t.sibling}function gl(e,t){var r=e.alternate,n=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(ml(t,e),yl(e),4&n){try{rl(3,e,e.return),nl(3,e)}catch(g){Cc(e,e.return,g)}try{rl(5,e,e.return)}catch(g){Cc(e,e.return,g)}}break;case 1:ml(t,e),yl(e),512&n&&null!==r&&Ja(r,r.return);break;case 5:if(ml(t,e),yl(e),512&n&&null!==r&&Ja(r,r.return),32&e.flags){var i=e.stateNode;try{he(i,"")}catch(g){Cc(e,e.return,g)}}if(4&n&&null!=(i=e.stateNode)){var s=e.memoizedProps,a=null!==r?r.memoizedProps:s,l=e.type,c=e.updateQueue;if(e.updateQueue=null,null!==c)try{"input"===l&&"radio"===s.type&&null!=s.name&&Z(i,s),be(l,a);var u=be(l,s);for(a=0;a<c.length;a+=2){var d=c[a],h=c[a+1];"style"===d?ge(i,h):"dangerouslySetInnerHTML"===d?de(i,h):"children"===d?he(i,h):b(i,d,h,u)}switch(l){case"input":K(i,s);break;case"textarea":oe(i,s);break;case"select":var f=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!s.multiple;var p=s.value;null!=p?re(i,!!s.multiple,p,!1):f!==!!s.multiple&&(null!=s.defaultValue?re(i,!!s.multiple,s.defaultValue,!0):re(i,!!s.multiple,s.multiple?[]:"",!1))}i[fi]=s}catch(g){Cc(e,e.return,g)}}break;case 6:if(ml(t,e),yl(e),4&n){if(null===e.stateNode)throw Error(o(162));i=e.stateNode,s=e.memoizedProps;try{i.nodeValue=s}catch(g){Cc(e,e.return,g)}}break;case 3:if(ml(t,e),yl(e),4&n&&null!==r&&r.memoizedState.isDehydrated)try{Ht(t.containerInfo)}catch(g){Cc(e,e.return,g)}break;case 4:default:ml(t,e),yl(e);break;case 13:ml(t,e),yl(e),8192&(i=e.child).flags&&(s=null!==i.memoizedState,i.stateNode.isHidden=s,!s||null!==i.alternate&&null!==i.alternate.memoizedState||(zl=Ze())),4&n&&pl(e);break;case 22:if(d=null!==r&&null!==r.memoizedState,1&e.mode?(Qa=(u=Qa)||d,ml(t,e),Qa=u):ml(t,e),yl(e),8192&n){if(u=null!==e.memoizedState,(e.stateNode.isHidden=u)&&!d&&0!==(1&e.mode))for(Ka=e,d=e.child;null!==d;){for(h=Ka=d;null!==Ka;){switch(p=(f=Ka).child,f.tag){case 0:case 11:case 14:case 15:rl(4,f,f.return);break;case 1:Ja(f,f.return);var m=f.stateNode;if("function"===typeof m.componentWillUnmount){n=f,r=f.return;try{t=n,m.props=t.memoizedProps,m.state=t.memoizedState,m.componentWillUnmount()}catch(g){Cc(n,r,g)}}break;case 5:Ja(f,f.return);break;case 22:if(null!==f.memoizedState){_l(h);continue}}null!==p?(p.return=f,Ka=p):_l(h)}d=d.sibling}e:for(d=null,h=e;;){if(5===h.tag){if(null===d){d=h;try{i=h.stateNode,u?"function"===typeof(s=i.style).setProperty?s.setProperty("display","none","important"):s.display="none":(l=h.stateNode,a=void 0!==(c=h.memoizedProps.style)&&null!==c&&c.hasOwnProperty("display")?c.display:null,l.style.display=me("display",a))}catch(g){Cc(e,e.return,g)}}}else if(6===h.tag){if(null===d)try{h.stateNode.nodeValue=u?"":h.memoizedProps}catch(g){Cc(e,e.return,g)}}else if((22!==h.tag&&23!==h.tag||null===h.memoizedState||h===e)&&null!==h.child){h.child.return=h,h=h.child;continue}if(h===e)break e;for(;null===h.sibling;){if(null===h.return||h.return===e)break e;d===h&&(d=null),h=h.return}d===h&&(d=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:ml(t,e),yl(e),4&n&&pl(e);case 21:}}function yl(e){var t=e.flags;if(2&t){try{e:{for(var r=e.return;null!==r;){if(sl(r)){var n=r;break e}r=r.return}throw Error(o(160))}switch(n.tag){case 5:var i=n.stateNode;32&n.flags&&(he(i,""),n.flags&=-33),cl(e,al(e),i);break;case 3:case 4:var s=n.stateNode.containerInfo;ll(e,al(e),s);break;default:throw Error(o(161))}}catch(a){Cc(e,e.return,a)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function wl(e,t,r){Ka=e,bl(e,t,r)}function bl(e,t,r){for(var n=0!==(1&e.mode);null!==Ka;){var i=Ka,o=i.child;if(22===i.tag&&n){var s=null!==i.memoizedState||qa;if(!s){var a=i.alternate,l=null!==a&&null!==a.memoizedState||Qa;a=qa;var c=Qa;if(qa=s,(Qa=l)&&!c)for(Ka=i;null!==Ka;)l=(s=Ka).child,22===s.tag&&null!==s.memoizedState?xl(i):null!==l?(l.return=s,Ka=l):xl(i);for(;null!==o;)Ka=o,bl(o,t,r),o=o.sibling;Ka=i,qa=a,Qa=c}vl(e)}else 0!==(8772&i.subtreeFlags)&&null!==o?(o.return=i,Ka=o):vl(e)}}function vl(e){for(;null!==Ka;){var t=Ka;if(0!==(8772&t.flags)){var r=t.alternate;try{if(0!==(8772&t.flags))switch(t.tag){case 0:case 11:case 15:Qa||nl(5,t);break;case 1:var n=t.stateNode;if(4&t.flags&&!Qa)if(null===r)n.componentDidMount();else{var i=t.elementType===t.type?r.memoizedProps:ra(t.type,r.memoizedProps);n.componentDidUpdate(i,r.memoizedState,n.__reactInternalSnapshotBeforeUpdate)}var s=t.updateQueue;null!==s&&Wo(t,s,n);break;case 3:var a=t.updateQueue;if(null!==a){if(r=null,null!==t.child)switch(t.child.tag){case 5:case 1:r=t.child.stateNode}Wo(t,a,r)}break;case 5:var l=t.stateNode;if(null===r&&4&t.flags){r=l;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&r.focus();break;case"img":c.src&&(r.src=c.src)}}break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:case 25:break;case 13:if(null===t.memoizedState){var u=t.alternate;if(null!==u){var d=u.memoizedState;if(null!==d){var h=d.dehydrated;null!==h&&Ht(h)}}}break;default:throw Error(o(163))}Qa||512&t.flags&&il(t)}catch(f){Cc(t,t.return,f)}}if(t===e){Ka=null;break}if(null!==(r=t.sibling)){r.return=t.return,Ka=r;break}Ka=t.return}}function _l(e){for(;null!==Ka;){var t=Ka;if(t===e){Ka=null;break}var r=t.sibling;if(null!==r){r.return=t.return,Ka=r;break}Ka=t.return}}function xl(e){for(;null!==Ka;){var t=Ka;try{switch(t.tag){case 0:case 11:case 15:var r=t.return;try{nl(4,t)}catch(l){Cc(t,r,l)}break;case 1:var n=t.stateNode;if("function"===typeof n.componentDidMount){var i=t.return;try{n.componentDidMount()}catch(l){Cc(t,i,l)}}var o=t.return;try{il(t)}catch(l){Cc(t,o,l)}break;case 5:var s=t.return;try{il(t)}catch(l){Cc(t,s,l)}}}catch(l){Cc(t,t.return,l)}if(t===e){Ka=null;break}var a=t.sibling;if(null!==a){a.return=t.return,Ka=a;break}Ka=t.return}}var El,Cl=Math.ceil,Sl=v.ReactCurrentDispatcher,Al=v.ReactCurrentOwner,Nl=v.ReactCurrentBatchConfig,Il=0,Tl=null,Ol=null,kl=0,Rl=0,Ml=Ci(0),jl=0,Dl=null,Pl=0,Ll=0,Bl=0,Fl=null,Ul=null,zl=0,Hl=1/0,Vl=null,Wl=!1,Gl=null,$l=null,Xl=!1,Yl=null,ql=0,Ql=0,Zl=null,Kl=-1,Jl=0;function ec(){return 0!==(6&Il)?Ze():-1!==Kl?Kl:Kl=Ze()}function tc(e){return 0===(1&e.mode)?1:0!==(2&Il)&&0!==kl?kl&-kl:null!==go.transition?(0===Jl&&(Jl=mt()),Jl):0!==(e=bt)?e:e=void 0===(e=window.event)?16:Qt(e.type)}function rc(e,t,r,n){if(50<Ql)throw Ql=0,Zl=null,Error(o(185));yt(e,r,n),0!==(2&Il)&&e===Tl||(e===Tl&&(0===(2&Il)&&(Ll|=r),4===jl&&ac(e,kl)),nc(e,n),1===r&&0===Il&&0===(1&t.mode)&&(Hl=Ze()+500,Fi&&Hi()))}function nc(e,t){var r=e.callbackNode;!function(e,t){for(var r=e.suspendedLanes,n=e.pingedLanes,i=e.expirationTimes,o=e.pendingLanes;0<o;){var s=31-st(o),a=1<<s,l=i[s];-1===l?0!==(a&r)&&0===(a&n)||(i[s]=ft(a,t)):l<=t&&(e.expiredLanes|=a),o&=~a}}(e,t);var n=ht(e,e===Tl?kl:0);if(0===n)null!==r&&Ye(r),e.callbackNode=null,e.callbackPriority=0;else if(t=n&-n,e.callbackPriority!==t){if(null!=r&&Ye(r),1===t)0===e.tag?function(e){Fi=!0,zi(e)}(lc.bind(null,e)):zi(lc.bind(null,e)),si((function(){0===(6&Il)&&Hi()})),r=null;else{switch(vt(n)){case 1:r=Je;break;case 4:r=et;break;case 16:default:r=tt;break;case 536870912:r=nt}r=Tc(r,ic.bind(null,e))}e.callbackPriority=t,e.callbackNode=r}}function ic(e,t){if(Kl=-1,Jl=0,0!==(6&Il))throw Error(o(327));var r=e.callbackNode;if(xc()&&e.callbackNode!==r)return null;var n=ht(e,e===Tl?kl:0);if(0===n)return null;if(0!==(30&n)||0!==(n&e.expiredLanes)||t)t=gc(e,n);else{t=n;var i=Il;Il|=2;var s=pc();for(Tl===e&&kl===t||(Vl=null,Hl=Ze()+500,hc(e,t));;)try{wc();break}catch(l){fc(e,l)}No(),Sl.current=s,Il=i,null!==Ol?t=0:(Tl=null,kl=0,t=jl)}if(0!==t){if(2===t&&(0!==(i=pt(e))&&(n=i,t=oc(e,i))),1===t)throw r=Dl,hc(e,0),ac(e,n),nc(e,Ze()),r;if(6===t)ac(e,n);else{if(i=e.current.alternate,0===(30&n)&&!function(e){for(var t=e;;){if(16384&t.flags){var r=t.updateQueue;if(null!==r&&null!==(r=r.stores))for(var n=0;n<r.length;n++){var i=r[n],o=i.getSnapshot;i=i.value;try{if(!an(o(),i))return!1}catch(a){return!1}}}if(r=t.child,16384&t.subtreeFlags&&null!==r)r.return=t,t=r;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}(i)&&(2===(t=gc(e,n))&&(0!==(s=pt(e))&&(n=s,t=oc(e,s))),1===t))throw r=Dl,hc(e,0),ac(e,n),nc(e,Ze()),r;switch(e.finishedWork=i,e.finishedLanes=n,t){case 0:case 1:throw Error(o(345));case 2:case 5:_c(e,Ul,Vl);break;case 3:if(ac(e,n),(130023424&n)===n&&10<(t=zl+500-Ze())){if(0!==ht(e,0))break;if(((i=e.suspendedLanes)&n)!==n){ec(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=ni(_c.bind(null,e,Ul,Vl),t);break}_c(e,Ul,Vl);break;case 4:if(ac(e,n),(4194240&n)===n)break;for(t=e.eventTimes,i=-1;0<n;){var a=31-st(n);s=1<<a,(a=t[a])>i&&(i=a),n&=~s}if(n=i,10<(n=(120>(n=Ze()-n)?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*Cl(n/1960))-n)){e.timeoutHandle=ni(_c.bind(null,e,Ul,Vl),n);break}_c(e,Ul,Vl);break;default:throw Error(o(329))}}}return nc(e,Ze()),e.callbackNode===r?ic.bind(null,e):null}function oc(e,t){var r=Fl;return e.current.memoizedState.isDehydrated&&(hc(e,t).flags|=256),2!==(e=gc(e,t))&&(t=Ul,Ul=r,null!==t&&sc(t)),e}function sc(e){null===Ul?Ul=e:Ul.push.apply(Ul,e)}function ac(e,t){for(t&=~Bl,t&=~Ll,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var r=31-st(t),n=1<<r;e[r]=-1,t&=~n}}function lc(e){if(0!==(6&Il))throw Error(o(327));xc();var t=ht(e,0);if(0===(1&t))return nc(e,Ze()),null;var r=gc(e,t);if(0!==e.tag&&2===r){var n=pt(e);0!==n&&(t=n,r=oc(e,n))}if(1===r)throw r=Dl,hc(e,0),ac(e,t),nc(e,Ze()),r;if(6===r)throw Error(o(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,_c(e,Ul,Vl),nc(e,Ze()),null}function cc(e,t){var r=Il;Il|=1;try{return e(t)}finally{0===(Il=r)&&(Hl=Ze()+500,Fi&&Hi())}}function uc(e){null!==Yl&&0===Yl.tag&&0===(6&Il)&&xc();var t=Il;Il|=1;var r=Nl.transition,n=bt;try{if(Nl.transition=null,bt=1,e)return e()}finally{bt=n,Nl.transition=r,0===(6&(Il=t))&&Hi()}}function dc(){Rl=Ml.current,Si(Ml)}function hc(e,t){e.finishedWork=null,e.finishedLanes=0;var r=e.timeoutHandle;if(-1!==r&&(e.timeoutHandle=-1,ii(r)),null!==Ol)for(r=Ol.return;null!==r;){var n=r;switch(to(n),n.tag){case 1:null!==(n=n.type.childContextTypes)&&void 0!==n&&Mi();break;case 3:Zo(),Si(Ti),Si(Ii),ns();break;case 5:Jo(n);break;case 4:Zo();break;case 13:case 19:Si(es);break;case 10:Io(n.type._context);break;case 22:case 23:dc()}r=r.return}if(Tl=e,Ol=e=Mc(e.current,null),kl=Rl=t,jl=0,Dl=null,Bl=Ll=Pl=0,Ul=Fl=null,null!==Ro){for(t=0;t<Ro.length;t++)if(null!==(n=(r=Ro[t]).interleaved)){r.interleaved=null;var i=n.next,o=r.pending;if(null!==o){var s=o.next;o.next=i,n.next=s}r.pending=n}Ro=null}return e}function fc(e,t){for(;;){var r=Ol;try{if(No(),is.current=Ks,us){for(var n=as.memoizedState;null!==n;){var i=n.queue;null!==i&&(i.pending=null),n=n.next}us=!1}if(ss=0,cs=ls=as=null,ds=!1,hs=0,Al.current=null,null===r||null===r.return){jl=1,Dl=t,Ol=null;break}e:{var s=e,a=r.return,l=r,c=t;if(t=kl,l.flags|=32768,null!==c&&"object"===typeof c&&"function"===typeof c.then){var u=c,d=l,h=d.tag;if(0===(1&d.mode)&&(0===h||11===h||15===h)){var f=d.alternate;f?(d.updateQueue=f.updateQueue,d.memoizedState=f.memoizedState,d.lanes=f.lanes):(d.updateQueue=null,d.memoizedState=null)}var p=ga(a);if(null!==p){p.flags&=-257,ya(p,a,l,0,t),1&p.mode&&ma(s,u,t),c=u;var m=(t=p).updateQueue;if(null===m){var g=new Set;g.add(c),t.updateQueue=g}else m.add(c);break e}if(0===(1&t)){ma(s,u,t),mc();break e}c=Error(o(426))}else if(io&&1&l.mode){var y=ga(a);if(null!==y){0===(65536&y.flags)&&(y.flags|=256),ya(y,a,l,0,t),mo(ca(c,l));break e}}s=c=ca(c,l),4!==jl&&(jl=2),null===Fl?Fl=[s]:Fl.push(s),s=a;do{switch(s.tag){case 3:s.flags|=65536,t&=-t,s.lanes|=t,Ho(s,fa(0,c,t));break e;case 1:l=c;var w=s.type,b=s.stateNode;if(0===(128&s.flags)&&("function"===typeof w.getDerivedStateFromError||null!==b&&"function"===typeof b.componentDidCatch&&(null===$l||!$l.has(b)))){s.flags|=65536,t&=-t,s.lanes|=t,Ho(s,pa(s,l,t));break e}}s=s.return}while(null!==s)}vc(r)}catch(v){t=v,Ol===r&&null!==r&&(Ol=r=r.return);continue}break}}function pc(){var e=Sl.current;return Sl.current=Ks,null===e?Ks:e}function mc(){0!==jl&&3!==jl&&2!==jl||(jl=4),null===Tl||0===(268435455&Pl)&&0===(268435455&Ll)||ac(Tl,kl)}function gc(e,t){var r=Il;Il|=2;var n=pc();for(Tl===e&&kl===t||(Vl=null,hc(e,t));;)try{yc();break}catch(i){fc(e,i)}if(No(),Il=r,Sl.current=n,null!==Ol)throw Error(o(261));return Tl=null,kl=0,jl}function yc(){for(;null!==Ol;)bc(Ol)}function wc(){for(;null!==Ol&&!qe();)bc(Ol)}function bc(e){var t=El(e.alternate,e,Rl);e.memoizedProps=e.pendingProps,null===t?vc(e):Ol=t,Al.current=null}function vc(e){var t=e;do{var r=t.alternate;if(e=t.return,0===(32768&t.flags)){if(null!==(r=Xa(r,t,Rl)))return void(Ol=r)}else{if(null!==(r=Ya(r,t)))return r.flags&=32767,void(Ol=r);if(null===e)return jl=6,void(Ol=null);e.flags|=32768,e.subtreeFlags=0,e.deletions=null}if(null!==(t=t.sibling))return void(Ol=t);Ol=t=e}while(null!==t);0===jl&&(jl=5)}function _c(e,t,r){var n=bt,i=Nl.transition;try{Nl.transition=null,bt=1,function(e,t,r,n){do{xc()}while(null!==Yl);if(0!==(6&Il))throw Error(o(327));r=e.finishedWork;var i=e.finishedLanes;if(null===r)return null;if(e.finishedWork=null,e.finishedLanes=0,r===e.current)throw Error(o(177));e.callbackNode=null,e.callbackPriority=0;var s=r.lanes|r.childLanes;if(function(e,t){var r=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var n=e.eventTimes;for(e=e.expirationTimes;0<r;){var i=31-st(r),o=1<<i;t[i]=0,n[i]=-1,e[i]=-1,r&=~o}}(e,s),e===Tl&&(Ol=Tl=null,kl=0),0===(2064&r.subtreeFlags)&&0===(2064&r.flags)||Xl||(Xl=!0,Tc(tt,(function(){return xc(),null}))),s=0!==(15990&r.flags),0!==(15990&r.subtreeFlags)||s){s=Nl.transition,Nl.transition=null;var a=bt;bt=1;var l=Il;Il|=4,Al.current=null,function(e,t){if(ei=Wt,fn(e=hn())){if("selectionStart"in e)var r={start:e.selectionStart,end:e.selectionEnd};else e:{var n=(r=(r=e.ownerDocument)&&r.defaultView||window).getSelection&&r.getSelection();if(n&&0!==n.rangeCount){r=n.anchorNode;var i=n.anchorOffset,s=n.focusNode;n=n.focusOffset;try{r.nodeType,s.nodeType}catch(_){r=null;break e}var a=0,l=-1,c=-1,u=0,d=0,h=e,f=null;t:for(;;){for(var p;h!==r||0!==i&&3!==h.nodeType||(l=a+i),h!==s||0!==n&&3!==h.nodeType||(c=a+n),3===h.nodeType&&(a+=h.nodeValue.length),null!==(p=h.firstChild);)f=h,h=p;for(;;){if(h===e)break t;if(f===r&&++u===i&&(l=a),f===s&&++d===n&&(c=a),null!==(p=h.nextSibling))break;f=(h=f).parentNode}h=p}r=-1===l||-1===c?null:{start:l,end:c}}else r=null}r=r||{start:0,end:0}}else r=null;for(ti={focusedElem:e,selectionRange:r},Wt=!1,Ka=t;null!==Ka;)if(e=(t=Ka).child,0!==(1028&t.subtreeFlags)&&null!==e)e.return=t,Ka=e;else for(;null!==Ka;){t=Ka;try{var m=t.alternate;if(0!==(1024&t.flags))switch(t.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(null!==m){var g=m.memoizedProps,y=m.memoizedState,w=t.stateNode,b=w.getSnapshotBeforeUpdate(t.elementType===t.type?g:ra(t.type,g),y);w.__reactInternalSnapshotBeforeUpdate=b}break;case 3:var v=t.stateNode.containerInfo;1===v.nodeType?v.textContent="":9===v.nodeType&&v.documentElement&&v.removeChild(v.documentElement);break;default:throw Error(o(163))}}catch(_){Cc(t,t.return,_)}if(null!==(e=t.sibling)){e.return=t.return,Ka=e;break}Ka=t.return}m=tl,tl=!1}(e,r),gl(r,e),pn(ti),Wt=!!ei,ti=ei=null,e.current=r,wl(r,e,i),Qe(),Il=l,bt=a,Nl.transition=s}else e.current=r;if(Xl&&(Xl=!1,Yl=e,ql=i),s=e.pendingLanes,0===s&&($l=null),function(e){if(ot&&"function"===typeof ot.onCommitFiberRoot)try{ot.onCommitFiberRoot(it,e,void 0,128===(128&e.current.flags))}catch(t){}}(r.stateNode),nc(e,Ze()),null!==t)for(n=e.onRecoverableError,r=0;r<t.length;r++)i=t[r],n(i.value,{componentStack:i.stack,digest:i.digest});if(Wl)throw Wl=!1,e=Gl,Gl=null,e;0!==(1&ql)&&0!==e.tag&&xc(),s=e.pendingLanes,0!==(1&s)?e===Zl?Ql++:(Ql=0,Zl=e):Ql=0,Hi()}(e,t,r,n)}finally{Nl.transition=i,bt=n}return null}function xc(){if(null!==Yl){var e=vt(ql),t=Nl.transition,r=bt;try{if(Nl.transition=null,bt=16>e?16:e,null===Yl)var n=!1;else{if(e=Yl,Yl=null,ql=0,0!==(6&Il))throw Error(o(331));var i=Il;for(Il|=4,Ka=e.current;null!==Ka;){var s=Ka,a=s.child;if(0!==(16&Ka.flags)){var l=s.deletions;if(null!==l){for(var c=0;c<l.length;c++){var u=l[c];for(Ka=u;null!==Ka;){var d=Ka;switch(d.tag){case 0:case 11:case 15:rl(8,d,s)}var h=d.child;if(null!==h)h.return=d,Ka=h;else for(;null!==Ka;){var f=(d=Ka).sibling,p=d.return;if(ol(d),d===u){Ka=null;break}if(null!==f){f.return=p,Ka=f;break}Ka=p}}}var m=s.alternate;if(null!==m){var g=m.child;if(null!==g){m.child=null;do{var y=g.sibling;g.sibling=null,g=y}while(null!==g)}}Ka=s}}if(0!==(2064&s.subtreeFlags)&&null!==a)a.return=s,Ka=a;else e:for(;null!==Ka;){if(0!==(2048&(s=Ka).flags))switch(s.tag){case 0:case 11:case 15:rl(9,s,s.return)}var w=s.sibling;if(null!==w){w.return=s.return,Ka=w;break e}Ka=s.return}}var b=e.current;for(Ka=b;null!==Ka;){var v=(a=Ka).child;if(0!==(2064&a.subtreeFlags)&&null!==v)v.return=a,Ka=v;else e:for(a=b;null!==Ka;){if(0!==(2048&(l=Ka).flags))try{switch(l.tag){case 0:case 11:case 15:nl(9,l)}}catch(x){Cc(l,l.return,x)}if(l===a){Ka=null;break e}var _=l.sibling;if(null!==_){_.return=l.return,Ka=_;break e}Ka=l.return}}if(Il=i,Hi(),ot&&"function"===typeof ot.onPostCommitFiberRoot)try{ot.onPostCommitFiberRoot(it,e)}catch(x){}n=!0}return n}finally{bt=r,Nl.transition=t}}return!1}function Ec(e,t,r){e=Uo(e,t=fa(0,t=ca(r,t),1),1),t=ec(),null!==e&&(yt(e,1,t),nc(e,t))}function Cc(e,t,r){if(3===e.tag)Ec(e,e,r);else for(;null!==t;){if(3===t.tag){Ec(t,e,r);break}if(1===t.tag){var n=t.stateNode;if("function"===typeof t.type.getDerivedStateFromError||"function"===typeof n.componentDidCatch&&(null===$l||!$l.has(n))){t=Uo(t,e=pa(t,e=ca(r,e),1),1),e=ec(),null!==t&&(yt(t,1,e),nc(t,e));break}}t=t.return}}function Sc(e,t,r){var n=e.pingCache;null!==n&&n.delete(t),t=ec(),e.pingedLanes|=e.suspendedLanes&r,Tl===e&&(kl&r)===r&&(4===jl||3===jl&&(130023424&kl)===kl&&500>Ze()-zl?hc(e,0):Bl|=r),nc(e,t)}function Ac(e,t){0===t&&(0===(1&e.mode)?t=1:(t=ut,0===(130023424&(ut<<=1))&&(ut=4194304)));var r=ec();null!==(e=Do(e,t))&&(yt(e,t,r),nc(e,r))}function Nc(e){var t=e.memoizedState,r=0;null!==t&&(r=t.retryLane),Ac(e,r)}function Ic(e,t){var r=0;switch(e.tag){case 13:var n=e.stateNode,i=e.memoizedState;null!==i&&(r=i.retryLane);break;case 19:n=e.stateNode;break;default:throw Error(o(314))}null!==n&&n.delete(t),Ac(e,r)}function Tc(e,t){return Xe(e,t)}function Oc(e,t,r,n){this.tag=e,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function kc(e,t,r,n){return new Oc(e,t,r,n)}function Rc(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Mc(e,t){var r=e.alternate;return null===r?((r=kc(e.tag,t,e.key,e.mode)).elementType=e.elementType,r.type=e.type,r.stateNode=e.stateNode,r.alternate=e,e.alternate=r):(r.pendingProps=t,r.type=e.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=14680064&e.flags,r.childLanes=e.childLanes,r.lanes=e.lanes,r.child=e.child,r.memoizedProps=e.memoizedProps,r.memoizedState=e.memoizedState,r.updateQueue=e.updateQueue,t=e.dependencies,r.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},r.sibling=e.sibling,r.index=e.index,r.ref=e.ref,r}function jc(e,t,r,n,i,s){var a=2;if(n=e,"function"===typeof e)Rc(e)&&(a=1);else if("string"===typeof e)a=5;else e:switch(e){case E:return Dc(r.children,i,s,t);case C:a=8,i|=8;break;case S:return(e=kc(12,r,t,2|i)).elementType=S,e.lanes=s,e;case T:return(e=kc(13,r,t,i)).elementType=T,e.lanes=s,e;case O:return(e=kc(19,r,t,i)).elementType=O,e.lanes=s,e;case M:return Pc(r,i,s,t);default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case A:a=10;break e;case N:a=9;break e;case I:a=11;break e;case k:a=14;break e;case R:a=16,n=null;break e}throw Error(o(130,null==e?e:typeof e,""))}return(t=kc(a,r,t,i)).elementType=e,t.type=n,t.lanes=s,t}function Dc(e,t,r,n){return(e=kc(7,e,n,t)).lanes=r,e}function Pc(e,t,r,n){return(e=kc(22,e,n,t)).elementType=M,e.lanes=r,e.stateNode={isHidden:!1},e}function Lc(e,t,r){return(e=kc(6,e,null,t)).lanes=r,e}function Bc(e,t,r){return(t=kc(4,null!==e.children?e.children:[],e.key,t)).lanes=r,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Fc(e,t,r,n,i){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=gt(0),this.expirationTimes=gt(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=gt(0),this.identifierPrefix=n,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function Uc(e,t,r,n,i,o,s,a,l){return e=new Fc(e,t,r,a,l),1===t?(t=1,!0===o&&(t|=8)):t=0,o=kc(3,null,null,t),e.current=o,o.stateNode=e,o.memoizedState={element:n,isDehydrated:r,cache:null,transitions:null,pendingSuspenseBoundaries:null},Lo(o),e}function zc(e){if(!e)return Ni;e:{if(He(e=e._reactInternals)!==e||1!==e.tag)throw Error(o(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Ri(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(null!==t);throw Error(o(171))}if(1===e.tag){var r=e.type;if(Ri(r))return Di(e,r,t)}return t}function Hc(e,t,r,n,i,o,s,a,l){return(e=Uc(r,n,!0,e,0,o,0,a,l)).context=zc(null),r=e.current,(o=Fo(n=ec(),i=tc(r))).callback=void 0!==t&&null!==t?t:null,Uo(r,o,i),e.current.lanes=i,yt(e,i,n),nc(e,n),e}function Vc(e,t,r,n){var i=t.current,o=ec(),s=tc(i);return r=zc(r),null===t.context?t.context=r:t.pendingContext=r,(t=Fo(o,s)).payload={element:e},null!==(n=void 0===n?null:n)&&(t.callback=n),null!==(e=Uo(i,t,s))&&(rc(e,i,s,o),zo(e,i,s)),s}function Wc(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function Gc(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var r=e.retryLane;e.retryLane=0!==r&&r<t?r:t}}function $c(e,t){Gc(e,t),(e=e.alternate)&&Gc(e,t)}El=function(e,t,r){if(null!==e)if(e.memoizedProps!==t.pendingProps||Ti.current)ba=!0;else{if(0===(e.lanes&r)&&0===(128&t.flags))return ba=!1,function(e,t,r){switch(t.tag){case 3:Ta(t),po();break;case 5:Ko(t);break;case 1:Ri(t.type)&&Pi(t);break;case 4:Qo(t,t.stateNode.containerInfo);break;case 10:var n=t.type._context,i=t.memoizedProps.value;Ai(Eo,n._currentValue),n._currentValue=i;break;case 13:if(null!==(n=t.memoizedState))return null!==n.dehydrated?(Ai(es,1&es.current),t.flags|=128,null):0!==(r&t.child.childLanes)?La(e,t,r):(Ai(es,1&es.current),null!==(e=Wa(e,t,r))?e.sibling:null);Ai(es,1&es.current);break;case 19:if(n=0!==(r&t.childLanes),0!==(128&e.flags)){if(n)return Ha(e,t,r);t.flags|=128}if(null!==(i=t.memoizedState)&&(i.rendering=null,i.tail=null,i.lastEffect=null),Ai(es,es.current),n)break;return null;case 22:case 23:return t.lanes=0,Ca(e,t,r)}return Wa(e,t,r)}(e,t,r);ba=0!==(131072&e.flags)}else ba=!1,io&&0!==(1048576&t.flags)&&Ji(t,$i,t.index);switch(t.lanes=0,t.tag){case 2:var n=t.type;Va(e,t),e=t.pendingProps;var i=ki(t,Ii.current);Oo(t,r),i=gs(null,t,n,e,i,r);var s=ys();return t.flags|=1,"object"===typeof i&&null!==i&&"function"===typeof i.render&&void 0===i.$$typeof?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Ri(n)?(s=!0,Pi(t)):s=!1,t.memoizedState=null!==i.state&&void 0!==i.state?i.state:null,Lo(t),i.updater=ia,t.stateNode=i,i._reactInternals=t,la(t,n,e,r),t=Ia(null,t,n,!0,s,r)):(t.tag=0,io&&s&&eo(t),va(null,t,i,r),t=t.child),t;case 16:n=t.elementType;e:{switch(Va(e,t),e=t.pendingProps,n=(i=n._init)(n._payload),t.type=n,i=t.tag=function(e){if("function"===typeof e)return Rc(e)?1:0;if(void 0!==e&&null!==e){if((e=e.$$typeof)===I)return 11;if(e===k)return 14}return 2}(n),e=ra(n,e),i){case 0:t=Aa(null,t,n,e,r);break e;case 1:t=Na(null,t,n,e,r);break e;case 11:t=_a(null,t,n,e,r);break e;case 14:t=xa(null,t,n,ra(n.type,e),r);break e}throw Error(o(306,n,""))}return t;case 0:return n=t.type,i=t.pendingProps,Aa(e,t,n,i=t.elementType===n?i:ra(n,i),r);case 1:return n=t.type,i=t.pendingProps,Na(e,t,n,i=t.elementType===n?i:ra(n,i),r);case 3:e:{if(Ta(t),null===e)throw Error(o(387));n=t.pendingProps,i=(s=t.memoizedState).element,Bo(e,t),Vo(t,n,null,r);var a=t.memoizedState;if(n=a.element,s.isDehydrated){if(s={element:n,isDehydrated:!1,cache:a.cache,pendingSuspenseBoundaries:a.pendingSuspenseBoundaries,transitions:a.transitions},t.updateQueue.baseState=s,t.memoizedState=s,256&t.flags){t=Oa(e,t,n,r,i=ca(Error(o(423)),t));break e}if(n!==i){t=Oa(e,t,n,r,i=ca(Error(o(424)),t));break e}for(no=ci(t.stateNode.containerInfo.firstChild),ro=t,io=!0,oo=null,r=xo(t,null,n,r),t.child=r;r;)r.flags=-3&r.flags|4096,r=r.sibling}else{if(po(),n===i){t=Wa(e,t,r);break e}va(e,t,n,r)}t=t.child}return t;case 5:return Ko(t),null===e&&co(t),n=t.type,i=t.pendingProps,s=null!==e?e.memoizedProps:null,a=i.children,ri(n,i)?a=null:null!==s&&ri(n,s)&&(t.flags|=32),Sa(e,t),va(e,t,a,r),t.child;case 6:return null===e&&co(t),null;case 13:return La(e,t,r);case 4:return Qo(t,t.stateNode.containerInfo),n=t.pendingProps,null===e?t.child=_o(t,null,n,r):va(e,t,n,r),t.child;case 11:return n=t.type,i=t.pendingProps,_a(e,t,n,i=t.elementType===n?i:ra(n,i),r);case 7:return va(e,t,t.pendingProps,r),t.child;case 8:case 12:return va(e,t,t.pendingProps.children,r),t.child;case 10:e:{if(n=t.type._context,i=t.pendingProps,s=t.memoizedProps,a=i.value,Ai(Eo,n._currentValue),n._currentValue=a,null!==s)if(an(s.value,a)){if(s.children===i.children&&!Ti.current){t=Wa(e,t,r);break e}}else for(null!==(s=t.child)&&(s.return=t);null!==s;){var l=s.dependencies;if(null!==l){a=s.child;for(var c=l.firstContext;null!==c;){if(c.context===n){if(1===s.tag){(c=Fo(-1,r&-r)).tag=2;var u=s.updateQueue;if(null!==u){var d=(u=u.shared).pending;null===d?c.next=c:(c.next=d.next,d.next=c),u.pending=c}}s.lanes|=r,null!==(c=s.alternate)&&(c.lanes|=r),To(s.return,r,t),l.lanes|=r;break}c=c.next}}else if(10===s.tag)a=s.type===t.type?null:s.child;else if(18===s.tag){if(null===(a=s.return))throw Error(o(341));a.lanes|=r,null!==(l=a.alternate)&&(l.lanes|=r),To(a,r,t),a=s.sibling}else a=s.child;if(null!==a)a.return=s;else for(a=s;null!==a;){if(a===t){a=null;break}if(null!==(s=a.sibling)){s.return=a.return,a=s;break}a=a.return}s=a}va(e,t,i.children,r),t=t.child}return t;case 9:return i=t.type,n=t.pendingProps.children,Oo(t,r),n=n(i=ko(i)),t.flags|=1,va(e,t,n,r),t.child;case 14:return i=ra(n=t.type,t.pendingProps),xa(e,t,n,i=ra(n.type,i),r);case 15:return Ea(e,t,t.type,t.pendingProps,r);case 17:return n=t.type,i=t.pendingProps,i=t.elementType===n?i:ra(n,i),Va(e,t),t.tag=1,Ri(n)?(e=!0,Pi(t)):e=!1,Oo(t,r),sa(t,n,i),la(t,n,i,r),Ia(null,t,n,!0,e,r);case 19:return Ha(e,t,r);case 22:return Ca(e,t,r)}throw Error(o(156,t.tag))};var Xc="function"===typeof reportError?reportError:function(e){console.error(e)};function Yc(e){this._internalRoot=e}function qc(e){this._internalRoot=e}function Qc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function Zc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function Kc(){}function Jc(e,t,r,n,i){var o=r._reactRootContainer;if(o){var s=o;if("function"===typeof i){var a=i;i=function(){var e=Wc(s);a.call(e)}}Vc(t,s,e,i)}else s=function(e,t,r,n,i){if(i){if("function"===typeof n){var o=n;n=function(){var e=Wc(s);o.call(e)}}var s=Hc(t,n,e,0,null,!1,0,"",Kc);return e._reactRootContainer=s,e[pi]=s.current,Hn(8===e.nodeType?e.parentNode:e),uc(),s}for(;i=e.lastChild;)e.removeChild(i);if("function"===typeof n){var a=n;n=function(){var e=Wc(l);a.call(e)}}var l=Uc(e,0,!1,null,0,!1,0,"",Kc);return e._reactRootContainer=l,e[pi]=l.current,Hn(8===e.nodeType?e.parentNode:e),uc((function(){Vc(t,l,r,n)})),l}(r,t,e,i,n);return Wc(s)}qc.prototype.render=Yc.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(o(409));Vc(e,t,null,null)},qc.prototype.unmount=Yc.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;uc((function(){Vc(null,e,null,null)})),t[pi]=null}},qc.prototype.unstable_scheduleHydration=function(e){if(e){var t=Ct();e={blockedOn:null,target:e,priority:t};for(var r=0;r<Mt.length&&0!==t&&t<Mt[r].priority;r++);Mt.splice(r,0,e),0===r&&Lt(e)}},_t=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var r=dt(t.pendingLanes);0!==r&&(wt(t,1|r),nc(t,Ze()),0===(6&Il)&&(Hl=Ze()+500,Hi()))}break;case 13:uc((function(){var t=Do(e,1);if(null!==t){var r=ec();rc(t,e,1,r)}})),$c(e,1)}},xt=function(e){if(13===e.tag){var t=Do(e,134217728);if(null!==t)rc(t,e,134217728,ec());$c(e,134217728)}},Et=function(e){if(13===e.tag){var t=tc(e),r=Do(e,t);if(null!==r)rc(r,e,t,ec());$c(e,t)}},Ct=function(){return bt},St=function(e,t){var r=bt;try{return bt=e,t()}finally{bt=r}},xe=function(e,t,r){switch(t){case"input":if(K(e,r),t=r.name,"radio"===r.type&&null!=t){for(r=e;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<r.length;t++){var n=r[t];if(n!==e&&n.form===e.form){var i=_i(n);if(!i)throw Error(o(90));X(n),K(n,i)}}}break;case"textarea":oe(e,r);break;case"select":null!=(t=r.value)&&re(e,!!r.multiple,t,!1)}},Ie=cc,Te=uc;var eu={usingClientEntryPoint:!1,Events:[bi,vi,_i,Ae,Ne,cc]},tu={findFiberByHostInstance:wi,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},ru={bundleType:tu.bundleType,version:tu.version,rendererPackageName:tu.rendererPackageName,rendererConfig:tu.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:v.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=Ge(e))?null:e.stateNode},findFiberByHostInstance:tu.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var nu=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!nu.isDisabled&&nu.supportsFiber)try{it=nu.inject(ru),ot=nu}catch(ue){}}t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=eu,t.createPortal=function(e,t){var r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!Qc(t))throw Error(o(200));return function(e,t,r){var n=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:x,key:null==n?null:""+n,children:e,containerInfo:t,implementation:r}}(e,t,null,r)},t.createRoot=function(e,t){if(!Qc(e))throw Error(o(299));var r=!1,n="",i=Xc;return null!==t&&void 0!==t&&(!0===t.unstable_strictMode&&(r=!0),void 0!==t.identifierPrefix&&(n=t.identifierPrefix),void 0!==t.onRecoverableError&&(i=t.onRecoverableError)),t=Uc(e,1,!1,null,0,r,0,n,i),e[pi]=t.current,Hn(8===e.nodeType?e.parentNode:e),new Yc(t)},t.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(o(188));throw e=Object.keys(e).join(","),Error(o(268,e))}return e=null===(e=Ge(t))?null:e.stateNode},t.flushSync=function(e){return uc(e)},t.hydrate=function(e,t,r){if(!Zc(t))throw Error(o(200));return Jc(null,e,t,!0,r)},t.hydrateRoot=function(e,t,r){if(!Qc(e))throw Error(o(405));var n=null!=r&&r.hydratedSources||null,i=!1,s="",a=Xc;if(null!==r&&void 0!==r&&(!0===r.unstable_strictMode&&(i=!0),void 0!==r.identifierPrefix&&(s=r.identifierPrefix),void 0!==r.onRecoverableError&&(a=r.onRecoverableError)),t=Hc(t,null,e,1,null!=r?r:null,i,0,s,a),e[pi]=t.current,Hn(e),n)for(e=0;e<n.length;e++)i=(i=(r=n[e])._getVersion)(r._source),null==t.mutableSourceEagerHydrationData?t.mutableSourceEagerHydrationData=[r,i]:t.mutableSourceEagerHydrationData.push(r,i);return new qc(t)},t.render=function(e,t,r){if(!Zc(t))throw Error(o(200));return Jc(null,e,t,!1,r)},t.unmountComponentAtNode=function(e){if(!Zc(e))throw Error(o(40));return!!e._reactRootContainer&&(uc((function(){Jc(null,null,e,!1,(function(){e._reactRootContainer=null,e[pi]=null}))})),!0)},t.unstable_batchedUpdates=cc,t.unstable_renderSubtreeIntoContainer=function(e,t,r,n){if(!Zc(r))throw Error(o(200));if(null==e||void 0===e._reactInternals)throw Error(o(38));return Jc(e,t,r,!1,n)},t.version="18.3.1-next-f1338f8080-20240426"},8488:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getTotalWidthOfEncodings=t.calculateEncodingAttributes=t.getBarcodePadding=t.getEncodingHeight=t.getMaximumHeightOfEncodings=void 0;var n,i=r(7084),o=(n=i)&&n.__esModule?n:{default:n};function s(e,t){return t.height+(t.displayValue&&e.text.length>0?t.fontSize+t.textMargin:0)+t.marginTop+t.marginBottom}function a(e,t,r){if(r.displayValue&&t<e){if("center"==r.textAlign)return Math.floor((e-t)/2);if("left"==r.textAlign)return 0;if("right"==r.textAlign)return Math.floor(e-t)}return 0}function l(e,t,r){var n;if(r)n=r;else{if("undefined"===typeof document)return 0;n=document.createElement("canvas").getContext("2d")}n.font=t.fontOptions+" "+t.fontSize+"px "+t.font;var i=n.measureText(e);return i?i.width:0}t.getMaximumHeightOfEncodings=function(e){for(var t=0,r=0;r<e.length;r++)e[r].height>t&&(t=e[r].height);return t},t.getEncodingHeight=s,t.getBarcodePadding=a,t.calculateEncodingAttributes=function(e,t,r){for(var n=0;n<e.length;n++){var i,c=e[n],u=(0,o.default)(t,c.options);i=u.displayValue?l(c.text,u,r):0;var d=c.data.length*u.width;c.width=Math.ceil(Math.max(i,d)),c.height=s(c,u),c.barcodePadding=a(i,d,u)}},t.getTotalWidthOfEncodings=function(e){for(var t=0,r=0;r<e.length;r++)t+=e[r].width;return t}},8582:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}();var n=function(){function e(t,r,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.object=t,this.encodings=r,this.options=n}return r(e,[{key:"render",value:function(){this.object.encodings=this.encodings}}]),e}();t.default=n},8747:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),i=a(r(652)),o=a(r(1810)),s=r(9474);function a(e){return e&&e.__esModule?e:{default:e}}function l(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}var c=["XX00000XXX","XX10000XXX","XX20000XXX","XXX00000XX","XXXX00000X","XXXXX00005","XXXXX00006","XXXXX00007","XXXXX00008","XXXXX00009"],u=[["EEEOOO","OOOEEE"],["EEOEOO","OOEOEE"],["EEOOEO","OOEEOE"],["EEOOOE","OOEEEO"],["EOEEOO","OEOOEE"],["EOOEEO","OEEOOE"],["EOOOEE","OEEEOO"],["EOEOEO","OEOEOE"],["EOEOOE","OEOEEO"],["EOOEOE","OEEOEO"]],d=function(e){function t(e,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=l(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,r));if(n.isValid=!1,-1!==e.search(/^[0-9]{6}$/))n.middleDigits=e,n.upcA=h(e,"0"),n.text=r.text||""+n.upcA[0]+e+n.upcA[n.upcA.length-1],n.isValid=!0;else{if(-1===e.search(/^[01][0-9]{7}$/))return l(n);if(n.middleDigits=e.substring(1,e.length-1),n.upcA=h(n.middleDigits,e[0]),n.upcA[n.upcA.length-1]!==e[e.length-1])return l(n);n.isValid=!0}return n.displayValue=r.displayValue,r.fontSize>10*r.width?n.fontSize=10*r.width:n.fontSize=r.fontSize,n.guardHeight=r.height+n.fontSize/2+r.textMargin,n}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),n(t,[{key:"valid",value:function(){return this.isValid}},{key:"encode",value:function(){return this.options.flat?this.flatEncoding():this.guardedEncoding()}},{key:"flatEncoding",value:function(){var e="";return e+="101",e+=this.encodeMiddleDigits(),{data:e+="010101",text:this.text}}},{key:"guardedEncoding",value:function(){var e=[];return this.displayValue&&e.push({data:"00000000",text:this.text[0],options:{textAlign:"left",fontSize:this.fontSize}}),e.push({data:"101",options:{height:this.guardHeight}}),e.push({data:this.encodeMiddleDigits(),text:this.text.substring(1,7),options:{fontSize:this.fontSize}}),e.push({data:"010101",options:{height:this.guardHeight}}),this.displayValue&&e.push({data:"00000000",text:this.text[7],options:{textAlign:"right",fontSize:this.fontSize}}),e}},{key:"encodeMiddleDigits",value:function(){var e=this.upcA[0],t=this.upcA[this.upcA.length-1],r=u[parseInt(t)][parseInt(e)];return(0,i.default)(this.middleDigits,r)}}]),t}(o.default);function h(e,t){for(var r=parseInt(e[e.length-1]),n=c[r],i="",o=0,a=0;a<n.length;a++){var l=n[a];i+="X"===l?e[o++]:l}return""+(i=""+t+i)+(0,s.checksum)(i)}t.default=d},8877:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.START_BIN="1010",t.END_BIN="11101",t.BINARIES=["00110","10001","01001","11000","00101","10100","01100","00011","10010","01010"]},9172:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n,i=r(3785),o=(n=i)&&n.__esModule?n:{default:n},s=r(2450);var a=function(e){function t(e,r){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e+(0,s.mod10)(e),r))}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t}(o.default);t.default=a},9452:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),i=r(2677),o=s(r(652));function s(e){return e&&e.__esModule?e:{default:e}}var a=function(e){function t(e,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,r));return n.fontSize=!r.flat&&r.fontSize>10*r.width?10*r.width:r.fontSize,n.guardHeight=r.height+n.fontSize/2+r.textMargin,n}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),n(t,[{key:"encode",value:function(){return this.options.flat?this.encodeFlat():this.encodeGuarded()}},{key:"leftText",value:function(e,t){return this.text.substr(e,t)}},{key:"leftEncode",value:function(e,t){return(0,o.default)(e,t)}},{key:"rightText",value:function(e,t){return this.text.substr(e,t)}},{key:"rightEncode",value:function(e,t){return(0,o.default)(e,t)}},{key:"encodeGuarded",value:function(){var e={fontSize:this.fontSize},t={height:this.guardHeight};return[{data:i.SIDE_BIN,options:t},{data:this.leftEncode(),text:this.leftText(),options:e},{data:i.MIDDLE_BIN,options:t},{data:this.rightEncode(),text:this.rightText(),options:e},{data:i.SIDE_BIN,options:t}]}},{key:"encodeFlat",value:function(){return{data:[i.SIDE_BIN,this.leftEncode(),i.MIDDLE_BIN,this.rightEncode(),i.SIDE_BIN].join(""),text:this.text}}}]),t}(s(r(1810)).default);t.default=a},9474:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}();t.checksum=a;var i=o(r(652));function o(e){return e&&e.__esModule?e:{default:e}}var s=function(e){function t(e,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),-1!==e.search(/^[0-9]{11}$/)&&(e+=a(e));var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,r));return n.displayValue=r.displayValue,r.fontSize>10*r.width?n.fontSize=10*r.width:n.fontSize=r.fontSize,n.guardHeight=r.height+n.fontSize/2+r.textMargin,n}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),n(t,[{key:"valid",value:function(){return-1!==this.data.search(/^[0-9]{12}$/)&&this.data[11]==a(this.data)}},{key:"encode",value:function(){return this.options.flat?this.flatEncoding():this.guardedEncoding()}},{key:"flatEncoding",value:function(){var e="";return e+="101",e+=(0,i.default)(this.data.substr(0,6),"LLLLLL"),e+="01010",e+=(0,i.default)(this.data.substr(6,6),"RRRRRR"),{data:e+="101",text:this.text}}},{key:"guardedEncoding",value:function(){var e=[];return this.displayValue&&e.push({data:"00000000",text:this.text.substr(0,1),options:{textAlign:"left",fontSize:this.fontSize}}),e.push({data:"101"+(0,i.default)(this.data[0],"L"),options:{height:this.guardHeight}}),e.push({data:(0,i.default)(this.data.substr(1,5),"LLLLL"),text:this.text.substr(1,5),options:{fontSize:this.fontSize}}),e.push({data:"01010",options:{height:this.guardHeight}}),e.push({data:(0,i.default)(this.data.substr(6,5),"RRRRR"),text:this.text.substr(6,5),options:{fontSize:this.fontSize}}),e.push({data:(0,i.default)(this.data[11],"R")+"101",options:{height:this.guardHeight}}),this.displayValue&&e.push({data:"00000000",text:this.text.substr(11,1),options:{textAlign:"right",fontSize:this.fontSize}}),e}}]),t}(o(r(1810)).default);function a(e){var t,r=0;for(t=1;t<11;t+=2)r+=parseInt(e[t]);for(t=0;t<11;t+=2)r+=3*parseInt(e[t]);return(10-r%10)%10}t.default=s},9680:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(6866),i=function(e){return e.match(new RegExp("^"+n.A_CHARS+"*"))[0].length},o=function(e){return e.match(new RegExp("^"+n.B_CHARS+"*"))[0].length},s=function(e){return e.match(new RegExp("^"+n.C_CHARS+"*"))[0]};function a(e,t){var r=t?n.A_CHARS:n.B_CHARS,i=e.match(new RegExp("^("+r+"+?)(([0-9]{2}){2,})([^0-9]|$)"));if(i)return i[1]+String.fromCharCode(204)+l(e.substring(i[1].length));var o=e.match(new RegExp("^"+r+"+"))[0];return o.length===e.length?e:o+String.fromCharCode(t?205:206)+a(e.substring(o.length),!t)}function l(e){var t=s(e),r=t.length;if(r===e.length)return e;e=e.substring(r);var n=i(e)>=o(e);return t+String.fromCharCode(n?206:205)+a(e,n)}t.default=function(e){var t=void 0;if(s(e).length>=2)t=n.C_START_CHAR+l(e);else{var r=i(e)>o(e);t=(r?n.A_START_CHAR:n.B_START_CHAR)+a(e,r)}return t.replace(/[\xCD\xCE]([^])[\xCD\xCE]/,(function(e,t){return String.fromCharCode(203)+t}))}},9711:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n,i=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),o=r(5629),s=(n=o)&&n.__esModule?n:{default:n},a=r(6866);var l=function(e){function t(e,r){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,a.B_START_CHAR+e,r))}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),i(t,[{key:"valid",value:function(){return new RegExp("^"+a.B_CHARS+"+$").test(this.data)}}]),t}(s.default);t.default=l},9950:(e,t,r)=>{"use strict";e.exports=r(2049)}},t={};function r(n){var i=t[n];if(void 0!==i)return i.exports;var o=t[n]={exports:{}};return e[n].call(o.exports,o,o.exports,r),o.exports}r.m=e,r.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return r.d(t,{a:t}),t},(()=>{var e,t=Object.getPrototypeOf?e=>Object.getPrototypeOf(e):e=>e.__proto__;r.t=function(n,i){if(1&i&&(n=this(n)),8&i)return n;if("object"===typeof n&&n){if(4&i&&n.__esModule)return n;if(16&i&&"function"===typeof n.then)return n}var o=Object.create(null);r.r(o);var s={};e=e||[null,t({}),t([]),t(t)];for(var a=2&i&&n;"object"==typeof a&&!~e.indexOf(a);a=t(a))Object.getOwnPropertyNames(a).forEach((e=>s[e]=()=>n[e]));return s.default=()=>n,r.d(o,s),o}})(),r.d=(e,t)=>{for(var n in t)r.o(t,n)&&!r.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},r.f={},r.e=e=>Promise.all(Object.keys(r.f).reduce(((t,n)=>(r.f[n](e,t),t)),[])),r.u=e=>"static/js/"+e+".7b6eba2b.chunk.js",r.miniCssF=e=>{},r.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}(),r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{var e={},t="printing-press-inventory:";r.l=(n,i,o,s)=>{if(e[n])e[n].push(i);else{var a,l;if(void 0!==o)for(var c=document.getElementsByTagName("script"),u=0;u<c.length;u++){var d=c[u];if(d.getAttribute("src")==n||d.getAttribute("data-webpack")==t+o){a=d;break}}a||(l=!0,(a=document.createElement("script")).charset="utf-8",a.timeout=120,r.nc&&a.setAttribute("nonce",r.nc),a.setAttribute("data-webpack",t+o),a.src=n),e[n]=[i];var h=(t,r)=>{a.onerror=a.onload=null,clearTimeout(f);var i=e[n];if(delete e[n],a.parentNode&&a.parentNode.removeChild(a),i&&i.forEach((e=>e(r))),t)return t(r)},f=setTimeout(h.bind(null,void 0,{type:"timeout",target:a}),12e4);a.onerror=h.bind(null,a.onerror),a.onload=h.bind(null,a.onload),l&&document.head.appendChild(a)}}})(),r.r=e=>{"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.p="/",(()=>{var e={792:0};r.f.j=(t,n)=>{var i=r.o(e,t)?e[t]:void 0;if(0!==i)if(i)n.push(i[2]);else{var o=new Promise(((r,n)=>i=e[t]=[r,n]));n.push(i[2]=o);var s=r.p+r.u(t),a=new Error;r.l(s,(n=>{if(r.o(e,t)&&(0!==(i=e[t])&&(e[t]=void 0),i)){var o=n&&("load"===n.type?"missing":n.type),s=n&&n.target&&n.target.src;a.message="Loading chunk "+t+" failed.\n("+o+": "+s+")",a.name="ChunkLoadError",a.type=o,a.request=s,i[1](a)}}),"chunk-"+t,t)}};var t=(t,n)=>{var i,o,s=n[0],a=n[1],l=n[2],c=0;if(s.some((t=>0!==e[t]))){for(i in a)r.o(a,i)&&(r.m[i]=a[i]);if(l)l(r)}for(t&&t(n);c<s.length;c++)o=s[c],r.o(e,o)&&e[o]&&e[o][0](),e[o]=0},n=self.webpackChunkprinting_press_inventory=self.webpackChunkprinting_press_inventory||[];n.forEach(t.bind(null,0)),n.push=t.bind(null,n.push.bind(n))})(),(()=>{"use strict";var e={};r.r(e),r.d(e,{hasBrowserEnv:()=>ua,hasStandardBrowserEnv:()=>ha,hasStandardBrowserWebWorkerEnv:()=>fa,navigator:()=>da,origin:()=>pa});var t=r(9950),n=r.t(t,2),i=r(1352);let o={data:""},s=e=>"object"==typeof window?((e?e.querySelector("#_goober"):window._goober)||Object.assign((e||document.head).appendChild(document.createElement("style")),{innerHTML:" ",id:"_goober"})).firstChild:e||o,a=/(?:([\u0080-\uFFFF\w-%@]+) *:? *([^{;]+?);|([^;}{]*?) *{)|(}\s*)/g,l=/\/\*[^]*?\*\/|  +/g,c=/\n+/g,u=(e,t)=>{let r="",n="",i="";for(let o in e){let s=e[o];"@"==o[0]?"i"==o[1]?r=o+" "+s+";":n+="f"==o[1]?u(s,o):o+"{"+u(s,"k"==o[1]?"":t)+"}":"object"==typeof s?n+=u(s,t?t.replace(/([^,])+/g,(e=>o.replace(/([^,]*:\S+\([^)]*\))|([^,])+/g,(t=>/&/.test(t)?t.replace(/&/g,e):e?e+" "+t:t)))):o):null!=s&&(o=/^--/.test(o)?o:o.replace(/[A-Z]/g,"-$&").toLowerCase(),i+=u.p?u.p(o,s):o+":"+s+";")}return r+(t&&i?t+"{"+i+"}":i)+n},d={},h=e=>{if("object"==typeof e){let t="";for(let r in e)t+=r+h(e[r]);return t}return e},f=(e,t,r,n,i)=>{let o=h(e),s=d[o]||(d[o]=(e=>{let t=0,r=11;for(;t<e.length;)r=101*r+e.charCodeAt(t++)>>>0;return"go"+r})(o));if(!d[s]){let t=o!==e?e:(e=>{let t,r,n=[{}];for(;t=a.exec(e.replace(l,""));)t[4]?n.shift():t[3]?(r=t[3].replace(c," ").trim(),n.unshift(n[0][r]=n[0][r]||{})):n[0][t[1]]=t[2].replace(c," ").trim();return n[0]})(e);d[s]=u(i?{["@keyframes "+s]:t}:t,r?"":"."+s)}let f=r&&d.g?d.g:null;return r&&(d.g=d[s]),((e,t,r,n)=>{n?t.data=t.data.replace(n,e):-1===t.data.indexOf(e)&&(t.data=r?e+t.data:t.data+e)})(d[s],t,n,f),s};function p(e){let t=this||{},r=e.call?e(t.p):e;return f(r.unshift?r.raw?((e,t,r)=>e.reduce(((e,n,i)=>{let o=t[i];if(o&&o.call){let e=o(r),t=e&&e.props&&e.props.className||/^go/.test(e)&&e;o=t?"."+t:e&&"object"==typeof e?e.props?"":u(e,""):!1===e?"":e}return e+n+(null==o?"":o)}),""))(r,[].slice.call(arguments,1),t.p):r.reduce(((e,r)=>Object.assign(e,r&&r.call?r(t.p):r)),{}):r,s(t.target),t.g,t.o,t.k)}p.bind({g:1});let m,g,y,w=p.bind({k:1});function b(e,t){let r=this||{};return function(){let n=arguments;function i(o,s){let a=Object.assign({},o),l=a.className||i.className;r.p=Object.assign({theme:g&&g()},a),r.o=/ *go\d+/.test(l),a.className=p.apply(r,n)+(l?" "+l:""),t&&(a.ref=s);let c=e;return e[0]&&(c=a.as||e,delete a.as),y&&c[0]&&y(a),m(c,a)}return t?t(i):i}}var v=(e,t)=>(e=>"function"==typeof e)(e)?e(t):e,_=(()=>{let e=0;return()=>(++e).toString()})(),x=(()=>{let e;return()=>{if(void 0===e&&typeof window<"u"){let t=matchMedia("(prefers-reduced-motion: reduce)");e=!t||t.matches}return e}})(),E=(e,t)=>{switch(t.type){case 0:return{...e,toasts:[t.toast,...e.toasts].slice(0,20)};case 1:return{...e,toasts:e.toasts.map((e=>e.id===t.toast.id?{...e,...t.toast}:e))};case 2:let{toast:r}=t;return E(e,{type:e.toasts.find((e=>e.id===r.id))?1:0,toast:r});case 3:let{toastId:n}=t;return{...e,toasts:e.toasts.map((e=>e.id===n||void 0===n?{...e,dismissed:!0,visible:!1}:e))};case 4:return void 0===t.toastId?{...e,toasts:[]}:{...e,toasts:e.toasts.filter((e=>e.id!==t.toastId))};case 5:return{...e,pausedAt:t.time};case 6:let i=t.time-(e.pausedAt||0);return{...e,pausedAt:void 0,toasts:e.toasts.map((e=>({...e,pauseDuration:e.pauseDuration+i})))}}},C=[],S={toasts:[],pausedAt:void 0},A=e=>{S=E(S,e),C.forEach((e=>{e(S)}))},N={blank:4e3,error:4e3,success:2e3,loading:1/0,custom:4e3},I=e=>(t,r)=>{let n=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"blank",r=arguments.length>2?arguments[2]:void 0;return{createdAt:Date.now(),visible:!0,dismissed:!1,type:t,ariaProps:{role:"status","aria-live":"polite"},message:e,pauseDuration:0,...r,id:(null==r?void 0:r.id)||_()}}(t,e,r);return A({type:2,toast:n}),n.id},T=(e,t)=>I("blank")(e,t);T.error=I("error"),T.success=I("success"),T.loading=I("loading"),T.custom=I("custom"),T.dismiss=e=>{A({type:3,toastId:e})},T.remove=e=>A({type:4,toastId:e}),T.promise=(e,t,r)=>{let n=T.loading(t.loading,{...r,...null==r?void 0:r.loading});return"function"==typeof e&&(e=e()),e.then((e=>{let i=t.success?v(t.success,e):void 0;return i?T.success(i,{id:n,...r,...null==r?void 0:r.success}):T.dismiss(n),e})).catch((e=>{let i=t.error?v(t.error,e):void 0;i?T.error(i,{id:n,...r,...null==r?void 0:r.error}):T.dismiss(n)})),e};var O=(e,t)=>{A({type:1,toast:{id:e,height:t}})},k=()=>{A({type:5,time:Date.now()})},R=new Map,M=e=>{let{toasts:r,pausedAt:n}=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},[r,n]=(0,t.useState)(S),i=(0,t.useRef)(S);(0,t.useEffect)((()=>(i.current!==S&&n(S),C.push(n),()=>{let e=C.indexOf(n);e>-1&&C.splice(e,1)})),[]);let o=r.toasts.map((t=>{var r,n,i;return{...e,...e[t.type],...t,removeDelay:t.removeDelay||(null==(r=e[t.type])?void 0:r.removeDelay)||(null==e?void 0:e.removeDelay),duration:t.duration||(null==(n=e[t.type])?void 0:n.duration)||(null==e?void 0:e.duration)||N[t.type],style:{...e.style,...null==(i=e[t.type])?void 0:i.style,...t.style}}}));return{...r,toasts:o}}(e);(0,t.useEffect)((()=>{if(n)return;let e=Date.now(),t=r.map((t=>{if(t.duration===1/0)return;let r=(t.duration||0)+t.pauseDuration-(e-t.createdAt);if(!(r<0))return setTimeout((()=>T.dismiss(t.id)),r);t.visible&&T.dismiss(t.id)}));return()=>{t.forEach((e=>e&&clearTimeout(e)))}}),[r,n]);let i=(0,t.useCallback)((()=>{n&&A({type:6,time:Date.now()})}),[n]),o=(0,t.useCallback)(((e,t)=>{let{reverseOrder:n=!1,gutter:i=8,defaultPosition:o}=t||{},s=r.filter((t=>(t.position||o)===(e.position||o)&&t.height)),a=s.findIndex((t=>t.id===e.id)),l=s.filter(((e,t)=>t<a&&e.visible)).length;return s.filter((e=>e.visible)).slice(...n?[l+1]:[0,l]).reduce(((e,t)=>e+(t.height||0)+i),0)}),[r]);return(0,t.useEffect)((()=>{r.forEach((e=>{if(e.dismissed)!function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1e3;if(R.has(e))return;let r=setTimeout((()=>{R.delete(e),A({type:4,toastId:e})}),t);R.set(e,r)}(e.id,e.removeDelay);else{let t=R.get(e.id);t&&(clearTimeout(t),R.delete(e.id))}}))}),[r]),{toasts:r,handlers:{updateHeight:O,startPause:k,endPause:i,calculateOffset:o}}},j=w`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
 transform: scale(1) rotate(45deg);
  opacity: 1;
}`,D=w`
from {
  transform: scale(0);
  opacity: 0;
}
to {
  transform: scale(1);
  opacity: 1;
}`,P=w`
from {
  transform: scale(0) rotate(90deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(90deg);
	opacity: 1;
}`,L=b("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${e=>e.primary||"#ff4b4b"};
  position: relative;
  transform: rotate(45deg);

  animation: ${j} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;

  &:after,
  &:before {
    content: '';
    animation: ${D} 0.15s ease-out forwards;
    animation-delay: 150ms;
    position: absolute;
    border-radius: 3px;
    opacity: 0;
    background: ${e=>e.secondary||"#fff"};
    bottom: 9px;
    left: 4px;
    height: 2px;
    width: 12px;
  }

  &:before {
    animation: ${P} 0.15s ease-out forwards;
    animation-delay: 180ms;
    transform: rotate(90deg);
  }
`,B=w`
  from {
    transform: rotate(0deg);
  }
  to {
    transform: rotate(360deg);
  }
`,F=b("div")`
  width: 12px;
  height: 12px;
  box-sizing: border-box;
  border: 2px solid;
  border-radius: 100%;
  border-color: ${e=>e.secondary||"#e0e0e0"};
  border-right-color: ${e=>e.primary||"#616161"};
  animation: ${B} 1s linear infinite;
`,U=w`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(45deg);
	opacity: 1;
}`,z=w`
0% {
	height: 0;
	width: 0;
	opacity: 0;
}
40% {
  height: 0;
	width: 6px;
	opacity: 1;
}
100% {
  opacity: 1;
  height: 10px;
}`,H=b("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${e=>e.primary||"#61d345"};
  position: relative;
  transform: rotate(45deg);

  animation: ${U} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;
  &:after {
    content: '';
    box-sizing: border-box;
    animation: ${z} 0.2s ease-out forwards;
    opacity: 0;
    animation-delay: 200ms;
    position: absolute;
    border-right: 2px solid;
    border-bottom: 2px solid;
    border-color: ${e=>e.secondary||"#fff"};
    bottom: 6px;
    left: 6px;
    height: 10px;
    width: 6px;
  }
`,V=b("div")`
  position: absolute;
`,W=b("div")`
  position: relative;
  display: flex;
  justify-content: center;
  align-items: center;
  min-width: 20px;
  min-height: 20px;
`,G=w`
from {
  transform: scale(0.6);
  opacity: 0.4;
}
to {
  transform: scale(1);
  opacity: 1;
}`,$=b("div")`
  position: relative;
  transform: scale(0.6);
  opacity: 0.4;
  min-width: 20px;
  animation: ${G} 0.3s 0.12s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
`,X=e=>{let{toast:r}=e,{icon:n,type:i,iconTheme:o}=r;return void 0!==n?"string"==typeof n?t.createElement($,null,n):n:"blank"===i?null:t.createElement(W,null,t.createElement(F,{...o}),"loading"!==i&&t.createElement(V,null,"error"===i?t.createElement(L,{...o}):t.createElement(H,{...o})))},Y=e=>`\n0% {transform: translate3d(0,${-200*e}%,0) scale(.6); opacity:.5;}\n100% {transform: translate3d(0,0,0) scale(1); opacity:1;}\n`,q=e=>`\n0% {transform: translate3d(0,0,-1px) scale(1); opacity:1;}\n100% {transform: translate3d(0,${-150*e}%,-1px) scale(.6); opacity:0;}\n`,Q=b("div")`
  display: flex;
  align-items: center;
  background: #fff;
  color: #363636;
  line-height: 1.3;
  will-change: transform;
  box-shadow: 0 3px 10px rgba(0, 0, 0, 0.1), 0 3px 3px rgba(0, 0, 0, 0.05);
  max-width: 350px;
  pointer-events: auto;
  padding: 8px 10px;
  border-radius: 8px;
`,Z=b("div")`
  display: flex;
  justify-content: center;
  margin: 4px 10px;
  color: inherit;
  flex: 1 1 auto;
  white-space: pre-line;
`,K=t.memo((e=>{let{toast:r,position:n,style:i,children:o}=e,s=r.height?((e,t)=>{let r=e.includes("top")?1:-1,[n,i]=x()?["0%{opacity:0;} 100%{opacity:1;}","0%{opacity:1;} 100%{opacity:0;}"]:[Y(r),q(r)];return{animation:t?`${w(n)} 0.35s cubic-bezier(.21,1.02,.73,1) forwards`:`${w(i)} 0.4s forwards cubic-bezier(.06,.71,.55,1)`}})(r.position||n||"top-center",r.visible):{opacity:0},a=t.createElement(X,{toast:r}),l=t.createElement(Z,{...r.ariaProps},v(r.message,r));return t.createElement(Q,{className:r.className,style:{...s,...i,...r.style}},"function"==typeof o?o({icon:a,message:l}):t.createElement(t.Fragment,null,a,l))}));!function(e,t,r,n){u.p=t,m=e,g=r,y=n}(t.createElement);var J,ee=e=>{let{id:r,className:n,style:i,onHeightUpdate:o,children:s}=e,a=t.useCallback((e=>{if(e){let t=()=>{let t=e.getBoundingClientRect().height;o(r,t)};t(),new MutationObserver(t).observe(e,{subtree:!0,childList:!0,characterData:!0})}}),[r,o]);return t.createElement("div",{ref:a,className:n,style:i},s)},te=p`
  z-index: 9999;
  > * {
    pointer-events: auto;
  }
`,re=e=>{let{reverseOrder:r,position:n="top-center",toastOptions:i,gutter:o,children:s,containerStyle:a,containerClassName:l}=e,{toasts:c,handlers:u}=M(i);return t.createElement("div",{id:"_rht_toaster",style:{position:"fixed",zIndex:9999,top:16,left:16,right:16,bottom:16,pointerEvents:"none",...a},className:l,onMouseEnter:u.startPause,onMouseLeave:u.endPause},c.map((e=>{let i=e.position||n,a=((e,t)=>{let r=e.includes("top"),n=r?{top:0}:{bottom:0},i=e.includes("center")?{justifyContent:"center"}:e.includes("right")?{justifyContent:"flex-end"}:{};return{left:0,right:0,display:"flex",position:"absolute",transition:x()?void 0:"all 230ms cubic-bezier(.21,1.02,.73,1)",transform:`translateY(${t*(r?1:-1)}px)`,...n,...i}})(i,u.calculateOffset(e,{reverseOrder:r,gutter:o,defaultPosition:n}));return t.createElement(ee,{id:e.id,key:e.id,onHeightUpdate:u.updateHeight,className:e.visible?te:"",style:a},"custom"===e.type?v(e.message,e):s?s(e):t.createElement(K,{toast:e,position:i}))})))},ne=T,ie=r(7119),oe=r.t(ie,2);function se(){return se=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},se.apply(this,arguments)}!function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"}(J||(J={}));const ae="popstate";function le(e,t){if(!1===e||null===e||"undefined"===typeof e)throw new Error(t)}function ce(e,t){if(!e){"undefined"!==typeof console&&console.warn(t);try{throw new Error(t)}catch(o){}}}function ue(e,t){return{usr:e.state,key:e.key,idx:t}}function de(e,t,r,n){return void 0===r&&(r=null),se({pathname:"string"===typeof e?e:e.pathname,search:"",hash:""},"string"===typeof t?fe(t):t,{state:r,key:t&&t.key||n||Math.random().toString(36).substr(2,8)})}function he(e){let{pathname:t="/",search:r="",hash:n=""}=e;return r&&"?"!==r&&(t+="?"===r.charAt(0)?r:"?"+r),n&&"#"!==n&&(t+="#"===n.charAt(0)?n:"#"+n),t}function fe(e){let t={};if(e){let r=e.indexOf("#");r>=0&&(t.hash=e.substr(r),e=e.substr(0,r));let n=e.indexOf("?");n>=0&&(t.search=e.substr(n),e=e.substr(0,n)),e&&(t.pathname=e)}return t}function pe(e,t,r,n){void 0===n&&(n={});let{window:i=document.defaultView,v5Compat:o=!1}=n,s=i.history,a=J.Pop,l=null,c=u();function u(){return(s.state||{idx:null}).idx}function d(){a=J.Pop;let e=u(),t=null==e?null:e-c;c=e,l&&l({action:a,location:f.location,delta:t})}function h(e){let t="null"!==i.location.origin?i.location.origin:i.location.href,r="string"===typeof e?e:he(e);return r=r.replace(/ $/,"%20"),le(t,"No window.location.(origin|href) available to create URL for href: "+r),new URL(r,t)}null==c&&(c=0,s.replaceState(se({},s.state,{idx:c}),""));let f={get action(){return a},get location(){return e(i,s)},listen(e){if(l)throw new Error("A history only accepts one active listener");return i.addEventListener(ae,d),l=e,()=>{i.removeEventListener(ae,d),l=null}},createHref:e=>t(i,e),createURL:h,encodeLocation(e){let t=h(e);return{pathname:t.pathname,search:t.search,hash:t.hash}},push:function(e,t){a=J.Push;let n=de(f.location,e,t);r&&r(n,e),c=u()+1;let d=ue(n,c),h=f.createHref(n);try{s.pushState(d,"",h)}catch(p){if(p instanceof DOMException&&"DataCloneError"===p.name)throw p;i.location.assign(h)}o&&l&&l({action:a,location:f.location,delta:1})},replace:function(e,t){a=J.Replace;let n=de(f.location,e,t);r&&r(n,e),c=u();let i=ue(n,c),d=f.createHref(n);s.replaceState(i,"",d),o&&l&&l({action:a,location:f.location,delta:0})},go:e=>s.go(e)};return f}var me;!function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"}(me||(me={}));new Set(["lazy","caseSensitive","path","id","index","children"]);function ge(e,t,r){return void 0===r&&(r="/"),ye(e,t,r,!1)}function ye(e,t,r,n){let i=ke(("string"===typeof t?fe(t):t).pathname||"/",r);if(null==i)return null;let o=we(e);!function(e){e.sort(((e,t)=>e.score!==t.score?t.score-e.score:function(e,t){let r=e.length===t.length&&e.slice(0,-1).every(((e,r)=>e===t[r]));return r?e[e.length-1]-t[t.length-1]:0}(e.routesMeta.map((e=>e.childrenIndex)),t.routesMeta.map((e=>e.childrenIndex)))))}(o);let s=null;for(let a=0;null==s&&a<o.length;++a){let e=Oe(i);s=Ie(o[a],e,n)}return s}function we(e,t,r,n){void 0===t&&(t=[]),void 0===r&&(r=[]),void 0===n&&(n="");let i=(e,i,o)=>{let s={relativePath:void 0===o?e.path||"":o,caseSensitive:!0===e.caseSensitive,childrenIndex:i,route:e};s.relativePath.startsWith("/")&&(le(s.relativePath.startsWith(n),'Absolute route path "'+s.relativePath+'" nested under path "'+n+'" is not valid. An absolute child route path must start with the combined path of all its parent routes.'),s.relativePath=s.relativePath.slice(n.length));let a=Pe([n,s.relativePath]),l=r.concat(s);e.children&&e.children.length>0&&(le(!0!==e.index,'Index routes must not have child routes. Please remove all child routes from route path "'+a+'".'),we(e.children,t,l,a)),(null!=e.path||e.index)&&t.push({path:a,score:Ne(a,e.index),routesMeta:l})};return e.forEach(((e,t)=>{var r;if(""!==e.path&&null!=(r=e.path)&&r.includes("?"))for(let n of be(e.path))i(e,t,n);else i(e,t)})),t}function be(e){let t=e.split("/");if(0===t.length)return[];let[r,...n]=t,i=r.endsWith("?"),o=r.replace(/\?$/,"");if(0===n.length)return i?[o,""]:[o];let s=be(n.join("/")),a=[];return a.push(...s.map((e=>""===e?o:[o,e].join("/")))),i&&a.push(...s),a.map((t=>e.startsWith("/")&&""===t?"/":t))}const ve=/^:[\w-]+$/,_e=3,xe=2,Ee=1,Ce=10,Se=-2,Ae=e=>"*"===e;function Ne(e,t){let r=e.split("/"),n=r.length;return r.some(Ae)&&(n+=Se),t&&(n+=xe),r.filter((e=>!Ae(e))).reduce(((e,t)=>e+(ve.test(t)?_e:""===t?Ee:Ce)),n)}function Ie(e,t,r){void 0===r&&(r=!1);let{routesMeta:n}=e,i={},o="/",s=[];for(let a=0;a<n.length;++a){let e=n[a],l=a===n.length-1,c="/"===o?t:t.slice(o.length)||"/",u=Te({path:e.relativePath,caseSensitive:e.caseSensitive,end:l},c),d=e.route;if(!u&&l&&r&&!n[n.length-1].route.index&&(u=Te({path:e.relativePath,caseSensitive:e.caseSensitive,end:!1},c)),!u)return null;Object.assign(i,u.params),s.push({params:i,pathname:Pe([o,u.pathname]),pathnameBase:Le(Pe([o,u.pathnameBase])),route:d}),"/"!==u.pathnameBase&&(o=Pe([o,u.pathnameBase]))}return s}function Te(e,t){"string"===typeof e&&(e={path:e,caseSensitive:!1,end:!0});let[r,n]=function(e,t,r){void 0===t&&(t=!1);void 0===r&&(r=!0);ce("*"===e||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were "'+e.replace(/\*$/,"/*")+'" because the `*` character must always follow a `/` in the pattern. To get rid of this warning, please change the route path to "'+e.replace(/\*$/,"/*")+'".');let n=[],i="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,((e,t,r)=>(n.push({paramName:t,isOptional:null!=r}),r?"/?([^\\/]+)?":"/([^\\/]+)")));e.endsWith("*")?(n.push({paramName:"*"}),i+="*"===e||"/*"===e?"(.*)$":"(?:\\/(.+)|\\/*)$"):r?i+="\\/*$":""!==e&&"/"!==e&&(i+="(?:(?=\\/|$))");let o=new RegExp(i,t?void 0:"i");return[o,n]}(e.path,e.caseSensitive,e.end),i=t.match(r);if(!i)return null;let o=i[0],s=o.replace(/(.)\/+$/,"$1"),a=i.slice(1);return{params:n.reduce(((e,t,r)=>{let{paramName:n,isOptional:i}=t;if("*"===n){let e=a[r]||"";s=o.slice(0,o.length-e.length).replace(/(.)\/+$/,"$1")}const l=a[r];return e[n]=i&&!l?void 0:(l||"").replace(/%2F/g,"/"),e}),{}),pathname:o,pathnameBase:s,pattern:e}}function Oe(e){try{return e.split("/").map((e=>decodeURIComponent(e).replace(/\//g,"%2F"))).join("/")}catch(t){return ce(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent encoding ('+t+")."),e}}function ke(e,t){if("/"===t)return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let r=t.endsWith("/")?t.length-1:t.length,n=e.charAt(r);return n&&"/"!==n?null:e.slice(r)||"/"}function Re(e,t,r,n){return"Cannot include a '"+e+"' character in a manually specified `to."+t+"` field ["+JSON.stringify(n)+"].  Please separate it out to the `to."+r+'` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.'}function Me(e){return e.filter(((e,t)=>0===t||e.route.path&&e.route.path.length>0))}function je(e,t){let r=Me(e);return t?r.map(((e,t)=>t===r.length-1?e.pathname:e.pathnameBase)):r.map((e=>e.pathnameBase))}function De(e,t,r,n){let i;void 0===n&&(n=!1),"string"===typeof e?i=fe(e):(i=se({},e),le(!i.pathname||!i.pathname.includes("?"),Re("?","pathname","search",i)),le(!i.pathname||!i.pathname.includes("#"),Re("#","pathname","hash",i)),le(!i.search||!i.search.includes("#"),Re("#","search","hash",i)));let o,s=""===e||""===i.pathname,a=s?"/":i.pathname;if(null==a)o=r;else{let e=t.length-1;if(!n&&a.startsWith("..")){let t=a.split("/");for(;".."===t[0];)t.shift(),e-=1;i.pathname=t.join("/")}o=e>=0?t[e]:"/"}let l=function(e,t){void 0===t&&(t="/");let{pathname:r,search:n="",hash:i=""}="string"===typeof e?fe(e):e,o=r?r.startsWith("/")?r:function(e,t){let r=t.replace(/\/+$/,"").split("/");return e.split("/").forEach((e=>{".."===e?r.length>1&&r.pop():"."!==e&&r.push(e)})),r.length>1?r.join("/"):"/"}(r,t):t;return{pathname:o,search:Be(n),hash:Fe(i)}}(i,o),c=a&&"/"!==a&&a.endsWith("/"),u=(s||"."===a)&&r.endsWith("/");return l.pathname.endsWith("/")||!c&&!u||(l.pathname+="/"),l}const Pe=e=>e.join("/").replace(/\/\/+/g,"/"),Le=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),Be=e=>e&&"?"!==e?e.startsWith("?")?e:"?"+e:"",Fe=e=>e&&"#"!==e?e.startsWith("#")?e:"#"+e:"";Error;function Ue(e){return null!=e&&"number"===typeof e.status&&"string"===typeof e.statusText&&"boolean"===typeof e.internal&&"data"in e}const ze=["post","put","patch","delete"],He=(new Set(ze),["get",...ze]);new Set(He),new Set([301,302,303,307,308]),new Set([307,308]);Symbol("deferred");function Ve(){return Ve=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Ve.apply(this,arguments)}const We=t.createContext(null);const Ge=t.createContext(null);const $e=t.createContext(null);const Xe=t.createContext(null);const Ye=t.createContext({outlet:null,matches:[],isDataRoute:!1});const qe=t.createContext(null);function Qe(){return null!=t.useContext(Xe)}function Ze(){return Qe()||le(!1),t.useContext(Xe).location}function Ke(e){t.useContext($e).static||t.useLayoutEffect(e)}function Je(){let{isDataRoute:e}=t.useContext(Ye);return e?function(){let{router:e}=dt(ct.UseNavigateStable),r=ft(ut.UseNavigateStable),n=t.useRef(!1);return Ke((()=>{n.current=!0})),t.useCallback((function(t,i){void 0===i&&(i={}),n.current&&("number"===typeof t?e.navigate(t):e.navigate(t,Ve({fromRouteId:r},i)))}),[e,r])}():function(){Qe()||le(!1);let e=t.useContext(We),{basename:r,future:n,navigator:i}=t.useContext($e),{matches:o}=t.useContext(Ye),{pathname:s}=Ze(),a=JSON.stringify(je(o,n.v7_relativeSplatPath)),l=t.useRef(!1);return Ke((()=>{l.current=!0})),t.useCallback((function(t,n){if(void 0===n&&(n={}),!l.current)return;if("number"===typeof t)return void i.go(t);let o=De(t,JSON.parse(a),s,"path"===n.relative);null==e&&"/"!==r&&(o.pathname="/"===o.pathname?r:Pe([r,o.pathname])),(n.replace?i.replace:i.push)(o,n.state,n)}),[r,i,a,s,e])}()}const et=t.createContext(null);function tt(){let{matches:e}=t.useContext(Ye),r=e[e.length-1];return r?r.params:{}}function rt(e,r){let{relative:n}=void 0===r?{}:r,{future:i}=t.useContext($e),{matches:o}=t.useContext(Ye),{pathname:s}=Ze(),a=JSON.stringify(je(o,i.v7_relativeSplatPath));return t.useMemo((()=>De(e,JSON.parse(a),s,"path"===n)),[e,a,s,n])}function nt(e,r,n,i){Qe()||le(!1);let{navigator:o,static:s}=t.useContext($e),{matches:a}=t.useContext(Ye),l=a[a.length-1],c=l?l.params:{},u=(l&&l.pathname,l?l.pathnameBase:"/");l&&l.route;let d,h=Ze();if(r){var f;let e="string"===typeof r?fe(r):r;"/"===u||(null==(f=e.pathname)?void 0:f.startsWith(u))||le(!1),d=e}else d=h;let p=d.pathname||"/",m=p;if("/"!==u){let e=u.replace(/^\//,"").split("/");m="/"+p.replace(/^\//,"").split("/").slice(e.length).join("/")}let g=!s&&n&&n.matches&&n.matches.length>0?n.matches:ge(e,{pathname:m});let y=lt(g&&g.map((e=>Object.assign({},e,{params:Object.assign({},c,e.params),pathname:Pe([u,o.encodeLocation?o.encodeLocation(e.pathname).pathname:e.pathname]),pathnameBase:"/"===e.pathnameBase?u:Pe([u,o.encodeLocation?o.encodeLocation(e.pathnameBase).pathname:e.pathnameBase])}))),a,n,i);return r&&y?t.createElement(Xe.Provider,{value:{location:Ve({pathname:"/",search:"",hash:"",state:null,key:"default"},d),navigationType:J.Pop}},y):y}function it(){let e=function(){var e;let r=t.useContext(qe),n=ht(ut.UseRouteError),i=ft(ut.UseRouteError);if(void 0!==r)return r;return null==(e=n.errors)?void 0:e[i]}(),r=Ue(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),n=e instanceof Error?e.stack:null,i="rgba(200,200,200, 0.5)",o={padding:"0.5rem",backgroundColor:i};return t.createElement(t.Fragment,null,t.createElement("h2",null,"Unexpected Application Error!"),t.createElement("h3",{style:{fontStyle:"italic"}},r),n?t.createElement("pre",{style:o},n):null,null)}const ot=t.createElement(it,null);class st extends t.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||"idle"!==t.revalidation&&"idle"===e.revalidation?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:void 0!==e.error?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){console.error("React Router caught the following error during render",e,t)}render(){return void 0!==this.state.error?t.createElement(Ye.Provider,{value:this.props.routeContext},t.createElement(qe.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function at(e){let{routeContext:r,match:n,children:i}=e,o=t.useContext(We);return o&&o.static&&o.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(o.staticContext._deepestRenderedBoundaryId=n.route.id),t.createElement(Ye.Provider,{value:r},i)}function lt(e,r,n,i){var o;if(void 0===r&&(r=[]),void 0===n&&(n=null),void 0===i&&(i=null),null==e){var s;if(!n)return null;if(n.errors)e=n.matches;else{if(!(null!=(s=i)&&s.v7_partialHydration&&0===r.length&&!n.initialized&&n.matches.length>0))return null;e=n.matches}}let a=e,l=null==(o=n)?void 0:o.errors;if(null!=l){let e=a.findIndex((e=>e.route.id&&void 0!==(null==l?void 0:l[e.route.id])));e>=0||le(!1),a=a.slice(0,Math.min(a.length,e+1))}let c=!1,u=-1;if(n&&i&&i.v7_partialHydration)for(let t=0;t<a.length;t++){let e=a[t];if((e.route.HydrateFallback||e.route.hydrateFallbackElement)&&(u=t),e.route.id){let{loaderData:t,errors:r}=n,i=e.route.loader&&void 0===t[e.route.id]&&(!r||void 0===r[e.route.id]);if(e.route.lazy||i){c=!0,a=u>=0?a.slice(0,u+1):[a[0]];break}}}return a.reduceRight(((e,i,o)=>{let s,d=!1,h=null,f=null;var p;n&&(s=l&&i.route.id?l[i.route.id]:void 0,h=i.route.errorElement||ot,c&&(u<0&&0===o?(p="route-fallback",!1||pt[p]||(pt[p]=!0),d=!0,f=null):u===o&&(d=!0,f=i.route.hydrateFallbackElement||null)));let m=r.concat(a.slice(0,o+1)),g=()=>{let r;return r=s?h:d?f:i.route.Component?t.createElement(i.route.Component,null):i.route.element?i.route.element:e,t.createElement(at,{match:i,routeContext:{outlet:e,matches:m,isDataRoute:null!=n},children:r})};return n&&(i.route.ErrorBoundary||i.route.errorElement||0===o)?t.createElement(st,{location:n.location,revalidation:n.revalidation,component:h,error:s,children:g(),routeContext:{outlet:null,matches:m,isDataRoute:!0}}):g()}),null)}var ct=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}(ct||{}),ut=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(ut||{});function dt(e){let r=t.useContext(We);return r||le(!1),r}function ht(e){let r=t.useContext(Ge);return r||le(!1),r}function ft(e){let r=function(){let e=t.useContext(Ye);return e||le(!1),e}(),n=r.matches[r.matches.length-1];return n.route.id||le(!1),n.route.id}const pt={};function mt(e,t){null==e||e.v7_startTransition,void 0===(null==e?void 0:e.v7_relativeSplatPath)&&(!t||t.v7_relativeSplatPath),t&&(t.v7_fetcherPersist,t.v7_normalizeFormMethod,t.v7_partialHydration,t.v7_skipActionErrorRevalidation)}n.startTransition;function gt(e){let{to:r,replace:n,state:i,relative:o}=e;Qe()||le(!1);let{future:s,static:a}=t.useContext($e),{matches:l}=t.useContext(Ye),{pathname:c}=Ze(),u=Je(),d=De(r,je(l,s.v7_relativeSplatPath),c,"path"===o),h=JSON.stringify(d);return t.useEffect((()=>u(JSON.parse(h),{replace:n,state:i,relative:o})),[u,h,o,n,i]),null}function yt(e){return function(e){let r=t.useContext(Ye).outlet;return r?t.createElement(et.Provider,{value:e},r):r}(e.context)}function wt(e){le(!1)}function bt(e){let{basename:r="/",children:n=null,location:i,navigationType:o=J.Pop,navigator:s,static:a=!1,future:l}=e;Qe()&&le(!1);let c=r.replace(/^\/*/,"/"),u=t.useMemo((()=>({basename:c,navigator:s,static:a,future:Ve({v7_relativeSplatPath:!1},l)})),[c,l,s,a]);"string"===typeof i&&(i=fe(i));let{pathname:d="/",search:h="",hash:f="",state:p=null,key:m="default"}=i,g=t.useMemo((()=>{let e=ke(d,c);return null==e?null:{location:{pathname:e,search:h,hash:f,state:p,key:m},navigationType:o}}),[c,d,h,f,p,m,o]);return null==g?null:t.createElement($e.Provider,{value:u},t.createElement(Xe.Provider,{children:n,value:g}))}function vt(e){let{children:t,location:r}=e;return nt(_t(t),r)}new Promise((()=>{}));t.Component;function _t(e,r){void 0===r&&(r=[]);let n=[];return t.Children.forEach(e,((e,i)=>{if(!t.isValidElement(e))return;let o=[...r,i];if(e.type===t.Fragment)return void n.push.apply(n,_t(e.props.children,o));e.type!==wt&&le(!1),e.props.index&&e.props.children&&le(!1);let s={id:e.props.id||o.join("-"),caseSensitive:e.props.caseSensitive,element:e.props.element,Component:e.props.Component,index:e.props.index,path:e.props.path,loader:e.props.loader,action:e.props.action,errorElement:e.props.errorElement,ErrorBoundary:e.props.ErrorBoundary,hasErrorBoundary:null!=e.props.ErrorBoundary||null!=e.props.errorElement,shouldRevalidate:e.props.shouldRevalidate,handle:e.props.handle,lazy:e.props.lazy};e.props.children&&(s.children=_t(e.props.children,o)),n.push(s)})),n}function xt(){return xt=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},xt.apply(this,arguments)}function Et(e,t){if(null==e)return{};var r,n,i={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);const Ct=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"];try{window.__reactRouterVersion="6"}catch(o){}new Map;const St=n.startTransition;oe.flushSync,n.useId;function At(e){let{basename:r,children:n,future:i,window:o}=e,s=t.useRef();var a;null==s.current&&(s.current=(void 0===(a={window:o,v5Compat:!0})&&(a={}),pe((function(e,t){let{pathname:r,search:n,hash:i}=e.location;return de("",{pathname:r,search:n,hash:i},t.state&&t.state.usr||null,t.state&&t.state.key||"default")}),(function(e,t){return"string"===typeof t?t:he(t)}),null,a)));let l=s.current,[c,u]=t.useState({action:l.action,location:l.location}),{v7_startTransition:d}=i||{},h=t.useCallback((e=>{d&&St?St((()=>u(e))):u(e)}),[u,d]);return t.useLayoutEffect((()=>l.listen(h)),[l,h]),t.useEffect((()=>mt(i)),[i]),t.createElement(bt,{basename:r,children:n,location:c.location,navigationType:c.action,navigator:l,future:i})}const Nt="undefined"!==typeof window&&"undefined"!==typeof window.document&&"undefined"!==typeof window.document.createElement,It=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Tt=t.forwardRef((function(e,r){let n,{onClick:i,relative:s,reloadDocument:a,replace:l,state:c,target:u,to:d,preventScrollReset:h,viewTransition:f}=e,p=Et(e,Ct),{basename:m}=t.useContext($e),g=!1;if("string"===typeof d&&It.test(d)&&(n=d,Nt))try{let e=new URL(window.location.href),t=d.startsWith("//")?new URL(e.protocol+d):new URL(d),r=ke(t.pathname,m);t.origin===e.origin&&null!=r?d=r+t.search+t.hash:g=!0}catch(o){}let y=function(e,r){let{relative:n}=void 0===r?{}:r;Qe()||le(!1);let{basename:i,navigator:o}=t.useContext($e),{hash:s,pathname:a,search:l}=rt(e,{relative:n}),c=a;return"/"!==i&&(c="/"===a?i:Pe([i,a])),o.createHref({pathname:c,search:l,hash:s})}(d,{relative:s}),w=function(e,r){let{target:n,replace:i,state:o,preventScrollReset:s,relative:a,viewTransition:l}=void 0===r?{}:r,c=Je(),u=Ze(),d=rt(e,{relative:a});return t.useCallback((t=>{if(function(e,t){return 0===e.button&&(!t||"_self"===t)&&!function(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}(e)}(t,n)){t.preventDefault();let r=void 0!==i?i:he(u)===he(d);c(e,{replace:r,state:o,preventScrollReset:s,relative:a,viewTransition:l})}}),[u,c,d,i,o,n,e,s,a,l])}(d,{replace:l,state:c,target:u,preventScrollReset:h,relative:s,viewTransition:f});return t.createElement("a",xt({},p,{href:n||y,onClick:g||a?i:function(e){i&&i(e),e.defaultPrevented||w(e)},ref:r,target:u}))}));var Ot,kt;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(Ot||(Ot={})),function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"}(kt||(kt={}));const Rt=[{id:"1",username:"admin",email:"admin@printpress.com",password:"admin123",role:"admin"},{id:"2",username:"user",email:"user@printpress.com",password:"user123",role:"user"}],Mt=async(e,t)=>{await new Promise((e=>setTimeout(e,500)));const r=Rt.find((r=>(r.email===e||r.username===e)&&r.password===t));if(r){return{token:(e=>{const t=JSON.stringify(e);return btoa(encodeURIComponent(t))})({id:r.id,username:r.username,email:r.email,role:r.role,exp:Date.now()+288e5}),user:{id:r.id,username:r.username,email:r.email,role:r.role}}}throw new Error("Invalid credentials")},jt=e=>{try{const t=(e=>{const t=decodeURIComponent(atob(e));return JSON.parse(t)})(e);if(t.exp&&t.exp>Date.now())return{id:t.id,username:t.username,email:t.email,role:t.role}}catch(t){console.error("Token validation error:",t)}return null};var Dt=r(4414);const Pt=(0,t.createContext)(void 0),Lt=()=>{const e=(0,t.useContext)(Pt);if(!e)throw new Error("useAuth must be used within an AuthProvider");return e},Bt=e=>{let{children:r}=e;const[n,i]=(0,t.useState)(null),[o,s]=(0,t.useState)(!0),[a,l]=(0,t.useState)(!1),c=(0,t.useCallback)((async()=>{console.log("Checking auth session...");try{const t=localStorage.getItem("userData");if(t)try{const e=JSON.parse(t);if(e&&e.id&&e.email&&e.role)return console.log("Setting user from stored userData"),i(e),s(!1),void l(!0)}catch(e){console.error("Error parsing userData:",e),localStorage.removeItem("userData")}const r=localStorage.getItem("authToken");if(r)try{const e=jt(r);if(e)return console.log("Token validated, setting user"),i(e),localStorage.setItem("userData",JSON.stringify(e)),s(!1),void l(!0);console.log("Token invalid or expired, removing"),localStorage.removeItem("authToken"),localStorage.removeItem("userData")}catch(e){console.error("Error validating token:",e),localStorage.removeItem("authToken"),localStorage.removeItem("userData")}i(null)}catch(e){console.error("Session check failed:",e),i(null)}finally{s(!1)}}),[]);(0,t.useEffect)((()=>{c()}),[c]);const u={user:n,isAuthenticated:a,isLoading:o,login:async(e,t,r)=>{try{const r=await Mt(e,t);console.log("\ud83d\udd0d Login response:",r),r.token?(localStorage.setItem("token",r.token),console.log("\u2705 Token stored in localStorage:",r.token),i(r.user),l(!0)):console.error("\u274c No token received from login response")}catch(n){console.error("\u274c Login error:",n),ne.error("Login failed. Please try again.")}},logout:async()=>{try{localStorage.removeItem("authToken"),localStorage.removeItem("userData"),i(null),l(!1),ne.success("Logged out successfully")}catch(e){console.error("Logout failed:",e),ne.error("Failed to log out")}}};return(0,Dt.jsx)(Pt.Provider,{value:u,children:r})};class Ft extends Error{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"FunctionsError",r=arguments.length>2?arguments[2]:void 0;super(e),this.name=t,this.context=r}}class Ut extends Ft{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class zt extends Ft{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class Ht extends Ft{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var Vt;!function(e){e.Any="any",e.ApNortheast1="ap-northeast-1",e.ApNortheast2="ap-northeast-2",e.ApSouth1="ap-south-1",e.ApSoutheast1="ap-southeast-1",e.ApSoutheast2="ap-southeast-2",e.CaCentral1="ca-central-1",e.EuCentral1="eu-central-1",e.EuWest1="eu-west-1",e.EuWest2="eu-west-2",e.EuWest3="eu-west-3",e.SaEast1="sa-east-1",e.UsEast1="us-east-1",e.UsWest1="us-west-1",e.UsWest2="us-west-2"}(Vt||(Vt={}));var Wt=function(e,t,r,n){return new(r||(r=Promise))((function(i,s){function a(e){try{c(n.next(e))}catch(o){s(o)}}function l(e){try{c(n.throw(e))}catch(o){s(o)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(a,l)}c((n=n.apply(e,t||[])).next())}))};class Gt{constructor(e){let{headers:t={},customFetch:n,region:i=Vt.Any}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.url=e,this.headers=t,this.region=i,this.fetch=(e=>{let t;return t=e||("undefined"===typeof fetch?function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return Promise.resolve().then(r.bind(r,4621)).then((e=>{let{default:r}=e;return r(...t)}))}:fetch),function(){return t(...arguments)}})(n)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};var r;return Wt(this,void 0,void 0,(function*(){try{const{headers:n,method:i,body:o}=t;let s,a={},{region:l}=t;l||(l=this.region),l&&"any"!==l&&(a["x-region"]=l),o&&(n&&!Object.prototype.hasOwnProperty.call(n,"Content-Type")||!n)&&("undefined"!==typeof Blob&&o instanceof Blob||o instanceof ArrayBuffer?(a["Content-Type"]="application/octet-stream",s=o):"string"===typeof o?(a["Content-Type"]="text/plain",s=o):"undefined"!==typeof FormData&&o instanceof FormData?s=o:(a["Content-Type"]="application/json",s=JSON.stringify(o)));const c=yield this.fetch(`${this.url}/${e}`,{method:i||"POST",headers:Object.assign(Object.assign(Object.assign({},a),this.headers),n),body:s}).catch((e=>{throw new Ut(e)})),u=c.headers.get("x-relay-error");if(u&&"true"===u)throw new zt(c);if(!c.ok)throw new Ht(c);let d,h=(null!==(r=c.headers.get("Content-Type"))&&void 0!==r?r:"text/plain").split(";")[0].trim();return d="application/json"===h?yield c.json():"application/octet-stream"===h?yield c.blob():"text/event-stream"===h?c:"multipart/form-data"===h?yield c.formData():yield c.text(),{data:d,error:null}}catch(n){return{data:null,error:n}}}))}}var $t=r(1053);const{PostgrestClient:Xt,PostgrestQueryBuilder:Yt,PostgrestFilterBuilder:qt,PostgrestTransformBuilder:Qt,PostgrestBuilder:Zt,PostgrestError:Kt}=$t,Jt={"X-Client-Info":"realtime-js/2.11.2"};var er,tr,rr,nr,ir,or;!function(e){e[e.connecting=0]="connecting",e[e.open=1]="open",e[e.closing=2]="closing",e[e.closed=3]="closed"}(er||(er={})),function(e){e.closed="closed",e.errored="errored",e.joined="joined",e.joining="joining",e.leaving="leaving"}(tr||(tr={})),function(e){e.close="phx_close",e.error="phx_error",e.join="phx_join",e.reply="phx_reply",e.leave="phx_leave",e.access_token="access_token"}(rr||(rr={})),function(e){e.websocket="websocket"}(nr||(nr={})),function(e){e.Connecting="connecting",e.Open="open",e.Closing="closing",e.Closed="closed"}(ir||(ir={}));class sr{constructor(){this.HEADER_LENGTH=1}decode(e,t){return e.constructor===ArrayBuffer?t(this._binaryDecode(e)):t("string"===typeof e?JSON.parse(e):{})}_binaryDecode(e){const t=new DataView(e),r=new TextDecoder;return this._decodeBroadcast(e,t,r)}_decodeBroadcast(e,t,r){const n=t.getUint8(1),i=t.getUint8(2);let o=this.HEADER_LENGTH+2;const s=r.decode(e.slice(o,o+n));o+=n;const a=r.decode(e.slice(o,o+i));o+=i;return{ref:null,topic:s,event:a,payload:JSON.parse(r.decode(e.slice(o,e.byteLength)))}}}class ar{constructor(e,t){this.callback=e,this.timerCalc=t,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=t}reset(){this.tries=0,clearTimeout(this.timer)}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout((()=>{this.tries=this.tries+1,this.callback()}),this.timerCalc(this.tries+1))}}!function(e){e.abstime="abstime",e.bool="bool",e.date="date",e.daterange="daterange",e.float4="float4",e.float8="float8",e.int2="int2",e.int4="int4",e.int4range="int4range",e.int8="int8",e.int8range="int8range",e.json="json",e.jsonb="jsonb",e.money="money",e.numeric="numeric",e.oid="oid",e.reltime="reltime",e.text="text",e.time="time",e.timestamp="timestamp",e.timestamptz="timestamptz",e.timetz="timetz",e.tsrange="tsrange",e.tstzrange="tstzrange"}(or||(or={}));const lr=function(e,t){var r;const n=null!==(r=(arguments.length>2&&void 0!==arguments[2]?arguments[2]:{}).skipTypes)&&void 0!==r?r:[];return Object.keys(t).reduce(((r,i)=>(r[i]=cr(i,e,t,n),r)),{})},cr=(e,t,r,n)=>{const i=t.find((t=>t.name===e)),o=null===i||void 0===i?void 0:i.type,s=r[e];return o&&!n.includes(o)?ur(o,s):dr(s)},ur=(e,t)=>{if("_"===e.charAt(0)){const r=e.slice(1,e.length);return mr(t,r)}switch(e){case or.bool:return hr(t);case or.float4:case or.float8:case or.int2:case or.int4:case or.int8:case or.numeric:case or.oid:return fr(t);case or.json:case or.jsonb:return pr(t);case or.timestamp:return gr(t);case or.abstime:case or.date:case or.daterange:case or.int4range:case or.int8range:case or.money:case or.reltime:case or.text:case or.time:case or.timestamptz:case or.timetz:case or.tsrange:case or.tstzrange:default:return dr(t)}},dr=e=>e,hr=e=>{switch(e){case"t":return!0;case"f":return!1;default:return e}},fr=e=>{if("string"===typeof e){const t=parseFloat(e);if(!Number.isNaN(t))return t}return e},pr=e=>{if("string"===typeof e)try{return JSON.parse(e)}catch(t){return console.log(`JSON parse error: ${t}`),e}return e},mr=(e,t)=>{if("string"!==typeof e)return e;const r=e.length-1,n=e[r];if("{"===e[0]&&"}"===n){let n;const i=e.slice(1,r);try{n=JSON.parse("["+i+"]")}catch(H){n=i?i.split(","):[]}return n.map((e=>ur(t,e)))}return e},gr=e=>"string"===typeof e?e.replace(" ","T"):e,yr=e=>{let t=e;return t=t.replace(/^ws/i,"http"),t=t.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),t.replace(/\/+$/,"")};class wr{constructor(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1e4;this.channel=e,this.event=t,this.payload=r,this.timeout=n,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,t){var r;return this._hasReceived(e)&&t(null===(r=this.receivedResp)||void 0===r?void 0:r.response),this.recHooks.push({status:e,callback:t}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);this.channel._on(this.refEvent,{},(e=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=e,this._matchReceive(e)})),this.timeoutTimer=setTimeout((()=>{this.trigger("timeout",{})}),this.timeout)}trigger(e,t){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:t})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive(e){let{status:t,response:r}=e;this.recHooks.filter((e=>e.status===t)).forEach((e=>e.callback(r)))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var br,vr,_r,xr;!function(e){e.SYNC="sync",e.JOIN="join",e.LEAVE="leave"}(br||(br={}));class Er{constructor(e,t){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const r=(null===t||void 0===t?void 0:t.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(r.state,{},(e=>{const{onJoin:t,onLeave:r,onSync:n}=this.caller;this.joinRef=this.channel._joinRef(),this.state=Er.syncState(this.state,e,t,r),this.pendingDiffs.forEach((e=>{this.state=Er.syncDiff(this.state,e,t,r)})),this.pendingDiffs=[],n()})),this.channel._on(r.diff,{},(e=>{const{onJoin:t,onLeave:r,onSync:n}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(e):(this.state=Er.syncDiff(this.state,e,t,r),n())})),this.onJoin(((e,t,r)=>{this.channel._trigger("presence",{event:"join",key:e,currentPresences:t,newPresences:r})})),this.onLeave(((e,t,r)=>{this.channel._trigger("presence",{event:"leave",key:e,currentPresences:t,leftPresences:r})})),this.onSync((()=>{this.channel._trigger("presence",{event:"sync"})}))}static syncState(e,t,r,n){const i=this.cloneDeep(e),o=this.transformState(t),s={},a={};return this.map(i,((e,t)=>{o[e]||(a[e]=t)})),this.map(o,((e,t)=>{const r=i[e];if(r){const n=t.map((e=>e.presence_ref)),i=r.map((e=>e.presence_ref)),o=t.filter((e=>i.indexOf(e.presence_ref)<0)),l=r.filter((e=>n.indexOf(e.presence_ref)<0));o.length>0&&(s[e]=o),l.length>0&&(a[e]=l)}else s[e]=t})),this.syncDiff(i,{joins:s,leaves:a},r,n)}static syncDiff(e,t,r,n){const{joins:i,leaves:o}={joins:this.transformState(t.joins),leaves:this.transformState(t.leaves)};return r||(r=()=>{}),n||(n=()=>{}),this.map(i,((t,n)=>{var i;const o=null!==(i=e[t])&&void 0!==i?i:[];if(e[t]=this.cloneDeep(n),o.length>0){const r=e[t].map((e=>e.presence_ref)),n=o.filter((e=>r.indexOf(e.presence_ref)<0));e[t].unshift(...n)}r(t,o,n)})),this.map(o,((t,r)=>{let i=e[t];if(!i)return;const o=r.map((e=>e.presence_ref));i=i.filter((e=>o.indexOf(e.presence_ref)<0)),e[t]=i,n(t,i,r),0===i.length&&delete e[t]})),e}static map(e,t){return Object.getOwnPropertyNames(e).map((r=>t(r,e[r])))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce(((t,r)=>{const n=e[r];return t[r]="metas"in n?n.metas.map((e=>(e.presence_ref=e.phx_ref,delete e.phx_ref,delete e.phx_ref_prev,e))):n,t}),{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}!function(e){e.ALL="*",e.INSERT="INSERT",e.UPDATE="UPDATE",e.DELETE="DELETE"}(vr||(vr={})),function(e){e.BROADCAST="broadcast",e.PRESENCE="presence",e.POSTGRES_CHANGES="postgres_changes",e.SYSTEM="system"}(_r||(_r={})),function(e){e.SUBSCRIBED="SUBSCRIBED",e.TIMED_OUT="TIMED_OUT",e.CLOSED="CLOSED",e.CHANNEL_ERROR="CHANNEL_ERROR"}(xr||(xr={}));class Cr{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{config:{}},r=arguments.length>2?arguments[2]:void 0;this.topic=e,this.params=t,this.socket=r,this.bindings={},this.state=tr.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:""},private:!1},t.config),this.timeout=this.socket.timeout,this.joinPush=new wr(this,rr.join,this.params,this.timeout),this.rejoinTimer=new ar((()=>this._rejoinUntilConnected()),this.socket.reconnectAfterMs),this.joinPush.receive("ok",(()=>{this.state=tr.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach((e=>e.send())),this.pushBuffer=[]})),this._onClose((()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=tr.closed,this.socket._remove(this)})),this._onError((e=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,e),this.state=tr.errored,this.rejoinTimer.scheduleTimeout())})),this.joinPush.receive("timeout",(()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=tr.errored,this.rejoinTimer.scheduleTimeout())})),this._on(rr.reply,{},((e,t)=>{this._trigger(this._replyEventName(t),e)})),this.presence=new Er(this),this.broadcastEndpointURL=yr(this.socket.endPoint)+"/api/broadcast",this.private=this.params.config.private||!1}subscribe(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.timeout;var r,n;if(this.socket.isConnected()||this.socket.connect(),this.joinedOnce)throw"tried to subscribe multiple times. 'subscribe' can only be called a single time per channel instance";{const{config:{broadcast:i,presence:o,private:s}}=this.params;this._onError((t=>null===e||void 0===e?void 0:e(xr.CHANNEL_ERROR,t))),this._onClose((()=>null===e||void 0===e?void 0:e(xr.CLOSED)));const a={},l={broadcast:i,presence:o,postgres_changes:null!==(n=null===(r=this.bindings.postgres_changes)||void 0===r?void 0:r.map((e=>e.filter)))&&void 0!==n?n:[],private:s};this.socket.accessTokenValue&&(a.access_token=this.socket.accessTokenValue),this.updateJoinPayload(Object.assign({config:l},a)),this.joinedOnce=!0,this._rejoin(t),this.joinPush.receive("ok",(async t=>{let{postgres_changes:r}=t;var n;if(this.socket.setAuth(),void 0!==r){const t=this.bindings.postgres_changes,i=null!==(n=null===t||void 0===t?void 0:t.length)&&void 0!==n?n:0,o=[];for(let n=0;n<i;n++){const i=t[n],{filter:{event:s,schema:a,table:l,filter:c}}=i,u=r&&r[n];if(!u||u.event!==s||u.schema!==a||u.table!==l||u.filter!==c)return this.unsubscribe(),void(null===e||void 0===e||e(xr.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes")));o.push(Object.assign(Object.assign({},i),{id:u.id}))}return this.bindings.postgres_changes=o,void(e&&e(xr.SUBSCRIBED))}null===e||void 0===e||e(xr.SUBSCRIBED)})).receive("error",(t=>{null===e||void 0===e||e(xr.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(t).join(", ")||"error")))})).receive("timeout",(()=>{null===e||void 0===e||e(xr.TIMED_OUT)}))}return this}presenceState(){return this.presence.state}async track(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return await this.send({type:"presence",event:"track",payload:e},t.timeout||this.timeout)}async untrack(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return await this.send({type:"presence",event:"untrack"},e)}on(e,t,r){return this._on(e,t,r)}async send(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};var r,n;if(this._canPush()||"broadcast"!==e.type)return new Promise((r=>{var n,i,o;const s=this._push(e.type,e,t.timeout||this.timeout);"broadcast"!==e.type||(null===(o=null===(i=null===(n=this.params)||void 0===n?void 0:n.config)||void 0===i?void 0:i.broadcast)||void 0===o?void 0:o.ack)||r("ok"),s.receive("ok",(()=>r("ok"))),s.receive("error",(()=>r("error"))),s.receive("timeout",(()=>r("timed out")))}));{const{event:o,payload:s}=e,a={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:o,payload:s,private:this.private}]})};try{const e=await this._fetchWithTimeout(this.broadcastEndpointURL,a,null!==(r=t.timeout)&&void 0!==r?r:this.timeout);return await(null===(n=e.body)||void 0===n?void 0:n.cancel()),e.ok?"ok":"error"}catch(i){return"AbortError"===i.name?"timed out":"error"}}}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.timeout;this.state=tr.leaving;const t=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(rr.close,"leave",this._joinRef())};return this.rejoinTimer.reset(),this.joinPush.destroy(),new Promise((r=>{const n=new wr(this,rr.leave,{},e);n.receive("ok",(()=>{t(),r("ok")})).receive("timeout",(()=>{t(),r("timed out")})).receive("error",(()=>{r("error")})),n.send(),this._canPush()||n.trigger("ok",{})}))}async _fetchWithTimeout(e,t,r){const n=new AbortController,i=setTimeout((()=>n.abort()),r),o=await this.socket.fetch(e,Object.assign(Object.assign({},t),{signal:n.signal}));return clearTimeout(i),o}_push(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.timeout;if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let n=new wr(this,e,t,r);return this._canPush()?n.send():(n.startTimeout(),this.pushBuffer.push(n)),n}_onMessage(e,t,r){return t}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,t,r){var n,i;const o=e.toLocaleLowerCase(),{close:s,error:a,leave:l,join:c}=rr;if(r&&[s,a,l,c].indexOf(o)>=0&&r!==this._joinRef())return;let u=this._onMessage(o,t,r);if(t&&!u)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(o)?null===(n=this.bindings.postgres_changes)||void 0===n||n.filter((e=>{var t,r,n;return"*"===(null===(t=e.filter)||void 0===t?void 0:t.event)||(null===(n=null===(r=e.filter)||void 0===r?void 0:r.event)||void 0===n?void 0:n.toLocaleLowerCase())===o})).map((e=>e.callback(u,r))):null===(i=this.bindings[o])||void 0===i||i.filter((e=>{var r,n,i,s,a,l;if(["broadcast","presence","postgres_changes"].includes(o)){if("id"in e){const o=e.id,s=null===(r=e.filter)||void 0===r?void 0:r.event;return o&&(null===(n=t.ids)||void 0===n?void 0:n.includes(o))&&("*"===s||(null===s||void 0===s?void 0:s.toLocaleLowerCase())===(null===(i=t.data)||void 0===i?void 0:i.type.toLocaleLowerCase()))}{const r=null===(a=null===(s=null===e||void 0===e?void 0:e.filter)||void 0===s?void 0:s.event)||void 0===a?void 0:a.toLocaleLowerCase();return"*"===r||r===(null===(l=null===t||void 0===t?void 0:t.event)||void 0===l?void 0:l.toLocaleLowerCase())}}return e.type.toLocaleLowerCase()===o})).map((e=>{if("object"===typeof u&&"ids"in u){const e=u.data,{schema:t,table:r,commit_timestamp:n,type:i,errors:o}=e,s={schema:t,table:r,commit_timestamp:n,eventType:i,new:{},old:{},errors:o};u=Object.assign(Object.assign({},s),this._getPayloadRecords(e))}e.callback(u,r)}))}_isClosed(){return this.state===tr.closed}_isJoined(){return this.state===tr.joined}_isJoining(){return this.state===tr.joining}_isLeaving(){return this.state===tr.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,t,r){const n=e.toLocaleLowerCase(),i={type:n,filter:t,callback:r};return this.bindings[n]?this.bindings[n].push(i):this.bindings[n]=[i],this}_off(e,t){const r=e.toLocaleLowerCase();return this.bindings[r]=this.bindings[r].filter((e=>{var n;return!((null===(n=e.type)||void 0===n?void 0:n.toLocaleLowerCase())===r&&Cr.isEqual(e.filter,t))})),this}static isEqual(e,t){if(Object.keys(e).length!==Object.keys(t).length)return!1;for(const r in e)if(e[r]!==t[r])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(rr.close,{},e)}_onError(e){this._on(rr.error,{},(t=>e(t)))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.timeout;this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=tr.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const t={new:{},old:{}};return"INSERT"!==e.type&&"UPDATE"!==e.type||(t.new=lr(e.columns,e.record)),"UPDATE"!==e.type&&"DELETE"!==e.type||(t.old=lr(e.columns,e.old_record)),t}}const Sr=()=>{},Ar="undefined"!==typeof WebSocket;class Nr{constructor(e,t){var n;this.accessTokenValue=null,this.apiKey=null,this.channels=[],this.endPoint="",this.httpEndpoint="",this.headers=Jt,this.params={},this.timeout=1e4,this.heartbeatIntervalMs=3e4,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.ref=0,this.logger=Sr,this.conn=null,this.sendBuffer=[],this.serializer=new sr,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._resolveFetch=e=>{let t;return t=e||("undefined"===typeof fetch?function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return Promise.resolve().then(r.bind(r,4621)).then((e=>{let{default:r}=e;return r(...t)}))}:fetch),function(){return t(...arguments)}},this.endPoint=`${e}/${nr.websocket}`,this.httpEndpoint=yr(e),(null===t||void 0===t?void 0:t.transport)?this.transport=t.transport:this.transport=null,(null===t||void 0===t?void 0:t.params)&&(this.params=t.params),(null===t||void 0===t?void 0:t.headers)&&(this.headers=Object.assign(Object.assign({},this.headers),t.headers)),(null===t||void 0===t?void 0:t.timeout)&&(this.timeout=t.timeout),(null===t||void 0===t?void 0:t.logger)&&(this.logger=t.logger),(null===t||void 0===t?void 0:t.heartbeatIntervalMs)&&(this.heartbeatIntervalMs=t.heartbeatIntervalMs);const i=null===(n=null===t||void 0===t?void 0:t.params)||void 0===n?void 0:n.apikey;if(i&&(this.accessTokenValue=i,this.apiKey=i),this.reconnectAfterMs=(null===t||void 0===t?void 0:t.reconnectAfterMs)?t.reconnectAfterMs:e=>[1e3,2e3,5e3,1e4][e-1]||1e4,this.encode=(null===t||void 0===t?void 0:t.encode)?t.encode:(e,t)=>t(JSON.stringify(e)),this.decode=(null===t||void 0===t?void 0:t.decode)?t.decode:this.serializer.decode.bind(this.serializer),this.reconnectTimer=new ar((async()=>{this.disconnect(),this.connect()}),this.reconnectAfterMs),this.fetch=this._resolveFetch(null===t||void 0===t?void 0:t.fetch),null===t||void 0===t?void 0:t.worker){if("undefined"!==typeof window&&!window.Worker)throw new Error("Web Worker is not supported");this.worker=(null===t||void 0===t?void 0:t.worker)||!1,this.workerUrl=null===t||void 0===t?void 0:t.workerUrl}this.accessToken=(null===t||void 0===t?void 0:t.accessToken)||null}connect(){if(!this.conn)if(this.transport)this.conn=new this.transport(this.endpointURL(),void 0,{headers:this.headers});else{if(Ar)return this.conn=new WebSocket(this.endpointURL()),void this.setupConnection();this.conn=new Ir(this.endpointURL(),void 0,{close:()=>{this.conn=null}}),r.e(437).then(r.t.bind(r,2437,23)).then((e=>{let{default:t}=e;this.conn=new t(this.endpointURL(),void 0,{headers:this.headers}),this.setupConnection()}))}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:"1.0.0"}))}disconnect(e,t){this.conn&&(this.conn.onclose=function(){},e?this.conn.close(e,null!==t&&void 0!==t?t:""):this.conn.close(),this.conn=null,this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.reset())}getChannels(){return this.channels}async removeChannel(e){const t=await e.unsubscribe();return 0===this.channels.length&&this.disconnect(),t}async removeAllChannels(){const e=await Promise.all(this.channels.map((e=>e.unsubscribe())));return this.disconnect(),e}log(e,t,r){this.logger(e,t,r)}connectionState(){switch(this.conn&&this.conn.readyState){case er.connecting:return ir.Connecting;case er.open:return ir.Open;case er.closing:return ir.Closing;default:return ir.Closed}}isConnected(){return this.connectionState()===ir.Open}channel(e){const t=new Cr(`realtime:${e}`,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{config:{}},this);return this.channels.push(t),t}push(e){const{topic:t,event:r,payload:n,ref:i}=e,o=()=>{this.encode(e,(e=>{var t;null===(t=this.conn)||void 0===t||t.send(e)}))};this.log("push",`${t} ${r} (${i})`,n),this.isConnected()?o():this.sendBuffer.push(o)}async setAuth(){let e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:null)||this.accessToken&&await this.accessToken()||this.accessTokenValue;if(e){let r=null;try{r=JSON.parse(atob(e.split(".")[1]))}catch(t){}if(r&&r.exp){if(!(Math.floor(Date.now()/1e3)-r.exp<0))return this.log("auth",`InvalidJWTToken: Invalid value for JWT claim "exp" with value ${r.exp}`),Promise.reject(`InvalidJWTToken: Invalid value for JWT claim "exp" with value ${r.exp}`)}this.accessTokenValue=e,this.channels.forEach((t=>{e&&t.updateJoinPayload({access_token:e}),t.joinedOnce&&t._isJoined()&&t._push(rr.access_token,{access_token:e})}))}}async sendHeartbeat(){var e;if(this.isConnected()){if(this.pendingHeartbeatRef)return this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection"),void(null===(e=this.conn)||void 0===e||e.close(1e3,"hearbeat timeout"));this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef}),this.setAuth()}}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach((e=>e())),this.sendBuffer=[])}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let t=this.channels.find((t=>t.topic===e&&(t._isJoined()||t._isJoining())));t&&(this.log("transport",`leaving duplicate topic "${e}"`),t.unsubscribe())}_remove(e){this.channels=this.channels.filter((t=>t._joinRef()!==e._joinRef()))}setupConnection(){this.conn&&(this.conn.binaryType="arraybuffer",this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e))}_onConnMessage(e){this.decode(e.data,(e=>{let{topic:t,event:r,payload:n,ref:i}=e;i&&i===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null),this.log("receive",`${n.status||""} ${t} ${r} ${i&&"("+i+")"||""}`,n),this.channels.filter((e=>e._isMember(t))).forEach((e=>e._trigger(r,n,i))),this.stateChangeCallbacks.message.forEach((t=>t(e)))}))}async _onConnOpen(){if(this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this.reconnectTimer.reset(),this.worker){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=e=>{this.log("worker","worker error",e.message),this.workerRef.terminate()},this.workerRef.onmessage=e=>{"keepAlive"===e.data.event&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}else this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval((()=>this.sendHeartbeat()),this.heartbeatIntervalMs);this.stateChangeCallbacks.open.forEach((e=>e()))}_onConnClose(e){this.log("transport","close",e),this._triggerChanError(),this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.scheduleTimeout(),this.stateChangeCallbacks.close.forEach((t=>t(e)))}_onConnError(e){this.log("transport",e.message),this._triggerChanError(),this.stateChangeCallbacks.error.forEach((t=>t(e)))}_triggerChanError(){this.channels.forEach((e=>e._trigger(rr.error)))}_appendParams(e,t){if(0===Object.keys(t).length)return e;const r=e.match(/\?/)?"&":"?";return`${e}${r}${new URLSearchParams(t)}`}_workerObjectUrl(e){let t;if(e)t=e;else{const e=new Blob(['\n  addEventListener("message", (e) => {\n    if (e.data.event === "start") {\n      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);\n    }\n  });'],{type:"application/javascript"});t=URL.createObjectURL(e)}return t}}class Ir{constructor(e,t,r){this.binaryType="arraybuffer",this.onclose=()=>{},this.onerror=()=>{},this.onmessage=()=>{},this.onopen=()=>{},this.readyState=er.connecting,this.send=()=>{},this.url=null,this.url=e,this.close=r.close}}class Tr extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}}function Or(e){return"object"===typeof e&&null!==e&&"__isStorageError"in e}class kr extends Tr{constructor(e,t){super(e),this.name="StorageApiError",this.status=t}toJSON(){return{name:this.name,message:this.message,status:this.status}}}class Rr extends Tr{constructor(e,t){super(e),this.name="StorageUnknownError",this.originalError=t}}var Mr=function(e,t,r,n){return new(r||(r=Promise))((function(i,s){function a(e){try{c(n.next(e))}catch(o){s(o)}}function l(e){try{c(n.throw(e))}catch(o){s(o)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(a,l)}c((n=n.apply(e,t||[])).next())}))};const jr=e=>{let t;return t=e||("undefined"===typeof fetch?function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return Promise.resolve().then(r.bind(r,4621)).then((e=>{let{default:r}=e;return r(...t)}))}:fetch),function(){return t(...arguments)}},Dr=e=>{if(Array.isArray(e))return e.map((e=>Dr(e)));if("function"===typeof e||e!==Object(e))return e;const t={};return Object.entries(e).forEach((e=>{let[r,n]=e;const i=r.replace(/([-_][a-z])/gi,(e=>e.toUpperCase().replace(/[-_]/g,"")));t[i]=Dr(n)})),t};var Pr=function(e,t,r,n){return new(r||(r=Promise))((function(i,s){function a(e){try{c(n.next(e))}catch(o){s(o)}}function l(e){try{c(n.throw(e))}catch(o){s(o)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(a,l)}c((n=n.apply(e,t||[])).next())}))};const Lr=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),Br=(e,t,n)=>Pr(void 0,void 0,void 0,(function*(){const i=yield Mr(void 0,void 0,void 0,(function*(){return"undefined"===typeof Response?(yield Promise.resolve().then(r.bind(r,4621))).Response:Response}));e instanceof i&&!(null===n||void 0===n?void 0:n.noResolveJson)?e.json().then((r=>{t(new kr(Lr(r),e.status||500))})).catch((e=>{t(new Rr(Lr(e),e))})):t(new Rr(Lr(e),e))}));function Fr(e,t,r,n,i,o){return Pr(this,void 0,void 0,(function*(){return new Promise(((s,a)=>{e(r,((e,t,r,n)=>{const i={method:e,headers:(null===t||void 0===t?void 0:t.headers)||{}};return"GET"===e?i:(i.headers=Object.assign({"Content-Type":"application/json"},null===t||void 0===t?void 0:t.headers),n&&(i.body=JSON.stringify(n)),Object.assign(Object.assign({},i),r))})(t,n,i,o)).then((e=>{if(!e.ok)throw e;return(null===n||void 0===n?void 0:n.noResolveJson)?e:e.json()})).then((e=>s(e))).catch((e=>Br(e,a,n)))}))}))}function Ur(e,t,r,n){return Pr(this,void 0,void 0,(function*(){return Fr(e,"GET",t,r,n)}))}function zr(e,t,r,n,i){return Pr(this,void 0,void 0,(function*(){return Fr(e,"POST",t,n,i,r)}))}function Hr(e,t,r,n,i){return Pr(this,void 0,void 0,(function*(){return Fr(e,"DELETE",t,n,i,r)}))}var Vr=function(e,t,r,n){return new(r||(r=Promise))((function(i,s){function a(e){try{c(n.next(e))}catch(o){s(o)}}function l(e){try{c(n.throw(e))}catch(o){s(o)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(a,l)}c((n=n.apply(e,t||[])).next())}))};const Wr={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},Gr={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class $r{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2?arguments[2]:void 0,n=arguments.length>3?arguments[3]:void 0;this.url=e,this.headers=t,this.bucketId=r,this.fetch=jr(n)}uploadOrUpdate(e,t,r,n){return Vr(this,void 0,void 0,(function*(){try{let i;const o=Object.assign(Object.assign({},Gr),n);let s=Object.assign(Object.assign({},this.headers),"POST"===e&&{"x-upsert":String(o.upsert)});const a=o.metadata;"undefined"!==typeof Blob&&r instanceof Blob?(i=new FormData,i.append("cacheControl",o.cacheControl),a&&i.append("metadata",this.encodeMetadata(a)),i.append("",r)):"undefined"!==typeof FormData&&r instanceof FormData?(i=r,i.append("cacheControl",o.cacheControl),a&&i.append("metadata",this.encodeMetadata(a))):(i=r,s["cache-control"]=`max-age=${o.cacheControl}`,s["content-type"]=o.contentType,a&&(s["x-metadata"]=this.toBase64(this.encodeMetadata(a)))),(null===n||void 0===n?void 0:n.headers)&&(s=Object.assign(Object.assign({},s),n.headers));const l=this._removeEmptyFolders(t),c=this._getFinalPath(l),u=yield this.fetch(`${this.url}/object/${c}`,Object.assign({method:e,body:i,headers:s},(null===o||void 0===o?void 0:o.duplex)?{duplex:o.duplex}:{})),d=yield u.json();if(u.ok)return{data:{path:l,id:d.Id,fullPath:d.Key},error:null};return{data:null,error:d}}catch(i){if(Or(i))return{data:null,error:i};throw i}}))}upload(e,t,r){return Vr(this,void 0,void 0,(function*(){return this.uploadOrUpdate("POST",e,t,r)}))}uploadToSignedUrl(e,t,r,n){return Vr(this,void 0,void 0,(function*(){const i=this._removeEmptyFolders(e),o=this._getFinalPath(i),s=new URL(this.url+`/object/upload/sign/${o}`);s.searchParams.set("token",t);try{let e;const t=Object.assign({upsert:Gr.upsert},n),o=Object.assign(Object.assign({},this.headers),{"x-upsert":String(t.upsert)});"undefined"!==typeof Blob&&r instanceof Blob?(e=new FormData,e.append("cacheControl",t.cacheControl),e.append("",r)):"undefined"!==typeof FormData&&r instanceof FormData?(e=r,e.append("cacheControl",t.cacheControl)):(e=r,o["cache-control"]=`max-age=${t.cacheControl}`,o["content-type"]=t.contentType);const a=yield this.fetch(s.toString(),{method:"PUT",body:e,headers:o}),l=yield a.json();if(a.ok)return{data:{path:i,fullPath:l.Key},error:null};return{data:null,error:l}}catch(a){if(Or(a))return{data:null,error:a};throw a}}))}createSignedUploadUrl(e,t){return Vr(this,void 0,void 0,(function*(){try{let r=this._getFinalPath(e);const n=Object.assign({},this.headers);(null===t||void 0===t?void 0:t.upsert)&&(n["x-upsert"]="true");const i=yield zr(this.fetch,`${this.url}/object/upload/sign/${r}`,{},{headers:n}),o=new URL(this.url+i.url),s=o.searchParams.get("token");if(!s)throw new Tr("No token returned by API");return{data:{signedUrl:o.toString(),path:e,token:s},error:null}}catch(r){if(Or(r))return{data:null,error:r};throw r}}))}update(e,t,r){return Vr(this,void 0,void 0,(function*(){return this.uploadOrUpdate("PUT",e,t,r)}))}move(e,t,r){return Vr(this,void 0,void 0,(function*(){try{return{data:yield zr(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:e,destinationKey:t,destinationBucket:null===r||void 0===r?void 0:r.destinationBucket},{headers:this.headers}),error:null}}catch(n){if(Or(n))return{data:null,error:n};throw n}}))}copy(e,t,r){return Vr(this,void 0,void 0,(function*(){try{return{data:{path:(yield zr(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:e,destinationKey:t,destinationBucket:null===r||void 0===r?void 0:r.destinationBucket},{headers:this.headers})).Key},error:null}}catch(n){if(Or(n))return{data:null,error:n};throw n}}))}createSignedUrl(e,t,r){return Vr(this,void 0,void 0,(function*(){try{let n=this._getFinalPath(e),i=yield zr(this.fetch,`${this.url}/object/sign/${n}`,Object.assign({expiresIn:t},(null===r||void 0===r?void 0:r.transform)?{transform:r.transform}:{}),{headers:this.headers});const o=(null===r||void 0===r?void 0:r.download)?`&download=${!0===r.download?"":r.download}`:"";return i={signedUrl:encodeURI(`${this.url}${i.signedURL}${o}`)},{data:i,error:null}}catch(n){if(Or(n))return{data:null,error:n};throw n}}))}createSignedUrls(e,t,r){return Vr(this,void 0,void 0,(function*(){try{const n=yield zr(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:t,paths:e},{headers:this.headers}),i=(null===r||void 0===r?void 0:r.download)?`&download=${!0===r.download?"":r.download}`:"";return{data:n.map((e=>Object.assign(Object.assign({},e),{signedUrl:e.signedURL?encodeURI(`${this.url}${e.signedURL}${i}`):null}))),error:null}}catch(n){if(Or(n))return{data:null,error:n};throw n}}))}download(e,t){return Vr(this,void 0,void 0,(function*(){const r="undefined"!==typeof(null===t||void 0===t?void 0:t.transform)?"render/image/authenticated":"object",n=this.transformOptsToQueryString((null===t||void 0===t?void 0:t.transform)||{}),i=n?`?${n}`:"";try{const t=this._getFinalPath(e),n=yield Ur(this.fetch,`${this.url}/${r}/${t}${i}`,{headers:this.headers,noResolveJson:!0});return{data:yield n.blob(),error:null}}catch(o){if(Or(o))return{data:null,error:o};throw o}}))}info(e){return Vr(this,void 0,void 0,(function*(){const t=this._getFinalPath(e);try{const e=yield Ur(this.fetch,`${this.url}/object/info/${t}`,{headers:this.headers});return{data:Dr(e),error:null}}catch(r){if(Or(r))return{data:null,error:r};throw r}}))}exists(e){return Vr(this,void 0,void 0,(function*(){const t=this._getFinalPath(e);try{return yield function(e,t,r,n){return Pr(this,void 0,void 0,(function*(){return Fr(e,"HEAD",t,Object.assign(Object.assign({},r),{noResolveJson:!0}),n)}))}(this.fetch,`${this.url}/object/${t}`,{headers:this.headers}),{data:!0,error:null}}catch(r){if(Or(r)&&r instanceof Rr){const e=r.originalError;if([400,404].includes(null===e||void 0===e?void 0:e.status))return{data:!1,error:r}}throw r}}))}getPublicUrl(e,t){const r=this._getFinalPath(e),n=[],i=(null===t||void 0===t?void 0:t.download)?`download=${!0===t.download?"":t.download}`:"";""!==i&&n.push(i);const o="undefined"!==typeof(null===t||void 0===t?void 0:t.transform)?"render/image":"object",s=this.transformOptsToQueryString((null===t||void 0===t?void 0:t.transform)||{});""!==s&&n.push(s);let a=n.join("&");return""!==a&&(a=`?${a}`),{data:{publicUrl:encodeURI(`${this.url}/${o}/public/${r}${a}`)}}}remove(e){return Vr(this,void 0,void 0,(function*(){try{return{data:yield Hr(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:e},{headers:this.headers}),error:null}}catch(t){if(Or(t))return{data:null,error:t};throw t}}))}list(e,t,r){return Vr(this,void 0,void 0,(function*(){try{const n=Object.assign(Object.assign(Object.assign({},Wr),t),{prefix:e||""});return{data:yield zr(this.fetch,`${this.url}/object/list/${this.bucketId}`,n,{headers:this.headers},r),error:null}}catch(n){if(Or(n))return{data:null,error:n};throw n}}))}encodeMetadata(e){return JSON.stringify(e)}toBase64(e){return"undefined"!==typeof Buffer?Buffer.from(e).toString("base64"):btoa(e)}_getFinalPath(e){return`${this.bucketId}/${e}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const t=[];return e.width&&t.push(`width=${e.width}`),e.height&&t.push(`height=${e.height}`),e.resize&&t.push(`resize=${e.resize}`),e.format&&t.push(`format=${e.format}`),e.quality&&t.push(`quality=${e.quality}`),t.join("&")}}const Xr={"X-Client-Info":"storage-js/2.7.1"};var Yr=function(e,t,r,n){return new(r||(r=Promise))((function(i,s){function a(e){try{c(n.next(e))}catch(o){s(o)}}function l(e){try{c(n.throw(e))}catch(o){s(o)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(a,l)}c((n=n.apply(e,t||[])).next())}))};class qr{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2?arguments[2]:void 0;this.url=e,this.headers=Object.assign(Object.assign({},Xr),t),this.fetch=jr(r)}listBuckets(){return Yr(this,void 0,void 0,(function*(){try{return{data:yield Ur(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(e){if(Or(e))return{data:null,error:e};throw e}}))}getBucket(e){return Yr(this,void 0,void 0,(function*(){try{return{data:yield Ur(this.fetch,`${this.url}/bucket/${e}`,{headers:this.headers}),error:null}}catch(t){if(Or(t))return{data:null,error:t};throw t}}))}createBucket(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{public:!1};return Yr(this,void 0,void 0,(function*(){try{return{data:yield zr(this.fetch,`${this.url}/bucket`,{id:e,name:e,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:this.headers}),error:null}}catch(r){if(Or(r))return{data:null,error:r};throw r}}))}updateBucket(e,t){return Yr(this,void 0,void 0,(function*(){try{const r=yield function(e,t,r,n,i){return Pr(this,void 0,void 0,(function*(){return Fr(e,"PUT",t,n,i,r)}))}(this.fetch,`${this.url}/bucket/${e}`,{id:e,name:e,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:this.headers});return{data:r,error:null}}catch(r){if(Or(r))return{data:null,error:r};throw r}}))}emptyBucket(e){return Yr(this,void 0,void 0,(function*(){try{return{data:yield zr(this.fetch,`${this.url}/bucket/${e}/empty`,{},{headers:this.headers}),error:null}}catch(t){if(Or(t))return{data:null,error:t};throw t}}))}deleteBucket(e){return Yr(this,void 0,void 0,(function*(){try{return{data:yield Hr(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(t){if(Or(t))return{data:null,error:t};throw t}}))}}class Qr extends qr{constructor(e){super(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},arguments.length>2?arguments[2]:void 0)}from(e){return new $r(this.url,this.headers,e,this.fetch)}}let Zr="";Zr="undefined"!==typeof Deno?"deno":"undefined"!==typeof document?"web":"undefined"!==typeof navigator&&"ReactNative"===navigator.product?"react-native":"node";const Kr={headers:{"X-Client-Info":`supabase-js-${Zr}/2.49.1`}},Jr={schema:"public"},en={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},tn={};var rn=r(4621),nn=function(e,t,r,n){return new(r||(r=Promise))((function(i,s){function a(e){try{c(n.next(e))}catch(o){s(o)}}function l(e){try{c(n.throw(e))}catch(o){s(o)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(a,l)}c((n=n.apply(e,t||[])).next())}))};const on=e=>{let t;return t=e||("undefined"===typeof fetch?rn.default:fetch),function(){return t(...arguments)}},sn=(e,t,r)=>{const n=on(r),i="undefined"===typeof Headers?rn.Headers:Headers;return(r,o)=>nn(void 0,void 0,void 0,(function*(){var s;const a=null!==(s=yield t())&&void 0!==s?s:e;let l=new i(null===o||void 0===o?void 0:o.headers);return l.has("apikey")||l.set("apikey",e),l.has("Authorization")||l.set("Authorization",`Bearer ${a}`),n(r,Object.assign(Object.assign({},o),{headers:l}))}))};var an=function(e,t,r,n){return new(r||(r=Promise))((function(i,s){function a(e){try{c(n.next(e))}catch(o){s(o)}}function l(e){try{c(n.throw(e))}catch(o){s(o)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(a,l)}c((n=n.apply(e,t||[])).next())}))};const ln="2.68.0",cn=3e4,un=9e4,dn={"X-Client-Info":`gotrue-js/${ln}`},hn="X-Supabase-Api-Version",fn={timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"};const pn=()=>"undefined"!==typeof window&&"undefined"!==typeof document,mn={tested:!1,writable:!1},gn=()=>{if(!pn())return!1;try{if("object"!==typeof globalThis.localStorage)return!1}catch(o){return!1}if(mn.tested)return mn.writable;const e=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(e,e),globalThis.localStorage.removeItem(e),mn.tested=!0,mn.writable=!0}catch(o){mn.tested=!0,mn.writable=!1}return mn.writable};const yn=e=>{let t;return t=e||("undefined"===typeof fetch?function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return Promise.resolve().then(r.bind(r,4621)).then((e=>{let{default:r}=e;return r(...t)}))}:fetch),function(){return t(...arguments)}},wn=async(e,t,r)=>{await e.setItem(t,JSON.stringify(r))},bn=async(e,t)=>{const r=await e.getItem(t);if(!r)return null;try{return JSON.parse(r)}catch(n){return r}},vn=async(e,t)=>{await e.removeItem(t)};class _n{constructor(){this.promise=new _n.promiseConstructor(((e,t)=>{this.resolve=e,this.reject=t}))}}function xn(e){const t=e.split(".");if(3!==t.length)throw new Error("JWT is not valid: not a JWT structure");if(!/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}=?$|[a-z0-9_-]{2}(==)?$)$/i.test(t[1]))throw new Error("JWT is not valid: payload is not in base64url format");const r=t[1];return JSON.parse(function(e){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";let r,n,i,o,s,a,l,c="",u=0;for(e=e.replace("-","+").replace("_","/");u<e.length;)o=t.indexOf(e.charAt(u++)),s=t.indexOf(e.charAt(u++)),a=t.indexOf(e.charAt(u++)),l=t.indexOf(e.charAt(u++)),r=o<<2|s>>4,n=(15&s)<<4|a>>2,i=(3&a)<<6|l,c+=String.fromCharCode(r),64!=a&&0!=n&&(c+=String.fromCharCode(n)),64!=l&&0!=i&&(c+=String.fromCharCode(i));return c}(r))}function En(e){return("0"+e.toString(16)).substr(-2)}async function Cn(e){if(!("undefined"!==typeof crypto&&"undefined"!==typeof crypto.subtle&&"undefined"!==typeof TextEncoder))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),e;const t=await async function(e){const t=(new TextEncoder).encode(e),r=await crypto.subtle.digest("SHA-256",t),n=new Uint8Array(r);return Array.from(n).map((e=>String.fromCharCode(e))).join("")}(e);return btoa(t).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function Sn(e,t){let r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const n=function(){const e=new Uint32Array(56);if("undefined"===typeof crypto){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",t=e.length;let r="";for(let n=0;n<56;n++)r+=e.charAt(Math.floor(Math.random()*t));return r}return crypto.getRandomValues(e),Array.from(e,En).join("")}();let i=n;r&&(i+="/PASSWORD_RECOVERY"),await wn(e,`${t}-code-verifier`,i);const o=await Cn(n);return[o,n===o?"plain":"s256"]}_n.promiseConstructor=Promise;const An=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;class Nn extends Error{constructor(e,t,r){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=t,this.code=r}}function In(e){return"object"===typeof e&&null!==e&&"__isAuthError"in e}class Tn extends Nn{constructor(e,t,r){super(e,t,r),this.name="AuthApiError",this.status=t,this.code=r}}class On extends Nn{constructor(e,t){super(e),this.name="AuthUnknownError",this.originalError=t}}class kn extends Nn{constructor(e,t,r,n){super(e,r,n),this.name=t,this.status=r}}class Rn extends kn{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}class Mn extends kn{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class jn extends kn{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}}class Dn extends kn{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=t}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class Pn extends kn{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=t}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class Ln extends kn{constructor(e,t){super(e,"AuthRetryableFetchError",t,void 0)}}function Bn(e){return In(e)&&"AuthRetryableFetchError"===e.name}class Fn extends kn{constructor(e,t,r){super(e,"AuthWeakPasswordError",t,"weak_password"),this.reasons=r}}var Un=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(n=Object.getOwnPropertySymbols(e);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(r[n[i]]=e[n[i]])}return r};const zn=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),Hn=[502,503,504];async function Vn(e){var t,r;if(!("object"===typeof(r=e)&&null!==r&&"status"in r&&"ok"in r&&"json"in r&&"function"===typeof r.json))throw new Ln(zn(e),0);if(Hn.includes(e.status))throw new Ln(zn(e),e.status);let n,i;try{n=await e.json()}catch(o){throw new On(zn(o),o)}const s=function(e){const t=e.headers.get(hn);if(!t)return null;if(!t.match(An))return null;try{return new Date(`${t}T00:00:00.0Z`)}catch(o){return null}}(e);if(s&&s.getTime()>=fn.timestamp&&"object"===typeof n&&n&&"string"===typeof n.code?i=n.code:"object"===typeof n&&n&&"string"===typeof n.error_code&&(i=n.error_code),i){if("weak_password"===i)throw new Fn(zn(n),e.status,(null===(t=n.weak_password)||void 0===t?void 0:t.reasons)||[]);if("session_not_found"===i)throw new Rn}else if("object"===typeof n&&n&&"object"===typeof n.weak_password&&n.weak_password&&Array.isArray(n.weak_password.reasons)&&n.weak_password.reasons.length&&n.weak_password.reasons.reduce(((e,t)=>e&&"string"===typeof t),!0))throw new Fn(zn(n),e.status,n.weak_password.reasons);throw new Tn(zn(n),e.status||500,i)}async function Wn(e,t,r,n){var i;const s=Object.assign({},null===n||void 0===n?void 0:n.headers);s[hn]||(s[hn]=fn.name),(null===n||void 0===n?void 0:n.jwt)&&(s.Authorization=`Bearer ${n.jwt}`);const a=null!==(i=null===n||void 0===n?void 0:n.query)&&void 0!==i?i:{};(null===n||void 0===n?void 0:n.redirectTo)&&(a.redirect_to=n.redirectTo);const l=Object.keys(a).length?"?"+new URLSearchParams(a).toString():"",c=await async function(e,t,r,n,i,s){const a=((e,t,r,n)=>{const i={method:e,headers:(null===t||void 0===t?void 0:t.headers)||{}};return"GET"===e?i:(i.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},null===t||void 0===t?void 0:t.headers),i.body=JSON.stringify(n),Object.assign(Object.assign({},i),r))})(t,n,i,s);let l;try{l=await e(r,Object.assign({},a))}catch(o){throw console.error(o),new Ln(zn(o),0)}l.ok||await Vn(l);if(null===n||void 0===n?void 0:n.noResolveJson)return l;try{return await l.json()}catch(o){await Vn(o)}}(e,t,r+l,{headers:s,noResolveJson:null===n||void 0===n?void 0:n.noResolveJson},{},null===n||void 0===n?void 0:n.body);return(null===n||void 0===n?void 0:n.xform)?null===n||void 0===n?void 0:n.xform(c):{data:Object.assign({},c),error:null}}function Gn(e){var t;let r=null;var n;(function(e){return e.access_token&&e.refresh_token&&e.expires_in})(e)&&(r=Object.assign({},e),e.expires_at||(r.expires_at=(n=e.expires_in,Math.round(Date.now()/1e3)+n)));return{data:{session:r,user:null!==(t=e.user)&&void 0!==t?t:e},error:null}}function $n(e){const t=Gn(e);return!t.error&&e.weak_password&&"object"===typeof e.weak_password&&Array.isArray(e.weak_password.reasons)&&e.weak_password.reasons.length&&e.weak_password.message&&"string"===typeof e.weak_password.message&&e.weak_password.reasons.reduce(((e,t)=>e&&"string"===typeof t),!0)&&(t.data.weak_password=e.weak_password),t}function Xn(e){var t;return{data:{user:null!==(t=e.user)&&void 0!==t?t:e},error:null}}function Yn(e){return{data:e,error:null}}function qn(e){const{action_link:t,email_otp:r,hashed_token:n,redirect_to:i,verification_type:o}=e,s=Un(e,["action_link","email_otp","hashed_token","redirect_to","verification_type"]);return{data:{properties:{action_link:t,email_otp:r,hashed_token:n,redirect_to:i,verification_type:o},user:Object.assign({},s)},error:null}}function Qn(e){return e}var Zn=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(n=Object.getOwnPropertySymbols(e);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(r[n[i]]=e[n[i]])}return r};class Kn{constructor(e){let{url:t="",headers:r={},fetch:n}=e;this.url=t,this.headers=r,this.fetch=yn(n),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}async signOut(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"global";try{return await Wn(this.fetch,"POST",`${this.url}/logout?scope=${t}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(r){if(In(r))return{data:null,error:r};throw r}}async inviteUserByEmail(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};try{return await Wn(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:t.data},headers:this.headers,redirectTo:t.redirectTo,xform:Xn})}catch(r){if(In(r))return{data:{user:null},error:r};throw r}}async generateLink(e){try{const{options:t}=e,r=Zn(e,["options"]),n=Object.assign(Object.assign({},r),t);return"newEmail"in r&&(n.new_email=null===r||void 0===r?void 0:r.newEmail,delete n.newEmail),await Wn(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:n,headers:this.headers,xform:qn,redirectTo:null===t||void 0===t?void 0:t.redirectTo})}catch(t){if(In(t))return{data:{properties:null,user:null},error:t};throw t}}async createUser(e){try{return await Wn(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:Xn})}catch(t){if(In(t))return{data:{user:null},error:t};throw t}}async listUsers(e){var t,r,n,i,o,s,a;try{const l={nextPage:null,lastPage:0,total:0},c=await Wn(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:null!==(r=null===(t=null===e||void 0===e?void 0:e.page)||void 0===t?void 0:t.toString())&&void 0!==r?r:"",per_page:null!==(i=null===(n=null===e||void 0===e?void 0:e.perPage)||void 0===n?void 0:n.toString())&&void 0!==i?i:""},xform:Qn});if(c.error)throw c.error;const u=await c.json(),d=null!==(o=c.headers.get("x-total-count"))&&void 0!==o?o:0,h=null!==(a=null===(s=c.headers.get("link"))||void 0===s?void 0:s.split(","))&&void 0!==a?a:[];return h.length>0&&(h.forEach((e=>{const t=parseInt(e.split(";")[0].split("=")[1].substring(0,1)),r=JSON.parse(e.split(";")[1].split("=")[1]);l[`${r}Page`]=t})),l.total=parseInt(d)),{data:Object.assign(Object.assign({},u),l),error:null}}catch(l){if(In(l))return{data:{users:[]},error:l};throw l}}async getUserById(e){try{return await Wn(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:Xn})}catch(t){if(In(t))return{data:{user:null},error:t};throw t}}async updateUserById(e,t){try{return await Wn(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:t,headers:this.headers,xform:Xn})}catch(r){if(In(r))return{data:{user:null},error:r};throw r}}async deleteUser(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];try{return await Wn(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:t},xform:Xn})}catch(r){if(In(r))return{data:{user:null},error:r};throw r}}async _listFactors(e){try{const{data:t,error:r}=await Wn(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:e=>({data:{factors:e},error:null})});return{data:t,error:r}}catch(t){if(In(t))return{data:null,error:t};throw t}}async _deleteFactor(e){try{return{data:await Wn(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(t){if(In(t))return{data:null,error:t};throw t}}}const Jn={getItem:e=>gn()?globalThis.localStorage.getItem(e):null,setItem:(e,t)=>{gn()&&globalThis.localStorage.setItem(e,t)},removeItem:e=>{gn()&&globalThis.localStorage.removeItem(e)}};function ei(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{getItem:t=>e[t]||null,setItem:(t,r)=>{e[t]=r},removeItem:t=>{delete e[t]}}}const ti=!!(globalThis&&gn()&&globalThis.localStorage&&"true"===globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug"));class ri extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}class ni extends ri{}async function ii(e,t,r){ti&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",e,t);const n=new globalThis.AbortController;return t>0&&setTimeout((()=>{n.abort(),ti&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",e)}),t),await Promise.resolve().then((()=>globalThis.navigator.locks.request(e,0===t?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:n.signal},(async n=>{if(!n){if(0===t)throw ti&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",e),new ni(`Acquiring an exclusive Navigator LockManager lock "${e}" immediately failed`);if(ti)try{const e=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(e,null,"  "))}catch(o){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",o)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await r()}ti&&console.log("@supabase/gotrue-js: navigatorLock: acquired",e,n.name);try{return await r()}finally{ti&&console.log("@supabase/gotrue-js: navigatorLock: released",e,n.name)}}))))}!function(){if("object"!==typeof globalThis)try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch(o){"undefined"!==typeof self&&(self.globalThis=self)}}();const oi={url:"http://localhost:9999",storageKey:"supabase.auth.token",autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:dn,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};async function si(e,t,r){return await r()}class ai{constructor(e){var t,r;this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=ai.nextInstanceID,ai.nextInstanceID+=1,this.instanceID>0&&pn()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const n=Object.assign(Object.assign({},oi),e);if(this.logDebugMessages=!!n.debug,"function"===typeof n.debug&&(this.logger=n.debug),this.persistSession=n.persistSession,this.storageKey=n.storageKey,this.autoRefreshToken=n.autoRefreshToken,this.admin=new Kn({url:n.url,headers:n.headers,fetch:n.fetch}),this.url=n.url,this.headers=n.headers,this.fetch=yn(n.fetch),this.lock=n.lock||si,this.detectSessionInUrl=n.detectSessionInUrl,this.flowType=n.flowType,this.hasCustomAuthorizationHeader=n.hasCustomAuthorizationHeader,n.lock?this.lock=n.lock:pn()&&(null===(t=null===globalThis||void 0===globalThis?void 0:globalThis.navigator)||void 0===t?void 0:t.locks)?this.lock=ii:this.lock=si,this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?n.storage?this.storage=n.storage:gn()?this.storage=Jn:(this.memoryStorage={},this.storage=ei(this.memoryStorage)):(this.memoryStorage={},this.storage=ei(this.memoryStorage)),pn()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(o){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",o)}null===(r=this.broadcastChannel)||void 0===r||r.addEventListener("message",(async e=>{this._debug("received broadcast notification from other tab or client",e),await this._notifyAllSubscribers(e.data.event,e.data.session,!1)}))}this.initialize()}_debug(){if(this.logDebugMessages){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];this.logger(`GoTrueClient@${this.instanceID} (${ln}) ${(new Date).toISOString()}`,...t)}return this}async initialize(){return this.initializePromise||(this.initializePromise=(async()=>await this._acquireLock(-1,(async()=>await this._initialize())))()),await this.initializePromise}async _initialize(){var e;try{const t=function(e){const t={},r=new URL(e);if(r.hash&&"#"===r.hash[0])try{new URLSearchParams(r.hash.substring(1)).forEach(((e,r)=>{t[r]=e}))}catch(o){}return r.searchParams.forEach(((e,r)=>{t[r]=e})),t}(window.location.href);let r="none";if(this._isImplicitGrantCallback(t)?r="implicit":await this._isPKCECallback(t)&&(r="pkce"),pn()&&this.detectSessionInUrl&&"none"!==r){const{data:n,error:i}=await this._getSessionFromURL(t,r);if(i){if(this._debug("#_initialize()","error detecting session from URL",i),function(e){return In(e)&&"AuthImplicitGrantRedirectError"===e.name}(i)){const t=null===(e=i.details)||void 0===e?void 0:e.code;if("identity_already_exists"===t||"identity_not_found"===t||"single_identity_not_deletable"===t)return{error:i}}return await this._removeSession(),{error:i}}const{session:o,redirectType:s}=n;return this._debug("#_initialize()","detected session in URL",o,"redirect type",s),await this._saveSession(o),setTimeout((async()=>{"recovery"===s?await this._notifyAllSubscribers("PASSWORD_RECOVERY",o):await this._notifyAllSubscribers("SIGNED_IN",o)}),0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(t){return In(t)?{error:t}:{error:new On("Unexpected error during initialization",t)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var t,r,n;try{const i=await Wn(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:null!==(r=null===(t=null===e||void 0===e?void 0:e.options)||void 0===t?void 0:t.data)&&void 0!==r?r:{},gotrue_meta_security:{captcha_token:null===(n=null===e||void 0===e?void 0:e.options)||void 0===n?void 0:n.captchaToken}},xform:Gn}),{data:o,error:s}=i;if(s||!o)return{data:{user:null,session:null},error:s};const a=o.session,l=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",a)),{data:{user:l,session:a},error:null}}catch(i){if(In(i))return{data:{user:null,session:null},error:i};throw i}}async signUp(e){var t,r,n;try{let i;if("email"in e){const{email:r,password:n,options:o}=e;let s=null,a=null;"pkce"===this.flowType&&([s,a]=await Sn(this.storage,this.storageKey)),i=await Wn(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:null===o||void 0===o?void 0:o.emailRedirectTo,body:{email:r,password:n,data:null!==(t=null===o||void 0===o?void 0:o.data)&&void 0!==t?t:{},gotrue_meta_security:{captcha_token:null===o||void 0===o?void 0:o.captchaToken},code_challenge:s,code_challenge_method:a},xform:Gn})}else{if(!("phone"in e))throw new jn("You must provide either an email or phone number and a password");{const{phone:t,password:o,options:s}=e;i=await Wn(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:t,password:o,data:null!==(r=null===s||void 0===s?void 0:s.data)&&void 0!==r?r:{},channel:null!==(n=null===s||void 0===s?void 0:s.channel)&&void 0!==n?n:"sms",gotrue_meta_security:{captcha_token:null===s||void 0===s?void 0:s.captchaToken}},xform:Gn})}}const{data:o,error:s}=i;if(s||!o)return{data:{user:null,session:null},error:s};const a=o.session,l=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",a)),{data:{user:l,session:a},error:null}}catch(i){if(In(i))return{data:{user:null,session:null},error:i};throw i}}async signInWithPassword(e){try{let t;if("email"in e){const{email:r,password:n,options:i}=e;t=await Wn(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:r,password:n,gotrue_meta_security:{captcha_token:null===i||void 0===i?void 0:i.captchaToken}},xform:$n})}else{if(!("phone"in e))throw new jn("You must provide either an email or phone number and a password");{const{phone:r,password:n,options:i}=e;t=await Wn(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:r,password:n,gotrue_meta_security:{captcha_token:null===i||void 0===i?void 0:i.captchaToken}},xform:$n})}}const{data:r,error:n}=t;return n?{data:{user:null,session:null},error:n}:r&&r.session&&r.user?(r.session&&(await this._saveSession(r.session),await this._notifyAllSubscribers("SIGNED_IN",r.session)),{data:Object.assign({user:r.user,session:r.session},r.weak_password?{weakPassword:r.weak_password}:null),error:n}):{data:{user:null,session:null},error:new Mn}}catch(t){if(In(t))return{data:{user:null,session:null},error:t};throw t}}async signInWithOAuth(e){var t,r,n,i;return await this._handleProviderSignIn(e.provider,{redirectTo:null===(t=e.options)||void 0===t?void 0:t.redirectTo,scopes:null===(r=e.options)||void 0===r?void 0:r.scopes,queryParams:null===(n=e.options)||void 0===n?void 0:n.queryParams,skipBrowserRedirect:null===(i=e.options)||void 0===i?void 0:i.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(-1,(async()=>this._exchangeCodeForSession(e)))}async _exchangeCodeForSession(e){const t=await bn(this.storage,`${this.storageKey}-code-verifier`),[r,n]=(null!==t&&void 0!==t?t:"").split("/");try{const{data:t,error:i}=await Wn(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:r},xform:Gn});if(await vn(this.storage,`${this.storageKey}-code-verifier`),i)throw i;return t&&t.session&&t.user?(t.session&&(await this._saveSession(t.session),await this._notifyAllSubscribers("SIGNED_IN",t.session)),{data:Object.assign(Object.assign({},t),{redirectType:null!==n&&void 0!==n?n:null}),error:i}):{data:{user:null,session:null,redirectType:null},error:new Mn}}catch(i){if(In(i))return{data:{user:null,session:null,redirectType:null},error:i};throw i}}async signInWithIdToken(e){try{const{options:t,provider:r,token:n,access_token:i,nonce:o}=e,s=await Wn(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:r,id_token:n,access_token:i,nonce:o,gotrue_meta_security:{captcha_token:null===t||void 0===t?void 0:t.captchaToken}},xform:Gn}),{data:a,error:l}=s;return l?{data:{user:null,session:null},error:l}:a&&a.session&&a.user?(a.session&&(await this._saveSession(a.session),await this._notifyAllSubscribers("SIGNED_IN",a.session)),{data:a,error:l}):{data:{user:null,session:null},error:new Mn}}catch(t){if(In(t))return{data:{user:null,session:null},error:t};throw t}}async signInWithOtp(e){var t,r,n,i,o;try{if("email"in e){const{email:n,options:i}=e;let o=null,s=null;"pkce"===this.flowType&&([o,s]=await Sn(this.storage,this.storageKey));const{error:a}=await Wn(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:n,data:null!==(t=null===i||void 0===i?void 0:i.data)&&void 0!==t?t:{},create_user:null===(r=null===i||void 0===i?void 0:i.shouldCreateUser)||void 0===r||r,gotrue_meta_security:{captcha_token:null===i||void 0===i?void 0:i.captchaToken},code_challenge:o,code_challenge_method:s},redirectTo:null===i||void 0===i?void 0:i.emailRedirectTo});return{data:{user:null,session:null},error:a}}if("phone"in e){const{phone:t,options:r}=e,{data:s,error:a}=await Wn(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:t,data:null!==(n=null===r||void 0===r?void 0:r.data)&&void 0!==n?n:{},create_user:null===(i=null===r||void 0===r?void 0:r.shouldCreateUser)||void 0===i||i,gotrue_meta_security:{captcha_token:null===r||void 0===r?void 0:r.captchaToken},channel:null!==(o=null===r||void 0===r?void 0:r.channel)&&void 0!==o?o:"sms"}});return{data:{user:null,session:null,messageId:null===s||void 0===s?void 0:s.message_id},error:a}}throw new jn("You must provide either an email or phone number.")}catch(s){if(In(s))return{data:{user:null,session:null},error:s};throw s}}async verifyOtp(e){var t,r;try{let n,i;"options"in e&&(n=null===(t=e.options)||void 0===t?void 0:t.redirectTo,i=null===(r=e.options)||void 0===r?void 0:r.captchaToken);const{data:o,error:s}=await Wn(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:i}}),redirectTo:n,xform:Gn});if(s)throw s;if(!o)throw new Error("An error occurred on token verification.");const a=o.session,l=o.user;return(null===a||void 0===a?void 0:a.access_token)&&(await this._saveSession(a),await this._notifyAllSubscribers("recovery"==e.type?"PASSWORD_RECOVERY":"SIGNED_IN",a)),{data:{user:l,session:a},error:null}}catch(n){if(In(n))return{data:{user:null,session:null},error:n};throw n}}async signInWithSSO(e){var t,r,n;try{let i=null,o=null;return"pkce"===this.flowType&&([i,o]=await Sn(this.storage,this.storageKey)),await Wn(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:null!==(r=null===(t=e.options)||void 0===t?void 0:t.redirectTo)&&void 0!==r?r:void 0}),(null===(n=null===e||void 0===e?void 0:e.options)||void 0===n?void 0:n.captchaToken)?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:i,code_challenge_method:o}),headers:this.headers,xform:Yn})}catch(i){if(In(i))return{data:null,error:i};throw i}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,(async()=>await this._reauthenticate()))}async _reauthenticate(){try{return await this._useSession((async e=>{const{data:{session:t},error:r}=e;if(r)throw r;if(!t)throw new Rn;const{error:n}=await Wn(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:t.access_token});return{data:{user:null,session:null},error:n}}))}catch(e){if(In(e))return{data:{user:null,session:null},error:e};throw e}}async resend(e){try{const t=`${this.url}/resend`;if("email"in e){const{email:r,type:n,options:i}=e,{error:o}=await Wn(this.fetch,"POST",t,{headers:this.headers,body:{email:r,type:n,gotrue_meta_security:{captcha_token:null===i||void 0===i?void 0:i.captchaToken}},redirectTo:null===i||void 0===i?void 0:i.emailRedirectTo});return{data:{user:null,session:null},error:o}}if("phone"in e){const{phone:r,type:n,options:i}=e,{data:o,error:s}=await Wn(this.fetch,"POST",t,{headers:this.headers,body:{phone:r,type:n,gotrue_meta_security:{captcha_token:null===i||void 0===i?void 0:i.captchaToken}}});return{data:{user:null,session:null,messageId:null===o||void 0===o?void 0:o.message_id},error:s}}throw new jn("You must provide either an email or phone number and a type")}catch(t){if(In(t))return{data:{user:null,session:null},error:t};throw t}}async getSession(){await this.initializePromise;return await this._acquireLock(-1,(async()=>this._useSession((async e=>e))))}async _acquireLock(e,t){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const e=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),r=(async()=>(await e,await t()))();return this.pendingInLock.push((async()=>{try{await r}catch(o){}})()),r}return await this.lock(`lock:${this.storageKey}`,e,(async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const e=t();for(this.pendingInLock.push((async()=>{try{await e}catch(o){}})()),await e;this.pendingInLock.length;){const e=[...this.pendingInLock];await Promise.all(e),this.pendingInLock.splice(0,e.length)}return await e}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}}))}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const t=await this.__loadSession();return await e(t)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",(new Error).stack);try{let e=null;const t=await bn(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",t),null!==t&&(this._isValidSession(t)?e=t:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const r=!!e.expires_at&&1e3*e.expires_at-Date.now()<un;if(this._debug("#__loadSession()",`session has${r?"":" not"} expired`,"expires_at",e.expires_at),!r){if(this.storage.isServer){let t=this.suppressGetSessionWarning;e=new Proxy(e,{get:(e,r,n)=>(t||"user"!==r||(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),t=!0,this.suppressGetSessionWarning=!0),Reflect.get(e,r,n))})}return{data:{session:e},error:null}}const{session:n,error:i}=await this._callRefreshToken(e.refresh_token);return i?{data:{session:null},error:i}:{data:{session:n},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(e){if(e)return await this._getUser(e);await this.initializePromise;return await this._acquireLock(-1,(async()=>await this._getUser()))}async _getUser(e){try{return e?await Wn(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:Xn}):await this._useSession((async e=>{var t,r,n;const{data:i,error:o}=e;if(o)throw o;return(null===(t=i.session)||void 0===t?void 0:t.access_token)||this.hasCustomAuthorizationHeader?await Wn(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:null!==(n=null===(r=i.session)||void 0===r?void 0:r.access_token)&&void 0!==n?n:void 0,xform:Xn}):{data:{user:null},error:new Rn}}))}catch(t){if(In(t))return function(e){return In(e)&&"AuthSessionMissingError"===e.name}(t)&&(await this._removeSession(),await vn(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:t};throw t}}async updateUser(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return await this.initializePromise,await this._acquireLock(-1,(async()=>await this._updateUser(e,t)))}async _updateUser(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};try{return await this._useSession((async r=>{const{data:n,error:i}=r;if(i)throw i;if(!n.session)throw new Rn;const o=n.session;let s=null,a=null;"pkce"===this.flowType&&null!=e.email&&([s,a]=await Sn(this.storage,this.storageKey));const{data:l,error:c}=await Wn(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:null===t||void 0===t?void 0:t.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:s,code_challenge_method:a}),jwt:o.access_token,xform:Xn});if(c)throw c;return o.user=l.user,await this._saveSession(o),await this._notifyAllSubscribers("USER_UPDATED",o),{data:{user:o.user},error:null}}))}catch(r){if(In(r))return{data:{user:null},error:r};throw r}}_decodeJWT(e){return xn(e)}async setSession(e){return await this.initializePromise,await this._acquireLock(-1,(async()=>await this._setSession(e)))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new Rn;const t=Date.now()/1e3;let r=t,n=!0,i=null;const o=xn(e.access_token);if(o.exp&&(r=o.exp,n=r<=t),n){const{session:t,error:r}=await this._callRefreshToken(e.refresh_token);if(r)return{data:{user:null,session:null},error:r};if(!t)return{data:{user:null,session:null},error:null};i=t}else{const{data:n,error:o}=await this._getUser(e.access_token);if(o)throw o;i={access_token:e.access_token,refresh_token:e.refresh_token,user:n.user,token_type:"bearer",expires_in:r-t,expires_at:r},await this._saveSession(i),await this._notifyAllSubscribers("SIGNED_IN",i)}return{data:{user:i.user,session:i},error:null}}catch(t){if(In(t))return{data:{session:null,user:null},error:t};throw t}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(-1,(async()=>await this._refreshSession(e)))}async _refreshSession(e){try{return await this._useSession((async t=>{var r;if(!e){const{data:n,error:i}=t;if(i)throw i;e=null!==(r=n.session)&&void 0!==r?r:void 0}if(!(null===e||void 0===e?void 0:e.refresh_token))throw new Rn;const{session:n,error:i}=await this._callRefreshToken(e.refresh_token);return i?{data:{user:null,session:null},error:i}:n?{data:{user:n.user,session:n},error:null}:{data:{user:null,session:null},error:null}}))}catch(t){if(In(t))return{data:{user:null,session:null},error:t};throw t}}async _getSessionFromURL(e,t){try{if(!pn())throw new Dn("No browser detected.");if(e.error||e.error_description||e.error_code)throw new Dn(e.error_description||"Error in URL with unspecified error_description",{error:e.error||"unspecified_error",code:e.error_code||"unspecified_code"});switch(t){case"implicit":if("pkce"===this.flowType)throw new Pn("Not a valid PKCE flow url.");break;case"pkce":if("implicit"===this.flowType)throw new Dn("Not a valid implicit grant flow url.")}if("pkce"===t){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!e.code)throw new Pn("No code detected.");const{data:t,error:r}=await this._exchangeCodeForSession(e.code);if(r)throw r;const n=new URL(window.location.href);return n.searchParams.delete("code"),window.history.replaceState(window.history.state,"",n.toString()),{data:{session:t.session,redirectType:null},error:null}}const{provider_token:r,provider_refresh_token:n,access_token:i,refresh_token:o,expires_in:s,expires_at:a,token_type:l}=e;if(!i||!s||!o||!l)throw new Dn("No session defined in URL");const c=Math.round(Date.now()/1e3),u=parseInt(s);let d=c+u;a&&(d=parseInt(a));const h=d-c;1e3*h<=cn&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${h}s, should have been closer to ${u}s`);const f=d-u;c-f>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",f,d,c):c-f<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",f,d,c);const{data:p,error:m}=await this._getUser(i);if(m)throw m;const g={provider_token:r,provider_refresh_token:n,access_token:i,expires_in:u,expires_at:d,refresh_token:o,token_type:l,user:p.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:g,redirectType:e.type},error:null}}catch(r){if(In(r))return{data:{session:null,redirectType:null},error:r};throw r}}_isImplicitGrantCallback(e){return Boolean(e.access_token||e.error_description)}async _isPKCECallback(e){const t=await bn(this.storage,`${this.storageKey}-code-verifier`);return!(!e.code||!t)}async signOut(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{scope:"global"};return await this.initializePromise,await this._acquireLock(-1,(async()=>await this._signOut(e)))}async _signOut(){let{scope:e}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{scope:"global"};return await this._useSession((async t=>{var r;const{data:n,error:i}=t;if(i)return{error:i};const o=null===(r=n.session)||void 0===r?void 0:r.access_token;if(o){const{error:t}=await this.admin.signOut(o,e);if(t&&(!function(e){return In(e)&&"AuthApiError"===e.name}(t)||404!==t.status&&401!==t.status&&403!==t.status))return{error:t}}return"others"!==e&&(await this._removeSession(),await vn(this.storage,`${this.storageKey}-code-verifier`)),{error:null}}))}onAuthStateChange(e){const t="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(e){const t=16*Math.random()|0;return("x"==e?t:3&t|8).toString(16)})),r={id:t,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",t),this.stateChangeEmitters.delete(t)}};return this._debug("#onAuthStateChange()","registered callback with id",t),this.stateChangeEmitters.set(t,r),(async()=>{await this.initializePromise,await this._acquireLock(-1,(async()=>{this._emitInitialSession(t)}))})(),{data:{subscription:r}}}async _emitInitialSession(e){return await this._useSession((async t=>{var r,n;try{const{data:{session:n},error:i}=t;if(i)throw i;await(null===(r=this.stateChangeEmitters.get(e))||void 0===r?void 0:r.callback("INITIAL_SESSION",n)),this._debug("INITIAL_SESSION","callback id",e,"session",n)}catch(i){await(null===(n=this.stateChangeEmitters.get(e))||void 0===n?void 0:n.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",i),console.error(i)}}))}async resetPasswordForEmail(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=null,n=null;"pkce"===this.flowType&&([r,n]=await Sn(this.storage,this.storageKey,!0));try{return await Wn(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:r,code_challenge_method:n,gotrue_meta_security:{captcha_token:t.captchaToken}},headers:this.headers,redirectTo:t.redirectTo})}catch(i){if(In(i))return{data:null,error:i};throw i}}async getUserIdentities(){var e;try{const{data:t,error:r}=await this.getUser();if(r)throw r;return{data:{identities:null!==(e=t.user.identities)&&void 0!==e?e:[]},error:null}}catch(t){if(In(t))return{data:null,error:t};throw t}}async linkIdentity(e){var t;try{const{data:r,error:n}=await this._useSession((async t=>{var r,n,i,o,s;const{data:a,error:l}=t;if(l)throw l;const c=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:null===(r=e.options)||void 0===r?void 0:r.redirectTo,scopes:null===(n=e.options)||void 0===n?void 0:n.scopes,queryParams:null===(i=e.options)||void 0===i?void 0:i.queryParams,skipBrowserRedirect:!0});return await Wn(this.fetch,"GET",c,{headers:this.headers,jwt:null!==(s=null===(o=a.session)||void 0===o?void 0:o.access_token)&&void 0!==s?s:void 0})}));if(n)throw n;return pn()&&!(null===(t=e.options)||void 0===t?void 0:t.skipBrowserRedirect)&&window.location.assign(null===r||void 0===r?void 0:r.url),{data:{provider:e.provider,url:null===r||void 0===r?void 0:r.url},error:null}}catch(r){if(In(r))return{data:{provider:e.provider,url:null},error:r};throw r}}async unlinkIdentity(e){try{return await this._useSession((async t=>{var r,n;const{data:i,error:o}=t;if(o)throw o;return await Wn(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:null!==(n=null===(r=i.session)||void 0===r?void 0:r.access_token)&&void 0!==n?n:void 0})}))}catch(t){if(In(t))return{data:null,error:t};throw t}}async _refreshAccessToken(e){const t=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(t,"begin");try{const r=Date.now();return await function(e,t){const r=new Promise(((r,n)=>{(async()=>{for(let i=0;i<1/0;i++)try{const n=await e(i);if(!t(i,null,n))return void r(n)}catch(o){if(!t(i,o))return void n(o)}})()}));return r}((async r=>(r>0&&await async function(e){return await new Promise((t=>{setTimeout((()=>t(null)),e)}))}(200*Math.pow(2,r-1)),this._debug(t,"refreshing attempt",r),await Wn(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:Gn}))),((e,t)=>{const n=200*Math.pow(2,e);return t&&Bn(t)&&Date.now()+n-r<cn}))}catch(r){if(this._debug(t,"error",r),In(r))return{data:{session:null,user:null},error:r};throw r}finally{this._debug(t,"end")}}_isValidSession(e){return"object"===typeof e&&null!==e&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,t){const r=await this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:t.redirectTo,scopes:t.scopes,queryParams:t.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",t,"url",r),pn()&&!t.skipBrowserRedirect&&window.location.assign(r),{data:{provider:e,url:r},error:null}}async _recoverAndRefresh(){var e;const t="#_recoverAndRefresh()";this._debug(t,"begin");try{const r=await bn(this.storage,this.storageKey);if(this._debug(t,"session from storage",r),!this._isValidSession(r))return this._debug(t,"session is not valid"),void(null!==r&&await this._removeSession());const n=1e3*(null!==(e=r.expires_at)&&void 0!==e?e:1/0)-Date.now()<un;if(this._debug(t,`session has${n?"":" not"} expired with margin of 90000s`),n){if(this.autoRefreshToken&&r.refresh_token){const{error:e}=await this._callRefreshToken(r.refresh_token);e&&(console.error(e),Bn(e)||(this._debug(t,"refresh failed with a non-retryable error, removing the session",e),await this._removeSession()))}}else await this._notifyAllSubscribers("SIGNED_IN",r)}catch(r){return this._debug(t,"error",r),void console.error(r)}finally{this._debug(t,"end")}}async _callRefreshToken(e){var t,r;if(!e)throw new Rn;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const n=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(n,"begin");try{this.refreshingDeferred=new _n;const{data:t,error:r}=await this._refreshAccessToken(e);if(r)throw r;if(!t.session)throw new Rn;await this._saveSession(t.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",t.session);const n={session:t.session,error:null};return this.refreshingDeferred.resolve(n),n}catch(i){if(this._debug(n,"error",i),In(i)){const e={session:null,error:i};return Bn(i)||await this._removeSession(),null===(t=this.refreshingDeferred)||void 0===t||t.resolve(e),e}throw null===(r=this.refreshingDeferred)||void 0===r||r.reject(i),i}finally{this.refreshingDeferred=null,this._debug(n,"end")}}async _notifyAllSubscribers(e,t){let r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];const n=`#_notifyAllSubscribers(${e})`;this._debug(n,"begin",t,`broadcast = ${r}`);try{this.broadcastChannel&&r&&this.broadcastChannel.postMessage({event:e,session:t});const n=[],i=Array.from(this.stateChangeEmitters.values()).map((async r=>{try{await r.callback(e,t)}catch(o){n.push(o)}}));if(await Promise.all(i),n.length>0){for(let e=0;e<n.length;e+=1)console.error(n[e]);throw n[0]}}finally{this._debug(n,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0,await wn(this.storage,this.storageKey,e)}async _removeSession(){this._debug("#_removeSession()"),await vn(this.storage,this.storageKey),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&pn()&&(null===window||void 0===window?void 0:window.removeEventListener)&&window.removeEventListener("visibilitychange",e)}catch(o){console.error("removing visibilitychange callback failed",o)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval((()=>this._autoRefreshTokenTick()),cn);this.autoRefreshTicker=e,e&&"object"===typeof e&&"function"===typeof e.unref?e.unref():"undefined"!==typeof Deno&&"function"===typeof Deno.unrefTimer&&Deno.unrefTimer(e),setTimeout((async()=>{await this.initializePromise,await this._autoRefreshTokenTick()}),0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,(async()=>{try{const e=Date.now();try{return await this._useSession((async t=>{const{data:{session:r}}=t;if(!r||!r.refresh_token||!r.expires_at)return void this._debug("#_autoRefreshTokenTick()","no session");const n=Math.floor((1e3*r.expires_at-e)/cn);this._debug("#_autoRefreshTokenTick()",`access token expires in ${n} ticks, a tick lasts 30000ms, refresh threshold is 3 ticks`),n<=3&&await this._callRefreshToken(r.refresh_token)}))}catch(o){console.error("Auto refresh tick failed with error. This is likely a transient error.",o)}}finally{this._debug("#_autoRefreshTokenTick()","end")}}))}catch(o){if(!(o.isAcquireTimeout||o instanceof ri))throw o;this._debug("auto refresh token tick lock not available")}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!pn()||!(null===window||void 0===window?void 0:window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),null===window||void 0===window||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){const t=`#_onVisibilityChanged(${e})`;this._debug(t,"visibilityState",document.visibilityState),"visible"===document.visibilityState?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(-1,(async()=>{"visible"===document.visibilityState?await this._recoverAndRefresh():this._debug(t,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting")})))):"hidden"===document.visibilityState&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,t,r){const n=[`provider=${encodeURIComponent(t)}`];if((null===r||void 0===r?void 0:r.redirectTo)&&n.push(`redirect_to=${encodeURIComponent(r.redirectTo)}`),(null===r||void 0===r?void 0:r.scopes)&&n.push(`scopes=${encodeURIComponent(r.scopes)}`),"pkce"===this.flowType){const[e,t]=await Sn(this.storage,this.storageKey),r=new URLSearchParams({code_challenge:`${encodeURIComponent(e)}`,code_challenge_method:`${encodeURIComponent(t)}`});n.push(r.toString())}if(null===r||void 0===r?void 0:r.queryParams){const e=new URLSearchParams(r.queryParams);n.push(e.toString())}return(null===r||void 0===r?void 0:r.skipBrowserRedirect)&&n.push(`skip_http_redirect=${r.skipBrowserRedirect}`),`${e}?${n.join("&")}`}async _unenroll(e){try{return await this._useSession((async t=>{var r;const{data:n,error:i}=t;return i?{data:null,error:i}:await Wn(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:null===(r=null===n||void 0===n?void 0:n.session)||void 0===r?void 0:r.access_token})}))}catch(t){if(In(t))return{data:null,error:t};throw t}}async _enroll(e){try{return await this._useSession((async t=>{var r,n;const{data:i,error:o}=t;if(o)return{data:null,error:o};const s=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},"phone"===e.factorType?{phone:e.phone}:{issuer:e.issuer}),{data:a,error:l}=await Wn(this.fetch,"POST",`${this.url}/factors`,{body:s,headers:this.headers,jwt:null===(r=null===i||void 0===i?void 0:i.session)||void 0===r?void 0:r.access_token});return l?{data:null,error:l}:("totp"===e.factorType&&(null===(n=null===a||void 0===a?void 0:a.totp)||void 0===n?void 0:n.qr_code)&&(a.totp.qr_code=`data:image/svg+xml;utf-8,${a.totp.qr_code}`),{data:a,error:null})}))}catch(t){if(In(t))return{data:null,error:t};throw t}}async _verify(e){return this._acquireLock(-1,(async()=>{try{return await this._useSession((async t=>{var r;const{data:n,error:i}=t;if(i)return{data:null,error:i};const{data:o,error:s}=await Wn(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:{code:e.code,challenge_id:e.challengeId},headers:this.headers,jwt:null===(r=null===n||void 0===n?void 0:n.session)||void 0===r?void 0:r.access_token});return s?{data:null,error:s}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+o.expires_in},o)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",o),{data:o,error:s})}))}catch(t){if(In(t))return{data:null,error:t};throw t}}))}async _challenge(e){return this._acquireLock(-1,(async()=>{try{return await this._useSession((async t=>{var r;const{data:n,error:i}=t;return i?{data:null,error:i}:await Wn(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{body:{channel:e.channel},headers:this.headers,jwt:null===(r=null===n||void 0===n?void 0:n.session)||void 0===r?void 0:r.access_token})}))}catch(t){if(In(t))return{data:null,error:t};throw t}}))}async _challengeAndVerify(e){const{data:t,error:r}=await this._challenge({factorId:e.factorId});return r?{data:null,error:r}:await this._verify({factorId:e.factorId,challengeId:t.id,code:e.code})}async _listFactors(){const{data:{user:e},error:t}=await this.getUser();if(t)return{data:null,error:t};const r=(null===e||void 0===e?void 0:e.factors)||[],n=r.filter((e=>"totp"===e.factor_type&&"verified"===e.status)),i=r.filter((e=>"phone"===e.factor_type&&"verified"===e.status));return{data:{all:r,totp:n,phone:i},error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,(async()=>await this._useSession((async e=>{var t,r;const{data:{session:n},error:i}=e;if(i)return{data:null,error:i};if(!n)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const o=this._decodeJWT(n.access_token);let s=null;o.aal&&(s=o.aal);let a=s;(null!==(r=null===(t=n.user.factors)||void 0===t?void 0:t.filter((e=>"verified"===e.status)))&&void 0!==r?r:[]).length>0&&(a="aal2");return{data:{currentLevel:s,nextLevel:a,currentAuthenticationMethods:o.amr||[]},error:null}}))))}}ai.nextInstanceID=0;const li=ai;class ci extends li{constructor(e){super(e)}}var ui=function(e,t,r,n){return new(r||(r=Promise))((function(i,s){function a(e){try{c(n.next(e))}catch(o){s(o)}}function l(e){try{c(n.throw(e))}catch(o){s(o)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(a,l)}c((n=n.apply(e,t||[])).next())}))};class di{constructor(e,t,r){var n,i,o;if(this.supabaseUrl=e,this.supabaseKey=t,!e)throw new Error("supabaseUrl is required.");if(!t)throw new Error("supabaseKey is required.");const s=e.replace(/\/$/,"");this.realtimeUrl=`${s}/realtime/v1`.replace(/^http/i,"ws"),this.authUrl=`${s}/auth/v1`,this.storageUrl=`${s}/storage/v1`,this.functionsUrl=`${s}/functions/v1`;const a=`sb-${new URL(this.authUrl).hostname.split(".")[0]}-auth-token`,l=function(e,t){const{db:r,auth:n,realtime:i,global:o}=e,{db:s,auth:a,realtime:l,global:c}=t,u={db:Object.assign(Object.assign({},s),r),auth:Object.assign(Object.assign({},a),n),realtime:Object.assign(Object.assign({},l),i),global:Object.assign(Object.assign({},c),o),accessToken:()=>an(this,void 0,void 0,(function*(){return""}))};return e.accessToken?u.accessToken=e.accessToken:delete u.accessToken,u}(null!==r&&void 0!==r?r:{},{db:Jr,realtime:tn,auth:Object.assign(Object.assign({},en),{storageKey:a}),global:Kr});this.storageKey=null!==(n=l.auth.storageKey)&&void 0!==n?n:"",this.headers=null!==(i=l.global.headers)&&void 0!==i?i:{},l.accessToken?(this.accessToken=l.accessToken,this.auth=new Proxy({},{get:(e,t)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(t)} is not possible`)}})):this.auth=this._initSupabaseAuthClient(null!==(o=l.auth)&&void 0!==o?o:{},this.headers,l.global.fetch),this.fetch=sn(t,this._getAccessToken.bind(this),l.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},l.realtime)),this.rest=new Xt(`${s}/rest/v1`,{headers:this.headers,schema:l.db.schema,fetch:this.fetch}),l.accessToken||this._listenForAuthEvents()}get functions(){return new Gt(this.functionsUrl,{headers:this.headers,customFetch:this.fetch})}get storage(){return new Qr(this.storageUrl,this.headers,this.fetch)}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return this.rest.rpc(e,t,r)}channel(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{config:{}};return this.realtime.channel(e,t)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var e,t;return ui(this,void 0,void 0,(function*(){if(this.accessToken)return yield this.accessToken();const{data:r}=yield this.auth.getSession();return null!==(t=null===(e=r.session)||void 0===e?void 0:e.access_token)&&void 0!==t?t:null}))}_initSupabaseAuthClient(e,t,r){let{autoRefreshToken:n,persistSession:i,detectSessionInUrl:o,storage:s,storageKey:a,flowType:l,lock:c,debug:u}=e;const d={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new ci({url:this.authUrl,headers:Object.assign(Object.assign({},d),t),storageKey:a,autoRefreshToken:n,persistSession:i,detectSessionInUrl:o,storage:s,flowType:l,lock:c,debug:u,fetch:r,hasCustomAuthorizationHeader:"Authorization"in this.headers})}_initRealtimeClient(e){return new Nr(this.realtimeUrl,Object.assign(Object.assign({},e),{params:Object.assign({apikey:this.supabaseKey},null===e||void 0===e?void 0:e.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange(((e,t)=>{this._handleTokenChanged(e,"CLIENT",null===t||void 0===t?void 0:t.access_token)}))}_handleTokenChanged(e,t,r){"TOKEN_REFRESHED"!==e&&"SIGNED_IN"!==e||this.changedAccessToken===r?"SIGNED_OUT"===e&&(this.realtime.setAuth(),"STORAGE"==t&&this.auth.signOut(),this.changedAccessToken=void 0):this.changedAccessToken=r}}const hi=(e,t,r)=>new di(e,t,r),fi=hi("https://qlkxukzmtkkxarcqzysn.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InFsa3h1a3ptdGtreGFyY3F6eXNuIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDEyNTkzODcsImV4cCI6MjA1NjgzNTM4N30.60ab2zNHSUkm23RR_NUo9-yDlUo3lcqOUnIF4M-0K0o"),pi=(0,t.createContext)({connected:!1,inventoryData:null,scanBarcode:()=>Promise.resolve(null),updateInventory:()=>Promise.resolve(null),loading:!0}),mi=e=>{let{children:r}=e;const[n,i]=(0,t.useState)(!1),[o,s]=(0,t.useState)(null),[a,l]=(0,t.useState)(!0),{user:c}=Lt(),[u,d]=(0,t.useState)([]);(0,t.useEffect)((()=>{if(!c)return;l(!0);let e=!0;console.log("Initializing Supabase data connection");(async()=>{try{console.log("\ud83d\udcca Fetching inventory data from Supabase...");const{data:t,error:r}=await fi.from("materials").select("*");if(r)throw r;console.log(`\u2705 Fetched ${(null===t||void 0===t?void 0:t.length)||0} materials from Supabase`);const{data:n,error:o}=await fi.from("orders").select("*").order("order_date",{ascending:!1}).limit(10);if(o)throw o;console.log(`\u2705 Fetched ${(null===n||void 0===n?void 0:n.length)||0} orders from Supabase`);const a=t.filter((e=>e.current_stock<e.reorder_level)).length;console.log(`\ud83d\udcc9 Low stock items: ${a}`),e&&(s({materials:t||[],orders:n||[],stats:{totalMaterials:t.length,totalEquipment:0,pendingOrders:0,lowStockItems:a}}),l(!1),i(!0),ne.success("Connected to inventory database"))}catch(t){console.error("\u274c Error fetching inventory data:",t),e&&(l(!1),ne.error("Failed to load inventory data."))}})(),console.log("\ud83d\udd04 Setting up Supabase real-time subscriptions...");const t=fi.channel("materials-changes").on("postgres_changes",{event:"*",schema:"public",table:"materials"},(e=>{console.log("\ud83d\udcca Materials changed:",e.eventType),s((t=>{if(!t)return t;let r=[...t.materials];"INSERT"===e.eventType?(console.log("\u2795 New material added:",e.new.name),r.push(e.new)):"UPDATE"===e.eventType?(console.log("\ud83d\udd04 Material updated:",e.new.name),r=r.map((t=>t.id===e.new.id?e.new:t))):"DELETE"===e.eventType&&(console.log("\u274c Material deleted:",e.old.name),r=r.filter((t=>t.id!==e.old.id)));const n=r.filter((e=>e.current_stock<e.reorder_level)).length;return{...t,materials:r,stats:{...t.stats,lowStockItems:n}}})),"UPDATE"===e.eventType&&ne.success(`Inventory updated: ${e.new.name}`)})).subscribe(),r=fi.channel("orders-changes").on("postgres_changes",{event:"*",schema:"public",table:"orders"},(e=>{console.log("Orders changed:",e),s((t=>{if(!t)return t;let r=[...t.orders];"INSERT"===e.eventType?(r.unshift(e.new),r=r.slice(0,10)):"UPDATE"===e.eventType?r=r.map((t=>t.id===e.new.id?e.new:t)):"DELETE"===e.eventType&&(r=r.filter((t=>t.id!==e.old.id)));const n=r.filter((e=>"Pending"===e.status)).length;return{...t,orders:r,stats:{...t.stats,pendingOrders:n}}}))})).subscribe();return d([t,r]),()=>{console.log("Cleaning up Supabase subscriptions"),e=!1,u.forEach((e=>{e&&fi.removeChannel(e)}))}}),[c]),(0,t.useEffect)((()=>{if(o)try{localStorage.setItem("inventoryData",JSON.stringify(o)),console.log("\ud83d\udce6 Cached inventory data to localStorage")}catch(e){console.error("\u274c Error caching inventory data:",e)}}),[o]);return(0,Dt.jsx)(pi.Provider,{value:{connected:n,inventoryData:o,scanBarcode:async e=>{try{ne.loading("Scanning barcode...",{id:"scan-barcode"});const{data:t,error:r}=await fi.from("materials").select("*").eq("sku",e).single();if(ne.dismiss("scan-barcode"),r)throw new Error("Material not found");return t}catch(t){throw console.error("Error scanning barcode:",t),new Error(t.message||"Failed to scan barcode")}},updateInventory:async(e,t)=>{try{ne.loading("Updating inventory...",{id:"update-inventory"});const{data:r,error:n}=await fi.from("materials").select("*").eq("id",e).single();if(n)throw n;const i=r.current_stock+t;if(i<0)throw ne.dismiss("update-inventory"),new Error("Insufficient stock");const{data:o,error:s}=await fi.from("materials").update({current_stock:i}).eq("id",e).select().single();if(s)throw s;const{error:a}=await fi.from("inventory_transactions").insert([{material_id:e,transaction_type:t>0?"add":"remove",quantity:Math.abs(t),user_id:null===c||void 0===c?void 0:c.id,notes:"Updated via barcode scanner"}]);return a&&console.error("Error logging transaction:",a),ne.dismiss("update-inventory"),o}catch(r){throw ne.dismiss("update-inventory"),console.error("Error updating inventory:",r),new Error(r.message||"Failed to update inventory")}},loading:a},children:r})},gi=e=>{let{children:r}=e;const{isAuthenticated:n,isLoading:i,user:o,login:s}=Lt(),a=Ze(),[l,c]=(0,t.useState)(!1),[u,d]=(0,t.useState)(!0);return(0,t.useEffect)((()=>{console.log("ProtectedRoute Auth Status:",{isAuthenticated:n,isLoading:i,hasUser:!!o,userData:o,hasToken:!!localStorage.getItem("authToken"),hasStoredUser:!!localStorage.getItem("userData")});(async()=>{try{if(n||i)n&&c(!0);else{const e=localStorage.getItem("authToken"),t=localStorage.getItem("userData");if(e&&t){console.log("Found token and userData in localStorage, trying direct recovery");const t=jt(e);t?(console.log("Token is valid, setting user directly"),await s("","",t),c(!0)):(console.log("Token validation failed"),localStorage.removeItem("authToken"),localStorage.removeItem("userData"))}}}catch(e){console.error("Direct auth recovery failed:",e)}finally{d(!1)}})()}),[n,i,o,s]),i||u?(console.log("Auth is still loading..."),(0,Dt.jsx)("div",{className:"flex justify-center items-center h-screen",children:(0,Dt.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-700"})})):n||l?(console.log("Protected route rendering children"),(0,Dt.jsx)(Dt.Fragment,{children:r})):(console.log("Not authenticated, redirecting to login"),(0,Dt.jsx)(gt,{to:"/login",state:{from:a},replace:!0}))},yi=()=>(0,Dt.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-6 h-6",children:(0,Dt.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.25 12l8.954-8.955c.44-.439 1.152-.439 1.591 0L21.75 12M4.5 9.75v10.125c0 .621.504 1.125 1.125 1.125H9.75v-4.875c0-.621.504-1.125 1.125-1.125h2.25c.621 0 1.125.504 1.125 1.125V21h4.125c.621 0 1.125-.504 1.125-1.125V9.75M8.25 21h8.25"})}),wi=()=>(0,Dt.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-6 h-6",children:(0,Dt.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M21 7.5l-9-5.25L3 7.5m18 0l-9 5.25m9-5.25v9l-9 5.25M3 7.5l9 5.25M3 7.5v9l9 5.25m0-9v9"})}),bi=()=>(0,Dt.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-6 h-6",children:(0,Dt.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M11.42 15.17L17.25 21A2.652 2.652 0 0021 17.25l-5.877-5.877M11.42 15.17l2.496-3.03c.317-.384.74-.626 1.208-.766M11.42 15.17l-4.655 5.653a2.548 2.548 0 11-3.586-3.586l6.837-5.63m5.108-.233c.55-.164 1.163-.188 1.743-.14a4.5 4.5 0 004.486-6.336l-3.276 3.277a3.004 3.004 0 01-2.25-2.25l3.276-3.276a4.5 4.5 0 00-6.336 4.486c.091 1.076-.071 2.264-.904 2.95l-.102.085m-1.745 1.437L5.909 7.5H4.5L2.25 3.75l1.5-1.5L7.5 4.5v1.409l4.26 4.26m-1.745 1.437l1.745-1.437m6.615 8.206L15.75 15.75M4.867 19.125h.008v.008h-.008v-.008z"})}),vi=()=>(0,Dt.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-6 h-6",children:(0,Dt.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.25 3h1.386c.51 0 .955.343 1.087.835l.383 1.437M7.5 14.25a3 3 0 00-3 3h15.75m-12.75-3h11.218c1.121-2.3 2.1-4.684 2.924-7.138a60.114 60.114 0 00-16.536-1.84M7.5 14.25L5.106 5.272M6 20.25a.75.75 0 11-1.5 0 .75.75 0 011.5 0zm12.75 0a.75.75 0 11-1.5 0 .75.75 0 011.5 0z"})}),_i=()=>(0,Dt.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-6 h-6",children:(0,Dt.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 13.125C3 12.504 3.504 12 4.125 12h2.25c.621 0 1.125.504 1.125 1.125v6.75C7.5 20.496 6.996 21 6.375 21h-2.25A1.125 1.125 0 013 19.875v-6.75zM9.75 8.625c0-.621.504-1.125 1.125-1.125h2.25c.621 0 1.125.504 1.125 1.125v11.25c0 .621-.504 1.125-1.125 1.125h-2.25a1.125 1.125 0 01-1.125-1.125V8.625zM16.5 4.125c0-.621.504-1.125 1.125-1.125h2.25C20.496 3 21 3.504 21 4.125v15.75c0 .621-.504 1.125-1.125 1.125h-2.25a1.125 1.125 0 01-1.125-1.125V4.125z"})}),xi=()=>(0,Dt.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-6 h-6",children:[(0,Dt.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9.568 3H5.25A2.25 2.25 0 003 5.25v4.318c0 .597.237 1.17.659 1.591l9.581 9.581c.699.699 1.78.872 2.607.33a18.095 18.095 0 005.223-5.223c.542-.827.369-1.908-.33-2.607L11.16 3.66A2.25 2.25 0 009.568 3z"}),(0,Dt.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 6h.008v.008H6V6z"})]}),Ei=()=>(0,Dt.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-6 h-6",children:(0,Dt.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M8.25 18.75a1.5 1.5 0 01-3 0m3 0a1.5 1.5 0 00-3 0m3 0h6m-9 0H3.375a1.125 1.125 0 01-1.125-1.125V14.25m17.25 4.5a1.5 1.5 0 01-3 0m3 0a1.5 1.5 0 00-3 0m3 0h1.125c.621 0 1.129-.504 1.09-1.124a17.902 17.902 0 00-3.213-9.193 2.056 2.056 0 00-1.58-.86H14.25M16.5 18.75h-2.25m0-11.177v-.958c0-.568-.422-1.048-.987-1.106a48.554 48.554 0 00-10.026 0 1.106 1.106 0 00-.987 1.106v7.635m12-6.677v6.677m0 4.5v-4.5m0 0h-12"})}),Ci=()=>(0,Dt.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-6 h-6",children:(0,Dt.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M17.982 18.725A7.488 7.488 0 0012 15.75a7.488 7.488 0 00-5.982 2.975m11.963 0a9 9 0 10-11.963 0m11.963 0A8.966 8.966 0 0112 21a8.966 8.966 0 01-5.982-2.275M15 9.75a3 3 0 11-6 0 3 3 0 016 0z"})}),Si=()=>(0,Dt.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-6 h-6",children:(0,Dt.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.75 9V5.25A2.25 2.25 0 0013.5 3h-6a2.25 2.25 0 00-2.25 2.25v13.5A2.25 2.25 0 007.5 21h6a2.25 2.25 0 002.25-2.25V15M12 9l-3 3m0 0l3 3m-3-3h12.75"})}),Ai=()=>(0,Dt.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-6 h-6",children:(0,Dt.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3.75 6.75h16.5M3.75 12h16.5m-16.5 5.25h16.5"})}),Ni=()=>(0,Dt.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-6 h-6",children:(0,Dt.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18L18 6M6 6l12 12"})}),Ii="PrintPress Inventory",Ti=()=>{const[e,r]=(0,t.useState)(!1),{user:n,logout:i}=Lt(),o=Ze(),s=[{name:"Dashboard",href:"/",icon:yi},{name:"Materials",href:"/materials",icon:wi},{name:"Equipment",href:"/equipment",icon:bi},{name:"Orders",href:"/orders",icon:vi},{name:"Categories",href:"/categories",icon:xi},{name:"Suppliers",href:"/suppliers",icon:Ei},{name:"Reports",href:"/reports",icon:_i}],a=e=>"/"===e&&"/"===o.pathname||!("/"===e||!o.pathname.startsWith(e));return(0,Dt.jsxs)("div",{className:"min-h-screen bg-gray-100",children:[(0,Dt.jsxs)("div",{className:"fixed inset-0 z-40 lg:hidden "+(e?"block":"hidden"),children:[(0,Dt.jsx)("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-75",onClick:()=>r(!1)}),(0,Dt.jsxs)("div",{className:"fixed inset-y-0 left-0 w-64 flex flex-col bg-white shadow-xl",children:[(0,Dt.jsxs)("div",{className:"flex items-center justify-between h-16 px-4 border-b border-gray-200",children:[(0,Dt.jsx)("div",{className:"text-xl font-semibold text-gray-800",children:Ii}),(0,Dt.jsx)("button",{onClick:()=>r(!1),className:"text-gray-500 hover:text-gray-700",children:(0,Dt.jsx)(Ni,{})})]}),(0,Dt.jsx)("div",{className:"flex-1 overflow-y-auto",children:(0,Dt.jsx)("nav",{className:"py-4 space-y-1",children:s.map((e=>(0,Dt.jsxs)(Tt,{to:e.href,className:"group flex items-center px-4 py-2 text-sm font-medium "+(a(e.href)?"bg-blue-50 text-blue-700":"text-gray-700 hover:bg-gray-100"),onClick:()=>r(!1),children:[(0,Dt.jsx)(e.icon,{}),(0,Dt.jsx)("span",{className:"ml-3",children:e.name})]},e.name)))})}),(0,Dt.jsx)("div",{className:"border-t border-gray-200 p-4",children:(0,Dt.jsxs)("div",{className:"flex items-center justify-between",children:[(0,Dt.jsxs)("div",{className:"flex items-center",children:[(0,Dt.jsx)(Ci,{}),(0,Dt.jsxs)("div",{className:"ml-3",children:[(0,Dt.jsx)("p",{className:"text-sm font-medium text-gray-700",children:null===n||void 0===n?void 0:n.username}),(0,Dt.jsx)("p",{className:"text-xs text-gray-500 capitalize",children:null===n||void 0===n?void 0:n.role})]})]}),(0,Dt.jsx)("button",{onClick:i,className:"ml-4 px-2 py-1 text-sm text-red-600 hover:text-red-800",children:(0,Dt.jsx)(Si,{})})]})})]})]}),(0,Dt.jsx)("div",{className:"hidden lg:fixed lg:inset-y-0 lg:flex lg:w-64 lg:flex-col",children:(0,Dt.jsxs)("div",{className:"flex flex-col flex-1 min-h-0 bg-white shadow",children:[(0,Dt.jsx)("div",{className:"flex items-center h-16 px-4 border-b border-gray-200",children:(0,Dt.jsx)("div",{className:"text-xl font-semibold text-gray-800",children:Ii})}),(0,Dt.jsx)("div",{className:"flex-1 overflow-y-auto",children:(0,Dt.jsx)("nav",{className:"py-4 space-y-1",children:s.map((e=>(0,Dt.jsxs)(Tt,{to:e.href,className:"group flex items-center px-4 py-2 text-sm font-medium "+(a(e.href)?"bg-blue-50 text-blue-700":"text-gray-700 hover:bg-gray-100"),children:[(0,Dt.jsx)(e.icon,{}),(0,Dt.jsx)("span",{className:"ml-3",children:e.name})]},e.name)))})}),(0,Dt.jsx)("div",{className:"border-t border-gray-200 p-4",children:(0,Dt.jsxs)("div",{className:"flex items-center justify-between",children:[(0,Dt.jsxs)("div",{className:"flex items-center",children:[(0,Dt.jsx)(Ci,{}),(0,Dt.jsxs)("div",{className:"ml-3",children:[(0,Dt.jsx)("p",{className:"text-sm font-medium text-gray-700",children:null===n||void 0===n?void 0:n.username}),(0,Dt.jsx)("p",{className:"text-xs text-gray-500 capitalize",children:null===n||void 0===n?void 0:n.role})]})]}),(0,Dt.jsx)("button",{onClick:i,className:"ml-4 px-2 py-1 text-sm text-red-600 hover:text-red-800",children:(0,Dt.jsx)(Si,{})})]})})]})}),(0,Dt.jsxs)("div",{className:"lg:pl-64 flex flex-col",children:[(0,Dt.jsx)("header",{className:"bg-white shadow lg:hidden",children:(0,Dt.jsxs)("div",{className:"flex items-center justify-between h-16 px-4",children:[(0,Dt.jsx)("button",{onClick:()=>r(!0),className:"text-gray-500 hover:text-gray-700 focus:outline-none",children:(0,Dt.jsx)(Ai,{})}),(0,Dt.jsx)("div",{className:"text-xl font-semibold text-gray-800",children:Ii}),(0,Dt.jsx)("div",{className:"w-6"})," "]})}),(0,Dt.jsx)("main",{className:"flex-1",children:(0,Dt.jsx)(yt,{})})]})]})},Oi=()=>{const[e,r]=(0,t.useState)(""),[n,i]=(0,t.useState)(""),[o,s]=(0,t.useState)(!1),{login:a}=Lt(),l=Je();return(0,Dt.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 py-12 px-4 sm:px-6 lg:px-8",children:(0,Dt.jsxs)("div",{className:"max-w-md w-full space-y-8",children:[(0,Dt.jsxs)("div",{children:[(0,Dt.jsx)("h2",{className:"mt-6 text-center text-3xl font-extrabold text-gray-900",children:"PrintPress Inventory"}),(0,Dt.jsx)("p",{className:"mt-2 text-center text-sm text-gray-600",children:"Sign in to your account"}),(0,Dt.jsxs)("div",{className:"mt-2 text-center text-xs text-gray-500",children:[(0,Dt.jsx)("p",{children:"For testing use:"}),(0,Dt.jsx)("p",{children:"Admin: admin@printpress.com / admin123"}),(0,Dt.jsx)("p",{children:"User: user@printpress.com / user123"})]})]}),(0,Dt.jsxs)("form",{className:"mt-8 space-y-6",onSubmit:async t=>{if(t.preventDefault(),e&&n){s(!0);try{console.log("Login form submitted with email:",e);const t=await Mt(e,n);console.log("Login successful, received token and user data:",t.user),localStorage.setItem("authToken",t.token),localStorage.setItem("userData",JSON.stringify(t.user)),await a(e,n,t.user),setTimeout((()=>{ne.success("Login successful!"),l("/")}),300)}catch(r){console.error("Login error details:",r.message),ne.error(r.message||"Login failed")}finally{s(!1)}}else ne.error("Please enter both email and password")},children:[(0,Dt.jsxs)("div",{className:"rounded-md shadow-sm -space-y-px",children:[(0,Dt.jsxs)("div",{children:[(0,Dt.jsx)("label",{htmlFor:"email",className:"sr-only",children:"Email Address"}),(0,Dt.jsx)("input",{id:"email",name:"email",type:"email",required:!0,className:"appearance-none rounded-none relative block w-full px-3 py-2 border border-gray-300 placeholder-gray-500 text-gray-900 rounded-t-md focus:outline-none focus:ring-blue-500 focus:border-blue-500 focus:z-10 sm:text-sm",placeholder:"Email Address",value:e,onChange:e=>r(e.target.value),disabled:o})]}),(0,Dt.jsxs)("div",{children:[(0,Dt.jsx)("label",{htmlFor:"password",className:"sr-only",children:"Password"}),(0,Dt.jsx)("input",{id:"password",name:"password",type:"password",required:!0,className:"appearance-none rounded-none relative block w-full px-3 py-2 border border-gray-300 placeholder-gray-500 text-gray-900 rounded-b-md focus:outline-none focus:ring-blue-500 focus:border-blue-500 focus:z-10 sm:text-sm",placeholder:"Password",value:n,onChange:e=>i(e.target.value),disabled:o})]})]}),(0,Dt.jsx)("div",{children:(0,Dt.jsxs)("button",{type:"submit",className:"group relative w-full flex justify-center py-2 px-4 border border-transparent text-sm font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",disabled:o,children:[o?(0,Dt.jsx)("span",{className:"absolute left-0 inset-y-0 flex items-center pl-3",children:(0,Dt.jsx)("div",{className:"h-5 w-5 border-t-2 border-b-2 border-white rounded-full animate-spin"})}):null,"Sign in"]})})]})]})})},ki=e=>{let{title:t,value:r,icon:n,bgColor:i}=e;return(0,Dt.jsx)("div",{className:`${i} rounded-lg p-6 shadow-sm`,children:(0,Dt.jsxs)("div",{className:"flex justify-between items-center",children:[(0,Dt.jsxs)("div",{children:[(0,Dt.jsx)("p",{className:"text-sm font-medium text-gray-500",children:t}),(0,Dt.jsx)("p",{className:"text-3xl font-semibold mt-2",children:r})]}),(0,Dt.jsx)("div",{children:n})]})})},Ri=e=>{let{materials:t}=e;return 0===t.length?(0,Dt.jsx)("p",{className:"text-gray-500",children:"No low stock items to display."}):(0,Dt.jsx)("div",{className:"overflow-hidden",children:(0,Dt.jsx)("ul",{className:"divide-y divide-gray-200",children:t.map((e=>(0,Dt.jsx)("li",{className:"py-3",children:(0,Dt.jsx)(Tt,{to:`/materials/${e.id}`,className:"block hover:bg-gray-50",children:(0,Dt.jsxs)("div",{className:"flex justify-between items-center",children:[(0,Dt.jsxs)("div",{children:[(0,Dt.jsx)("p",{className:"text-sm font-medium text-blue-600",children:e.name}),(0,Dt.jsxs)("p",{className:"text-xs text-gray-500 mt-1",children:["Stock Level: ",e.current_stock," ",e.unit_of_measure||""]})]}),(0,Dt.jsx)("div",{children:(0,Dt.jsx)("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium "+(0===e.current_stock?"bg-red-100 text-red-800":"bg-yellow-100 text-yellow-800"),children:0===e.current_stock?"Out of Stock":`Low Stock (${Math.round(e.current_stock/e.reorder_level*100)}%)`})})]})})},e.id)))})})},Mi=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;return new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR",minimumFractionDigits:t,maximumFractionDigits:t}).format(e)},ji=function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const r="string"===typeof e?new Date(e):e,n={timeZone:"Asia/Kolkata",day:"2-digit",month:"short",year:"numeric"};return t&&(n.hour="2-digit",n.minute="2-digit",n.hour12=!0),new Intl.DateTimeFormat("en-IN",n).format(r)},Di=e=>{let{orders:t}=e;if(0===t.length)return(0,Dt.jsx)("p",{className:"text-gray-500",children:"No recent orders to display."});const r=e=>{switch(e){case"completed":return"bg-green-100 text-green-800";case"in-progress":return"bg-blue-100 text-blue-800";case"pending":return"bg-yellow-100 text-yellow-800";case"cancelled":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}};return(0,Dt.jsx)("div",{className:"overflow-hidden",children:(0,Dt.jsx)("ul",{className:"divide-y divide-gray-200",children:t.map((e=>(0,Dt.jsx)("li",{className:"py-3",children:(0,Dt.jsx)(Tt,{to:`/orders/${e.id}`,className:"block hover:bg-gray-50",children:(0,Dt.jsxs)("div",{className:"flex justify-between items-center",children:[(0,Dt.jsxs)("div",{children:[(0,Dt.jsxs)("p",{className:"text-sm font-medium text-blue-600",children:["Order #",e.id]}),(0,Dt.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:e.customer_name}),(0,Dt.jsx)("p",{className:"text-xs text-gray-400",children:ji(e.order_date)})]}),(0,Dt.jsxs)("div",{className:"flex flex-col items-end",children:[(0,Dt.jsx)("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${r(e.status)}`,children:e.status.charAt(0).toUpperCase()+e.status.slice(1)}),(0,Dt.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:Mi(e.total_amount)})]})]})})},e.id)))})})};var Pi;!function(e){e[e.QR_CODE=0]="QR_CODE",e[e.AZTEC=1]="AZTEC",e[e.CODABAR=2]="CODABAR",e[e.CODE_39=3]="CODE_39",e[e.CODE_93=4]="CODE_93",e[e.CODE_128=5]="CODE_128",e[e.DATA_MATRIX=6]="DATA_MATRIX",e[e.MAXICODE=7]="MAXICODE",e[e.ITF=8]="ITF",e[e.EAN_13=9]="EAN_13",e[e.EAN_8=10]="EAN_8",e[e.PDF_417=11]="PDF_417",e[e.RSS_14=12]="RSS_14",e[e.RSS_EXPANDED=13]="RSS_EXPANDED",e[e.UPC_A=14]="UPC_A",e[e.UPC_E=15]="UPC_E",e[e.UPC_EAN_EXTENSION=16]="UPC_EAN_EXTENSION"}(Pi||(Pi={}));var Li,Bi,Fi=new Map([[Pi.QR_CODE,"QR_CODE"],[Pi.AZTEC,"AZTEC"],[Pi.CODABAR,"CODABAR"],[Pi.CODE_39,"CODE_39"],[Pi.CODE_93,"CODE_93"],[Pi.CODE_128,"CODE_128"],[Pi.DATA_MATRIX,"DATA_MATRIX"],[Pi.MAXICODE,"MAXICODE"],[Pi.ITF,"ITF"],[Pi.EAN_13,"EAN_13"],[Pi.EAN_8,"EAN_8"],[Pi.PDF_417,"PDF_417"],[Pi.RSS_14,"RSS_14"],[Pi.RSS_EXPANDED,"RSS_EXPANDED"],[Pi.UPC_A,"UPC_A"],[Pi.UPC_E,"UPC_E"],[Pi.UPC_EAN_EXTENSION,"UPC_EAN_EXTENSION"]]);function Ui(e){return Object.values(Pi).includes(e)}!function(e){e[e.UNKNOWN=0]="UNKNOWN",e[e.URL=1]="URL"}(Li||(Li={})),function(e){e[e.SCAN_TYPE_CAMERA=0]="SCAN_TYPE_CAMERA",e[e.SCAN_TYPE_FILE=1]="SCAN_TYPE_FILE"}(Bi||(Bi={}));var zi,Hi=function(){function e(){}return e.GITHUB_PROJECT_URL="https://github.com/mebjas/html5-qrcode",e.SCAN_DEFAULT_FPS=2,e.DEFAULT_DISABLE_FLIP=!1,e.DEFAULT_REMEMBER_LAST_CAMERA_USED=!0,e.DEFAULT_SUPPORTED_SCAN_TYPE=[Bi.SCAN_TYPE_CAMERA,Bi.SCAN_TYPE_FILE],e}(),Vi=function(){function e(e,t){this.format=e,this.formatName=t}return e.prototype.toString=function(){return this.formatName},e.create=function(t){if(!Fi.has(t))throw"".concat(t," not in html5QrcodeSupportedFormatsTextMap");return new e(t,Fi.get(t))},e}(),Wi=function(){function e(){}return e.createFromText=function(e){return{decodedText:e,result:{text:e}}},e.createFromQrcodeResult=function(e){return{decodedText:e.text,result:e}},e}();!function(e){e[e.UNKWOWN_ERROR=0]="UNKWOWN_ERROR",e[e.IMPLEMENTATION_ERROR=1]="IMPLEMENTATION_ERROR",e[e.NO_CODE_FOUND_ERROR=2]="NO_CODE_FOUND_ERROR"}(zi||(zi={}));var Gi=function(){function e(){}return e.createFrom=function(e){return{errorMessage:e,type:zi.UNKWOWN_ERROR}},e}(),$i=function(){function e(e){this.verbose=e}return e.prototype.log=function(e){this.verbose&&console.log(e)},e.prototype.warn=function(e){this.verbose&&console.warn(e)},e.prototype.logError=function(e,t){(this.verbose||!0===t)&&console.error(e)},e.prototype.logErrors=function(e){if(0===e.length)throw"Logger#logError called without arguments";this.verbose&&console.error(e)},e}();function Xi(e){return"undefined"===typeof e||null===e}var Yi,qi=function(){function e(){}return e.codeParseError=function(e){return"QR code parse error, error = ".concat(e)},e.errorGettingUserMedia=function(e){return"Error getting userMedia, error = ".concat(e)},e.onlyDeviceSupportedError=function(){return"The device doesn't support navigator.mediaDevices , only supported cameraIdOrConfig in this case is deviceId parameter (string)."},e.cameraStreamingNotSupported=function(){return"Camera streaming not supported by the browser."},e.unableToQuerySupportedDevices=function(){return"Unable to query supported devices, unknown error."},e.insecureContextCameraQueryError=function(){return"Camera access is only supported in secure context like https or localhost."},e.scannerPaused=function(){return"Scanner paused"},e}(),Qi=function(){function e(){}return e.scanningStatus=function(){return"Scanning"},e.idleStatus=function(){return"Idle"},e.errorStatus=function(){return"Error"},e.permissionStatus=function(){return"Permission"},e.noCameraFoundErrorStatus=function(){return"No Cameras"},e.lastMatch=function(e){return"Last Match: ".concat(e)},e.codeScannerTitle=function(){return"Code Scanner"},e.cameraPermissionTitle=function(){return"Request Camera Permissions"},e.cameraPermissionRequesting=function(){return"Requesting camera permissions..."},e.noCameraFound=function(){return"No camera found"},e.scanButtonStopScanningText=function(){return"Stop Scanning"},e.scanButtonStartScanningText=function(){return"Start Scanning"},e.torchOnButton=function(){return"Switch On Torch"},e.torchOffButton=function(){return"Switch Off Torch"},e.torchOnFailedMessage=function(){return"Failed to turn on torch"},e.torchOffFailedMessage=function(){return"Failed to turn off torch"},e.scanButtonScanningStarting=function(){return"Launching Camera..."},e.textIfCameraScanSelected=function(){return"Scan an Image File"},e.textIfFileScanSelected=function(){return"Scan using camera directly"},e.selectCamera=function(){return"Select Camera"},e.fileSelectionChooseImage=function(){return"Choose Image"},e.fileSelectionChooseAnother=function(){return"Choose Another"},e.fileSelectionNoImageSelected=function(){return"No image choosen"},e.anonymousCameraPrefix=function(){return"Anonymous Camera"},e.dragAndDropMessage=function(){return"Or drop an image to scan"},e.dragAndDropMessageOnlyImages=function(){return"Or drop an image to scan (other files not supported)"},e.zoom=function(){return"zoom"},e.loadingImage=function(){return"Loading image..."},e.cameraScanAltText=function(){return"Camera based scan"},e.fileScanAltText=function(){return"Fule based scan"},e}(),Zi=function(){function e(){}return e.poweredBy=function(){return"Powered by "},e.reportIssues=function(){return"Report issues"},e}(),Ki=function(){function e(){}return e.isMediaStreamConstraintsValid=function(e,t){if("object"!==typeof e){var r=typeof e;return t.logError("videoConstraints should be of type object, the "+"object passed is of type ".concat(r,"."),!0),!1}for(var n=new Set(["autoGainControl","channelCount","echoCancellation","latency","noiseSuppression","sampleRate","sampleSize","volume"]),i=0,o=Object.keys(e);i<o.length;i++){var s=o[i];if(n.has(s))return t.logError("".concat(s," is not supported videoConstaints."),!0),!1}return!0},e}(),Ji=r(649),eo=function(){function e(e,t,r){if(this.formatMap=new Map([[Pi.QR_CODE,Ji.BarcodeFormat.QR_CODE],[Pi.AZTEC,Ji.BarcodeFormat.AZTEC],[Pi.CODABAR,Ji.BarcodeFormat.CODABAR],[Pi.CODE_39,Ji.BarcodeFormat.CODE_39],[Pi.CODE_93,Ji.BarcodeFormat.CODE_93],[Pi.CODE_128,Ji.BarcodeFormat.CODE_128],[Pi.DATA_MATRIX,Ji.BarcodeFormat.DATA_MATRIX],[Pi.MAXICODE,Ji.BarcodeFormat.MAXICODE],[Pi.ITF,Ji.BarcodeFormat.ITF],[Pi.EAN_13,Ji.BarcodeFormat.EAN_13],[Pi.EAN_8,Ji.BarcodeFormat.EAN_8],[Pi.PDF_417,Ji.BarcodeFormat.PDF_417],[Pi.RSS_14,Ji.BarcodeFormat.RSS_14],[Pi.RSS_EXPANDED,Ji.BarcodeFormat.RSS_EXPANDED],[Pi.UPC_A,Ji.BarcodeFormat.UPC_A],[Pi.UPC_E,Ji.BarcodeFormat.UPC_E],[Pi.UPC_EAN_EXTENSION,Ji.BarcodeFormat.UPC_EAN_EXTENSION]]),this.reverseFormatMap=this.createReverseFormatMap(),!Ji)throw"Use html5qrcode.min.js without edit, ZXing not found.";this.verbose=t,this.logger=r;var n=this.createZXingFormats(e),i=new Map;i.set(Ji.DecodeHintType.POSSIBLE_FORMATS,n),i.set(Ji.DecodeHintType.TRY_HARDER,!1),this.hints=i}return e.prototype.decodeAsync=function(e){var t=this;return new Promise((function(r,n){try{r(t.decode(e))}catch(i){n(i)}}))},e.prototype.decode=function(e){var t=new Ji.MultiFormatReader(this.verbose,this.hints),r=new Ji.HTMLCanvasElementLuminanceSource(e),n=new Ji.BinaryBitmap(new Ji.HybridBinarizer(r)),i=t.decode(n);return{text:i.text,format:Vi.create(this.toHtml5QrcodeSupportedFormats(i.format)),debugData:this.createDebugData()}},e.prototype.createReverseFormatMap=function(){var e=new Map;return this.formatMap.forEach((function(t,r,n){e.set(t,r)})),e},e.prototype.toHtml5QrcodeSupportedFormats=function(e){if(!this.reverseFormatMap.has(e))throw"reverseFormatMap doesn't have ".concat(e);return this.reverseFormatMap.get(e)},e.prototype.createZXingFormats=function(e){for(var t=[],r=0,n=e;r<n.length;r++){var i=n[r];this.formatMap.has(i)?t.push(this.formatMap.get(i)):this.logger.logError("".concat(i," is not supported by")+"ZXingHtml5QrcodeShim")}return t},e.prototype.createDebugData=function(){return{decoderName:"zxing-js"}},e}(),to=function(e,t,r,n){return new(r||(r=Promise))((function(i,s){function a(e){try{c(n.next(e))}catch(o){s(o)}}function l(e){try{c(n.throw(e))}catch(o){s(o)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(a,l)}c((n=n.apply(e,t||[])).next())}))},ro=function(e,t){var r,n,i,s,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return s={next:l(0),throw:l(1),return:l(2)},"function"===typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function l(l){return function(c){return function(l){if(r)throw new TypeError("Generator is already executing.");for(;s&&(s=0,l[0]&&(a=0)),a;)try{if(r=1,n&&(i=2&l[0]?n.return:l[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,l[1])).done)return i;switch(n=0,i&&(l=[2&l[0],i.value]),l[0]){case 0:case 1:i=l;break;case 4:return a.label++,{value:l[1],done:!1};case 5:a.label++,n=l[1],l=[0];continue;case 7:l=a.ops.pop(),a.trys.pop();continue;default:if(!(i=(i=a.trys).length>0&&i[i.length-1])&&(6===l[0]||2===l[0])){a=0;continue}if(3===l[0]&&(!i||l[1]>i[0]&&l[1]<i[3])){a.label=l[1];break}if(6===l[0]&&a.label<i[1]){a.label=i[1],i=l;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(l);break}i[2]&&a.ops.pop(),a.trys.pop();continue}l=t.call(e,a)}catch(o){l=[6,o],n=0}finally{r=i=0}if(5&l[0])throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}([l,c])}}},no=function(){function e(t,r,n){if(this.formatMap=new Map([[Pi.QR_CODE,"qr_code"],[Pi.AZTEC,"aztec"],[Pi.CODABAR,"codabar"],[Pi.CODE_39,"code_39"],[Pi.CODE_93,"code_93"],[Pi.CODE_128,"code_128"],[Pi.DATA_MATRIX,"data_matrix"],[Pi.ITF,"itf"],[Pi.EAN_13,"ean_13"],[Pi.EAN_8,"ean_8"],[Pi.PDF_417,"pdf417"],[Pi.UPC_A,"upc_a"],[Pi.UPC_E,"upc_e"]]),this.reverseFormatMap=this.createReverseFormatMap(),!e.isSupported())throw"Use html5qrcode.min.js without edit, Use BarcodeDetectorDelegate only if it isSupported();";this.verbose=r,this.logger=n;var i=this.createBarcodeDetectorFormats(t);if(this.detector=new BarcodeDetector(i),!this.detector)throw"BarcodeDetector detector not supported"}return e.isSupported=function(){return"BarcodeDetector"in window&&"undefined"!==typeof new BarcodeDetector({formats:["qr_code"]})},e.prototype.decodeAsync=function(e){return to(this,void 0,void 0,(function(){var t,r;return ro(this,(function(n){switch(n.label){case 0:return[4,this.detector.detect(e)];case 1:if(!(t=n.sent())||0===t.length)throw"No barcode or QR code detected.";return[2,{text:(r=this.selectLargestBarcode(t)).rawValue,format:Vi.create(this.toHtml5QrcodeSupportedFormats(r.format)),debugData:this.createDebugData()}]}}))}))},e.prototype.selectLargestBarcode=function(e){for(var t=null,r=0,n=0,i=e;n<i.length;n++){var o=i[n],s=o.boundingBox.width*o.boundingBox.height;s>r&&(r=s,t=o)}if(!t)throw"No largest barcode found";return t},e.prototype.createBarcodeDetectorFormats=function(e){for(var t=[],r=0,n=e;r<n.length;r++){var i=n[r];this.formatMap.has(i)?t.push(this.formatMap.get(i)):this.logger.warn("".concat(i," is not supported by")+"BarcodeDetectorDelegate")}return{formats:t}},e.prototype.toHtml5QrcodeSupportedFormats=function(e){if(!this.reverseFormatMap.has(e))throw"reverseFormatMap doesn't have ".concat(e);return this.reverseFormatMap.get(e)},e.prototype.createReverseFormatMap=function(){var e=new Map;return this.formatMap.forEach((function(t,r,n){e.set(t,r)})),e},e.prototype.createDebugData=function(){return{decoderName:"BarcodeDetector"}},e}(),io=function(e,t,r,n){return new(r||(r=Promise))((function(i,s){function a(e){try{c(n.next(e))}catch(o){s(o)}}function l(e){try{c(n.throw(e))}catch(o){s(o)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(a,l)}c((n=n.apply(e,t||[])).next())}))},oo=function(e,t){var r,n,i,s,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return s={next:l(0),throw:l(1),return:l(2)},"function"===typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function l(l){return function(c){return function(l){if(r)throw new TypeError("Generator is already executing.");for(;s&&(s=0,l[0]&&(a=0)),a;)try{if(r=1,n&&(i=2&l[0]?n.return:l[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,l[1])).done)return i;switch(n=0,i&&(l=[2&l[0],i.value]),l[0]){case 0:case 1:i=l;break;case 4:return a.label++,{value:l[1],done:!1};case 5:a.label++,n=l[1],l=[0];continue;case 7:l=a.ops.pop(),a.trys.pop();continue;default:if(!(i=(i=a.trys).length>0&&i[i.length-1])&&(6===l[0]||2===l[0])){a=0;continue}if(3===l[0]&&(!i||l[1]>i[0]&&l[1]<i[3])){a.label=l[1];break}if(6===l[0]&&a.label<i[1]){a.label=i[1],i=l;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(l);break}i[2]&&a.ops.pop(),a.trys.pop();continue}l=t.call(e,a)}catch(o){l=[6,o],n=0}finally{r=i=0}if(5&l[0])throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}([l,c])}}},so=function(){function e(e,t,r,n){this.EXECUTIONS_TO_REPORT_PERFORMANCE=100,this.executions=0,this.executionResults=[],this.wasPrimaryDecoderUsedInLastDecode=!1,this.verbose=r,t&&no.isSupported()?(this.primaryDecoder=new no(e,r,n),this.secondaryDecoder=new eo(e,r,n)):this.primaryDecoder=new eo(e,r,n)}return e.prototype.decodeAsync=function(e){return io(this,void 0,void 0,(function(){var t;return oo(this,(function(r){switch(r.label){case 0:t=performance.now(),r.label=1;case 1:return r.trys.push([1,,3,4]),[4,this.getDecoder().decodeAsync(e)];case 2:return[2,r.sent()];case 3:return this.possiblyLogPerformance(t),[7];case 4:return[2]}}))}))},e.prototype.decodeRobustlyAsync=function(e){return io(this,void 0,void 0,(function(){var t,r;return oo(this,(function(n){switch(n.label){case 0:t=performance.now(),n.label=1;case 1:return n.trys.push([1,3,4,5]),[4,this.primaryDecoder.decodeAsync(e)];case 2:return[2,n.sent()];case 3:if(r=n.sent(),this.secondaryDecoder)return[2,this.secondaryDecoder.decodeAsync(e)];throw r;case 4:return this.possiblyLogPerformance(t),[7];case 5:return[2]}}))}))},e.prototype.getDecoder=function(){return this.secondaryDecoder?!1===this.wasPrimaryDecoderUsedInLastDecode?(this.wasPrimaryDecoderUsedInLastDecode=!0,this.primaryDecoder):(this.wasPrimaryDecoderUsedInLastDecode=!1,this.secondaryDecoder):this.primaryDecoder},e.prototype.possiblyLogPerformance=function(e){if(this.verbose){var t=performance.now()-e;this.executionResults.push(t),this.executions++,this.possiblyFlushPerformanceReport()}},e.prototype.possiblyFlushPerformanceReport=function(){if(!(this.executions<this.EXECUTIONS_TO_REPORT_PERFORMANCE)){for(var e=0,t=0,r=this.executionResults;t<r.length;t++){e+=r[t]}var n=e/this.executionResults.length;console.log("".concat(n," ms for ").concat(this.executionResults.length," last runs.")),this.executions=0,this.executionResults=[]}},e}(),ao=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},e(t,r)};return function(t,r){if("function"!==typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),lo=function(e,t,r,n){return new(r||(r=Promise))((function(i,s){function a(e){try{c(n.next(e))}catch(o){s(o)}}function l(e){try{c(n.throw(e))}catch(o){s(o)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(a,l)}c((n=n.apply(e,t||[])).next())}))},co=function(e,t){var r,n,i,s,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return s={next:l(0),throw:l(1),return:l(2)},"function"===typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function l(l){return function(c){return function(l){if(r)throw new TypeError("Generator is already executing.");for(;s&&(s=0,l[0]&&(a=0)),a;)try{if(r=1,n&&(i=2&l[0]?n.return:l[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,l[1])).done)return i;switch(n=0,i&&(l=[2&l[0],i.value]),l[0]){case 0:case 1:i=l;break;case 4:return a.label++,{value:l[1],done:!1};case 5:a.label++,n=l[1],l=[0];continue;case 7:l=a.ops.pop(),a.trys.pop();continue;default:if(!(i=(i=a.trys).length>0&&i[i.length-1])&&(6===l[0]||2===l[0])){a=0;continue}if(3===l[0]&&(!i||l[1]>i[0]&&l[1]<i[3])){a.label=l[1];break}if(6===l[0]&&a.label<i[1]){a.label=i[1],i=l;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(l);break}i[2]&&a.ops.pop(),a.trys.pop();continue}l=t.call(e,a)}catch(o){l=[6,o],n=0}finally{r=i=0}if(5&l[0])throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}([l,c])}}},uo=function(){function e(e,t){this.name=e,this.track=t}return e.prototype.isSupported=function(){return!!this.track.getCapabilities&&this.name in this.track.getCapabilities()},e.prototype.apply=function(e){var t={};t[this.name]=e;var r={advanced:[t]};return this.track.applyConstraints(r)},e.prototype.value=function(){var e=this.track.getSettings();return this.name in e?e[this.name]:null},e}(),ho=function(e){function t(t){return e.call(this,"zoom",t)||this}return ao(t,e),t}(function(e){function t(t,r){return e.call(this,t,r)||this}return ao(t,e),t.prototype.min=function(){return this.getCapabilities().min},t.prototype.max=function(){return this.getCapabilities().max},t.prototype.step=function(){return this.getCapabilities().step},t.prototype.apply=function(e){var t={};t[this.name]=e;var r={advanced:[t]};return this.track.applyConstraints(r)},t.prototype.getCapabilities=function(){this.failIfNotSupported();var e=this.track.getCapabilities()[this.name];return{min:e.min,max:e.max,step:e.step}},t.prototype.failIfNotSupported=function(){if(!this.isSupported())throw new Error("".concat(this.name," capability not supported"))},t}(uo)),fo=function(e){function t(t){return e.call(this,"torch",t)||this}return ao(t,e),t}(uo),po=function(){function e(e){this.track=e}return e.prototype.zoomFeature=function(){return new ho(this.track)},e.prototype.torchFeature=function(){return new fo(this.track)},e}(),mo=function(){function e(e,t,r){this.isClosed=!1,this.parentElement=e,this.mediaStream=t,this.callbacks=r,this.surface=this.createVideoElement(this.parentElement.clientWidth),e.append(this.surface)}return e.prototype.createVideoElement=function(e){var t=document.createElement("video");return t.style.width="".concat(e,"px"),t.style.display="block",t.muted=!0,t.setAttribute("muted","true"),t.playsInline=!0,t},e.prototype.setupSurface=function(){var e=this;this.surface.onabort=function(){throw"RenderedCameraImpl video surface onabort() called"},this.surface.onerror=function(){throw"RenderedCameraImpl video surface onerror() called"};var t=function(){var r=e.surface.clientWidth,n=e.surface.clientHeight;e.callbacks.onRenderSurfaceReady(r,n),e.surface.removeEventListener("playing",t)};this.surface.addEventListener("playing",t),this.surface.srcObject=this.mediaStream,this.surface.play()},e.create=function(t,r,n,i){return lo(this,void 0,void 0,(function(){var o,s;return co(this,(function(a){switch(a.label){case 0:return o=new e(t,r,i),n.aspectRatio?(s={aspectRatio:n.aspectRatio},[4,o.getFirstTrackOrFail().applyConstraints(s)]):[3,2];case 1:a.sent(),a.label=2;case 2:return o.setupSurface(),[2,o]}}))}))},e.prototype.failIfClosed=function(){if(this.isClosed)throw"The RenderedCamera has already been closed."},e.prototype.getFirstTrackOrFail=function(){if(this.failIfClosed(),0===this.mediaStream.getVideoTracks().length)throw"No video tracks found";return this.mediaStream.getVideoTracks()[0]},e.prototype.pause=function(){this.failIfClosed(),this.surface.pause()},e.prototype.resume=function(e){this.failIfClosed();var t=this,r=function(){setTimeout(e,200),t.surface.removeEventListener("playing",r)};this.surface.addEventListener("playing",r),this.surface.play()},e.prototype.isPaused=function(){return this.failIfClosed(),this.surface.paused},e.prototype.getSurface=function(){return this.failIfClosed(),this.surface},e.prototype.getRunningTrackCapabilities=function(){return this.getFirstTrackOrFail().getCapabilities()},e.prototype.getRunningTrackSettings=function(){return this.getFirstTrackOrFail().getSettings()},e.prototype.applyVideoConstraints=function(e){return lo(this,void 0,void 0,(function(){return co(this,(function(t){if("aspectRatio"in e)throw"Changing 'aspectRatio' in run-time is not yet supported.";return[2,this.getFirstTrackOrFail().applyConstraints(e)]}))}))},e.prototype.close=function(){if(this.isClosed)return Promise.resolve();var e=this;return new Promise((function(t,r){var n=e.mediaStream.getVideoTracks().length,i=0;e.mediaStream.getVideoTracks().forEach((function(r){e.mediaStream.removeTrack(r),r.stop(),++i>=n&&(e.isClosed=!0,e.parentElement.removeChild(e.surface),t())}))}))},e.prototype.getCapabilities=function(){return new po(this.getFirstTrackOrFail())},e}(),go=function(){function e(e){this.mediaStream=e}return e.prototype.render=function(e,t,r){return lo(this,void 0,void 0,(function(){return co(this,(function(n){return[2,mo.create(e,this.mediaStream,t,r)]}))}))},e.create=function(t){return lo(this,void 0,void 0,(function(){var r;return co(this,(function(n){switch(n.label){case 0:if(!navigator.mediaDevices)throw"navigator.mediaDevices not supported";return r={audio:!1,video:t},[4,navigator.mediaDevices.getUserMedia(r)];case 1:return[2,new e(n.sent())]}}))}))},e}(),yo=function(e,t,r,n){return new(r||(r=Promise))((function(i,s){function a(e){try{c(n.next(e))}catch(o){s(o)}}function l(e){try{c(n.throw(e))}catch(o){s(o)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(a,l)}c((n=n.apply(e,t||[])).next())}))},wo=function(e,t){var r,n,i,s,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return s={next:l(0),throw:l(1),return:l(2)},"function"===typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function l(l){return function(c){return function(l){if(r)throw new TypeError("Generator is already executing.");for(;s&&(s=0,l[0]&&(a=0)),a;)try{if(r=1,n&&(i=2&l[0]?n.return:l[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,l[1])).done)return i;switch(n=0,i&&(l=[2&l[0],i.value]),l[0]){case 0:case 1:i=l;break;case 4:return a.label++,{value:l[1],done:!1};case 5:a.label++,n=l[1],l=[0];continue;case 7:l=a.ops.pop(),a.trys.pop();continue;default:if(!(i=(i=a.trys).length>0&&i[i.length-1])&&(6===l[0]||2===l[0])){a=0;continue}if(3===l[0]&&(!i||l[1]>i[0]&&l[1]<i[3])){a.label=l[1];break}if(6===l[0]&&a.label<i[1]){a.label=i[1],i=l;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(l);break}i[2]&&a.ops.pop(),a.trys.pop();continue}l=t.call(e,a)}catch(o){l=[6,o],n=0}finally{r=i=0}if(5&l[0])throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}([l,c])}}},bo=function(){function e(){}return e.failIfNotSupported=function(){return yo(this,void 0,void 0,(function(){return wo(this,(function(t){if(!navigator.mediaDevices)throw"navigator.mediaDevices not supported";return[2,new e]}))}))},e.prototype.create=function(e){return yo(this,void 0,void 0,(function(){return wo(this,(function(t){return[2,go.create(e)]}))}))},e}(),vo=function(e,t,r,n){return new(r||(r=Promise))((function(i,s){function a(e){try{c(n.next(e))}catch(o){s(o)}}function l(e){try{c(n.throw(e))}catch(o){s(o)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(a,l)}c((n=n.apply(e,t||[])).next())}))},_o=function(e,t){var r,n,i,s,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return s={next:l(0),throw:l(1),return:l(2)},"function"===typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function l(l){return function(c){return function(l){if(r)throw new TypeError("Generator is already executing.");for(;s&&(s=0,l[0]&&(a=0)),a;)try{if(r=1,n&&(i=2&l[0]?n.return:l[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,l[1])).done)return i;switch(n=0,i&&(l=[2&l[0],i.value]),l[0]){case 0:case 1:i=l;break;case 4:return a.label++,{value:l[1],done:!1};case 5:a.label++,n=l[1],l=[0];continue;case 7:l=a.ops.pop(),a.trys.pop();continue;default:if(!(i=(i=a.trys).length>0&&i[i.length-1])&&(6===l[0]||2===l[0])){a=0;continue}if(3===l[0]&&(!i||l[1]>i[0]&&l[1]<i[3])){a.label=l[1];break}if(6===l[0]&&a.label<i[1]){a.label=i[1],i=l;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(l);break}i[2]&&a.ops.pop(),a.trys.pop();continue}l=t.call(e,a)}catch(o){l=[6,o],n=0}finally{r=i=0}if(5&l[0])throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}([l,c])}}},xo=function(){function e(){}return e.retrieve=function(){if(navigator.mediaDevices)return e.getCamerasFromMediaDevices();var t=MediaStreamTrack;return MediaStreamTrack&&t.getSources?e.getCamerasFromMediaStreamTrack():e.rejectWithError()},e.rejectWithError=function(){var t=qi.unableToQuerySupportedDevices();return e.isHttpsOrLocalhost()||(t=qi.insecureContextCameraQueryError()),Promise.reject(t)},e.isHttpsOrLocalhost=function(){if("https:"===location.protocol)return!0;var e=location.host.split(":")[0];return"127.0.0.1"===e||"localhost"===e},e.getCamerasFromMediaDevices=function(){return vo(this,void 0,void 0,(function(){var e,t,r,n,i,o,s;return _o(this,(function(a){switch(a.label){case 0:return e=function(e){for(var t=0,r=e.getVideoTracks();t<r.length;t++){var n=r[t];n.enabled=!1,n.stop(),e.removeTrack(n)}},[4,navigator.mediaDevices.getUserMedia({audio:!1,video:!0})];case 1:return t=a.sent(),[4,navigator.mediaDevices.enumerateDevices()];case 2:for(r=a.sent(),n=[],i=0,o=r;i<o.length;i++)"videoinput"===(s=o[i]).kind&&n.push({id:s.deviceId,label:s.label});return e(t),[2,n]}}))}))},e.getCamerasFromMediaStreamTrack=function(){return new Promise((function(e,t){MediaStreamTrack.getSources((function(t){for(var r=[],n=0,i=t;n<i.length;n++){var o=i[n];"video"===o.kind&&r.push({id:o.id,label:o.label})}e(r)}))}))},e}();!function(e){e[e.UNKNOWN=0]="UNKNOWN",e[e.NOT_STARTED=1]="NOT_STARTED",e[e.SCANNING=2]="SCANNING",e[e.PAUSED=3]="PAUSED"}(Yi||(Yi={}));var Eo,Co=function(){function e(){this.state=Yi.NOT_STARTED,this.onGoingTransactionNewState=Yi.UNKNOWN}return e.prototype.directTransition=function(e){this.failIfTransitionOngoing(),this.validateTransition(e),this.state=e},e.prototype.startTransition=function(e){return this.failIfTransitionOngoing(),this.validateTransition(e),this.onGoingTransactionNewState=e,this},e.prototype.execute=function(){if(this.onGoingTransactionNewState===Yi.UNKNOWN)throw"Transaction is already cancelled, cannot execute().";var e=this.onGoingTransactionNewState;this.onGoingTransactionNewState=Yi.UNKNOWN,this.directTransition(e)},e.prototype.cancel=function(){if(this.onGoingTransactionNewState===Yi.UNKNOWN)throw"Transaction is already cancelled, cannot cancel().";this.onGoingTransactionNewState=Yi.UNKNOWN},e.prototype.getState=function(){return this.state},e.prototype.failIfTransitionOngoing=function(){if(this.onGoingTransactionNewState!==Yi.UNKNOWN)throw"Cannot transition to a new state, already under transition"},e.prototype.validateTransition=function(e){switch(this.state){case Yi.UNKNOWN:throw"Transition from unknown is not allowed";case Yi.NOT_STARTED:this.failIfNewStateIs(e,[Yi.PAUSED]);case Yi.SCANNING:case Yi.PAUSED:}},e.prototype.failIfNewStateIs=function(e,t){for(var r=0,n=t;r<n.length;r++){if(e===n[r])throw"Cannot transition from ".concat(this.state," to ").concat(e)}},e}(),So=function(){function e(e){this.stateManager=e}return e.prototype.startTransition=function(e){return this.stateManager.startTransition(e)},e.prototype.directTransition=function(e){this.stateManager.directTransition(e)},e.prototype.getState=function(){return this.stateManager.getState()},e.prototype.canScanFile=function(){return this.stateManager.getState()===Yi.NOT_STARTED},e.prototype.isScanning=function(){return this.stateManager.getState()!==Yi.NOT_STARTED},e.prototype.isStrictlyScanning=function(){return this.stateManager.getState()===Yi.SCANNING},e.prototype.isPaused=function(){return this.stateManager.getState()===Yi.PAUSED},e}(),Ao=function(){function e(){}return e.create=function(){return new So(new Co)},e}(),No=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},e(t,r)};return function(t,r){if("function"!==typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),Io=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return No(t,e),t.DEFAULT_WIDTH=300,t.DEFAULT_WIDTH_OFFSET=2,t.FILE_SCAN_MIN_HEIGHT=300,t.FILE_SCAN_HIDDEN_CANVAS_PADDING=100,t.MIN_QR_BOX_SIZE=50,t.SHADED_LEFT=1,t.SHADED_RIGHT=2,t.SHADED_TOP=3,t.SHADED_BOTTOM=4,t.SHADED_REGION_ELEMENT_ID="qr-shaded-region",t.VERBOSE=!1,t.BORDER_SHADER_DEFAULT_COLOR="#ffffff",t.BORDER_SHADER_MATCH_COLOR="rgb(90, 193, 56)",t}(Hi),To=function(){function e(e,t){this.logger=t,this.fps=Io.SCAN_DEFAULT_FPS,e?(e.fps&&(this.fps=e.fps),this.disableFlip=!0===e.disableFlip,this.qrbox=e.qrbox,this.aspectRatio=e.aspectRatio,this.videoConstraints=e.videoConstraints):this.disableFlip=Io.DEFAULT_DISABLE_FLIP}return e.prototype.isMediaStreamConstraintsValid=function(){return this.videoConstraints?Ki.isMediaStreamConstraintsValid(this.videoConstraints,this.logger):(this.logger.logError("Empty videoConstraints",!0),!1)},e.prototype.isShadedBoxEnabled=function(){return!Xi(this.qrbox)},e.create=function(t,r){return new e(t,r)},e}(),Oo=function(){function e(e,t){if(this.element=null,this.canvasElement=null,this.scannerPausedUiElement=null,this.hasBorderShaders=null,this.borderShaders=null,this.qrMatch=null,this.renderedCamera=null,this.qrRegion=null,this.context=null,this.lastScanImageFile=null,this.isScanning=!1,!document.getElementById(e))throw"HTML Element with id=".concat(e," not found");var r;this.elementId=e,this.verbose=!1,"boolean"==typeof t?this.verbose=!0===t:t&&(r=t,this.verbose=!0===r.verbose,r.experimentalFeatures),this.logger=new $i(this.verbose),this.qrcode=new so(this.getSupportedFormats(t),this.getUseBarCodeDetectorIfSupported(r),this.verbose,this.logger),this.foreverScanTimeout,this.shouldScan=!0,this.stateManagerProxy=Ao.create()}return e.prototype.start=function(e,t,r,n){var i,o=this;if(!e)throw"cameraIdOrConfig is required";if(!r||"function"!=typeof r)throw"qrCodeSuccessCallback is required and should be a function.";i=n||(this.verbose?this.logger.log:function(){});var s=To.create(t,this.logger);this.clearElement();var a=!1;s.videoConstraints&&(s.isMediaStreamConstraintsValid()?a=!0:this.logger.logError("'videoConstraints' is not valid 'MediaStreamConstraints, it will be ignored.'",!0));var l=a,c=document.getElementById(this.elementId);c.clientWidth?c.clientWidth:Io.DEFAULT_WIDTH;c.style.position="relative",this.shouldScan=!0,this.element=c;var u=this,d=this.stateManagerProxy.startTransition(Yi.SCANNING);return new Promise((function(t,n){var a=l?s.videoConstraints:u.createVideoConstraints(e);if(!a)return d.cancel(),void n("videoConstraints should be defined");var c={};l&&!s.aspectRatio||(c.aspectRatio=s.aspectRatio);var h={onRenderSurfaceReady:function(e,t){u.setupUi(e,t,s),u.isScanning=!0,u.foreverScan(s,r,i)}};bo.failIfNotSupported().then((function(e){e.create(a).then((function(e){return e.render(o.element,c,h).then((function(e){u.renderedCamera=e,d.execute(),t(null)})).catch((function(e){d.cancel(),n(e)}))})).catch((function(e){d.cancel(),n(qi.errorGettingUserMedia(e))}))})).catch((function(e){d.cancel(),n(qi.cameraStreamingNotSupported())}))}))},e.prototype.pause=function(e){if(!this.stateManagerProxy.isStrictlyScanning())throw"Cannot pause, scanner is not scanning.";this.stateManagerProxy.directTransition(Yi.PAUSED),this.showPausedState(),(Xi(e)||!0!==e)&&(e=!1),e&&this.renderedCamera&&this.renderedCamera.pause()},e.prototype.resume=function(){if(!this.stateManagerProxy.isPaused())throw"Cannot result, scanner is not paused.";if(!this.renderedCamera)throw"renderedCamera doesn't exist while trying resume()";var e=this,t=function(){e.stateManagerProxy.directTransition(Yi.SCANNING),e.hidePausedState()};this.renderedCamera.isPaused()?this.renderedCamera.resume((function(){t()})):t()},e.prototype.getState=function(){return this.stateManagerProxy.getState()},e.prototype.stop=function(){var e=this;if(!this.stateManagerProxy.isScanning())throw"Cannot stop, scanner is not running or paused.";var t=this.stateManagerProxy.startTransition(Yi.NOT_STARTED);this.shouldScan=!1,this.foreverScanTimeout&&clearTimeout(this.foreverScanTimeout);var r=this;return this.renderedCamera.close().then((function(){return r.renderedCamera=null,r.element&&(r.element.removeChild(r.canvasElement),r.canvasElement=null),function(){if(e.element){var t=document.getElementById(Io.SHADED_REGION_ELEMENT_ID);t&&e.element.removeChild(t)}}(),r.qrRegion&&(r.qrRegion=null),r.context&&(r.context=null),t.execute(),r.hidePausedState(),r.isScanning=!1,Promise.resolve()}))},e.prototype.scanFile=function(e,t){return this.scanFileV2(e,t).then((function(e){return e.decodedText}))},e.prototype.scanFileV2=function(e,t){var r=this;if(!e||!(e instanceof File))throw"imageFile argument is mandatory and should be instance of File. Use 'event.target.files[0]'.";if(Xi(t)&&(t=!0),!this.stateManagerProxy.canScanFile())throw"Cannot start file scan - ongoing camera scan";return new Promise((function(n,i){r.possiblyCloseLastScanImageFile(),r.clearElement(),r.lastScanImageFile=URL.createObjectURL(e);var o=new Image;o.onload=function(){var e=o.width,s=o.height,a=document.getElementById(r.elementId),l=a.clientWidth?a.clientWidth:Io.DEFAULT_WIDTH,c=Math.max(a.clientHeight?a.clientHeight:s,Io.FILE_SCAN_MIN_HEIGHT),u=r.computeCanvasDrawConfig(e,s,l,c);if(t){var d=r.createCanvasElement(l,c,"qr-canvas-visible");d.style.display="inline-block",a.appendChild(d);var h=d.getContext("2d");if(!h)throw"Unable to get 2d context from canvas";h.canvas.width=l,h.canvas.height=c,h.drawImage(o,0,0,e,s,u.x,u.y,u.width,u.height)}var f=Io.FILE_SCAN_HIDDEN_CANVAS_PADDING,p=Math.max(o.width,u.width),m=Math.max(o.height,u.height),g=p+2*f,y=m+2*f,w=r.createCanvasElement(g,y);a.appendChild(w);var b=w.getContext("2d");if(!b)throw"Unable to get 2d context from canvas";b.canvas.width=g,b.canvas.height=y,b.drawImage(o,0,0,e,s,f,f,p,m);try{r.qrcode.decodeRobustlyAsync(w).then((function(e){n(Wi.createFromQrcodeResult(e))})).catch(i)}catch(v){i("QR code parse error, error = ".concat(v))}},o.onerror=i,o.onabort=i,o.onstalled=i,o.onsuspend=i,o.src=URL.createObjectURL(e)}))},e.prototype.clear=function(){this.clearElement()},e.getCameras=function(){return xo.retrieve()},e.prototype.getRunningTrackCapabilities=function(){return this.getRenderedCameraOrFail().getRunningTrackCapabilities()},e.prototype.getRunningTrackSettings=function(){return this.getRenderedCameraOrFail().getRunningTrackSettings()},e.prototype.getRunningTrackCameraCapabilities=function(){return this.getRenderedCameraOrFail().getCapabilities()},e.prototype.applyVideoConstraints=function(e){if(!e)throw"videoConstaints is required argument.";if(!Ki.isMediaStreamConstraintsValid(e,this.logger))throw"invalid videoConstaints passed, check logs for more details";return this.getRenderedCameraOrFail().applyVideoConstraints(e)},e.prototype.getRenderedCameraOrFail=function(){if(null==this.renderedCamera)throw"Scanning is not in running state, call this API only when QR code scanning using camera is in running state.";return this.renderedCamera},e.prototype.getSupportedFormats=function(e){var t=[Pi.QR_CODE,Pi.AZTEC,Pi.CODABAR,Pi.CODE_39,Pi.CODE_93,Pi.CODE_128,Pi.DATA_MATRIX,Pi.MAXICODE,Pi.ITF,Pi.EAN_13,Pi.EAN_8,Pi.PDF_417,Pi.RSS_14,Pi.RSS_EXPANDED,Pi.UPC_A,Pi.UPC_E,Pi.UPC_EAN_EXTENSION];if(!e||"boolean"==typeof e)return t;if(!e.formatsToSupport)return t;if(!Array.isArray(e.formatsToSupport))throw"configOrVerbosityFlag.formatsToSupport should be undefined or an array.";if(0===e.formatsToSupport.length)throw"Atleast 1 formatsToSupport is needed.";for(var r=[],n=0,i=e.formatsToSupport;n<i.length;n++){var o=i[n];Ui(o)?r.push(o):this.logger.warn("Invalid format: ".concat(o," passed in config, ignoring."))}if(0===r.length)throw"None of formatsToSupport match supported values.";return r},e.prototype.getUseBarCodeDetectorIfSupported=function(e){if(Xi(e))return!0;if(!Xi(e.useBarCodeDetectorIfSupported))return!1!==e.useBarCodeDetectorIfSupported;if(Xi(e.experimentalFeatures))return!0;var t=e.experimentalFeatures;return!!Xi(t.useBarCodeDetectorIfSupported)||!1!==t.useBarCodeDetectorIfSupported},e.prototype.validateQrboxSize=function(e,t,r){var n=this,i=r.qrbox;this.validateQrboxConfig(i);var o,s=this.toQrdimensions(e,t,i),a=function(e){if(e<Io.MIN_QR_BOX_SIZE)throw"minimum size of 'config.qrbox' dimension value is"+" ".concat(Io.MIN_QR_BOX_SIZE,"px.")};a(s.width),a(s.height),s.width=((o=s.width)>e&&(n.logger.warn("`qrbox.width` or `qrbox` is larger than the width of the root element. The width will be truncated to the width of root element."),o=e),o)},e.prototype.validateQrboxConfig=function(e){if("number"!==typeof e&&"function"!==typeof e&&(void 0===e.width||void 0===e.height))throw"Invalid instance of QrDimensions passed for 'config.qrbox'. Both 'width' and 'height' should be set."},e.prototype.toQrdimensions=function(e,t,r){if("number"===typeof r)return{width:r,height:r};if("function"===typeof r)try{return r(e,t)}catch(n){throw new Error("qrbox config was passed as a function but it failed with unknown error"+n)}return r},e.prototype.setupUi=function(e,t,r){r.isShadedBoxEnabled()&&this.validateQrboxSize(e,t,r);var n=Xi(r.qrbox)?{width:e,height:t}:r.qrbox;this.validateQrboxConfig(n);var i=this.toQrdimensions(e,t,n);i.height>t&&this.logger.warn("[Html5Qrcode] config.qrbox has height that isgreater than the height of the video stream. Shading will be ignored");var o=r.isShadedBoxEnabled()&&i.height<=t,s={x:0,y:0,width:e,height:t},a=o?this.getShadedRegionBounds(e,t,i):s,l=this.createCanvasElement(a.width,a.height),c=l.getContext("2d",{willReadFrequently:!0});c.canvas.width=a.width,c.canvas.height=a.height,this.element.append(l),o&&this.possiblyInsertShadingElement(this.element,e,t,i),this.createScannerPausedUiElement(this.element),this.qrRegion=a,this.context=c,this.canvasElement=l},e.prototype.createScannerPausedUiElement=function(e){var t=document.createElement("div");t.innerText=qi.scannerPaused(),t.style.display="none",t.style.position="absolute",t.style.top="0px",t.style.zIndex="1",t.style.background="rgba(9, 9, 9, 0.46)",t.style.color="#FFECEC",t.style.textAlign="center",t.style.width="100%",e.appendChild(t),this.scannerPausedUiElement=t},e.prototype.scanContext=function(e,t){var r=this;return this.stateManagerProxy.isPaused()?Promise.resolve(!1):this.qrcode.decodeAsync(this.canvasElement).then((function(t){return e(t.text,Wi.createFromQrcodeResult(t)),r.possiblyUpdateShaders(!0),!0})).catch((function(e){r.possiblyUpdateShaders(!1);var n=qi.codeParseError(e);return t(n,Gi.createFrom(n)),!1}))},e.prototype.foreverScan=function(e,t,r){var n=this;if(this.shouldScan&&this.renderedCamera){var i=this.renderedCamera.getSurface(),o=i.videoWidth/i.clientWidth,s=i.videoHeight/i.clientHeight;if(!this.qrRegion)throw"qrRegion undefined when localMediaStream is ready.";var a=this.qrRegion.width*o,l=this.qrRegion.height*s,c=this.qrRegion.x*o,u=this.qrRegion.y*s;this.context.drawImage(i,c,u,a,l,0,0,this.qrRegion.width,this.qrRegion.height);var d=function(){n.foreverScanTimeout=setTimeout((function(){n.foreverScan(e,t,r)}),n.getTimeoutFps(e.fps))};this.scanContext(t,r).then((function(i){i||!0===e.disableFlip?d():(n.context.translate(n.context.canvas.width,0),n.context.scale(-1,1),n.scanContext(t,r).finally((function(){d()})))})).catch((function(e){n.logger.logError("Error happend while scanning context",e),d()}))}},e.prototype.createVideoConstraints=function(e){if("string"==typeof e)return{deviceId:{exact:e}};if("object"==typeof e){var t="facingMode",r="deviceId",n={user:!0,environment:!0},i="exact",o=function(e){if(e in n)return!0;throw"config has invalid 'facingMode' value = "+"'".concat(e,"'")},s=Object.keys(e);if(1!==s.length)throw"'cameraIdOrConfig' object should have exactly 1 key,"+" if passed as an object, found ".concat(s.length," keys");var a=Object.keys(e)[0];if(a!==t&&a!==r)throw"Only '".concat(t,"' and '").concat(r,"' ")+" are supported for 'cameraIdOrConfig'";if(a!==t){var l=e.deviceId;if("string"==typeof l)return{deviceId:l};if("object"==typeof l){if(i in l)return{deviceId:{exact:l["".concat(i)]}};throw"'deviceId' should be string or object with"+" ".concat(i," as key.")}throw"Invalid type of 'deviceId' = ".concat(typeof l)}var c=e.facingMode;if("string"==typeof c){if(o(c))return{facingMode:c}}else{if("object"!=typeof c)throw"Invalid type of 'facingMode' = ".concat(typeof c);if(!(i in c))throw"'facingMode' should be string or object with"+" ".concat(i," as key.");if(o(c["".concat(i)]))return{facingMode:{exact:c["".concat(i)]}}}}throw"Invalid type of 'cameraIdOrConfig' = ".concat(typeof e)},e.prototype.computeCanvasDrawConfig=function(e,t,r,n){if(e<=r&&t<=n)return{x:(r-e)/2,y:(n-t)/2,width:e,height:t};var i=e,o=t;return e>r&&(t*=r/e,e=r),t>n&&(e*=n/t,t=n),this.logger.log("Image downsampled from "+"".concat(i,"X").concat(o)+" to ".concat(e,"X").concat(t,".")),this.computeCanvasDrawConfig(e,t,r,n)},e.prototype.clearElement=function(){if(this.stateManagerProxy.isScanning())throw"Cannot clear while scan is ongoing, close it first.";var e=document.getElementById(this.elementId);e&&(e.innerHTML="")},e.prototype.possiblyUpdateShaders=function(e){this.qrMatch!==e&&(this.hasBorderShaders&&this.borderShaders&&this.borderShaders.length&&this.borderShaders.forEach((function(t){t.style.backgroundColor=e?Io.BORDER_SHADER_MATCH_COLOR:Io.BORDER_SHADER_DEFAULT_COLOR})),this.qrMatch=e)},e.prototype.possiblyCloseLastScanImageFile=function(){this.lastScanImageFile&&(URL.revokeObjectURL(this.lastScanImageFile),this.lastScanImageFile=null)},e.prototype.createCanvasElement=function(e,t,r){var n=e,i=t,o=document.createElement("canvas");return o.style.width="".concat(n,"px"),o.style.height="".concat(i,"px"),o.style.display="none",o.id=Xi(r)?"qr-canvas":r,o},e.prototype.getShadedRegionBounds=function(e,t,r){if(r.width>e||r.height>t)throw"'config.qrbox' dimensions should not be greater than the dimensions of the root HTML element.";return{x:(e-r.width)/2,y:(t-r.height)/2,width:r.width,height:r.height}},e.prototype.possiblyInsertShadingElement=function(e,t,r,n){if(!(t-n.width<1||r-n.height<1)){var i=document.createElement("div");i.style.position="absolute";var o=(t-n.width)/2,s=(r-n.height)/2;if(i.style.borderLeft="".concat(o,"px solid rgba(0, 0, 0, 0.48)"),i.style.borderRight="".concat(o,"px solid rgba(0, 0, 0, 0.48)"),i.style.borderTop="".concat(s,"px solid rgba(0, 0, 0, 0.48)"),i.style.borderBottom="".concat(s,"px solid rgba(0, 0, 0, 0.48)"),i.style.boxSizing="border-box",i.style.top="0px",i.style.bottom="0px",i.style.left="0px",i.style.right="0px",i.id="".concat(Io.SHADED_REGION_ELEMENT_ID),t-n.width<11||r-n.height<11)this.hasBorderShaders=!1;else{var a=40;this.insertShaderBorders(i,a,5,-5,null,0,!0),this.insertShaderBorders(i,a,5,-5,null,0,!1),this.insertShaderBorders(i,a,5,null,-5,0,!0),this.insertShaderBorders(i,a,5,null,-5,0,!1),this.insertShaderBorders(i,5,45,-5,null,-5,!0),this.insertShaderBorders(i,5,45,null,-5,-5,!0),this.insertShaderBorders(i,5,45,-5,null,-5,!1),this.insertShaderBorders(i,5,45,null,-5,-5,!1),this.hasBorderShaders=!0}e.append(i)}},e.prototype.insertShaderBorders=function(e,t,r,n,i,o,s){var a=document.createElement("div");a.style.position="absolute",a.style.backgroundColor=Io.BORDER_SHADER_DEFAULT_COLOR,a.style.width="".concat(t,"px"),a.style.height="".concat(r,"px"),null!==n&&(a.style.top="".concat(n,"px")),null!==i&&(a.style.bottom="".concat(i,"px")),s?a.style.left="".concat(o,"px"):a.style.right="".concat(o,"px"),this.borderShaders||(this.borderShaders=[]),this.borderShaders.push(a),e.appendChild(a)},e.prototype.showPausedState=function(){if(!this.scannerPausedUiElement)throw"[internal error] scanner paused UI element not found";this.scannerPausedUiElement.style.display="block"},e.prototype.hidePausedState=function(){if(!this.scannerPausedUiElement)throw"[internal error] scanner paused UI element not found";this.scannerPausedUiElement.style.display="none"},e.prototype.getTimeoutFps=function(e){return 1e3/e},e}(),ko="data:image/svg+xml;base64,",Ro=ko+"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAzNzEuNjQzIDM3MS42NDMiIHN0eWxlPSJlbmFibGUtYmFja2dyb3VuZDpuZXcgMCAwIDM3MS42NDMgMzcxLjY0MyIgeG1sOnNwYWNlPSJwcmVzZXJ2ZSI+PHBhdGggZD0iTTEwNS4wODQgMzguMjcxaDE2My43Njh2MjBIMTA1LjA4NHoiLz48cGF0aCBkPSJNMzExLjU5NiAxOTAuMTg5Yy03LjQ0MS05LjM0Ny0xOC40MDMtMTYuMjA2LTMyLjc0My0yMC41MjJWMzBjMC0xNi41NDItMTMuNDU4LTMwLTMwLTMwSDEyNS4wODRjLTE2LjU0MiAwLTMwIDEzLjQ1OC0zMCAzMHYxMjAuMTQzaC04LjI5NmMtMTYuNTQyIDAtMzAgMTMuNDU4LTMwIDMwdjEuMzMzYTI5LjgwNCAyOS44MDQgMCAwIDAgNC42MDMgMTUuOTM5Yy03LjM0IDUuNDc0LTEyLjEwMyAxNC4yMjEtMTIuMTAzIDI0LjA2MXYxLjMzM2MwIDkuODQgNC43NjMgMTguNTg3IDEyLjEwMyAyNC4wNjJhMjkuODEgMjkuODEgMCAwIDAtNC42MDMgMTUuOTM4djEuMzMzYzAgMTYuNTQyIDEzLjQ1OCAzMCAzMCAzMGg4LjMyNGMuNDI3IDExLjYzMSA3LjUwMyAyMS41ODcgMTcuNTM0IDI2LjE3Ny45MzEgMTAuNTAzIDQuMDg0IDMwLjE4NyAxNC43NjggNDUuNTM3YTkuOTg4IDkuOTg4IDAgMCAwIDguMjE2IDQuMjg4IDkuOTU4IDkuOTU4IDAgMCAwIDUuNzA0LTEuNzkzYzQuNTMzLTMuMTU1IDUuNjUtOS4zODggMi40OTUtMTMuOTIxLTYuNzk4LTkuNzY3LTkuNjAyLTIyLjYwOC0xMC43Ni0zMS40aDgyLjY4NWMuMjcyLjQxNC41NDUuODE4LjgxNSAxLjIxIDMuMTQyIDQuNTQxIDkuMzcyIDUuNjc5IDEzLjkxMyAyLjUzNCA0LjU0Mi0zLjE0MiA1LjY3Ny05LjM3MSAyLjUzNS0xMy45MTMtMTEuOTE5LTE3LjIyOS04Ljc4Ny0zNS44ODQgOS41ODEtNTcuMDEyIDMuMDY3LTIuNjUyIDEyLjMwNy0xMS43MzIgMTEuMjE3LTI0LjAzMy0uODI4LTkuMzQzLTcuMTA5LTE3LjE5NC0xOC42NjktMjMuMzM3YTkuODU3IDkuODU3IDAgMCAwLTEuMDYxLS40ODZjLS40NjYtLjE4Mi0xMS40MDMtNC41NzktOS43NDEtMTUuNzA2IDEuMDA3LTYuNzM3IDE0Ljc2OC04LjI3MyAyMy43NjYtNy42NjYgMjMuMTU2IDEuNTY5IDM5LjY5OCA3LjgwMyA0Ny44MzYgMTguMDI2IDUuNzUyIDcuMjI1IDcuNjA3IDE2LjYyMyA1LjY3MyAyOC43MzMtLjQxMyAyLjU4NS0uODI0IDUuMjQxLTEuMjQ1IDcuOTU5LTUuNzU2IDM3LjE5NC0xMi45MTkgODMuNDgzLTQ5Ljg3IDExNC42NjEtNC4yMjEgMy41NjEtNC43NTYgOS44Ny0xLjE5NCAxNC4wOTJhOS45OCA5Ljk4IDAgMCAwIDcuNjQ4IDMuNTUxIDkuOTU1IDkuOTU1IDAgMCAwIDYuNDQ0LTIuMzU4YzQyLjY3Mi0zNi4wMDUgNTAuODAyLTg4LjUzMyA1Ni43MzctMTI2Ljg4OC40MTUtMi42ODQuODIxLTUuMzA5IDEuMjI5LTcuODYzIDIuODM0LTE3LjcyMS0uNDU1LTMyLjY0MS05Ljc3Mi00NC4zNDV6bS0yMzIuMzA4IDQyLjYyYy01LjUxNCAwLTEwLTQuNDg2LTEwLTEwdi0xLjMzM2MwLTUuNTE0IDQuNDg2LTEwIDEwLTEwaDE1djIxLjMzM2gtMTV6bS0yLjUtNTIuNjY2YzAtNS41MTQgNC40ODYtMTAgMTAtMTBoNy41djIxLjMzM2gtNy41Yy01LjUxNCAwLTEwLTQuNDg2LTEwLTEwdi0xLjMzM3ptMTcuNSA5My45OTloLTcuNWMtNS41MTQgMC0xMC00LjQ4Ni0xMC0xMHYtMS4zMzNjMC01LjUxNCA0LjQ4Ni0xMCAxMC0xMGg3LjV2MjEuMzMzem0zMC43OTYgMjguODg3Yy01LjUxNCAwLTEwLTQuNDg2LTEwLTEwdi04LjI3MWg5MS40NTdjLS44NTEgNi42NjgtLjQzNyAxMi43ODcuNzMxIDE4LjI3MWgtODIuMTg4em03OS40ODItMTEzLjY5OGMtMy4xMjQgMjAuOTA2IDEyLjQyNyAzMy4xODQgMjEuNjI1IDM3LjA0IDUuNDQxIDIuOTY4IDcuNTUxIDUuNjQ3IDcuNzAxIDcuMTg4LjIxIDIuMTUtMi41NTMgNS42ODQtNC40NzcgNy4yNTEtLjQ4Mi4zNzgtLjkyOS44LTEuMzM1IDEuMjYxLTYuOTg3IDcuOTM2LTExLjk4MiAxNS41Mi0xNS40MzIgMjIuNjg4aC05Ny41NjRWMzBjMC01LjUxNCA0LjQ4Ni0xMCAxMC0xMGgxMjMuNzY5YzUuNTE0IDAgMTAgNC40ODYgMTAgMTB2MTM1LjU3OWMtMy4wMzItLjM4MS02LjE1LS42OTQtOS4zODktLjkxNC0yNS4xNTktMS42OTQtNDIuMzcgNy43NDgtNDQuODk4IDI0LjY2NnoiLz48cGF0aCBkPSJNMTc5LjEyOSA4My4xNjdoLTI0LjA2YTUgNSAwIDAgMC01IDV2MjQuMDYxYTUgNSAwIDAgMCA1IDVoMjQuMDZhNSA1IDAgMCAwIDUtNVY4OC4xNjdhNSA1IDAgMCAwLTUtNXpNMTcyLjYyOSAxNDIuODZoLTEyLjU2VjEzMC44YTUgNSAwIDEgMC0xMCAwdjE3LjA2MWE1IDUgMCAwIDAgNSA1aDE3LjU2YTUgNSAwIDEgMCAwLTEwLjAwMXpNMjE2LjU2OCA4My4xNjdoLTI0LjA2YTUgNSAwIDAgMC01IDV2MjQuMDYxYTUgNSAwIDAgMCA1IDVoMjQuMDZhNSA1IDAgMCAwIDUtNVY4OC4xNjdhNSA1IDAgMCAwLTUtNXptLTUgMjQuMDYxaC0xNC4wNlY5My4xNjdoMTQuMDZ2MTQuMDYxek0yMTEuNjY5IDEyNS45MzZIMTk3LjQxYTUgNSAwIDAgMC01IDV2MTQuMjU3YTUgNSAwIDAgMCA1IDVoMTQuMjU5YTUgNSAwIDAgMCA1LTV2LTE0LjI1N2E1IDUgMCAwIDAtNS01eiIvPjwvc3ZnPg==",Mo=ko+"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA1OS4wMTggNTkuMDE4IiBzdHlsZT0iZW5hYmxlLWJhY2tncm91bmQ6bmV3IDAgMCA1OS4wMTggNTkuMDE4IiB4bWw6c3BhY2U9InByZXNlcnZlIj48cGF0aCBkPSJtNTguNzQxIDU0LjgwOS01Ljk2OS02LjI0NGExMC43NCAxMC43NCAwIDAgMCAyLjgyLTcuMjVjMC01Ljk1My00Ljg0My0xMC43OTYtMTAuNzk2LTEwLjc5NlMzNCAzNS4zNjEgMzQgNDEuMzE0IDM4Ljg0MyA1Mi4xMSA0NC43OTYgNTIuMTFjMi40NDEgMCA0LjY4OC0uODI0IDYuNDk5LTIuMTk2bDYuMDAxIDYuMjc3YS45OTguOTk4IDAgMCAwIDEuNDE0LjAzMiAxIDEgMCAwIDAgLjAzMS0xLjQxNHpNMzYgNDEuMzE0YzAtNC44NSAzLjk0Ni04Ljc5NiA4Ljc5Ni04Ljc5NnM4Ljc5NiAzLjk0NiA4Ljc5NiA4Ljc5Ni0zLjk0NiA4Ljc5Ni04Ljc5NiA4Ljc5NlMzNiA0Ni4xNjQgMzYgNDEuMzE0ek0xMC40MzEgMTYuMDg4YzAgMy4wNyAyLjQ5OCA1LjU2OCA1LjU2OSA1LjU2OHM1LjU2OS0yLjQ5OCA1LjU2OS01LjU2OGMwLTMuMDcxLTIuNDk4LTUuNTY5LTUuNTY5LTUuNTY5cy01LjU2OSAyLjQ5OC01LjU2OSA1LjU2OXptOS4xMzggMGMwIDEuOTY4LTEuNjAyIDMuNTY4LTMuNTY5IDMuNTY4cy0zLjU2OS0xLjYwMS0zLjU2OS0zLjU2OCAxLjYwMi0zLjU2OSAzLjU2OS0zLjU2OSAzLjU2OSAxLjYwMSAzLjU2OSAzLjU2OXoiLz48cGF0aCBkPSJtMzAuODgyIDI4Ljk4NyA5LjE4LTEwLjA1NCAxMS4yNjIgMTAuMzIzYTEgMSAwIDAgMCAxLjM1MS0xLjQ3NWwtMTItMTFhMSAxIDAgMCAwLTEuNDE0LjA2M2wtOS43OTQgMTAuNzI3LTQuNzQzLTQuNzQzYTEuMDAzIDEuMDAzIDAgMCAwLTEuMzY4LS4wNDRMNi4zMzkgMzcuNzY4YTEgMSAwIDEgMCAxLjMyMiAxLjUwMWwxNi4zMTMtMTQuMzYyIDcuMzE5IDcuMzE4YS45OTkuOTk5IDAgMSAwIDEuNDE0LTEuNDE0bC0xLjgyNS0xLjgyNHoiLz48cGF0aCBkPSJNMzAgNDYuNTE4SDJ2LTQyaDU0djI4YTEgMSAwIDEgMCAyIDB2LTI5YTEgMSAwIDAgMC0xLTFIMWExIDEgMCAwIDAtMSAxdjQ0YTEgMSAwIDAgMCAxIDFoMjlhMSAxIDAgMSAwIDAtMnoiLz48L3N2Zz4=",jo=ko+"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA0NjAgNDYwIiBzdHlsZT0iZW5hYmxlLWJhY2tncm91bmQ6bmV3IDAgMCA0NjAgNDYwIiB4bWw6c3BhY2U9InByZXNlcnZlIj48cGF0aCBkPSJNMjMwIDBDMTAyLjk3NSAwIDAgMTAyLjk3NSAwIDIzMHMxMDIuOTc1IDIzMCAyMzAgMjMwIDIzMC0xMDIuOTc0IDIzMC0yMzBTMzU3LjAyNSAwIDIzMCAwem0zOC4zMzMgMzc3LjM2YzAgOC42NzYtNy4wMzQgMTUuNzEtMTUuNzEgMTUuNzFoLTQzLjEwMWMtOC42NzYgMC0xNS43MS03LjAzNC0xNS43MS0xNS43MVYyMDIuNDc3YzAtOC42NzYgNy4wMzMtMTUuNzEgMTUuNzEtMTUuNzFoNDMuMTAxYzguNjc2IDAgMTUuNzEgNy4wMzMgMTUuNzEgMTUuNzFWMzc3LjM2ek0yMzAgMTU3Yy0yMS41MzkgMC0zOS0xNy40NjEtMzktMzlzMTcuNDYxLTM5IDM5LTM5IDM5IDE3LjQ2MSAzOSAzOS0xNy40NjEgMzktMzkgMzl6Ii8+PC9zdmc+",Do=function(){function e(){}return e.createDefault=function(){return{hasPermission:!1,lastUsedCameraId:null}},e}(),Po=function(){function e(){this.data=Do.createDefault();var t=localStorage.getItem(e.LOCAL_STORAGE_KEY);t?this.data=JSON.parse(t):this.reset()}return e.prototype.hasCameraPermissions=function(){return this.data.hasPermission},e.prototype.getLastUsedCameraId=function(){return this.data.lastUsedCameraId},e.prototype.setHasPermission=function(e){this.data.hasPermission=e,this.flush()},e.prototype.setLastUsedCameraId=function(e){this.data.lastUsedCameraId=e,this.flush()},e.prototype.resetLastUsedCameraId=function(){this.data.lastUsedCameraId=null,this.flush()},e.prototype.reset=function(){this.data=Do.createDefault(),this.flush()},e.prototype.flush=function(){localStorage.setItem(e.LOCAL_STORAGE_KEY,JSON.stringify(this.data))},e.LOCAL_STORAGE_KEY="HTML5_QRCODE_DATA",e}(),Lo=function(){function e(){this.infoDiv=document.createElement("div")}return e.prototype.renderInto=function(e){this.infoDiv.style.position="absolute",this.infoDiv.style.top="10px",this.infoDiv.style.right="10px",this.infoDiv.style.zIndex="2",this.infoDiv.style.display="none",this.infoDiv.style.padding="5pt",this.infoDiv.style.border="1px solid #171717",this.infoDiv.style.fontSize="10pt",this.infoDiv.style.background="rgb(0 0 0 / 69%)",this.infoDiv.style.borderRadius="5px",this.infoDiv.style.textAlign="center",this.infoDiv.style.fontWeight="400",this.infoDiv.style.color="white",this.infoDiv.innerText=Zi.poweredBy();var t=document.createElement("a");t.innerText="ScanApp",t.href="https://scanapp.org",t.target="new",t.style.color="white",this.infoDiv.appendChild(t);var r=document.createElement("br"),n=document.createElement("br");this.infoDiv.appendChild(r),this.infoDiv.appendChild(n);var i=document.createElement("a");i.innerText=Zi.reportIssues(),i.href="https://github.com/mebjas/html5-qrcode/issues",i.target="new",i.style.color="white",this.infoDiv.appendChild(i),e.appendChild(this.infoDiv)},e.prototype.show=function(){this.infoDiv.style.display="block"},e.prototype.hide=function(){this.infoDiv.style.display="none"},e}(),Bo=function(){function e(e,t){this.isShowingInfoIcon=!0,this.onTapIn=e,this.onTapOut=t,this.infoIcon=document.createElement("img")}return e.prototype.renderInto=function(e){var t=this;this.infoIcon.alt="Info icon",this.infoIcon.src=jo,this.infoIcon.style.position="absolute",this.infoIcon.style.top="4px",this.infoIcon.style.right="4px",this.infoIcon.style.opacity="0.6",this.infoIcon.style.cursor="pointer",this.infoIcon.style.zIndex="2",this.infoIcon.style.width="16px",this.infoIcon.style.height="16px",this.infoIcon.onmouseover=function(e){return t.onHoverIn()},this.infoIcon.onmouseout=function(e){return t.onHoverOut()},this.infoIcon.onclick=function(e){return t.onClick()},e.appendChild(this.infoIcon)},e.prototype.onHoverIn=function(){this.isShowingInfoIcon&&(this.infoIcon.style.opacity="1")},e.prototype.onHoverOut=function(){this.isShowingInfoIcon&&(this.infoIcon.style.opacity="0.6")},e.prototype.onClick=function(){this.isShowingInfoIcon?(this.isShowingInfoIcon=!1,this.onTapIn(),this.infoIcon.src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAAAQgAAAEIBarqQRAAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAAE1SURBVDiNfdI7S0NBEAXgLya1otFgpbYSbISAgpXYi6CmiH9KCAiChaVga6OiWPgfRDQ+0itaGVNosXtluWwcuMzePfM4M3sq8lbHBubwg1dc4m1E/J/N4ghDPOIsfk/4xiEao5KX0McFljN4C9d4QTPXuY99jP3DsIoDPGM6BY5i5yI5R7O4q+ImFkJY2DCh3cAH2klyB+9J1xUMMAG7eCh1a+Mr+k48b5diXrFVwwLuS+BJ9MfR7+G0FHOHhTHhnXNWS87VDF4pcnfQK4Ep7XScNLmPTZgURNKKYENYWDpzW1BhscS1WHS8CDgURFJQrWcoF3c13KKbgg1BYQfy8xZWEzTTw1QZbAoKu8FqJnktdu5hcVSHmchiILzzuaDQvjBzV2m8yohCE1jHfPx/xhU+y4G/D75ELlRJsSYAAAAASUVORK5CYII=",this.infoIcon.style.opacity="1"):(this.isShowingInfoIcon=!0,this.onTapOut(),this.infoIcon.src=jo,this.infoIcon.style.opacity="0.6")},e}(),Fo=function(){function e(){var e=this;this.infoDiv=new Lo,this.infoIcon=new Bo((function(){e.infoDiv.show()}),(function(){e.infoDiv.hide()}))}return e.prototype.renderInto=function(e){this.infoDiv.renderInto(e),this.infoIcon.renderInto(e)},e}(),Uo=function(e,t,r,n){return new(r||(r=Promise))((function(i,s){function a(e){try{c(n.next(e))}catch(o){s(o)}}function l(e){try{c(n.throw(e))}catch(o){s(o)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(a,l)}c((n=n.apply(e,t||[])).next())}))},zo=function(e,t){var r,n,i,s,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return s={next:l(0),throw:l(1),return:l(2)},"function"===typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function l(l){return function(c){return function(l){if(r)throw new TypeError("Generator is already executing.");for(;s&&(s=0,l[0]&&(a=0)),a;)try{if(r=1,n&&(i=2&l[0]?n.return:l[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,l[1])).done)return i;switch(n=0,i&&(l=[2&l[0],i.value]),l[0]){case 0:case 1:i=l;break;case 4:return a.label++,{value:l[1],done:!1};case 5:a.label++,n=l[1],l=[0];continue;case 7:l=a.ops.pop(),a.trys.pop();continue;default:if(!(i=(i=a.trys).length>0&&i[i.length-1])&&(6===l[0]||2===l[0])){a=0;continue}if(3===l[0]&&(!i||l[1]>i[0]&&l[1]<i[3])){a.label=l[1];break}if(6===l[0]&&a.label<i[1]){a.label=i[1],i=l;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(l);break}i[2]&&a.ops.pop(),a.trys.pop();continue}l=t.call(e,a)}catch(o){l=[6,o],n=0}finally{r=i=0}if(5&l[0])throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}([l,c])}}},Ho=function(){function e(){}return e.hasPermissions=function(){return Uo(this,void 0,void 0,(function(){var e,t,r,n;return zo(this,(function(i){switch(i.label){case 0:return[4,navigator.mediaDevices.enumerateDevices()];case 1:for(e=i.sent(),t=0,r=e;t<r.length;t++)if("videoinput"===(n=r[t]).kind&&n.label)return[2,!0];return[2,!1]}}))}))},e}(),Vo=function(){function e(e){this.supportedScanTypes=this.validateAndReturnScanTypes(e)}return e.prototype.getDefaultScanType=function(){return this.supportedScanTypes[0]},e.prototype.hasMoreThanOneScanType=function(){return this.supportedScanTypes.length>1},e.prototype.isCameraScanRequired=function(){for(var t=0,r=this.supportedScanTypes;t<r.length;t++){var n=r[t];if(e.isCameraScanType(n))return!0}return!1},e.isCameraScanType=function(e){return e===Bi.SCAN_TYPE_CAMERA},e.isFileScanType=function(e){return e===Bi.SCAN_TYPE_FILE},e.prototype.validateAndReturnScanTypes=function(e){if(!e||0===e.length)return Hi.DEFAULT_SUPPORTED_SCAN_TYPE;var t=Hi.DEFAULT_SUPPORTED_SCAN_TYPE.length;if(e.length>t)throw"Max ".concat(t," values expected for ")+"supportedScanTypes";for(var r=0,n=e;r<n.length;r++){var i=n[r];if(!Hi.DEFAULT_SUPPORTED_SCAN_TYPE.includes(i))throw"Unsupported scan type ".concat(i)}return e},e}(),Wo=function(){function e(){}return e.ALL_ELEMENT_CLASS="html5-qrcode-element",e.CAMERA_PERMISSION_BUTTON_ID="html5-qrcode-button-camera-permission",e.CAMERA_START_BUTTON_ID="html5-qrcode-button-camera-start",e.CAMERA_STOP_BUTTON_ID="html5-qrcode-button-camera-stop",e.TORCH_BUTTON_ID="html5-qrcode-button-torch",e.CAMERA_SELECTION_SELECT_ID="html5-qrcode-select-camera",e.FILE_SELECTION_BUTTON_ID="html5-qrcode-button-file-selection",e.ZOOM_SLIDER_ID="html5-qrcode-input-range-zoom",e.SCAN_TYPE_CHANGE_ANCHOR_ID="html5-qrcode-anchor-scan-type-change",e.TORCH_BUTTON_CLASS_TORCH_ON="html5-qrcode-button-torch-on",e.TORCH_BUTTON_CLASS_TORCH_OFF="html5-qrcode-button-torch-off",e}(),Go=function(){function e(){}return e.createElement=function(e,t){var r=document.createElement(e);return r.id=t,r.classList.add(Wo.ALL_ELEMENT_CLASS),"button"===e&&r.setAttribute("type","button"),r},e}(),$o=function(e,t,r,n){return new(r||(r=Promise))((function(i,s){function a(e){try{c(n.next(e))}catch(o){s(o)}}function l(e){try{c(n.throw(e))}catch(o){s(o)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(a,l)}c((n=n.apply(e,t||[])).next())}))},Xo=function(e,t){var r,n,i,s,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return s={next:l(0),throw:l(1),return:l(2)},"function"===typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function l(l){return function(c){return function(l){if(r)throw new TypeError("Generator is already executing.");for(;s&&(s=0,l[0]&&(a=0)),a;)try{if(r=1,n&&(i=2&l[0]?n.return:l[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,l[1])).done)return i;switch(n=0,i&&(l=[2&l[0],i.value]),l[0]){case 0:case 1:i=l;break;case 4:return a.label++,{value:l[1],done:!1};case 5:a.label++,n=l[1],l=[0];continue;case 7:l=a.ops.pop(),a.trys.pop();continue;default:if(!(i=(i=a.trys).length>0&&i[i.length-1])&&(6===l[0]||2===l[0])){a=0;continue}if(3===l[0]&&(!i||l[1]>i[0]&&l[1]<i[3])){a.label=l[1];break}if(6===l[0]&&a.label<i[1]){a.label=i[1],i=l;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(l);break}i[2]&&a.ops.pop(),a.trys.pop();continue}l=t.call(e,a)}catch(o){l=[6,o],n=0}finally{r=i=0}if(5&l[0])throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}([l,c])}}},Yo=function(){function e(e,t,r){this.isTorchOn=!1,this.torchCapability=e,this.buttonController=t,this.onTorchActionFailureCallback=r}return e.prototype.isTorchEnabled=function(){return this.isTorchOn},e.prototype.flipState=function(){return $o(this,void 0,void 0,(function(){var e,t;return Xo(this,(function(r){switch(r.label){case 0:this.buttonController.disable(),e=!this.isTorchOn,r.label=1;case 1:return r.trys.push([1,3,,4]),[4,this.torchCapability.apply(e)];case 2:return r.sent(),this.updateUiBasedOnLatestSettings(this.torchCapability.value(),e),[3,4];case 3:return t=r.sent(),this.propagateFailure(e,t),this.buttonController.enable(),[3,4];case 4:return[2]}}))}))},e.prototype.updateUiBasedOnLatestSettings=function(e,t){e===t?(this.buttonController.setText(t?Qi.torchOffButton():Qi.torchOnButton()),this.isTorchOn=t):this.propagateFailure(t),this.buttonController.enable()},e.prototype.propagateFailure=function(e,t){var r=e?Qi.torchOnFailedMessage():Qi.torchOffFailedMessage();t&&(r+="; Error = "+t),this.onTorchActionFailureCallback(r)},e.prototype.reset=function(){this.isTorchOn=!1},e}(),qo=function(){function e(e,t){this.onTorchActionFailureCallback=t,this.torchButton=Go.createElement("button",Wo.TORCH_BUTTON_ID),this.torchController=new Yo(e,this,t)}return e.prototype.render=function(e,t){var r=this;this.torchButton.innerText=Qi.torchOnButton(),this.torchButton.style.display=t.display,this.torchButton.style.marginLeft=t.marginLeft;var n=this;this.torchButton.addEventListener("click",(function(e){return $o(r,void 0,void 0,(function(){return Xo(this,(function(e){switch(e.label){case 0:return[4,n.torchController.flipState()];case 1:return e.sent(),n.torchController.isTorchEnabled()?(n.torchButton.classList.remove(Wo.TORCH_BUTTON_CLASS_TORCH_OFF),n.torchButton.classList.add(Wo.TORCH_BUTTON_CLASS_TORCH_ON)):(n.torchButton.classList.remove(Wo.TORCH_BUTTON_CLASS_TORCH_ON),n.torchButton.classList.add(Wo.TORCH_BUTTON_CLASS_TORCH_OFF)),[2]}}))}))})),e.appendChild(this.torchButton)},e.prototype.updateTorchCapability=function(e){this.torchController=new Yo(e,this,this.onTorchActionFailureCallback)},e.prototype.getTorchButton=function(){return this.torchButton},e.prototype.hide=function(){this.torchButton.style.display="none"},e.prototype.show=function(){this.torchButton.style.display="inline-block"},e.prototype.disable=function(){this.torchButton.disabled=!0},e.prototype.enable=function(){this.torchButton.disabled=!1},e.prototype.setText=function(e){this.torchButton.innerText=e},e.prototype.reset=function(){this.torchButton.innerText=Qi.torchOnButton(),this.torchController.reset()},e.create=function(t,r,n,i){var o=new e(r,i);return o.render(t,n),o},e}(),Qo=function(){function e(e,t,r){this.fileBasedScanRegion=this.createFileBasedScanRegion(),this.fileBasedScanRegion.style.display=t?"block":"none",e.appendChild(this.fileBasedScanRegion);var n=document.createElement("label");n.setAttribute("for",this.getFileScanInputId()),n.style.display="inline-block",this.fileBasedScanRegion.appendChild(n),this.fileSelectionButton=Go.createElement("button",Wo.FILE_SELECTION_BUTTON_ID),this.setInitialValueToButton(),this.fileSelectionButton.addEventListener("click",(function(e){n.click()})),n.append(this.fileSelectionButton),this.fileScanInput=Go.createElement("input",this.getFileScanInputId()),this.fileScanInput.type="file",this.fileScanInput.accept="image/*",this.fileScanInput.style.display="none",n.appendChild(this.fileScanInput);var i=this;this.fileScanInput.addEventListener("change",(function(e){if(null!=e&&null!=e.target){var t=e.target;if(!t.files||0!==t.files.length){var n=t.files[0],o=n.name;i.setImageNameToButton(o),r(n)}}}));var o=this.createDragAndDropMessage();this.fileBasedScanRegion.appendChild(o),this.fileBasedScanRegion.addEventListener("dragenter",(function(e){i.fileBasedScanRegion.style.border=i.fileBasedScanRegionActiveBorder(),e.stopPropagation(),e.preventDefault()})),this.fileBasedScanRegion.addEventListener("dragleave",(function(e){i.fileBasedScanRegion.style.border=i.fileBasedScanRegionDefaultBorder(),e.stopPropagation(),e.preventDefault()})),this.fileBasedScanRegion.addEventListener("dragover",(function(e){i.fileBasedScanRegion.style.border=i.fileBasedScanRegionActiveBorder(),e.stopPropagation(),e.preventDefault()})),this.fileBasedScanRegion.addEventListener("drop",(function(e){e.stopPropagation(),e.preventDefault(),i.fileBasedScanRegion.style.border=i.fileBasedScanRegionDefaultBorder();var t=e.dataTransfer;if(t){var n=t.files;if(!n||0===n.length)return;for(var s=!1,a=0;a<n.length;++a){var l=n.item(a);if(l){if(l.type.match(/image.*/)){s=!0;var c=l.name;i.setImageNameToButton(c),r(l),o.innerText=Qi.dragAndDropMessage();break}}}s||(o.innerText=Qi.dragAndDropMessageOnlyImages())}}))}return e.prototype.hide=function(){this.fileBasedScanRegion.style.display="none",this.fileScanInput.disabled=!0},e.prototype.show=function(){this.fileBasedScanRegion.style.display="block",this.fileScanInput.disabled=!1},e.prototype.isShowing=function(){return"block"===this.fileBasedScanRegion.style.display},e.prototype.resetValue=function(){this.fileScanInput.value="",this.setInitialValueToButton()},e.prototype.createFileBasedScanRegion=function(){var e=document.createElement("div");return e.style.textAlign="center",e.style.margin="auto",e.style.width="80%",e.style.maxWidth="600px",e.style.border=this.fileBasedScanRegionDefaultBorder(),e.style.padding="10px",e.style.marginBottom="10px",e},e.prototype.fileBasedScanRegionDefaultBorder=function(){return"6px dashed #ebebeb"},e.prototype.fileBasedScanRegionActiveBorder=function(){return"6px dashed rgb(153 151 151)"},e.prototype.createDragAndDropMessage=function(){var e=document.createElement("div");return e.innerText=Qi.dragAndDropMessage(),e.style.fontWeight="400",e},e.prototype.setImageNameToButton=function(e){if(e.length>20){var t=e.substring(0,8),r=e.length,n=e.substring(r-8,r);e="".concat(t,"....").concat(n)}var i=Qi.fileSelectionChooseAnother()+" - "+e;this.fileSelectionButton.innerText=i},e.prototype.setInitialValueToButton=function(){var e=Qi.fileSelectionChooseImage()+" - "+Qi.fileSelectionNoImageSelected();this.fileSelectionButton.innerText=e},e.prototype.getFileScanInputId=function(){return"html5-qrcode-private-filescan-input"},e.create=function(t,r,n){return new e(t,r,n)},e}(),Zo=function(){function e(e){this.selectElement=Go.createElement("select",Wo.CAMERA_SELECTION_SELECT_ID),this.cameras=e,this.options=[]}return e.prototype.render=function(e){var t=document.createElement("span");t.style.marginRight="10px";var r=this.cameras.length;if(0===r)throw new Error("No cameras found");if(1===r)t.style.display="none";else{var n=Qi.selectCamera();t.innerText="".concat(n," (").concat(this.cameras.length,")  ")}for(var i=1,o=0,s=this.cameras;o<s.length;o++){var a=s[o],l=a.id,c=null==a.label?l:a.label;c&&""!==c||(c=[Qi.anonymousCameraPrefix(),i++].join(" "));var u=document.createElement("option");u.value=l,u.innerText=c,this.options.push(u),this.selectElement.appendChild(u)}t.appendChild(this.selectElement),e.appendChild(t)},e.prototype.disable=function(){this.selectElement.disabled=!0},e.prototype.isDisabled=function(){return!0===this.selectElement.disabled},e.prototype.enable=function(){this.selectElement.disabled=!1},e.prototype.getValue=function(){return this.selectElement.value},e.prototype.hasValue=function(e){for(var t=0,r=this.options;t<r.length;t++){if(r[t].value===e)return!0}return!1},e.prototype.setValue=function(e){if(!this.hasValue(e))throw new Error("".concat(e," is not present in the camera list."));this.selectElement.value=e},e.prototype.hasSingleItem=function(){return 1===this.cameras.length},e.prototype.numCameras=function(){return this.cameras.length},e.create=function(t,r){var n=new e(r);return n.render(t),n},e}(),Ko=function(){function e(){this.onChangeCallback=null,this.zoomElementContainer=document.createElement("div"),this.rangeInput=Go.createElement("input",Wo.ZOOM_SLIDER_ID),this.rangeInput.type="range",this.rangeText=document.createElement("span"),this.rangeInput.min="1",this.rangeInput.max="5",this.rangeInput.value="1",this.rangeInput.step="0.1"}return e.prototype.render=function(e,t){this.zoomElementContainer.style.display=t?"block":"none",this.zoomElementContainer.style.padding="5px 10px",this.zoomElementContainer.style.textAlign="center",e.appendChild(this.zoomElementContainer),this.rangeInput.style.display="inline-block",this.rangeInput.style.width="50%",this.rangeInput.style.height="5px",this.rangeInput.style.background="#d3d3d3",this.rangeInput.style.outline="none",this.rangeInput.style.opacity="0.7";var r=Qi.zoom();this.rangeText.innerText="".concat(this.rangeInput.value,"x ").concat(r),this.rangeText.style.marginRight="10px";var n=this;this.rangeInput.addEventListener("input",(function(){return n.onValueChange()})),this.rangeInput.addEventListener("change",(function(){return n.onValueChange()})),this.zoomElementContainer.appendChild(this.rangeInput),this.zoomElementContainer.appendChild(this.rangeText)},e.prototype.onValueChange=function(){var e=Qi.zoom();this.rangeText.innerText="".concat(this.rangeInput.value,"x ").concat(e),this.onChangeCallback&&this.onChangeCallback(parseFloat(this.rangeInput.value))},e.prototype.setValues=function(e,t,r,n){this.rangeInput.min=e.toString(),this.rangeInput.max=t.toString(),this.rangeInput.step=n.toString(),this.rangeInput.value=r.toString(),this.onValueChange()},e.prototype.show=function(){this.zoomElementContainer.style.display="block"},e.prototype.hide=function(){this.zoomElementContainer.style.display="none"},e.prototype.setOnCameraZoomValueChangeCallback=function(e){this.onChangeCallback=e},e.prototype.removeOnCameraZoomValueChangeCallback=function(){this.onChangeCallback=null},e.create=function(t,r){var n=new e;return n.render(t,r),n},e}();!function(e){e[e.STATUS_DEFAULT=0]="STATUS_DEFAULT",e[e.STATUS_SUCCESS=1]="STATUS_SUCCESS",e[e.STATUS_WARNING=2]="STATUS_WARNING",e[e.STATUS_REQUESTING_PERMISSION=3]="STATUS_REQUESTING_PERMISSION"}(Eo||(Eo={}));!function(){function e(e,t,r){if(this.lastMatchFound=null,this.cameraScanImage=null,this.fileScanImage=null,this.fileSelectionUi=null,this.elementId=e,this.config=this.createConfig(t),this.verbose=!0===r,!document.getElementById(e))throw"HTML Element with id=".concat(e," not found");this.scanTypeSelector=new Vo(this.config.supportedScanTypes),this.currentScanType=this.scanTypeSelector.getDefaultScanType(),this.sectionSwapAllowed=!0,this.logger=new $i(this.verbose),this.persistedDataManager=new Po,!0!==t.rememberLastUsedCamera&&this.persistedDataManager.reset()}e.prototype.render=function(e,t){var r=this;this.lastMatchFound=null,this.qrCodeSuccessCallback=function(t,n){if(e)e(t,n);else{if(r.lastMatchFound===t)return;r.lastMatchFound=t,r.setHeaderMessage(Qi.lastMatch(t),Eo.STATUS_SUCCESS)}},this.qrCodeErrorCallback=function(e,r){t&&t(e,r)};var n,i,o=document.getElementById(this.elementId);if(!o)throw"HTML Element with id=".concat(this.elementId," not found");o.innerHTML="",this.createBasicLayout(o),this.html5Qrcode=new Oo(this.getScanRegionId(),(n=this.config,i=this.verbose,{formatsToSupport:n.formatsToSupport,useBarCodeDetectorIfSupported:n.useBarCodeDetectorIfSupported,experimentalFeatures:n.experimentalFeatures,verbose:i}))},e.prototype.pause=function(e){(Xi(e)||!0!==e)&&(e=!1),this.getHtml5QrcodeOrFail().pause(e)},e.prototype.resume=function(){this.getHtml5QrcodeOrFail().resume()},e.prototype.getState=function(){return this.getHtml5QrcodeOrFail().getState()},e.prototype.clear=function(){var e=this,t=function(){var t=document.getElementById(e.elementId);t&&(t.innerHTML="",e.resetBasicLayout(t))};return this.html5Qrcode?new Promise((function(r,n){e.html5Qrcode?e.html5Qrcode.isScanning?e.html5Qrcode.stop().then((function(n){e.html5Qrcode?(e.html5Qrcode.clear(),t(),r()):r()})).catch((function(t){e.verbose&&e.logger.logError("Unable to stop qrcode scanner",t),n(t)})):(e.html5Qrcode.clear(),t(),r()):r()})):Promise.resolve()},e.prototype.getRunningTrackCapabilities=function(){return this.getHtml5QrcodeOrFail().getRunningTrackCapabilities()},e.prototype.getRunningTrackSettings=function(){return this.getHtml5QrcodeOrFail().getRunningTrackSettings()},e.prototype.applyVideoConstraints=function(e){return this.getHtml5QrcodeOrFail().applyVideoConstraints(e)},e.prototype.getHtml5QrcodeOrFail=function(){if(!this.html5Qrcode)throw"Code scanner not initialized.";return this.html5Qrcode},e.prototype.createConfig=function(e){return e?(e.fps||(e.fps=Hi.SCAN_DEFAULT_FPS),e.rememberLastUsedCamera!==!Hi.DEFAULT_REMEMBER_LAST_CAMERA_USED&&(e.rememberLastUsedCamera=Hi.DEFAULT_REMEMBER_LAST_CAMERA_USED),e.supportedScanTypes||(e.supportedScanTypes=Hi.DEFAULT_SUPPORTED_SCAN_TYPE),e):{fps:Hi.SCAN_DEFAULT_FPS,rememberLastUsedCamera:Hi.DEFAULT_REMEMBER_LAST_CAMERA_USED,supportedScanTypes:Hi.DEFAULT_SUPPORTED_SCAN_TYPE}},e.prototype.createBasicLayout=function(e){e.style.position="relative",e.style.padding="0px",e.style.border="1px solid silver",this.createHeader(e);var t=document.createElement("div"),r=this.getScanRegionId();t.id=r,t.style.width="100%",t.style.minHeight="100px",t.style.textAlign="center",e.appendChild(t),Vo.isCameraScanType(this.currentScanType)?this.insertCameraScanImageToScanRegion():this.insertFileScanImageToScanRegion();var n=document.createElement("div"),i=this.getDashboardId();n.id=i,n.style.width="100%",e.appendChild(n),this.setupInitialDashboard(n)},e.prototype.resetBasicLayout=function(e){e.style.border="none"},e.prototype.setupInitialDashboard=function(e){this.createSection(e),this.createSectionControlPanel(),this.scanTypeSelector.hasMoreThanOneScanType()&&this.createSectionSwap()},e.prototype.createHeader=function(e){var t=document.createElement("div");t.style.textAlign="left",t.style.margin="0px",e.appendChild(t),(new Fo).renderInto(t);var r=document.createElement("div");r.id=this.getHeaderMessageContainerId(),r.style.display="none",r.style.textAlign="center",r.style.fontSize="14px",r.style.padding="2px 10px",r.style.margin="4px",r.style.borderTop="1px solid #f6f6f6",t.appendChild(r)},e.prototype.createSection=function(e){var t=document.createElement("div");t.id=this.getDashboardSectionId(),t.style.width="100%",t.style.padding="10px 0px 10px 0px",t.style.textAlign="left",e.appendChild(t)},e.prototype.createCameraListUi=function(e,t,r){var n=this;n.showHideScanTypeSwapLink(!1),n.setHeaderMessage(Qi.cameraPermissionRequesting());var i=function(){r||n.createPermissionButton(e,t)};Oo.getCameras().then((function(r){n.persistedDataManager.setHasPermission(!0),n.showHideScanTypeSwapLink(!0),n.resetHeaderMessage(),r&&r.length>0?(e.removeChild(t),n.renderCameraSelection(r)):(n.setHeaderMessage(Qi.noCameraFound(),Eo.STATUS_WARNING),i())})).catch((function(e){n.persistedDataManager.setHasPermission(!1),r?r.disabled=!1:i(),n.setHeaderMessage(e,Eo.STATUS_WARNING),n.showHideScanTypeSwapLink(!0)}))},e.prototype.createPermissionButton=function(e,t){var r=this,n=Go.createElement("button",this.getCameraPermissionButtonId());n.innerText=Qi.cameraPermissionTitle(),n.addEventListener("click",(function(){n.disabled=!0,r.createCameraListUi(e,t,n)})),t.appendChild(n)},e.prototype.createPermissionsUi=function(e,t){var r=this;Vo.isCameraScanType(this.currentScanType)&&this.persistedDataManager.hasCameraPermissions()?Ho.hasPermissions().then((function(n){n?r.createCameraListUi(e,t):(r.persistedDataManager.setHasPermission(!1),r.createPermissionButton(e,t))})).catch((function(n){r.persistedDataManager.setHasPermission(!1),r.createPermissionButton(e,t)})):this.createPermissionButton(e,t)},e.prototype.createSectionControlPanel=function(){var e=document.getElementById(this.getDashboardSectionId()),t=document.createElement("div");e.appendChild(t);var r=document.createElement("div");r.id=this.getDashboardSectionCameraScanRegionId(),r.style.display=Vo.isCameraScanType(this.currentScanType)?"block":"none",t.appendChild(r);var n=document.createElement("div");n.style.textAlign="center",r.appendChild(n),this.scanTypeSelector.isCameraScanRequired()&&this.createPermissionsUi(r,n),this.renderFileScanUi(t)},e.prototype.renderFileScanUi=function(e){var t=Vo.isFileScanType(this.currentScanType),r=this;this.fileSelectionUi=Qo.create(e,t,(function(e){if(!r.html5Qrcode)throw"html5Qrcode not defined";Vo.isFileScanType(r.currentScanType)&&(r.setHeaderMessage(Qi.loadingImage()),r.html5Qrcode.scanFileV2(e,!0).then((function(e){r.resetHeaderMessage(),r.qrCodeSuccessCallback(e.decodedText,e)})).catch((function(e){r.setHeaderMessage(e,Eo.STATUS_WARNING),r.qrCodeErrorCallback(e,Gi.createFrom(e))})))}))},e.prototype.renderCameraSelection=function(e){var t=this,r=this,n=document.getElementById(this.getDashboardSectionCameraScanRegionId());n.style.textAlign="center";var i=Ko.create(n,!1),o=Zo.create(n,e),s=document.createElement("span"),a=Go.createElement("button",Wo.CAMERA_START_BUTTON_ID);a.innerText=Qi.scanButtonStartScanningText(),s.appendChild(a);var l,c=Go.createElement("button",Wo.CAMERA_STOP_BUTTON_ID);c.innerText=Qi.scanButtonStopScanningText(),c.style.display="none",c.disabled=!0,s.appendChild(c);n.appendChild(s);var u=function(e){e||(a.style.display="none"),a.innerText=Qi.scanButtonStartScanningText(),a.style.opacity="1",a.disabled=!1,e&&(a.style.display="inline-block")};if(a.addEventListener("click",(function(e){a.innerText=Qi.scanButtonScanningStarting(),o.disable(),a.disabled=!0,a.style.opacity="0.5",t.scanTypeSelector.hasMoreThanOneScanType()&&r.showHideScanTypeSwapLink(!1),r.resetHeaderMessage();var n,d=o.getValue();r.persistedDataManager.setLastUsedCameraId(d),r.html5Qrcode.start(d,(n=r.config,{fps:n.fps,qrbox:n.qrbox,aspectRatio:n.aspectRatio,disableFlip:n.disableFlip,videoConstraints:n.videoConstraints}),r.qrCodeSuccessCallback,r.qrCodeErrorCallback).then((function(e){c.disabled=!1,c.style.display="inline-block",u(!1);var n=r.html5Qrcode.getRunningTrackCameraCapabilities();!0===t.config.showTorchButtonIfSupported&&function(e){e.torchFeature().isSupported()?(l?l.updateTorchCapability(e.torchFeature()):l=qo.create(s,e.torchFeature(),{display:"none",marginLeft:"5px"},(function(e){r.setHeaderMessage(e,Eo.STATUS_WARNING)})),l.show()):l&&l.hide()}(n),!0===t.config.showZoomSliderIfSupported&&function(e){var r=e.zoomFeature();if(r.isSupported()){i.setOnCameraZoomValueChangeCallback((function(e){r.apply(e)}));var n,o,s,a=1;t.config.defaultZoomValueIfSupported&&(a=t.config.defaultZoomValueIfSupported),n=a,o=r.min(),a=n>(s=r.max())?s:n<o?o:n,i.setValues(r.min(),r.max(),a,r.step()),i.show()}}(n)})).catch((function(e){r.showHideScanTypeSwapLink(!0),o.enable(),u(!0),r.setHeaderMessage(e,Eo.STATUS_WARNING)}))})),o.hasSingleItem()&&a.click(),c.addEventListener("click",(function(e){if(!r.html5Qrcode)throw"html5Qrcode not defined";c.disabled=!0,r.html5Qrcode.stop().then((function(e){t.scanTypeSelector.hasMoreThanOneScanType()&&r.showHideScanTypeSwapLink(!0),o.enable(),a.disabled=!1,c.style.display="none",a.style.display="inline-block",l&&(l.reset(),l.hide()),i.removeOnCameraZoomValueChangeCallback(),i.hide(),r.insertCameraScanImageToScanRegion()})).catch((function(e){c.disabled=!1,r.setHeaderMessage(e,Eo.STATUS_WARNING)}))})),r.persistedDataManager.getLastUsedCameraId()){var d=r.persistedDataManager.getLastUsedCameraId();o.hasValue(d)?(o.setValue(d),a.click()):r.persistedDataManager.resetLastUsedCameraId()}},e.prototype.createSectionSwap=function(){var e=this,t=Qi.textIfCameraScanSelected(),r=Qi.textIfFileScanSelected(),n=document.getElementById(this.getDashboardSectionId()),i=document.createElement("div");i.style.textAlign="center";var o=Go.createElement("span",this.getDashboardSectionSwapLinkId());o.style.textDecoration="underline",o.style.cursor="pointer",o.innerText=Vo.isCameraScanType(this.currentScanType)?t:r,o.addEventListener("click",(function(){e.sectionSwapAllowed?(e.resetHeaderMessage(),e.fileSelectionUi.resetValue(),e.sectionSwapAllowed=!1,Vo.isCameraScanType(e.currentScanType)?(e.clearScanRegion(),e.getCameraScanRegion().style.display="none",e.fileSelectionUi.show(),o.innerText=r,e.currentScanType=Bi.SCAN_TYPE_FILE,e.insertFileScanImageToScanRegion()):(e.clearScanRegion(),e.getCameraScanRegion().style.display="block",e.fileSelectionUi.hide(),o.innerText=t,e.currentScanType=Bi.SCAN_TYPE_CAMERA,e.insertCameraScanImageToScanRegion(),e.startCameraScanIfPermissionExistsOnSwap()),e.sectionSwapAllowed=!0):e.verbose&&e.logger.logError("Section swap called when not allowed")})),i.appendChild(o),n.appendChild(i)},e.prototype.startCameraScanIfPermissionExistsOnSwap=function(){var e=this,t=this;this.persistedDataManager.hasCameraPermissions()&&Ho.hasPermissions().then((function(r){if(r){var n=document.getElementById(t.getCameraPermissionButtonId());if(!n)throw e.logger.logError("Permission button not found, fail;"),"Permission button not found";n.click()}else t.persistedDataManager.setHasPermission(!1)})).catch((function(e){t.persistedDataManager.setHasPermission(!1)}))},e.prototype.resetHeaderMessage=function(){document.getElementById(this.getHeaderMessageContainerId()).style.display="none"},e.prototype.setHeaderMessage=function(e,t){t||(t=Eo.STATUS_DEFAULT);var r=this.getHeaderMessageDiv();switch(r.innerText=e,r.style.display="block",t){case Eo.STATUS_SUCCESS:r.style.background="rgba(106, 175, 80, 0.26)",r.style.color="#477735";break;case Eo.STATUS_WARNING:r.style.background="rgba(203, 36, 49, 0.14)",r.style.color="#cb2431";break;case Eo.STATUS_DEFAULT:default:r.style.background="rgba(0, 0, 0, 0)",r.style.color="rgb(17, 17, 17)"}},e.prototype.showHideScanTypeSwapLink=function(e){this.scanTypeSelector.hasMoreThanOneScanType()&&(!0!==e&&(e=!1),this.sectionSwapAllowed=e,this.getDashboardSectionSwapLink().style.display=e?"inline-block":"none")},e.prototype.insertCameraScanImageToScanRegion=function(){var e=this,t=document.getElementById(this.getScanRegionId());if(this.cameraScanImage)return t.innerHTML="<br>",void t.appendChild(this.cameraScanImage);this.cameraScanImage=new Image,this.cameraScanImage.onload=function(r){t.innerHTML="<br>",t.appendChild(e.cameraScanImage)},this.cameraScanImage.width=64,this.cameraScanImage.style.opacity="0.8",this.cameraScanImage.src=Ro,this.cameraScanImage.alt=Qi.cameraScanAltText()},e.prototype.insertFileScanImageToScanRegion=function(){var e=this,t=document.getElementById(this.getScanRegionId());if(this.fileScanImage)return t.innerHTML="<br>",void t.appendChild(this.fileScanImage);this.fileScanImage=new Image,this.fileScanImage.onload=function(r){t.innerHTML="<br>",t.appendChild(e.fileScanImage)},this.fileScanImage.width=64,this.fileScanImage.style.opacity="0.8",this.fileScanImage.src=Mo,this.fileScanImage.alt=Qi.fileScanAltText()},e.prototype.clearScanRegion=function(){document.getElementById(this.getScanRegionId()).innerHTML=""},e.prototype.getDashboardSectionId=function(){return"".concat(this.elementId,"__dashboard_section")},e.prototype.getDashboardSectionCameraScanRegionId=function(){return"".concat(this.elementId,"__dashboard_section_csr")},e.prototype.getDashboardSectionSwapLinkId=function(){return Wo.SCAN_TYPE_CHANGE_ANCHOR_ID},e.prototype.getScanRegionId=function(){return"".concat(this.elementId,"__scan_region")},e.prototype.getDashboardId=function(){return"".concat(this.elementId,"__dashboard")},e.prototype.getHeaderMessageContainerId=function(){return"".concat(this.elementId,"__header_message")},e.prototype.getCameraPermissionButtonId=function(){return Wo.CAMERA_PERMISSION_BUTTON_ID},e.prototype.getCameraScanRegion=function(){return document.getElementById(this.getDashboardSectionCameraScanRegionId())},e.prototype.getDashboardSectionSwapLink=function(){return document.getElementById(this.getDashboardSectionSwapLinkId())},e.prototype.getHeaderMessageDiv=function(){return document.getElementById(this.getHeaderMessageContainerId())}}();const Jo=e=>{let{onScan:r,onError:n,onClose:i}=e;const[o,s]=(0,t.useState)(!1),[a,l]=(0,t.useState)(null),c=(0,t.useRef)(null),u="html5-qrcode-scanner";(0,t.useEffect)((()=>()=>{c.current&&c.current.stop().catch((e=>{console.error("Error stopping scanner:",e)}))}),[]);const d=async e=>{try{c.current&&await c.current.stop(),s(!1);try{const e=new Audio("/beep.mp3");await e.play()}catch(t){console.log("Sound not available")}console.log("Successfully scanned:",e),r(e)}catch(i){console.error("Error handling successful scan:",i),n&&n("Error processing scan result")}},h=async()=>{try{l(null),s(!0),c.current||(c.current=new Oo(u));const t=await Oo.getCameras();if(!t||0===t.length)throw new Error("No cameras found on the device.");const r=t.find((e=>e.label.toLowerCase().includes("back")))||t[0],i={fps:10,qrbox:{width:Math.min(250,window.innerWidth-50),height:Math.min(250,window.innerWidth-50)},aspectRatio:1,showTorchButtonIfSupported:!0,showZoomSliderIfSupported:!0,defaultZoomValueIfSupported:2};try{await c.current.start(r.id,i,d,(e=>{console.log(`QR Code scanning error: ${e}`)})),setTimeout((()=>{const e=document.querySelector(`#${u} video`),t=document.querySelector(`#${u} .qrcode-region`);e&&(e.style.width="100%",e.style.height="100%",e.style.objectFit="cover",e.style.borderRadius="8px"),t&&(t.style.width="100%",t.style.height="100%",t.style.minHeight="300px",t.style.borderRadius="8px")}),1e3)}catch(e){console.error("Camera start error:",e),l("Failed to start camera. Please check camera permissions and try again."),s(!1),n&&n("Camera access failed. Please ensure you've granted camera permissions.")}}catch(t){console.error("Error starting scanner:",t),s(!1),l(t instanceof Error?t.message:"Scanner initialization failed. Please try again."),n&&n(t instanceof Error?t.message:String(t))}};return(0,Dt.jsxs)("div",{className:"bg-white rounded-lg shadow-lg p-4",children:[(0,Dt.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,Dt.jsx)("h3",{className:"text-lg font-medium",children:"Scan Barcode or QR Code"}),i&&(0,Dt.jsx)("button",{onClick:i,className:"text-gray-500 hover:text-gray-700",children:(0,Dt.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,Dt.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),(0,Dt.jsxs)("div",{className:"relative w-full aspect-square bg-gray-100 rounded-lg overflow-hidden",children:[(0,Dt.jsxs)("div",{id:u,className:"w-full h-full",style:{position:"relative",minHeight:"300px",borderRadius:"8px",overflow:"hidden"},children:[!o&&!a&&(0,Dt.jsxs)("div",{className:"absolute inset-0 flex flex-col items-center justify-center",children:[(0,Dt.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-16 w-16 text-gray-400 mb-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,Dt.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v1m6 11h2m-6 0h-2v4m0-11v3m0 0h.01M12 12h4.01M16 20h4M4 12h4m12 0h.01M5 8h2a1 1 0 001-1V5a1 1 0 00-1-1H5a1 1 0 00-1 1v2a1 1 0 001 1zm12 0h2a1 1 0 001-1V5a1 1 0 00-1-1h-2a1 1 0 00-1 1v2a1 1 0 001 1zM5 20h2a1 1 0 001-1v-2a1 1 0 00-1-1H5a1 1 0 00-1 1v2a1 1 0 001 1z"})}),(0,Dt.jsx)("p",{className:"text-gray-500 text-center px-4",children:"Position the barcode or QR code within the scanner"})]}),a&&(0,Dt.jsxs)("div",{className:"absolute inset-0 flex flex-col items-center justify-center bg-red-50 p-4",children:[(0,Dt.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-16 w-16 text-red-400 mb-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,Dt.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})}),(0,Dt.jsx)("p",{className:"text-red-600 text-center font-medium mb-2",children:"Camera Error"}),(0,Dt.jsx)("p",{className:"text-red-500 text-center mb-4",children:a}),(0,Dt.jsx)("button",{onClick:async()=>{if(c.current&&o)try{await c.current.stop(),setTimeout((async()=>{try{var e;const t=await Oo.getCameras();if(!t||0===t.length)throw new Error("No cameras found on the device.");const r=t[0],n=t.find((e=>e.id!==r.id))||r,i={fps:10,qrbox:{width:Math.min(250,window.innerWidth-50),height:Math.min(250,window.innerWidth-50)},aspectRatio:1,showTorchButtonIfSupported:!0,showZoomSliderIfSupported:!0};await(null===(e=c.current)||void 0===e?void 0:e.start(n.id,i,d,(e=>{console.log(`QR Code scanning error: ${e}`)}))),l(null)}catch(t){console.error("Error switching camera:",t),l("Failed to access any camera. Please check your device permissions."),s(!1)}}),500)}catch(e){console.error("Error stopping scanner before switch:",e)}},className:"bg-red-600 text-white px-4 py-2 rounded-md hover:bg-red-700 transition-colors mb-2",children:"Try Different Camera"}),(0,Dt.jsx)("button",{onClick:h,className:"bg-blue-600 text-white px-4 py-2 rounded-md hover:bg-blue-700 transition-colors",children:"Try Again"})]})]}),o&&!a&&(0,Dt.jsx)("div",{className:"absolute bottom-4 left-0 right-0 flex items-center justify-center",children:(0,Dt.jsx)("div",{className:"bg-black bg-opacity-50 text-white px-4 py-2 rounded-full",children:(0,Dt.jsx)("p",{children:"Scanning..."})})})]}),(0,Dt.jsx)("div",{className:"mt-4 flex justify-center",children:o?(0,Dt.jsx)("button",{onClick:async()=>{if(c.current&&o)try{await c.current.stop(),s(!1)}catch(e){console.error("Error stopping scanner:",e)}},className:"bg-red-600 text-white px-4 py-2 rounded-md hover:bg-red-700 transition-colors",children:"Stop Scanner"}):(0,Dt.jsx)("button",{onClick:h,className:"bg-blue-600 text-white px-4 py-2 rounded-md hover:bg-blue-700 transition-colors",children:"Start Scanner"})}),(0,Dt.jsx)("p",{className:"text-xs text-gray-500 mt-4 text-center",children:"Please allow camera access when prompted to scan barcodes"})]})},es=()=>(0,Dt.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"h-8 w-8 text-green-500",children:[(0,Dt.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M10.5 6a7.5 7.5 0 107.5 7.5h-7.5V6z"}),(0,Dt.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M13.5 10.5H21A7.5 7.5 0 0013.5 3v7.5z"})]}),ts=()=>(0,Dt.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"h-8 w-8 text-blue-500",children:(0,Dt.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M21 7.5l-9-5.25L3 7.5m18 0l-9 5.25m9-5.25v9l-9 5.25M3 7.5l9 5.25M3 7.5v9l9 5.25m0-9v9"})}),rs=()=>(0,Dt.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"h-8 w-8 text-yellow-500",children:(0,Dt.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M8.25 18.75a1.5 1.5 0 01-3 0m3 0a1.5 1.5 0 00-3 0m3 0h6m-9 0H3.375a1.125 1.125 0 01-1.125-1.125V14.25m17.25 4.5a1.5 1.5 0 01-3 0m3 0a1.5 1.5 0 00-3 0m3 0h1.125c.621 0 1.129-.504 1.09-1.124a17.902 17.902 0 00-3.213-9.193 2.056 2.056 0 00-1.58-.86H14.25M16.5 18.75h-2.25m0-11.177v-.958c0-.568-.422-1.048-.987-1.106a48.554 48.554 0 00-10.026 0 1.106 1.106 0 00-.987 1.106v7.635m12-6.677v6.677m0 4.5v-4.5m0 0h-12"})}),ns=()=>(0,Dt.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"h-8 w-8 text-red-500",children:(0,Dt.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 9v3.75m9-.75a9 9 0 11-18 0 9 9 0 0118 0zm-9 3.75h.008v.008H12v-.008z"})}),is=()=>(0,Dt.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"h-6 w-6",children:[(0,Dt.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3.75 4.875c0-.621.504-1.125 1.125-1.125h4.5c.621 0 1.125.504 1.125 1.125v4.5c0 .621-.504 1.125-1.125 1.125h-4.5A1.125 1.125 0 013.75 9.375v-4.5zM3.75 14.625c0-.621.504-1.125 1.125-1.125h4.5c.621 0 1.125.504 1.125 1.125v4.5c0 .621-.504 1.125-1.125 1.125h-4.5a1.125 1.125 0 01-1.125-1.125v-4.5zM13.5 4.875c0-.621.504-1.125 1.125-1.125h4.5c.621 0 1.125.504 1.125 1.125v4.5c0 .621-.504 1.125-1.125 1.125h-4.5A1.125 1.125 0 0113.5 9.375v-4.5z"}),(0,Dt.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6.75 6.75h.75v.75h-.75v-.75zM6.75 16.5h.75v.75h-.75v-.75zM16.5 6.75h.75v.75h-.75v-.75zM13.5 13.5h.75v.75h-.75v-.75zM13.5 19.5h.75v.75h-.75v-.75zM19.5 13.5h.75v.75h-.75v-.75zM19.5 19.5h.75v.75h-.75v-.75zM16.5 16.5h.75v.75h-.75v-.75z"})]}),os=()=>(0,Dt.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"h-5 w-5",children:(0,Dt.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 4.5v15m7.5-7.5h-15"})}),ss=()=>(0,Dt.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"h-5 w-5",children:(0,Dt.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19.5 12h-15"})}),as=()=>{const{user:e}=Lt(),{connected:r,inventoryData:n,scanBarcode:i,updateInventory:o,loading:s}=(0,t.useContext)(pi),[a,l]=(0,t.useState)({totalMaterials:0,totalEquipment:0,pendingOrders:0,lowStockItems:0}),[c,u]=(0,t.useState)(!0),[d,h]=(0,t.useState)([]),[f,p]=(0,t.useState)([]),[m,g]=(0,t.useState)(!1),[y,w]=(0,t.useState)(null),[b,v]=(0,t.useState)(null),[_,x]=(0,t.useState)(!1),[E,C]=(0,t.useState)(1),[S,A]=(0,t.useState)("add");(0,t.useEffect)((()=>{if(u(s),!r||!n)return;l(n.stats);const e=n.materials.filter((e=>e.current_stock<e.reorder_level));h(e),p(n.orders)}),[r,n,s]);const N=async()=>{if(b)try{const e="add"===S?E:-E,t=await o(b.id,e);v(t),ne.success(`Inventory updated: ${b.name} ${"add"===S?"+":"-"}${E}`),setTimeout((()=>{x(!1)}),1500)}catch(e){ne.error(e.message||"Failed to update inventory"),console.error("Error updating inventory:",e)}};return c?(0,Dt.jsx)("div",{className:"flex justify-center items-center h-full",children:(0,Dt.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-700"})}):(0,Dt.jsxs)("div",{className:"p-6",children:[(0,Dt.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,Dt.jsx)("h1",{className:"text-2xl font-bold",children:"Dashboard"}),(0,Dt.jsxs)("div",{className:"flex space-x-2",children:[r?(0,Dt.jsxs)("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-800 mr-2",children:[(0,Dt.jsx)("span",{className:"h-2 w-2 rounded-full bg-green-500 mr-1"}),"Connected"]}):(0,Dt.jsxs)("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-red-100 text-red-800 mr-2",children:[(0,Dt.jsx)("span",{className:"h-2 w-2 rounded-full bg-red-500 mr-1"}),"Disconnected"]}),(0,Dt.jsxs)("button",{onClick:()=>g(!0),className:"bg-blue-600 text-white px-4 py-2 rounded-md hover:bg-blue-700 transition-colors flex items-center",children:[(0,Dt.jsx)(is,{}),(0,Dt.jsx)("span",{className:"ml-2",children:"Scan Barcode/QR"})]})]})]}),m&&(0,Dt.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50",children:(0,Dt.jsx)("div",{className:"max-w-md w-full mx-4",children:(0,Dt.jsx)(Jo,{onScan:async e=>{g(!1),ne.success(`Scanned code: ${e}`),w(e);try{const t=await i(e);v(t),x(!0),ne.success(`Found material: ${t.name}`)}catch(t){console.error("Error scanning barcode:",t),ne.error(t.message||"Failed to process barcode")}},onError:e=>{ne.error(`Scan error: ${e}`)},onClose:()=>g(!1)})})}),(()=>{try{return _&&b&&(0,Dt.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50",children:(0,Dt.jsxs)("div",{className:"bg-white rounded-lg shadow-lg max-w-md w-full mx-4 p-6",children:[(0,Dt.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,Dt.jsx)("h3",{className:"text-lg font-medium",children:"Material Found"}),(0,Dt.jsx)("button",{onClick:()=>{x(!1)},className:"text-gray-500 hover:text-gray-700",children:(0,Dt.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,Dt.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),(0,Dt.jsxs)("div",{className:"bg-blue-50 p-4 rounded-lg mb-4",children:[(0,Dt.jsxs)("div",{className:"flex justify-between mb-2",children:[(0,Dt.jsx)("span",{className:"text-gray-600",children:"Name:"}),(0,Dt.jsx)("span",{className:"font-medium",children:b.name})]}),(0,Dt.jsxs)("div",{className:"flex justify-between mb-2",children:[(0,Dt.jsx)("span",{className:"text-gray-600",children:"SKU:"}),(0,Dt.jsx)("span",{className:"font-medium",children:b.sku})]}),(0,Dt.jsxs)("div",{className:"flex justify-between mb-2",children:[(0,Dt.jsx)("span",{className:"text-gray-600",children:"Category:"}),(0,Dt.jsx)("span",{className:"font-medium",children:b.category_name})]}),(0,Dt.jsxs)("div",{className:"flex justify-between mb-2",children:[(0,Dt.jsx)("span",{className:"text-gray-600",children:"Current Stock:"}),(0,Dt.jsxs)("span",{className:"font-medium",children:[b.current_stock," ",b.unit_of_measure]})]}),(0,Dt.jsxs)("div",{className:"flex justify-between",children:[(0,Dt.jsx)("span",{className:"text-gray-600",children:"Unit Price:"}),(0,Dt.jsx)("span",{className:"font-medium",children:Mi(b.unit_price)})]})]}),(0,Dt.jsxs)("div",{className:"border-t border-gray-200 pt-4 mb-4",children:[(0,Dt.jsx)("h4",{className:"font-medium mb-2",children:"Quick Actions"}),(0,Dt.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,Dt.jsxs)("div",{className:"flex items-center",children:[(0,Dt.jsx)("button",{onClick:()=>A("add"),className:"px-3 py-1 rounded-l-md "+("add"===S?"bg-blue-600 text-white":"bg-gray-200"),children:(0,Dt.jsx)(os,{})}),(0,Dt.jsx)("button",{onClick:()=>A("remove"),className:"px-3 py-1 rounded-r-md "+("remove"===S?"bg-red-600 text-white":"bg-gray-200"),children:(0,Dt.jsx)(ss,{})})]}),(0,Dt.jsxs)("div",{className:"flex items-center",children:[(0,Dt.jsx)("input",{type:"number",min:"1",value:E,onChange:e=>C(Math.max(1,parseInt(e.target.value)||1)),className:"w-16 px-2 py-1 border border-gray-300 rounded-md mr-2"}),(0,Dt.jsx)("span",{children:b.unit_of_measure})]})]}),(0,Dt.jsxs)("div",{className:"grid grid-cols-2 gap-3 mb-3",children:[(0,Dt.jsx)("button",{onClick:N,className:`flex items-center justify-center px-4 py-2 rounded-md ${"add"===S?"bg-blue-600 hover:bg-blue-700":"bg-red-600 hover:bg-red-700"} text-white`,children:"add"===S?"Add Stock":"Remove Stock"}),(0,Dt.jsx)(Tt,{to:`/materials/${b.id}`,className:"flex items-center justify-center px-4 py-2 bg-gray-200 hover:bg-gray-300 rounded-md",children:"View Details"})]}),(0,Dt.jsxs)(Tt,{to:`/qr-generator/${b.sku}`,className:"flex items-center justify-center w-full px-4 py-2 bg-green-600 hover:bg-green-700 text-white rounded-md",children:[(0,Dt.jsx)(is,{}),(0,Dt.jsx)("span",{className:"ml-2",children:"Generate QR Code"})]})]})]})})}catch(e){return console.error("Error rendering material modal:",e),setTimeout((()=>{x(!1),v(null)}),0),null}})(),(0,Dt.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6 mb-6",children:[(0,Dt.jsx)(ki,{title:"Total Materials",value:a.totalMaterials,icon:(0,Dt.jsx)(ts,{}),bgColor:"bg-blue-50"}),(0,Dt.jsx)(ki,{title:"Equipment",value:a.totalEquipment,icon:(0,Dt.jsx)(es,{}),bgColor:"bg-green-50"}),(0,Dt.jsx)(ki,{title:"Pending Orders",value:a.pendingOrders,icon:(0,Dt.jsx)(rs,{}),bgColor:"bg-yellow-50"}),(0,Dt.jsx)(ki,{title:"Low Stock Items",value:a.lowStockItems,icon:(0,Dt.jsx)(ns,{}),bgColor:"bg-red-50"})]}),(0,Dt.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,Dt.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[(0,Dt.jsx)("h2",{className:"text-lg font-semibold mb-4",children:"Low Stock Alerts"}),(0,Dt.jsx)(Ri,{materials:d})]}),(0,Dt.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[(0,Dt.jsx)("h2",{className:"text-lg font-semibold mb-4",children:"Recent Orders"}),(0,Dt.jsx)(Di,{orders:f})]})]}),y&&(0,Dt.jsx)("div",{className:"mt-6 p-4 bg-gray-100 rounded-md",children:(0,Dt.jsxs)("p",{className:"text-sm text-gray-500",children:["Last scanned code: ",(0,Dt.jsx)("span",{className:"font-medium",children:y})]})})]})};function ls(e,t){return function(){return e.apply(t,arguments)}}const{toString:cs}=Object.prototype,{getPrototypeOf:us}=Object,ds=(hs=Object.create(null),e=>{const t=cs.call(e);return hs[t]||(hs[t]=t.slice(8,-1).toLowerCase())});var hs;const fs=e=>(e=e.toLowerCase(),t=>ds(t)===e),ps=e=>t=>typeof t===e,{isArray:ms}=Array,gs=ps("undefined");const ys=fs("ArrayBuffer");const ws=ps("string"),bs=ps("function"),vs=ps("number"),_s=e=>null!==e&&"object"===typeof e,xs=e=>{if("object"!==ds(e))return!1;const t=us(e);return(null===t||t===Object.prototype||null===Object.getPrototypeOf(t))&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)},Es=fs("Date"),Cs=fs("File"),Ss=fs("Blob"),As=fs("FileList"),Ns=fs("URLSearchParams"),[Is,Ts,Os,ks]=["ReadableStream","Request","Response","Headers"].map(fs);function Rs(e,t){let r,n,{allOwnKeys:i=!1}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(null!==e&&"undefined"!==typeof e)if("object"!==typeof e&&(e=[e]),ms(e))for(r=0,n=e.length;r<n;r++)t.call(null,e[r],r,e);else{const n=i?Object.getOwnPropertyNames(e):Object.keys(e),o=n.length;let s;for(r=0;r<o;r++)s=n[r],t.call(null,e[s],s,e)}}function Ms(e,t){t=t.toLowerCase();const r=Object.keys(e);let n,i=r.length;for(;i-- >0;)if(n=r[i],t===n.toLowerCase())return n;return null}const js="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:"undefined"!==typeof window?window:global,Ds=e=>!gs(e)&&e!==js;const Ps=(Ls="undefined"!==typeof Uint8Array&&us(Uint8Array),e=>Ls&&e instanceof Ls);var Ls;const Bs=fs("HTMLFormElement"),Fs=(e=>{let{hasOwnProperty:t}=e;return(e,r)=>t.call(e,r)})(Object.prototype),Us=fs("RegExp"),zs=(e,t)=>{const r=Object.getOwnPropertyDescriptors(e),n={};Rs(r,((r,i)=>{let o;!1!==(o=t(r,i,e))&&(n[i]=o||r)})),Object.defineProperties(e,n)};const Hs=fs("AsyncFunction"),Vs=((e,t)=>{return e?setImmediate:t?(r=`axios@${Math.random()}`,n=[],js.addEventListener("message",(e=>{let{source:t,data:i}=e;t===js&&i===r&&n.length&&n.shift()()}),!1),e=>{n.push(e),js.postMessage(r,"*")}):e=>setTimeout(e);var r,n})("function"===typeof setImmediate,bs(js.postMessage)),Ws="undefined"!==typeof queueMicrotask?queueMicrotask.bind(js):"undefined"!==typeof process&&process.nextTick||Vs,Gs={isArray:ms,isArrayBuffer:ys,isBuffer:function(e){return null!==e&&!gs(e)&&null!==e.constructor&&!gs(e.constructor)&&bs(e.constructor.isBuffer)&&e.constructor.isBuffer(e)},isFormData:e=>{let t;return e&&("function"===typeof FormData&&e instanceof FormData||bs(e.append)&&("formdata"===(t=ds(e))||"object"===t&&bs(e.toString)&&"[object FormData]"===e.toString()))},isArrayBufferView:function(e){let t;return t="undefined"!==typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer&&ys(e.buffer),t},isString:ws,isNumber:vs,isBoolean:e=>!0===e||!1===e,isObject:_s,isPlainObject:xs,isReadableStream:Is,isRequest:Ts,isResponse:Os,isHeaders:ks,isUndefined:gs,isDate:Es,isFile:Cs,isBlob:Ss,isRegExp:Us,isFunction:bs,isStream:e=>_s(e)&&bs(e.pipe),isURLSearchParams:Ns,isTypedArray:Ps,isFileList:As,forEach:Rs,merge:function e(){const{caseless:t}=Ds(this)&&this||{},r={},n=(n,i)=>{const o=t&&Ms(r,i)||i;xs(r[o])&&xs(n)?r[o]=e(r[o],n):xs(n)?r[o]=e({},n):ms(n)?r[o]=n.slice():r[o]=n};for(let i=0,o=arguments.length;i<o;i++)arguments[i]&&Rs(arguments[i],n);return r},extend:function(e,t,r){let{allOwnKeys:n}=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return Rs(t,((t,n)=>{r&&bs(t)?e[n]=ls(t,r):e[n]=t}),{allOwnKeys:n}),e},trim:e=>e.trim?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,""),stripBOM:e=>(65279===e.charCodeAt(0)&&(e=e.slice(1)),e),inherits:(e,t,r,n)=>{e.prototype=Object.create(t.prototype,n),e.prototype.constructor=e,Object.defineProperty(e,"super",{value:t.prototype}),r&&Object.assign(e.prototype,r)},toFlatObject:(e,t,r,n)=>{let i,o,s;const a={};if(t=t||{},null==e)return t;do{for(i=Object.getOwnPropertyNames(e),o=i.length;o-- >0;)s=i[o],n&&!n(s,e,t)||a[s]||(t[s]=e[s],a[s]=!0);e=!1!==r&&us(e)}while(e&&(!r||r(e,t))&&e!==Object.prototype);return t},kindOf:ds,kindOfTest:fs,endsWith:(e,t,r)=>{e=String(e),(void 0===r||r>e.length)&&(r=e.length),r-=t.length;const n=e.indexOf(t,r);return-1!==n&&n===r},toArray:e=>{if(!e)return null;if(ms(e))return e;let t=e.length;if(!vs(t))return null;const r=new Array(t);for(;t-- >0;)r[t]=e[t];return r},forEachEntry:(e,t)=>{const r=(e&&e[Symbol.iterator]).call(e);let n;for(;(n=r.next())&&!n.done;){const r=n.value;t.call(e,r[0],r[1])}},matchAll:(e,t)=>{let r;const n=[];for(;null!==(r=e.exec(t));)n.push(r);return n},isHTMLForm:Bs,hasOwnProperty:Fs,hasOwnProp:Fs,reduceDescriptors:zs,freezeMethods:e=>{zs(e,((t,r)=>{if(bs(e)&&-1!==["arguments","caller","callee"].indexOf(r))return!1;const n=e[r];bs(n)&&(t.enumerable=!1,"writable"in t?t.writable=!1:t.set||(t.set=()=>{throw Error("Can not rewrite read-only method '"+r+"'")}))}))},toObjectSet:(e,t)=>{const r={},n=e=>{e.forEach((e=>{r[e]=!0}))};return ms(e)?n(e):n(String(e).split(t)),r},toCamelCase:e=>e.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,(function(e,t,r){return t.toUpperCase()+r})),noop:()=>{},toFiniteNumber:(e,t)=>null!=e&&Number.isFinite(e=+e)?e:t,findKey:Ms,global:js,isContextDefined:Ds,isSpecCompliantForm:function(e){return!!(e&&bs(e.append)&&"FormData"===e[Symbol.toStringTag]&&e[Symbol.iterator])},toJSONObject:e=>{const t=new Array(10),r=(e,n)=>{if(_s(e)){if(t.indexOf(e)>=0)return;if(!("toJSON"in e)){t[n]=e;const i=ms(e)?[]:{};return Rs(e,((e,t)=>{const o=r(e,n+1);!gs(o)&&(i[t]=o)})),t[n]=void 0,i}}return e};return r(e,0)},isAsyncFn:Hs,isThenable:e=>e&&(_s(e)||bs(e))&&bs(e.then)&&bs(e.catch),setImmediate:Vs,asap:Ws};function $s(e,t,r,n,i){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=(new Error).stack,this.message=e,this.name="AxiosError",t&&(this.code=t),r&&(this.config=r),n&&(this.request=n),i&&(this.response=i,this.status=i.status?i.status:null)}Gs.inherits($s,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:Gs.toJSONObject(this.config),code:this.code,status:this.status}}});const Xs=$s.prototype,Ys={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach((e=>{Ys[e]={value:e}})),Object.defineProperties($s,Ys),Object.defineProperty(Xs,"isAxiosError",{value:!0}),$s.from=(e,t,r,n,i,o)=>{const s=Object.create(Xs);return Gs.toFlatObject(e,s,(function(e){return e!==Error.prototype}),(e=>"isAxiosError"!==e)),$s.call(s,e.message,t,r,n,i),s.cause=e,s.name=e.name,o&&Object.assign(s,o),s};const qs=$s;function Qs(e){return Gs.isPlainObject(e)||Gs.isArray(e)}function Zs(e){return Gs.endsWith(e,"[]")?e.slice(0,-2):e}function Ks(e,t,r){return e?e.concat(t).map((function(e,t){return e=Zs(e),!r&&t?"["+e+"]":e})).join(r?".":""):t}const Js=Gs.toFlatObject(Gs,{},null,(function(e){return/^is[A-Z]/.test(e)}));const ea=function(e,t,r){if(!Gs.isObject(e))throw new TypeError("target must be an object");t=t||new FormData;const n=(r=Gs.toFlatObject(r,{metaTokens:!0,dots:!1,indexes:!1},!1,(function(e,t){return!Gs.isUndefined(t[e])}))).metaTokens,i=r.visitor||c,o=r.dots,s=r.indexes,a=(r.Blob||"undefined"!==typeof Blob&&Blob)&&Gs.isSpecCompliantForm(t);if(!Gs.isFunction(i))throw new TypeError("visitor must be a function");function l(e){if(null===e)return"";if(Gs.isDate(e))return e.toISOString();if(!a&&Gs.isBlob(e))throw new qs("Blob is not supported. Use a Buffer instead.");return Gs.isArrayBuffer(e)||Gs.isTypedArray(e)?a&&"function"===typeof Blob?new Blob([e]):Buffer.from(e):e}function c(e,r,i){let a=e;if(e&&!i&&"object"===typeof e)if(Gs.endsWith(r,"{}"))r=n?r:r.slice(0,-2),e=JSON.stringify(e);else if(Gs.isArray(e)&&function(e){return Gs.isArray(e)&&!e.some(Qs)}(e)||(Gs.isFileList(e)||Gs.endsWith(r,"[]"))&&(a=Gs.toArray(e)))return r=Zs(r),a.forEach((function(e,n){!Gs.isUndefined(e)&&null!==e&&t.append(!0===s?Ks([r],n,o):null===s?r:r+"[]",l(e))})),!1;return!!Qs(e)||(t.append(Ks(i,r,o),l(e)),!1)}const u=[],d=Object.assign(Js,{defaultVisitor:c,convertValue:l,isVisitable:Qs});if(!Gs.isObject(e))throw new TypeError("data must be an object");return function e(r,n){if(!Gs.isUndefined(r)){if(-1!==u.indexOf(r))throw Error("Circular reference detected in "+n.join("."));u.push(r),Gs.forEach(r,(function(r,o){!0===(!(Gs.isUndefined(r)||null===r)&&i.call(t,r,Gs.isString(o)?o.trim():o,n,d))&&e(r,n?n.concat(o):[o])})),u.pop()}}(e),t};function ta(e){const t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(e).replace(/[!'()~]|%20|%00/g,(function(e){return t[e]}))}function ra(e,t){this._pairs=[],e&&ea(e,this,t)}const na=ra.prototype;na.append=function(e,t){this._pairs.push([e,t])},na.toString=function(e){const t=e?function(t){return e.call(this,t,ta)}:ta;return this._pairs.map((function(e){return t(e[0])+"="+t(e[1])}),"").join("&")};const ia=ra;function oa(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function sa(e,t,r){if(!t)return e;const n=r&&r.encode||oa;Gs.isFunction(r)&&(r={serialize:r});const i=r&&r.serialize;let o;if(o=i?i(t,r):Gs.isURLSearchParams(t)?t.toString():new ia(t,r).toString(n),o){const t=e.indexOf("#");-1!==t&&(e=e.slice(0,t)),e+=(-1===e.indexOf("?")?"?":"&")+o}return e}const aa=class{constructor(){this.handlers=[]}use(e,t,r){return this.handlers.push({fulfilled:e,rejected:t,synchronous:!!r&&r.synchronous,runWhen:r?r.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){Gs.forEach(this.handlers,(function(t){null!==t&&e(t)}))}},la={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},ca={isBrowser:!0,classes:{URLSearchParams:"undefined"!==typeof URLSearchParams?URLSearchParams:ia,FormData:"undefined"!==typeof FormData?FormData:null,Blob:"undefined"!==typeof Blob?Blob:null},protocols:["http","https","file","blob","url","data"]},ua="undefined"!==typeof window&&"undefined"!==typeof document,da="object"===typeof navigator&&navigator||void 0,ha=ua&&(!da||["ReactNative","NativeScript","NS"].indexOf(da.product)<0),fa="undefined"!==typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&"function"===typeof self.importScripts,pa=ua&&window.location.href||"http://localhost",ma={...e,...ca};const ga=function(e){function t(e,r,n,i){let o=e[i++];if("__proto__"===o)return!0;const s=Number.isFinite(+o),a=i>=e.length;if(o=!o&&Gs.isArray(n)?n.length:o,a)return Gs.hasOwnProp(n,o)?n[o]=[n[o],r]:n[o]=r,!s;n[o]&&Gs.isObject(n[o])||(n[o]=[]);return t(e,r,n[o],i)&&Gs.isArray(n[o])&&(n[o]=function(e){const t={},r=Object.keys(e);let n;const i=r.length;let o;for(n=0;n<i;n++)o=r[n],t[o]=e[o];return t}(n[o])),!s}if(Gs.isFormData(e)&&Gs.isFunction(e.entries)){const r={};return Gs.forEachEntry(e,((e,n)=>{t(function(e){return Gs.matchAll(/\w+|\[(\w*)]/g,e).map((e=>"[]"===e[0]?"":e[1]||e[0]))}(e),n,r,0)})),r}return null};const ya={transitional:la,adapter:["xhr","http","fetch"],transformRequest:[function(e,t){const r=t.getContentType()||"",n=r.indexOf("application/json")>-1,i=Gs.isObject(e);i&&Gs.isHTMLForm(e)&&(e=new FormData(e));if(Gs.isFormData(e))return n?JSON.stringify(ga(e)):e;if(Gs.isArrayBuffer(e)||Gs.isBuffer(e)||Gs.isStream(e)||Gs.isFile(e)||Gs.isBlob(e)||Gs.isReadableStream(e))return e;if(Gs.isArrayBufferView(e))return e.buffer;if(Gs.isURLSearchParams(e))return t.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();let s;if(i){if(r.indexOf("application/x-www-form-urlencoded")>-1)return function(e,t){return ea(e,new ma.classes.URLSearchParams,Object.assign({visitor:function(e,t,r,n){return ma.isNode&&Gs.isBuffer(e)?(this.append(t,e.toString("base64")),!1):n.defaultVisitor.apply(this,arguments)}},t))}(e,this.formSerializer).toString();if((s=Gs.isFileList(e))||r.indexOf("multipart/form-data")>-1){const t=this.env&&this.env.FormData;return ea(s?{"files[]":e}:e,t&&new t,this.formSerializer)}}return i||n?(t.setContentType("application/json",!1),function(e,t,r){if(Gs.isString(e))try{return(t||JSON.parse)(e),Gs.trim(e)}catch(o){if("SyntaxError"!==o.name)throw o}return(r||JSON.stringify)(e)}(e)):e}],transformResponse:[function(e){const t=this.transitional||ya.transitional,r=t&&t.forcedJSONParsing,n="json"===this.responseType;if(Gs.isResponse(e)||Gs.isReadableStream(e))return e;if(e&&Gs.isString(e)&&(r&&!this.responseType||n)){const r=!(t&&t.silentJSONParsing)&&n;try{return JSON.parse(e)}catch(o){if(r){if("SyntaxError"===o.name)throw qs.from(o,qs.ERR_BAD_RESPONSE,this,null,this.response);throw o}}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:ma.classes.FormData,Blob:ma.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};Gs.forEach(["delete","get","head","post","put","patch"],(e=>{ya.headers[e]={}}));const wa=ya,ba=Gs.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),va=Symbol("internals");function _a(e){return e&&String(e).trim().toLowerCase()}function xa(e){return!1===e||null==e?e:Gs.isArray(e)?e.map(xa):String(e)}function Ea(e,t,r,n,i){return Gs.isFunction(n)?n.call(this,t,r):(i&&(t=r),Gs.isString(t)?Gs.isString(n)?-1!==t.indexOf(n):Gs.isRegExp(n)?n.test(t):void 0:void 0)}class Ca{constructor(e){e&&this.set(e)}set(e,t,r){const n=this;function i(e,t,r){const i=_a(t);if(!i)throw new Error("header name must be a non-empty string");const o=Gs.findKey(n,i);(!o||void 0===n[o]||!0===r||void 0===r&&!1!==n[o])&&(n[o||t]=xa(e))}const o=(e,t)=>Gs.forEach(e,((e,r)=>i(e,r,t)));if(Gs.isPlainObject(e)||e instanceof this.constructor)o(e,t);else if(Gs.isString(e)&&(e=e.trim())&&!/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(e.trim()))o((e=>{const t={};let r,n,i;return e&&e.split("\n").forEach((function(e){i=e.indexOf(":"),r=e.substring(0,i).trim().toLowerCase(),n=e.substring(i+1).trim(),!r||t[r]&&ba[r]||("set-cookie"===r?t[r]?t[r].push(n):t[r]=[n]:t[r]=t[r]?t[r]+", "+n:n)})),t})(e),t);else if(Gs.isHeaders(e))for(const[s,a]of e.entries())i(a,s,r);else null!=e&&i(t,e,r);return this}get(e,t){if(e=_a(e)){const r=Gs.findKey(this,e);if(r){const e=this[r];if(!t)return e;if(!0===t)return function(e){const t=Object.create(null),r=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let n;for(;n=r.exec(e);)t[n[1]]=n[2];return t}(e);if(Gs.isFunction(t))return t.call(this,e,r);if(Gs.isRegExp(t))return t.exec(e);throw new TypeError("parser must be boolean|regexp|function")}}}has(e,t){if(e=_a(e)){const r=Gs.findKey(this,e);return!(!r||void 0===this[r]||t&&!Ea(0,this[r],r,t))}return!1}delete(e,t){const r=this;let n=!1;function i(e){if(e=_a(e)){const i=Gs.findKey(r,e);!i||t&&!Ea(0,r[i],i,t)||(delete r[i],n=!0)}}return Gs.isArray(e)?e.forEach(i):i(e),n}clear(e){const t=Object.keys(this);let r=t.length,n=!1;for(;r--;){const i=t[r];e&&!Ea(0,this[i],i,e,!0)||(delete this[i],n=!0)}return n}normalize(e){const t=this,r={};return Gs.forEach(this,((n,i)=>{const o=Gs.findKey(r,i);if(o)return t[o]=xa(n),void delete t[i];const s=e?function(e){return e.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,((e,t,r)=>t.toUpperCase()+r))}(i):String(i).trim();s!==i&&delete t[i],t[s]=xa(n),r[s]=!0})),this}concat(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return this.constructor.concat(this,...t)}toJSON(e){const t=Object.create(null);return Gs.forEach(this,((r,n)=>{null!=r&&!1!==r&&(t[n]=e&&Gs.isArray(r)?r.join(", "):r)})),t}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map((e=>{let[t,r]=e;return t+": "+r})).join("\n")}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e){const t=new this(e);for(var r=arguments.length,n=new Array(r>1?r-1:0),i=1;i<r;i++)n[i-1]=arguments[i];return n.forEach((e=>t.set(e))),t}static accessor(e){const t=(this[va]=this[va]={accessors:{}}).accessors,r=this.prototype;function n(e){const n=_a(e);t[n]||(!function(e,t){const r=Gs.toCamelCase(" "+t);["get","set","has"].forEach((n=>{Object.defineProperty(e,n+r,{value:function(e,r,i){return this[n].call(this,t,e,r,i)},configurable:!0})}))}(r,e),t[n]=!0)}return Gs.isArray(e)?e.forEach(n):n(e),this}}Ca.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]),Gs.reduceDescriptors(Ca.prototype,((e,t)=>{let{value:r}=e,n=t[0].toUpperCase()+t.slice(1);return{get:()=>r,set(e){this[n]=e}}})),Gs.freezeMethods(Ca);const Sa=Ca;function Aa(e,t){const r=this||wa,n=t||r,i=Sa.from(n.headers);let o=n.data;return Gs.forEach(e,(function(e){o=e.call(r,o,i.normalize(),t?t.status:void 0)})),i.normalize(),o}function Na(e){return!(!e||!e.__CANCEL__)}function Ia(e,t,r){qs.call(this,null==e?"canceled":e,qs.ERR_CANCELED,t,r),this.name="CanceledError"}Gs.inherits(Ia,qs,{__CANCEL__:!0});const Ta=Ia;function Oa(e,t,r){const n=r.config.validateStatus;r.status&&n&&!n(r.status)?t(new qs("Request failed with status code "+r.status,[qs.ERR_BAD_REQUEST,qs.ERR_BAD_RESPONSE][Math.floor(r.status/100)-4],r.config,r.request,r)):e(r)}const ka=function(e,t){e=e||10;const r=new Array(e),n=new Array(e);let i,o=0,s=0;return t=void 0!==t?t:1e3,function(a){const l=Date.now(),c=n[s];i||(i=l),r[o]=a,n[o]=l;let u=s,d=0;for(;u!==o;)d+=r[u++],u%=e;if(o=(o+1)%e,o===s&&(s=(s+1)%e),l-i<t)return;const h=c&&l-c;return h?Math.round(1e3*d/h):void 0}};const Ra=function(e,t){let r,n,i=0,o=1e3/t;const s=function(t){let o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Date.now();i=o,r=null,n&&(clearTimeout(n),n=null),e.apply(null,t)};return[function(){const e=Date.now(),t=e-i;for(var a=arguments.length,l=new Array(a),c=0;c<a;c++)l[c]=arguments[c];t>=o?s(l,e):(r=l,n||(n=setTimeout((()=>{n=null,s(r)}),o-t)))},()=>r&&s(r)]},Ma=function(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:3,n=0;const i=ka(50,250);return Ra((r=>{const o=r.loaded,s=r.lengthComputable?r.total:void 0,a=o-n,l=i(a);n=o;e({loaded:o,total:s,progress:s?o/s:void 0,bytes:a,rate:l||void 0,estimated:l&&s&&o<=s?(s-o)/l:void 0,event:r,lengthComputable:null!=s,[t?"download":"upload"]:!0})}),r)},ja=(e,t)=>{const r=null!=e;return[n=>t[0]({lengthComputable:r,total:e,loaded:n}),t[1]]},Da=e=>function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return Gs.asap((()=>e(...r)))},Pa=ma.hasStandardBrowserEnv?((e,t)=>r=>(r=new URL(r,ma.origin),e.protocol===r.protocol&&e.host===r.host&&(t||e.port===r.port)))(new URL(ma.origin),ma.navigator&&/(msie|trident)/i.test(ma.navigator.userAgent)):()=>!0,La=ma.hasStandardBrowserEnv?{write(e,t,r,n,i,o){const s=[e+"="+encodeURIComponent(t)];Gs.isNumber(r)&&s.push("expires="+new Date(r).toGMTString()),Gs.isString(n)&&s.push("path="+n),Gs.isString(i)&&s.push("domain="+i),!0===o&&s.push("secure"),document.cookie=s.join("; ")},read(e){const t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove(e){this.write(e,"",Date.now()-864e5)}}:{write(){},read:()=>null,remove(){}};function Ba(e,t,r){let n=!/^([a-z][a-z\d+\-.]*:)?\/\//i.test(t);return e&&n||0==r?function(e,t){return t?e.replace(/\/?\/$/,"")+"/"+t.replace(/^\/+/,""):e}(e,t):t}const Fa=e=>e instanceof Sa?{...e}:e;function Ua(e,t){t=t||{};const r={};function n(e,t,r,n){return Gs.isPlainObject(e)&&Gs.isPlainObject(t)?Gs.merge.call({caseless:n},e,t):Gs.isPlainObject(t)?Gs.merge({},t):Gs.isArray(t)?t.slice():t}function i(e,t,r,i){return Gs.isUndefined(t)?Gs.isUndefined(e)?void 0:n(void 0,e,0,i):n(e,t,0,i)}function o(e,t){if(!Gs.isUndefined(t))return n(void 0,t)}function s(e,t){return Gs.isUndefined(t)?Gs.isUndefined(e)?void 0:n(void 0,e):n(void 0,t)}function a(r,i,o){return o in t?n(r,i):o in e?n(void 0,r):void 0}const l={url:o,method:o,data:o,baseURL:s,transformRequest:s,transformResponse:s,paramsSerializer:s,timeout:s,timeoutMessage:s,withCredentials:s,withXSRFToken:s,adapter:s,responseType:s,xsrfCookieName:s,xsrfHeaderName:s,onUploadProgress:s,onDownloadProgress:s,decompress:s,maxContentLength:s,maxBodyLength:s,beforeRedirect:s,transport:s,httpAgent:s,httpsAgent:s,cancelToken:s,socketPath:s,responseEncoding:s,validateStatus:a,headers:(e,t,r)=>i(Fa(e),Fa(t),0,!0)};return Gs.forEach(Object.keys(Object.assign({},e,t)),(function(n){const o=l[n]||i,s=o(e[n],t[n],n);Gs.isUndefined(s)&&o!==a||(r[n]=s)})),r}const za=e=>{const t=Ua({},e);let r,{data:n,withXSRFToken:i,xsrfHeaderName:o,xsrfCookieName:s,headers:a,auth:l}=t;if(t.headers=a=Sa.from(a),t.url=sa(Ba(t.baseURL,t.url),e.params,e.paramsSerializer),l&&a.set("Authorization","Basic "+btoa((l.username||"")+":"+(l.password?unescape(encodeURIComponent(l.password)):""))),Gs.isFormData(n))if(ma.hasStandardBrowserEnv||ma.hasStandardBrowserWebWorkerEnv)a.setContentType(void 0);else if(!1!==(r=a.getContentType())){const[e,...t]=r?r.split(";").map((e=>e.trim())).filter(Boolean):[];a.setContentType([e||"multipart/form-data",...t].join("; "))}if(ma.hasStandardBrowserEnv&&(i&&Gs.isFunction(i)&&(i=i(t)),i||!1!==i&&Pa(t.url))){const e=o&&s&&La.read(s);e&&a.set(o,e)}return t},Ha="undefined"!==typeof XMLHttpRequest&&function(e){return new Promise((function(t,r){const n=za(e);let i=n.data;const o=Sa.from(n.headers).normalize();let s,a,l,c,u,{responseType:d,onUploadProgress:h,onDownloadProgress:f}=n;function p(){c&&c(),u&&u(),n.cancelToken&&n.cancelToken.unsubscribe(s),n.signal&&n.signal.removeEventListener("abort",s)}let m=new XMLHttpRequest;function g(){if(!m)return;const n=Sa.from("getAllResponseHeaders"in m&&m.getAllResponseHeaders());Oa((function(e){t(e),p()}),(function(e){r(e),p()}),{data:d&&"text"!==d&&"json"!==d?m.response:m.responseText,status:m.status,statusText:m.statusText,headers:n,config:e,request:m}),m=null}m.open(n.method.toUpperCase(),n.url,!0),m.timeout=n.timeout,"onloadend"in m?m.onloadend=g:m.onreadystatechange=function(){m&&4===m.readyState&&(0!==m.status||m.responseURL&&0===m.responseURL.indexOf("file:"))&&setTimeout(g)},m.onabort=function(){m&&(r(new qs("Request aborted",qs.ECONNABORTED,e,m)),m=null)},m.onerror=function(){r(new qs("Network Error",qs.ERR_NETWORK,e,m)),m=null},m.ontimeout=function(){let t=n.timeout?"timeout of "+n.timeout+"ms exceeded":"timeout exceeded";const i=n.transitional||la;n.timeoutErrorMessage&&(t=n.timeoutErrorMessage),r(new qs(t,i.clarifyTimeoutError?qs.ETIMEDOUT:qs.ECONNABORTED,e,m)),m=null},void 0===i&&o.setContentType(null),"setRequestHeader"in m&&Gs.forEach(o.toJSON(),(function(e,t){m.setRequestHeader(t,e)})),Gs.isUndefined(n.withCredentials)||(m.withCredentials=!!n.withCredentials),d&&"json"!==d&&(m.responseType=n.responseType),f&&([l,u]=Ma(f,!0),m.addEventListener("progress",l)),h&&m.upload&&([a,c]=Ma(h),m.upload.addEventListener("progress",a),m.upload.addEventListener("loadend",c)),(n.cancelToken||n.signal)&&(s=t=>{m&&(r(!t||t.type?new Ta(null,e,m):t),m.abort(),m=null)},n.cancelToken&&n.cancelToken.subscribe(s),n.signal&&(n.signal.aborted?s():n.signal.addEventListener("abort",s)));const y=function(e){const t=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return t&&t[1]||""}(n.url);y&&-1===ma.protocols.indexOf(y)?r(new qs("Unsupported protocol "+y+":",qs.ERR_BAD_REQUEST,e)):m.send(i||null)}))},Va=(e,t)=>{const{length:r}=e=e?e.filter(Boolean):[];if(t||r){let r,n=new AbortController;const i=function(e){if(!r){r=!0,s();const t=e instanceof Error?e:this.reason;n.abort(t instanceof qs?t:new Ta(t instanceof Error?t.message:t))}};let o=t&&setTimeout((()=>{o=null,i(new qs(`timeout ${t} of ms exceeded`,qs.ETIMEDOUT))}),t);const s=()=>{e&&(o&&clearTimeout(o),o=null,e.forEach((e=>{e.unsubscribe?e.unsubscribe(i):e.removeEventListener("abort",i)})),e=null)};e.forEach((e=>e.addEventListener("abort",i)));const{signal:a}=n;return a.unsubscribe=()=>Gs.asap(s),a}},Wa=function*(e,t){let r=e.byteLength;if(!t||r<t)return void(yield e);let n,i=0;for(;i<r;)n=i+t,yield e.slice(i,n),i=n},Ga=async function*(e){if(e[Symbol.asyncIterator])return void(yield*e);const t=e.getReader();try{for(;;){const{done:e,value:r}=await t.read();if(e)break;yield r}}finally{await t.cancel()}},$a=(e,t,r,n)=>{const i=async function*(e,t){for await(const r of Ga(e))yield*Wa(r,t)}(e,t);let o,s=0,a=e=>{o||(o=!0,n&&n(e))};return new ReadableStream({async pull(e){try{const{done:t,value:n}=await i.next();if(t)return a(),void e.close();let o=n.byteLength;if(r){let e=s+=o;r(e)}e.enqueue(new Uint8Array(n))}catch(t){throw a(t),t}},cancel:e=>(a(e),i.return())},{highWaterMark:2})},Xa="function"===typeof fetch&&"function"===typeof Request&&"function"===typeof Response,Ya=Xa&&"function"===typeof ReadableStream,qa=Xa&&("function"===typeof TextEncoder?(Qa=new TextEncoder,e=>Qa.encode(e)):async e=>new Uint8Array(await new Response(e).arrayBuffer()));var Qa;const Za=function(e){try{for(var t=arguments.length,r=new Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];return!!e(...r)}catch(o){return!1}},Ka=Ya&&Za((()=>{let e=!1;const t=new Request(ma.origin,{body:new ReadableStream,method:"POST",get duplex(){return e=!0,"half"}}).headers.has("Content-Type");return e&&!t})),Ja=Ya&&Za((()=>Gs.isReadableStream(new Response("").body))),el={stream:Ja&&(e=>e.body)};var tl;Xa&&(tl=new Response,["text","arrayBuffer","blob","formData","stream"].forEach((e=>{!el[e]&&(el[e]=Gs.isFunction(tl[e])?t=>t[e]():(t,r)=>{throw new qs(`Response type '${e}' is not supported`,qs.ERR_NOT_SUPPORT,r)})})));const rl=async(e,t)=>{const r=Gs.toFiniteNumber(e.getContentLength());return null==r?(async e=>{if(null==e)return 0;if(Gs.isBlob(e))return e.size;if(Gs.isSpecCompliantForm(e)){const t=new Request(ma.origin,{method:"POST",body:e});return(await t.arrayBuffer()).byteLength}return Gs.isArrayBufferView(e)||Gs.isArrayBuffer(e)?e.byteLength:(Gs.isURLSearchParams(e)&&(e+=""),Gs.isString(e)?(await qa(e)).byteLength:void 0)})(t):r},nl=Xa&&(async e=>{let{url:t,method:r,data:n,signal:i,cancelToken:o,timeout:s,onDownloadProgress:a,onUploadProgress:l,responseType:c,headers:u,withCredentials:d="same-origin",fetchOptions:h}=za(e);c=c?(c+"").toLowerCase():"text";let f,p=Va([i,o&&o.toAbortSignal()],s);const m=p&&p.unsubscribe&&(()=>{p.unsubscribe()});let g;try{if(l&&Ka&&"get"!==r&&"head"!==r&&0!==(g=await rl(u,n))){let e,r=new Request(t,{method:"POST",body:n,duplex:"half"});if(Gs.isFormData(n)&&(e=r.headers.get("content-type"))&&u.setContentType(e),r.body){const[e,t]=ja(g,Ma(Da(l)));n=$a(r.body,65536,e,t)}}Gs.isString(d)||(d=d?"include":"omit");const i="credentials"in Request.prototype;f=new Request(t,{...h,signal:p,method:r.toUpperCase(),headers:u.normalize().toJSON(),body:n,duplex:"half",credentials:i?d:void 0});let o=await fetch(f);const s=Ja&&("stream"===c||"response"===c);if(Ja&&(a||s&&m)){const e={};["status","statusText","headers"].forEach((t=>{e[t]=o[t]}));const t=Gs.toFiniteNumber(o.headers.get("content-length")),[r,n]=a&&ja(t,Ma(Da(a),!0))||[];o=new Response($a(o.body,65536,r,(()=>{n&&n(),m&&m()})),e)}c=c||"text";let y=await el[Gs.findKey(el,c)||"text"](o,e);return!s&&m&&m(),await new Promise(((t,r)=>{Oa(t,r,{data:y,headers:Sa.from(o.headers),status:o.status,statusText:o.statusText,config:e,request:f})}))}catch(y){if(m&&m(),y&&"TypeError"===y.name&&/fetch/i.test(y.message))throw Object.assign(new qs("Network Error",qs.ERR_NETWORK,e,f),{cause:y.cause||y});throw qs.from(y,y&&y.code,e,f)}}),il={http:null,xhr:Ha,fetch:nl};Gs.forEach(il,((e,t)=>{if(e){try{Object.defineProperty(e,"name",{value:t})}catch(o){}Object.defineProperty(e,"adapterName",{value:t})}}));const ol=e=>`- ${e}`,sl=e=>Gs.isFunction(e)||null===e||!1===e,al=e=>{e=Gs.isArray(e)?e:[e];const{length:t}=e;let r,n;const i={};for(let o=0;o<t;o++){let t;if(r=e[o],n=r,!sl(r)&&(n=il[(t=String(r)).toLowerCase()],void 0===n))throw new qs(`Unknown adapter '${t}'`);if(n)break;i[t||"#"+o]=n}if(!n){const e=Object.entries(i).map((e=>{let[t,r]=e;return`adapter ${t} `+(!1===r?"is not supported by the environment":"is not available in the build")}));let r=t?e.length>1?"since :\n"+e.map(ol).join("\n"):" "+ol(e[0]):"as no adapter specified";throw new qs("There is no suitable adapter to dispatch the request "+r,"ERR_NOT_SUPPORT")}return n};function ll(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new Ta(null,e)}function cl(e){ll(e),e.headers=Sa.from(e.headers),e.data=Aa.call(e,e.transformRequest),-1!==["post","put","patch"].indexOf(e.method)&&e.headers.setContentType("application/x-www-form-urlencoded",!1);return al(e.adapter||wa.adapter)(e).then((function(t){return ll(e),t.data=Aa.call(e,e.transformResponse,t),t.headers=Sa.from(t.headers),t}),(function(t){return Na(t)||(ll(e),t&&t.response&&(t.response.data=Aa.call(e,e.transformResponse,t.response),t.response.headers=Sa.from(t.response.headers))),Promise.reject(t)}))}const ul="1.8.1",dl={};["object","boolean","number","function","string","symbol"].forEach(((e,t)=>{dl[e]=function(r){return typeof r===e||"a"+(t<1?"n ":" ")+e}}));const hl={};dl.transitional=function(e,t,r){function n(e,t){return"[Axios v1.8.1] Transitional option '"+e+"'"+t+(r?". "+r:"")}return(r,i,o)=>{if(!1===e)throw new qs(n(i," has been removed"+(t?" in "+t:"")),qs.ERR_DEPRECATED);return t&&!hl[i]&&(hl[i]=!0,console.warn(n(i," has been deprecated since v"+t+" and will be removed in the near future"))),!e||e(r,i,o)}},dl.spelling=function(e){return(t,r)=>(console.warn(`${r} is likely a misspelling of ${e}`),!0)};const fl={assertOptions:function(e,t,r){if("object"!==typeof e)throw new qs("options must be an object",qs.ERR_BAD_OPTION_VALUE);const n=Object.keys(e);let i=n.length;for(;i-- >0;){const o=n[i],s=t[o];if(s){const t=e[o],r=void 0===t||s(t,o,e);if(!0!==r)throw new qs("option "+o+" must be "+r,qs.ERR_BAD_OPTION_VALUE)}else if(!0!==r)throw new qs("Unknown option "+o,qs.ERR_BAD_OPTION)}},validators:dl},pl=fl.validators;class ml{constructor(e){this.defaults=e,this.interceptors={request:new aa,response:new aa}}async request(e,t){try{return await this._request(e,t)}catch(r){if(r instanceof Error){let e={};Error.captureStackTrace?Error.captureStackTrace(e):e=new Error;const t=e.stack?e.stack.replace(/^.+\n/,""):"";try{r.stack?t&&!String(r.stack).endsWith(t.replace(/^.+\n.+\n/,""))&&(r.stack+="\n"+t):r.stack=t}catch(o){}}throw r}}_request(e,t){"string"===typeof e?(t=t||{}).url=e:t=e||{},t=Ua(this.defaults,t);const{transitional:r,paramsSerializer:n,headers:i}=t;void 0!==r&&fl.assertOptions(r,{silentJSONParsing:pl.transitional(pl.boolean),forcedJSONParsing:pl.transitional(pl.boolean),clarifyTimeoutError:pl.transitional(pl.boolean)},!1),null!=n&&(Gs.isFunction(n)?t.paramsSerializer={serialize:n}:fl.assertOptions(n,{encode:pl.function,serialize:pl.function},!0)),void 0!==t.allowAbsoluteUrls||(void 0!==this.defaults.allowAbsoluteUrls?t.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:t.allowAbsoluteUrls=!0),fl.assertOptions(t,{baseUrl:pl.spelling("baseURL"),withXsrfToken:pl.spelling("withXSRFToken")},!0),t.method=(t.method||this.defaults.method||"get").toLowerCase();let o=i&&Gs.merge(i.common,i[t.method]);i&&Gs.forEach(["delete","get","head","post","put","patch","common"],(e=>{delete i[e]})),t.headers=Sa.concat(o,i);const s=[];let a=!0;this.interceptors.request.forEach((function(e){"function"===typeof e.runWhen&&!1===e.runWhen(t)||(a=a&&e.synchronous,s.unshift(e.fulfilled,e.rejected))}));const l=[];let c;this.interceptors.response.forEach((function(e){l.push(e.fulfilled,e.rejected)}));let u,d=0;if(!a){const e=[cl.bind(this),void 0];for(e.unshift.apply(e,s),e.push.apply(e,l),u=e.length,c=Promise.resolve(t);d<u;)c=c.then(e[d++],e[d++]);return c}u=s.length;let h=t;for(d=0;d<u;){const e=s[d++],t=s[d++];try{h=e(h)}catch(f){t.call(this,f);break}}try{c=cl.call(this,h)}catch(f){return Promise.reject(f)}for(d=0,u=l.length;d<u;)c=c.then(l[d++],l[d++]);return c}getUri(e){return sa(Ba((e=Ua(this.defaults,e)).baseURL,e.url,e.allowAbsoluteUrls),e.params,e.paramsSerializer)}}Gs.forEach(["delete","get","head","options"],(function(e){ml.prototype[e]=function(t,r){return this.request(Ua(r||{},{method:e,url:t,data:(r||{}).data}))}})),Gs.forEach(["post","put","patch"],(function(e){function t(t){return function(r,n,i){return this.request(Ua(i||{},{method:e,headers:t?{"Content-Type":"multipart/form-data"}:{},url:r,data:n}))}}ml.prototype[e]=t(),ml.prototype[e+"Form"]=t(!0)}));const gl=ml;class yl{constructor(e){if("function"!==typeof e)throw new TypeError("executor must be a function.");let t;this.promise=new Promise((function(e){t=e}));const r=this;this.promise.then((e=>{if(!r._listeners)return;let t=r._listeners.length;for(;t-- >0;)r._listeners[t](e);r._listeners=null})),this.promise.then=e=>{let t;const n=new Promise((e=>{r.subscribe(e),t=e})).then(e);return n.cancel=function(){r.unsubscribe(t)},n},e((function(e,n,i){r.reason||(r.reason=new Ta(e,n,i),t(r.reason))}))}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){this.reason?e(this.reason):this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;const t=this._listeners.indexOf(e);-1!==t&&this._listeners.splice(t,1)}toAbortSignal(){const e=new AbortController,t=t=>{e.abort(t)};return this.subscribe(t),e.signal.unsubscribe=()=>this.unsubscribe(t),e.signal}static source(){let e;const t=new yl((function(t){e=t}));return{token:t,cancel:e}}}const wl=yl;const bl={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(bl).forEach((e=>{let[t,r]=e;bl[r]=t}));const vl=bl;const _l=function e(t){const r=new gl(t),n=ls(gl.prototype.request,r);return Gs.extend(n,gl.prototype,r,{allOwnKeys:!0}),Gs.extend(n,r,null,{allOwnKeys:!0}),n.create=function(r){return e(Ua(t,r))},n}(wa);_l.Axios=gl,_l.CanceledError=Ta,_l.CancelToken=wl,_l.isCancel=Na,_l.VERSION=ul,_l.toFormData=ea,_l.AxiosError=qs,_l.Cancel=_l.CanceledError,_l.all=function(e){return Promise.all(e)},_l.spread=function(e){return function(t){return e.apply(null,t)}},_l.isAxiosError=function(e){return Gs.isObject(e)&&!0===e.isAxiosError},_l.mergeConfig=Ua,_l.AxiosHeaders=Sa,_l.formToJSON=e=>ga(Gs.isHTMLForm(e)?new FormData(e):e),_l.getAdapter=al,_l.HttpStatusCode=vl,_l.default=_l;const xl=_l;var El,Cl=r(4353),Sl=r.n(Cl),Al=Object.defineProperty,Nl=Object.getOwnPropertySymbols,Il=Object.prototype.hasOwnProperty,Tl=Object.prototype.propertyIsEnumerable,Ol=(e,t,r)=>t in e?Al(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,kl=(e,t)=>{for(var r in t||(t={}))Il.call(t,r)&&Ol(e,r,t[r]);if(Nl)for(var r of Nl(t))Tl.call(t,r)&&Ol(e,r,t[r]);return e},Rl=(e,t)=>{var r={};for(var n in e)Il.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&Nl)for(var n of Nl(e))t.indexOf(n)<0&&Tl.call(e,n)&&(r[n]=e[n]);return r};(e=>{const t=class t{constructor(e,r,n,o){if(this.version=e,this.errorCorrectionLevel=r,this.modules=[],this.isFunction=[],e<t.MIN_VERSION||e>t.MAX_VERSION)throw new RangeError("Version value out of range");if(o<-1||o>7)throw new RangeError("Mask value out of range");this.size=4*e+17;let s=[];for(let t=0;t<this.size;t++)s.push(!1);for(let t=0;t<this.size;t++)this.modules.push(s.slice()),this.isFunction.push(s.slice());this.drawFunctionPatterns();const a=this.addEccAndInterleave(n);if(this.drawCodewords(a),-1==o){let e=1e9;for(let t=0;t<8;t++){this.applyMask(t),this.drawFormatBits(t);const r=this.getPenaltyScore();r<e&&(o=t,e=r),this.applyMask(t)}}i(0<=o&&o<=7),this.mask=o,this.applyMask(o),this.drawFormatBits(o),this.isFunction=[]}static encodeText(r,n){const i=e.QrSegment.makeSegments(r);return t.encodeSegments(i,n)}static encodeBinary(r,n){const i=e.QrSegment.makeBytes(r);return t.encodeSegments([i],n)}static encodeSegments(e,n){let o,a,l=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,c=arguments.length>3&&void 0!==arguments[3]?arguments[3]:40,u=arguments.length>4&&void 0!==arguments[4]?arguments[4]:-1,d=!(arguments.length>5&&void 0!==arguments[5])||arguments[5];if(!(t.MIN_VERSION<=l&&l<=c&&c<=t.MAX_VERSION)||u<-1||u>7)throw new RangeError("Invalid value");for(o=l;;o++){const r=8*t.getNumDataCodewords(o,n),i=s.getTotalBits(e,o);if(i<=r){a=i;break}if(o>=c)throw new RangeError("Data too long")}for(const r of[t.Ecc.MEDIUM,t.Ecc.QUARTILE,t.Ecc.HIGH])d&&a<=8*t.getNumDataCodewords(o,r)&&(n=r);let h=[];for(const t of e){r(t.mode.modeBits,4,h),r(t.numChars,t.mode.numCharCountBits(o),h);for(const e of t.getData())h.push(e)}i(h.length==a);const f=8*t.getNumDataCodewords(o,n);i(h.length<=f),r(0,Math.min(4,f-h.length),h),r(0,(8-h.length%8)%8,h),i(h.length%8==0);for(let t=236;h.length<f;t^=253)r(t,8,h);let p=[];for(;8*p.length<h.length;)p.push(0);return h.forEach(((e,t)=>p[t>>>3]|=e<<7-(7&t))),new t(o,n,p,u)}getModule(e,t){return 0<=e&&e<this.size&&0<=t&&t<this.size&&this.modules[t][e]}getModules(){return this.modules}drawFunctionPatterns(){for(let r=0;r<this.size;r++)this.setFunctionModule(6,r,r%2==0),this.setFunctionModule(r,6,r%2==0);this.drawFinderPattern(3,3),this.drawFinderPattern(this.size-4,3),this.drawFinderPattern(3,this.size-4);const e=this.getAlignmentPatternPositions(),t=e.length;for(let r=0;r<t;r++)for(let n=0;n<t;n++)0==r&&0==n||0==r&&n==t-1||r==t-1&&0==n||this.drawAlignmentPattern(e[r],e[n]);this.drawFormatBits(0),this.drawVersion()}drawFormatBits(e){const t=this.errorCorrectionLevel.formatBits<<3|e;let r=t;for(let n=0;n<10;n++)r=r<<1^1335*(r>>>9);const o=21522^(t<<10|r);i(o>>>15==0);for(let i=0;i<=5;i++)this.setFunctionModule(8,i,n(o,i));this.setFunctionModule(8,7,n(o,6)),this.setFunctionModule(8,8,n(o,7)),this.setFunctionModule(7,8,n(o,8));for(let i=9;i<15;i++)this.setFunctionModule(14-i,8,n(o,i));for(let i=0;i<8;i++)this.setFunctionModule(this.size-1-i,8,n(o,i));for(let i=8;i<15;i++)this.setFunctionModule(8,this.size-15+i,n(o,i));this.setFunctionModule(8,this.size-8,!0)}drawVersion(){if(this.version<7)return;let e=this.version;for(let r=0;r<12;r++)e=e<<1^7973*(e>>>11);const t=this.version<<12|e;i(t>>>18==0);for(let r=0;r<18;r++){const e=n(t,r),i=this.size-11+r%3,o=Math.floor(r/3);this.setFunctionModule(i,o,e),this.setFunctionModule(o,i,e)}}drawFinderPattern(e,t){for(let r=-4;r<=4;r++)for(let n=-4;n<=4;n++){const i=Math.max(Math.abs(n),Math.abs(r)),o=e+n,s=t+r;0<=o&&o<this.size&&0<=s&&s<this.size&&this.setFunctionModule(o,s,2!=i&&4!=i)}}drawAlignmentPattern(e,t){for(let r=-2;r<=2;r++)for(let n=-2;n<=2;n++)this.setFunctionModule(e+n,t+r,1!=Math.max(Math.abs(n),Math.abs(r)))}setFunctionModule(e,t,r){this.modules[t][e]=r,this.isFunction[t][e]=!0}addEccAndInterleave(e){const r=this.version,n=this.errorCorrectionLevel;if(e.length!=t.getNumDataCodewords(r,n))throw new RangeError("Invalid argument");const o=t.NUM_ERROR_CORRECTION_BLOCKS[n.ordinal][r],s=t.ECC_CODEWORDS_PER_BLOCK[n.ordinal][r],a=Math.floor(t.getNumRawDataModules(r)/8),l=o-a%o,c=Math.floor(a/o);let u=[];const d=t.reedSolomonComputeDivisor(s);for(let i=0,f=0;i<o;i++){let r=e.slice(f,f+c-s+(i<l?0:1));f+=r.length;const n=t.reedSolomonComputeRemainder(r,d);i<l&&r.push(0),u.push(r.concat(n))}let h=[];for(let t=0;t<u[0].length;t++)u.forEach(((e,r)=>{(t!=c-s||r>=l)&&h.push(e[t])}));return i(h.length==a),h}drawCodewords(e){if(e.length!=Math.floor(t.getNumRawDataModules(this.version)/8))throw new RangeError("Invalid argument");let r=0;for(let t=this.size-1;t>=1;t-=2){6==t&&(t=5);for(let i=0;i<this.size;i++)for(let o=0;o<2;o++){const s=t-o,a=0==(t+1&2)?this.size-1-i:i;!this.isFunction[a][s]&&r<8*e.length&&(this.modules[a][s]=n(e[r>>>3],7-(7&r)),r++)}}i(r==8*e.length)}applyMask(e){if(e<0||e>7)throw new RangeError("Mask value out of range");for(let t=0;t<this.size;t++)for(let r=0;r<this.size;r++){let n;switch(e){case 0:n=(r+t)%2==0;break;case 1:n=t%2==0;break;case 2:n=r%3==0;break;case 3:n=(r+t)%3==0;break;case 4:n=(Math.floor(r/3)+Math.floor(t/2))%2==0;break;case 5:n=r*t%2+r*t%3==0;break;case 6:n=(r*t%2+r*t%3)%2==0;break;case 7:n=((r+t)%2+r*t%3)%2==0;break;default:throw new Error("Unreachable")}!this.isFunction[t][r]&&n&&(this.modules[t][r]=!this.modules[t][r])}}getPenaltyScore(){let e=0;for(let i=0;i<this.size;i++){let r=!1,n=0,o=[0,0,0,0,0,0,0];for(let s=0;s<this.size;s++)this.modules[i][s]==r?(n++,5==n?e+=t.PENALTY_N1:n>5&&e++):(this.finderPenaltyAddHistory(n,o),r||(e+=this.finderPenaltyCountPatterns(o)*t.PENALTY_N3),r=this.modules[i][s],n=1);e+=this.finderPenaltyTerminateAndCount(r,n,o)*t.PENALTY_N3}for(let i=0;i<this.size;i++){let r=!1,n=0,o=[0,0,0,0,0,0,0];for(let s=0;s<this.size;s++)this.modules[s][i]==r?(n++,5==n?e+=t.PENALTY_N1:n>5&&e++):(this.finderPenaltyAddHistory(n,o),r||(e+=this.finderPenaltyCountPatterns(o)*t.PENALTY_N3),r=this.modules[s][i],n=1);e+=this.finderPenaltyTerminateAndCount(r,n,o)*t.PENALTY_N3}for(let i=0;i<this.size-1;i++)for(let r=0;r<this.size-1;r++){const n=this.modules[i][r];n==this.modules[i][r+1]&&n==this.modules[i+1][r]&&n==this.modules[i+1][r+1]&&(e+=t.PENALTY_N2)}let r=0;for(const t of this.modules)r=t.reduce(((e,t)=>e+(t?1:0)),r);const n=this.size*this.size,o=Math.ceil(Math.abs(20*r-10*n)/n)-1;return i(0<=o&&o<=9),e+=o*t.PENALTY_N4,i(0<=e&&e<=2568888),e}getAlignmentPatternPositions(){if(1==this.version)return[];{const e=Math.floor(this.version/7)+2,t=32==this.version?26:2*Math.ceil((4*this.version+4)/(2*e-2));let r=[6];for(let n=this.size-7;r.length<e;n-=t)r.splice(1,0,n);return r}}static getNumRawDataModules(e){if(e<t.MIN_VERSION||e>t.MAX_VERSION)throw new RangeError("Version number out of range");let r=(16*e+128)*e+64;if(e>=2){const t=Math.floor(e/7)+2;r-=(25*t-10)*t-55,e>=7&&(r-=36)}return i(208<=r&&r<=29648),r}static getNumDataCodewords(e,r){return Math.floor(t.getNumRawDataModules(e)/8)-t.ECC_CODEWORDS_PER_BLOCK[r.ordinal][e]*t.NUM_ERROR_CORRECTION_BLOCKS[r.ordinal][e]}static reedSolomonComputeDivisor(e){if(e<1||e>255)throw new RangeError("Degree out of range");let r=[];for(let t=0;t<e-1;t++)r.push(0);r.push(1);let n=1;for(let i=0;i<e;i++){for(let e=0;e<r.length;e++)r[e]=t.reedSolomonMultiply(r[e],n),e+1<r.length&&(r[e]^=r[e+1]);n=t.reedSolomonMultiply(n,2)}return r}static reedSolomonComputeRemainder(e,r){let n=r.map((e=>0));for(const i of e){const e=i^n.shift();n.push(0),r.forEach(((r,i)=>n[i]^=t.reedSolomonMultiply(r,e)))}return n}static reedSolomonMultiply(e,t){if(e>>>8!=0||t>>>8!=0)throw new RangeError("Byte out of range");let r=0;for(let n=7;n>=0;n--)r=r<<1^285*(r>>>7),r^=(t>>>n&1)*e;return i(r>>>8==0),r}finderPenaltyCountPatterns(e){const t=e[1];i(t<=3*this.size);const r=t>0&&e[2]==t&&e[3]==3*t&&e[4]==t&&e[5]==t;return(r&&e[0]>=4*t&&e[6]>=t?1:0)+(r&&e[6]>=4*t&&e[0]>=t?1:0)}finderPenaltyTerminateAndCount(e,t,r){return e&&(this.finderPenaltyAddHistory(t,r),t=0),t+=this.size,this.finderPenaltyAddHistory(t,r),this.finderPenaltyCountPatterns(r)}finderPenaltyAddHistory(e,t){0==t[0]&&(e+=this.size),t.pop(),t.unshift(e)}};t.MIN_VERSION=1,t.MAX_VERSION=40,t.PENALTY_N1=3,t.PENALTY_N2=3,t.PENALTY_N3=40,t.PENALTY_N4=10,t.ECC_CODEWORDS_PER_BLOCK=[[-1,7,10,15,20,26,18,20,24,30,18,20,24,26,30,22,24,28,30,28,28,28,28,30,30,26,28,30,30,30,30,30,30,30,30,30,30,30,30,30,30],[-1,10,16,26,18,24,16,18,22,22,26,30,22,22,24,24,28,28,26,26,26,26,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28],[-1,13,22,18,26,18,24,18,22,20,24,28,26,24,20,30,24,28,28,26,30,28,30,30,30,30,28,30,30,30,30,30,30,30,30,30,30,30,30,30,30],[-1,17,28,22,16,22,28,26,26,24,28,24,28,22,24,24,30,28,28,26,28,30,24,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30]],t.NUM_ERROR_CORRECTION_BLOCKS=[[-1,1,1,1,1,1,2,2,2,2,4,4,4,4,4,6,6,6,6,7,8,8,9,9,10,12,12,12,13,14,15,16,17,18,19,19,20,21,22,24,25],[-1,1,1,1,2,2,4,4,4,5,5,5,8,9,9,10,10,11,13,14,16,17,17,18,20,21,23,25,26,28,29,31,33,35,37,38,40,43,45,47,49],[-1,1,1,2,2,4,4,6,6,8,8,8,10,12,16,12,17,16,18,21,20,23,23,25,27,29,34,34,35,38,40,43,45,48,51,53,56,59,62,65,68],[-1,1,1,2,4,4,4,5,6,8,8,11,11,16,16,18,16,19,21,25,25,25,34,30,32,35,37,40,42,45,48,51,54,57,60,63,66,70,74,77,81]];function r(e,t,r){if(t<0||t>31||e>>>t!=0)throw new RangeError("Value out of range");for(let n=t-1;n>=0;n--)r.push(e>>>n&1)}function n(e,t){return 0!=(e>>>t&1)}function i(e){if(!e)throw new Error("Assertion error")}e.QrCode=t;const o=class e{constructor(e,t,r){if(this.mode=e,this.numChars=t,this.bitData=r,t<0)throw new RangeError("Invalid argument");this.bitData=r.slice()}static makeBytes(t){let n=[];for(const e of t)r(e,8,n);return new e(e.Mode.BYTE,t.length,n)}static makeNumeric(t){if(!e.isNumeric(t))throw new RangeError("String contains non-numeric characters");let n=[];for(let e=0;e<t.length;){const i=Math.min(t.length-e,3);r(parseInt(t.substring(e,e+i),10),3*i+1,n),e+=i}return new e(e.Mode.NUMERIC,t.length,n)}static makeAlphanumeric(t){if(!e.isAlphanumeric(t))throw new RangeError("String contains unencodable characters in alphanumeric mode");let n,i=[];for(n=0;n+2<=t.length;n+=2){let o=45*e.ALPHANUMERIC_CHARSET.indexOf(t.charAt(n));o+=e.ALPHANUMERIC_CHARSET.indexOf(t.charAt(n+1)),r(o,11,i)}return n<t.length&&r(e.ALPHANUMERIC_CHARSET.indexOf(t.charAt(n)),6,i),new e(e.Mode.ALPHANUMERIC,t.length,i)}static makeSegments(t){return""==t?[]:e.isNumeric(t)?[e.makeNumeric(t)]:e.isAlphanumeric(t)?[e.makeAlphanumeric(t)]:[e.makeBytes(e.toUtf8ByteArray(t))]}static makeEci(t){let n=[];if(t<0)throw new RangeError("ECI assignment value out of range");if(t<128)r(t,8,n);else if(t<16384)r(2,2,n),r(t,14,n);else{if(!(t<1e6))throw new RangeError("ECI assignment value out of range");r(6,3,n),r(t,21,n)}return new e(e.Mode.ECI,0,n)}static isNumeric(t){return e.NUMERIC_REGEX.test(t)}static isAlphanumeric(t){return e.ALPHANUMERIC_REGEX.test(t)}getData(){return this.bitData.slice()}static getTotalBits(e,t){let r=0;for(const n of e){const e=n.mode.numCharCountBits(t);if(n.numChars>=1<<e)return 1/0;r+=4+e+n.bitData.length}return r}static toUtf8ByteArray(e){e=encodeURI(e);let t=[];for(let r=0;r<e.length;r++)"%"!=e.charAt(r)?t.push(e.charCodeAt(r)):(t.push(parseInt(e.substring(r+1,r+3),16)),r+=2);return t}};o.NUMERIC_REGEX=/^[0-9]*$/,o.ALPHANUMERIC_REGEX=/^[A-Z0-9 $%*+.\/:-]*$/,o.ALPHANUMERIC_CHARSET="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:";let s=o;e.QrSegment=o})(El||(El={})),(e=>{let t;(e=>{const t=class{constructor(e,t){this.ordinal=e,this.formatBits=t}};t.LOW=new t(0,1),t.MEDIUM=new t(1,0),t.QUARTILE=new t(2,3),t.HIGH=new t(3,2);e.Ecc=t})(t=e.QrCode||(e.QrCode={}))})(El||(El={})),(e=>{let t;(e=>{const t=class{constructor(e,t){this.modeBits=e,this.numBitsCharCount=t}numCharCountBits(e){return this.numBitsCharCount[Math.floor((e+7)/17)]}};t.NUMERIC=new t(1,[10,12,14]),t.ALPHANUMERIC=new t(2,[9,11,13]),t.BYTE=new t(4,[8,16,16]),t.KANJI=new t(8,[8,10,12]),t.ECI=new t(7,[0,0,0]);e.Mode=t})(t=e.QrSegment||(e.QrSegment={}))})(El||(El={}));var Ml=El,jl={L:Ml.QrCode.Ecc.LOW,M:Ml.QrCode.Ecc.MEDIUM,Q:Ml.QrCode.Ecc.QUARTILE,H:Ml.QrCode.Ecc.HIGH},Dl=128,Pl="L",Ll="#FFFFFF",Bl="#000000",Fl=!1,Ul=1;function zl(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;const r=[];return e.forEach((function(e,n){let i=null;e.forEach((function(o,s){if(!o&&null!==i)return r.push(`M${i+t} ${n+t}h${s-i}v1H${i+t}z`),void(i=null);if(s!==e.length-1)o&&null===i&&(i=s);else{if(!o)return;null===i?r.push(`M${s+t},${n+t} h1v1H${s+t}z`):r.push(`M${i+t},${n+t} h${s+1-i}v1H${i+t}z`)}}))})),r.join("")}function Hl(e,t){return e.slice().map(((e,r)=>r<t.y||r>=t.y+t.h?e:e.map(((e,r)=>(r<t.x||r>=t.x+t.w)&&e))))}function Vl(e){let{value:r,level:n,minVersion:i,includeMargin:o,marginSize:s,imageSettings:a,size:l,boostLevel:c}=e,u=t.useMemo((()=>{const e=(Array.isArray(r)?r:[r]).reduce(((e,t)=>(e.push(...Ml.QrSegment.makeSegments(t)),e)),[]);return Ml.QrCode.encodeSegments(e,jl[n],i,void 0,void 0,c)}),[r,n,i,c]);const{cells:d,margin:h,numCells:f,calculatedImageSettings:p}=t.useMemo((()=>{let e=u.getModules();const t=function(e,t){return null!=t?Math.max(Math.floor(t),0):e?4:0}(o,s),r=e.length+2*t,n=function(e,t,r,n){if(null==n)return null;const i=e.length+2*r,o=Math.floor(.1*t),s=i/t,a=(n.width||o)*s,l=(n.height||o)*s,c=null==n.x?e.length/2-a/2:n.x*s,u=null==n.y?e.length/2-l/2:n.y*s,d=null==n.opacity?1:n.opacity;let h=null;if(n.excavate){let e=Math.floor(c),t=Math.floor(u);h={x:e,y:t,w:Math.ceil(a+c-e),h:Math.ceil(l+u-t)}}return{x:c,y:u,h:l,w:a,excavation:h,opacity:d,crossOrigin:n.crossOrigin}}(e,l,t,a);return{cells:e,margin:t,numCells:r,calculatedImageSettings:n}}),[u,l,a,o,s]);return{qrcode:u,margin:h,cells:d,numCells:f,calculatedImageSettings:p}}var Wl=function(){try{(new Path2D).addPath(new Path2D)}catch(o){return!1}return!0}();t.forwardRef((function(e,r){const n=e,{value:i,size:o=Dl,level:s=Pl,bgColor:a=Ll,fgColor:l=Bl,includeMargin:c=Fl,minVersion:u=Ul,boostLevel:d,marginSize:h,imageSettings:f}=n,p=Rl(n,["value","size","level","bgColor","fgColor","includeMargin","minVersion","boostLevel","marginSize","imageSettings"]),{style:m}=p,g=Rl(p,["style"]),y=null==f?void 0:f.src,w=t.useRef(null),b=t.useRef(null),v=t.useCallback((e=>{w.current=e,"function"===typeof r?r(e):r&&(r.current=e)}),[r]),[_,x]=t.useState(!1),{margin:E,cells:C,numCells:S,calculatedImageSettings:A}=Vl({value:i,level:s,minVersion:u,boostLevel:d,includeMargin:c,marginSize:h,imageSettings:f,size:o});t.useEffect((()=>{if(null!=w.current){const e=w.current,t=e.getContext("2d");if(!t)return;let r=C;const n=b.current,i=null!=A&&null!==n&&n.complete&&0!==n.naturalHeight&&0!==n.naturalWidth;i&&null!=A.excavation&&(r=Hl(C,A.excavation));const s=window.devicePixelRatio||1;e.height=e.width=o*s;const c=o/S*s;t.scale(c,c),t.fillStyle=a,t.fillRect(0,0,S,S),t.fillStyle=l,Wl?t.fill(new Path2D(zl(r,E))):C.forEach((function(e,r){e.forEach((function(e,n){e&&t.fillRect(n+E,r+E,1,1)}))})),A&&(t.globalAlpha=A.opacity),i&&t.drawImage(n,A.x+E,A.y+E,A.w,A.h)}})),t.useEffect((()=>{x(!1)}),[y]);const N=kl({height:o,width:o},m);let I=null;return null!=y&&(I=t.createElement("img",{src:y,key:y,style:{display:"none"},onLoad:()=>{x(!0)},ref:b,crossOrigin:null==A?void 0:A.crossOrigin})),t.createElement(t.Fragment,null,t.createElement("canvas",kl({style:N,height:o,width:o,ref:v,role:"img"},g)),I)})).displayName="QRCodeCanvas";var Gl=t.forwardRef((function(e,r){const n=e,{value:i,size:o=Dl,level:s=Pl,bgColor:a=Ll,fgColor:l=Bl,includeMargin:c=Fl,minVersion:u=Ul,boostLevel:d,title:h,marginSize:f,imageSettings:p}=n,m=Rl(n,["value","size","level","bgColor","fgColor","includeMargin","minVersion","boostLevel","title","marginSize","imageSettings"]),{margin:g,cells:y,numCells:w,calculatedImageSettings:b}=Vl({value:i,level:s,minVersion:u,boostLevel:d,includeMargin:c,marginSize:f,imageSettings:p,size:o});let v=y,_=null;null!=p&&null!=b&&(null!=b.excavation&&(v=Hl(y,b.excavation)),_=t.createElement("image",{href:p.src,height:b.h,width:b.w,x:b.x+g,y:b.y+g,preserveAspectRatio:"none",opacity:b.opacity,crossOrigin:b.crossOrigin}));const x=zl(v,g);return t.createElement("svg",kl({height:o,width:o,viewBox:`0 0 ${w} ${w}`,ref:r,role:"img"},m),!!h&&t.createElement("title",null,h),t.createElement("path",{fill:a,d:`M0,0 h${w}v${w}H0z`,shapeRendering:"crispEdges"}),t.createElement("path",{fill:l,d:x,shapeRendering:"crispEdges"}),_)}));Gl.displayName="QRCodeSVG";const $l=e=>{let{value:r,materialName:n,onClose:i}=e;const o=(0,t.useRef)(null),[s,a]=(0,t.useState)("barcode");return(0,Dt.jsxs)("div",{className:"bg-white rounded-lg shadow-lg p-6",children:[(0,Dt.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,Dt.jsxs)("h3",{className:"text-lg font-medium",children:["Generated ","barcode"===s?"Barcode":"QR Code"]}),i&&(0,Dt.jsx)("button",{onClick:i,className:"text-gray-500 hover:text-gray-700",children:(0,Dt.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,Dt.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),(0,Dt.jsxs)("div",{className:"mb-4 flex justify-center space-x-4",children:[(0,Dt.jsx)("button",{onClick:()=>a("barcode"),className:"px-4 py-2 rounded-md "+("barcode"===s?"bg-blue-600 text-white":"bg-gray-200 text-gray-800 hover:bg-gray-300"),children:"Barcode"}),(0,Dt.jsx)("button",{onClick:()=>a("qrcode"),className:"px-4 py-2 rounded-md "+("qrcode"===s?"bg-blue-600 text-white":"bg-gray-200 text-gray-800 hover:bg-gray-300"),children:"QR Code"})]}),(0,Dt.jsxs)("div",{ref:o,className:"flex flex-col items-center justify-center p-4 border border-gray-200 rounded-md",children:["barcode"===s?(0,Dt.jsx)(Sl(),{value:r}):(0,Dt.jsx)(Gl,{value:r,size:200,level:"H",includeMargin:!0}),n&&(0,Dt.jsx)("div",{className:"mt-2 font-semibold",children:n}),(0,Dt.jsx)("div",{className:"mt-1 text-sm text-gray-500",children:r})]}),(0,Dt.jsx)("div",{className:"mt-4 flex justify-center",children:(0,Dt.jsxs)("button",{onClick:()=>{const e=o.current;if(!e)return;const t=window.open("","_blank");t?(t.document.write(`\n      <html>\n        <head>\n          <title>Print ${"barcode"===s?"Barcode":"QR Code"}</title>\n          <style>\n            body {\n              font-family: Arial, sans-serif;\n              padding: 20px;\n            }\n            .code-container {\n              text-align: center;\n              margin: 0 auto;\n              padding: 10px;\n              border: 1px solid #ccc;\n              max-width: 300px;\n            }\n            .material-name {\n              margin-top: 10px;\n              font-weight: bold;\n            }\n            .code-value {\n              margin-top: 5px;\n              font-size: 12px;\n            }\n            @media print {\n              body {\n                margin: 0;\n                padding: 0;\n              }\n              button {\n                display: none;\n              }\n            }\n          </style>\n        </head>\n        <body>\n          <div class="code-container">\n            ${e.innerHTML}\n          </div>\n          <script>\n            setTimeout(() => {\n              window.print();\n              window.close();\n            }, 500);\n          <\/script>\n        </body>\n      </html>\n    `),t.document.close()):alert("Please allow pop-ups to print codes")},className:"bg-blue-600 text-white px-4 py-2 rounded-md hover:bg-blue-700 transition-colors",children:["Print ","barcode"===s?"Barcode":"QR Code"]})}),(0,Dt.jsx)("p",{className:"text-xs text-gray-500 mt-4 text-center",children:"You can print this code and attach it to the physical item"})]})},Xl=()=>(0,Dt.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"h-5 w-5",children:(0,Dt.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 4.5v15m7.5-7.5h-15"})}),Yl=()=>(0,Dt.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"h-5 w-5",children:(0,Dt.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M16.862 4.487l1.687-1.688a1.875 1.875 0 112.652 2.652L10.582 16.07a4.5 4.5 0 01-1.897 1.13L6 18l.8-2.685a4.5 4.5 0 011.13-1.897l8.932-8.931zm0 0L19.5 7.125M18 14v4.75A2.25 2.25 0 0115.75 21H5.25A2.25 2.25 0 013 18.75V8.25A2.25 2.25 0 015.25 6H10"})}),ql=()=>(0,Dt.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"h-5 w-5",children:(0,Dt.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M14.74 9l-.346 9m-4.788 0L9.26 9m9.968-3.21c.342.052.682.107 1.022.166m-1.022-.165L18.16 19.673a2.25 2.25 0 01-2.244 2.077H8.084a2.25 2.25 0 01-2.244-2.077L4.772 5.79m14.456 0a48.108 48.108 0 00-3.478-.397m-12 .562c.34-.059.68-.114 1.022-.165m0 0a48.11 48.11 0 013.478-.397m7.5 0v-.916c0-1.18-.91-2.164-2.09-2.201a51.964 51.964 0 00-3.32 0c-1.18.037-2.09 1.022-2.09 2.201v.916m7.5 0a48.667 48.667 0 00-7.5 0"})}),Ql=()=>(0,Dt.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"h-5 w-5",children:[(0,Dt.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3.75 4.875c0-.621.504-1.125 1.125-1.125h4.5c.621 0 1.125.504 1.125 1.125v4.5c0 .621-.504 1.125-1.125 1.125h-4.5A1.125 1.125 0 013.75 9.375v-4.5zM3.75 14.625c0-.621.504-1.125 1.125-1.125h4.5c.621 0 1.125.504 1.125 1.125v4.5c0 .621-.504 1.125-1.125 1.125h-4.5a1.125 1.125 0 01-1.125-1.125v-4.5zM13.5 4.875c0-.621.504-1.125 1.125-1.125h4.5c.621 0 1.125.504 1.125 1.125v4.5c0 .621-.504 1.125-1.125 1.125h-4.5A1.125 1.125 0 0113.5 9.375v-4.5z"}),(0,Dt.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6.75 6.75h.75v.75h-.75v-.75zM6.75 16.5h.75v.75h-.75v-.75zM16.5 6.75h.75v.75h-.75v-.75zM13.5 13.5h.75v.75h-.75v-.75zM13.5 19.5h.75v.75h-.75v-.75zM19.5 13.5h.75v.75h-.75v-.75zM19.5 19.5h.75v.75h-.75v-.75zM16.5 16.5h.75v.75h-.75v-.75z"})]}),Zl=()=>{const[e,r]=(0,t.useState)([]),[n,i]=(0,t.useState)(!0),[o,s]=(0,t.useState)(""),[a,l]=(0,t.useState)("all"),[c,u]=(0,t.useState)(!1),[d,h]=(0,t.useState)(null),f=async()=>{try{i(!0);const e=localStorage.getItem("materials");if(e){const t=JSON.parse(e);if(t&&t.length>0)return console.log("Loading materials from localStorage:",t),r(t),void i(!1)}const t=localStorage.getItem("token");if(!t)return console.error("No authentication token found"),void ne.error("Authentication error. Please log in again.");const n=await xl.get("https://applegraphics.vercel.app/api/materials",{headers:{Authorization:`Bearer ${t}`}});r(n.data),n.data&&0!==n.data.length||(console.warn("No materials returned from API"),r([]))}catch(e){console.error("Error fetching materials:",e),ne.error("Failed to load materials"),r([])}finally{i(!1)}};(0,t.useEffect)((()=>{f()}),[]);const p=e.filter((e=>{const t=e.name.toLowerCase().includes(o.toLowerCase());return"all"===a?t:"low-stock"===a?t&&e.current_stock<=e.reorder_level:"paper"===a?t&&"Paper"===e.category_name:"ink"===a?t&&"Ink"===e.category_name:t}));return(0,Dt.jsxs)("div",{className:"p-6",children:[(0,Dt.jsxs)("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center mb-6",children:[(0,Dt.jsx)("h1",{className:"text-2xl font-bold",children:"Materials Inventory"}),(0,Dt.jsxs)(Tt,{to:"/materials/add",className:"mt-3 sm:mt-0 flex items-center bg-blue-600 text-white px-4 py-2 rounded-md hover:bg-blue-700 transition-colors",children:[(0,Dt.jsx)(Xl,{}),(0,Dt.jsx)("span",{className:"ml-2",children:"Add Material"})]})]}),(0,Dt.jsxs)("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:[(0,Dt.jsxs)("div",{className:"p-4 border-b flex flex-col md:flex-row justify-between items-start md:items-center space-y-4 md:space-y-0",children:[(0,Dt.jsxs)("div",{className:"relative w-full md:w-64",children:[(0,Dt.jsx)("input",{type:"text",placeholder:"Search materials...",className:"pl-10 pr-4 py-2 border rounded-md w-full focus:outline-none focus:ring-2 focus:ring-blue-500",value:o,onChange:e=>s(e.target.value)}),(0,Dt.jsx)("div",{className:"absolute left-3 top-2.5 text-gray-400",children:(0,Dt.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,Dt.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})})]}),(0,Dt.jsxs)("div",{className:"flex space-x-2",children:[(0,Dt.jsx)("button",{className:"px-3 py-1.5 rounded-md "+("all"===a?"bg-blue-600 text-white":"bg-gray-100 text-gray-800"),onClick:()=>l("all"),children:"All"}),(0,Dt.jsx)("button",{className:"px-3 py-1.5 rounded-md "+("low-stock"===a?"bg-blue-600 text-white":"bg-gray-100 text-gray-800"),onClick:()=>l("low-stock"),children:"Low Stock"}),(0,Dt.jsx)("button",{className:"px-3 py-1.5 rounded-md "+("paper"===a?"bg-blue-600 text-white":"bg-gray-100 text-gray-800"),onClick:()=>l("paper"),children:"Paper"}),(0,Dt.jsx)("button",{className:"px-3 py-1.5 rounded-md "+("ink"===a?"bg-blue-600 text-white":"bg-gray-100 text-gray-800"),onClick:()=>l("ink"),children:"Ink"})]})]}),n?(0,Dt.jsx)("div",{className:"p-8 flex justify-center",children:(0,Dt.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-700"})}):(0,Dt.jsx)(Dt.Fragment,{children:0===p.length?(0,Dt.jsx)("div",{className:"p-8 text-center text-gray-500",children:"No materials found matching your search criteria."}):(0,Dt.jsx)("div",{className:"overflow-x-auto",children:(0,Dt.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,Dt.jsx)("thead",{className:"bg-gray-50",children:(0,Dt.jsxs)("tr",{children:[(0,Dt.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Name"}),(0,Dt.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Category"}),(0,Dt.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Current Stock"}),(0,Dt.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Reorder Level"}),(0,Dt.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Unit Price"}),(0,Dt.jsx)("th",{className:"px-6 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),(0,Dt.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:p.map((t=>(0,Dt.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,Dt.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,Dt.jsx)(Tt,{to:`/materials/${t.id}`,className:"text-blue-600 hover:text-blue-800 font-medium",children:t.name})}),(0,Dt.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-gray-700",children:t.category_name}),(0,Dt.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,Dt.jsxs)("span",{className:"px-2 py-1 rounded-full text-xs font-medium "+(t.current_stock<=t.reorder_level?"bg-red-100 text-red-800":"bg-green-100 text-green-800"),children:[t.current_stock," ",t.unit_of_measure]})}),(0,Dt.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap text-gray-700",children:[t.reorder_level," ",t.unit_of_measure]}),(0,Dt.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-gray-700",children:Mi(t.unit_price)}),(0,Dt.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-center",children:(0,Dt.jsxs)("div",{className:"flex space-x-2 justify-center",children:[(0,Dt.jsx)("button",{onClick:()=>{h(t),u(!0)},className:"text-blue-600 hover:text-blue-900","aria-label":"Generate Barcode",title:"Generate Barcode",children:(0,Dt.jsx)(Ql,{})}),(0,Dt.jsx)(Tt,{to:`/materials/edit/${t.id}`,className:"text-yellow-600 hover:text-yellow-900","aria-label":"Edit",title:"Edit",children:(0,Dt.jsx)(Yl,{})}),(0,Dt.jsx)("button",{onClick:()=>(async t=>{if(window.confirm("Are you sure you want to delete this material?"))try{const n=localStorage.getItem("materials");if(n){const e=JSON.parse(n).filter((e=>e.id!==t));localStorage.setItem("materials",JSON.stringify(e))}r(e.filter((e=>e.id!==t))),ne.success("Material deleted successfully")}catch(n){console.error("Error deleting material:",n),ne.error("Failed to delete material")}})(t.id),className:"text-red-600 hover:text-red-900","aria-label":"Delete",title:"Delete",children:(0,Dt.jsx)(ql,{})})]})})]},t.id)))})]})})})]}),c&&d&&(0,Dt.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50",children:(0,Dt.jsx)("div",{className:"max-w-md w-full mx-4",children:(0,Dt.jsx)($l,{value:d.sku?`AG${d.sku.replace(/^AG/,"")}`:`AG-${d.id}`,materialName:d.name,onClose:()=>{u(!1),h(null)}})})})]})},Kl=()=>(0,Dt.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"h-5 w-5",children:(0,Dt.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M16.862 4.487l1.687-1.688a1.875 1.875 0 112.652 2.652L10.582 16.07a4.5 4.5 0 01-1.897 1.13L6 18l.8-2.685a4.5 4.5 0 011.13-1.897l8.932-8.931zm0 0L19.5 7.125M18 14v4.75A2.25 2.25 0 0115.75 21H5.25A2.25 2.25 0 013 18.75V8.25A2.25 2.25 0 015.25 6H10"})}),Jl=()=>(0,Dt.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"h-5 w-5",children:[(0,Dt.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3.75 4.875c0-.621.504-1.125 1.125-1.125h4.5c.621 0 1.125.504 1.125 1.125v4.5c0 .621-.504 1.125-1.125 1.125h-4.5A1.125 1.125 0 013.75 9.375v-4.5zM3.75 14.625c0-.621.504-1.125 1.125-1.125h4.5c.621 0 1.125.504 1.125 1.125v4.5c0 .621-.504 1.125-1.125 1.125h-4.5a1.125 1.125 0 01-1.125-1.125v-4.5zM13.5 4.875c0-.621.504-1.125 1.125-1.125h4.5c.621 0 1.125.504 1.125 1.125v4.5c0 .621-.504 1.125-1.125 1.125h-4.5A1.125 1.125 0 0113.5 9.375v-4.5z"}),(0,Dt.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6.75 6.75h.75v.75h-.75v-.75zM6.75 16.5h.75v.75h-.75v-.75zM16.5 6.75h.75v.75h-.75v-.75zM13.5 13.5h.75v.75h-.75v-.75zM13.5 19.5h.75v.75h-.75v-.75zM19.5 13.5h.75v.75h-.75v-.75zM19.5 19.5h.75v.75h-.75v-.75zM16.5 16.5h.75v.75h-.75v-.75z"})]}),ec=()=>{const{id:e}=tt(),[r,n]=(0,t.useState)(null),[i,o]=(0,t.useState)([]),[s,a]=(0,t.useState)(!0),[l,c]=(0,t.useState)(!0),[u,d]=(0,t.useState)(""),[h,f]=(0,t.useState)(""),[p,m]=(0,t.useState)(!1),[g,y]=(0,t.useState)(!1);(0,t.useEffect)((()=>{e&&((async()=>{try{a(!0),n({id:parseInt(e||"0"),name:"Matte Paper A4",description:"High quality matte paper for premium printing, 80gsm",sku:"PAP-MTT-A4-80",category_id:1,category_name:"Paper",current_stock:2500,unit_of_measure:"sheets",reorder_level:1e3,unit_price:.05,supplier_id:1,supplier_name:"Paper Supplies Inc",location:"Shelf A3"})}catch(t){console.error("Error fetching material:",t),ne.error("Failed to load material details")}finally{a(!1)}})(),(async()=>{try{c(!0),o([{id:1,transaction_type:"purchase",quantity:5e3,transaction_date:"2023-09-01T10:30:00Z",unit_price:.05,user_name:"John Admin",notes:"Regular monthly order"},{id:2,transaction_type:"usage",quantity:-1500,transaction_date:"2023-09-05T14:20:00Z",job_id:101,job_name:"ABC Corp Brochures",user_name:"Mike Operator",notes:"Production run"},{id:3,transaction_type:"usage",quantity:-800,transaction_date:"2023-09-10T11:15:00Z",job_id:102,job_name:"XYZ Publishing Flyers",user_name:"Mike Operator"},{id:4,transaction_type:"adjustment",quantity:-200,transaction_date:"2023-09-12T09:45:00Z",user_name:"Sarah Manager",notes:"Damaged in storage"}])}catch(e){console.error("Error fetching transactions:",e),ne.error("Failed to load transaction history")}finally{c(!1)}})())}),[e]);if(s)return(0,Dt.jsx)("div",{className:"p-8 flex justify-center",children:(0,Dt.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-700"})});if(!r)return(0,Dt.jsxs)("div",{className:"p-8 text-center",children:[(0,Dt.jsx)("p",{className:"text-red-500",children:"Material not found"}),(0,Dt.jsx)(Tt,{to:"/materials",className:"text-blue-500 mt-4 inline-block",children:"Back to Materials List"})]});const w=r.current_stock<=r.reorder_level;return(0,Dt.jsxs)("div",{className:"container mx-auto p-4",children:[(0,Dt.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[(0,Dt.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,Dt.jsx)("h1",{className:"text-2xl font-semibold",children:"Material Detail"}),(0,Dt.jsxs)("div",{className:"flex space-x-2",children:[(0,Dt.jsxs)("button",{onClick:()=>y(!0),className:"flex items-center bg-blue-600 text-white px-3 py-2 rounded-md hover:bg-blue-700 transition-colors",children:[(0,Dt.jsx)(Jl,{}),(0,Dt.jsx)("span",{className:"ml-2",children:"Generate Barcode"})]}),(0,Dt.jsxs)(Tt,{to:`/materials/edit/${e}`,className:"flex items-center bg-yellow-500 text-white px-3 py-2 rounded-md hover:bg-yellow-600 transition-colors",children:[(0,Dt.jsx)(Kl,{}),(0,Dt.jsx)("span",{className:"ml-2",children:"Edit"})]})]})]}),g&&(0,Dt.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50",children:(0,Dt.jsx)("div",{className:"max-w-md w-full mx-4",children:(0,Dt.jsx)($l,{value:null!==r&&void 0!==r&&r.sku?`AG${r.sku.replace(/^AG/,"")}`:`AG-${e}`,materialName:null===r||void 0===r?void 0:r.name,onClose:()=>y(!1)})})}),(0,Dt.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-6",children:[(0,Dt.jsxs)("div",{children:[(0,Dt.jsx)("h2",{className:"text-lg font-semibold mb-4",children:"General Information"}),(0,Dt.jsx)("table",{className:"w-full",children:(0,Dt.jsxs)("tbody",{children:[(0,Dt.jsxs)("tr",{children:[(0,Dt.jsx)("td",{className:"py-2 text-gray-500",children:"Name"}),(0,Dt.jsx)("td",{className:"py-2",children:r.name})]}),(0,Dt.jsxs)("tr",{children:[(0,Dt.jsx)("td",{className:"py-2 text-gray-500",children:"SKU"}),(0,Dt.jsx)("td",{className:"py-2",children:r.sku})]}),(0,Dt.jsxs)("tr",{children:[(0,Dt.jsx)("td",{className:"py-2 text-gray-500",children:"Category"}),(0,Dt.jsx)("td",{className:"py-2",children:r.category_name})]}),(0,Dt.jsxs)("tr",{children:[(0,Dt.jsx)("td",{className:"py-2 text-gray-500",children:"Description"}),(0,Dt.jsx)("td",{className:"py-2",children:r.description})]}),(0,Dt.jsxs)("tr",{children:[(0,Dt.jsx)("td",{className:"py-2 text-gray-500",children:"Supplier"}),(0,Dt.jsx)("td",{className:"py-2",children:r.supplier_name})]}),(0,Dt.jsxs)("tr",{children:[(0,Dt.jsx)("td",{className:"py-2 text-gray-500",children:"Location"}),(0,Dt.jsx)("td",{className:"py-2",children:r.location})]})]})})]}),(0,Dt.jsxs)("div",{children:[(0,Dt.jsx)("h2",{className:"text-lg font-semibold mb-4",children:"Inventory Information"}),(0,Dt.jsx)("table",{className:"w-full",children:(0,Dt.jsxs)("tbody",{children:[(0,Dt.jsxs)("tr",{children:[(0,Dt.jsx)("td",{className:"py-2 text-gray-500",children:"Current Stock"}),(0,Dt.jsxs)("td",{className:"py-2 font-semibold",children:[r.current_stock," ",r.unit_of_measure,w&&(0,Dt.jsx)("span",{className:"ml-2 px-2 py-1 bg-red-100 text-red-800 text-xs rounded-full",children:"Low Stock"})]})]}),(0,Dt.jsxs)("tr",{children:[(0,Dt.jsx)("td",{className:"py-2 text-gray-500",children:"Reorder Level"}),(0,Dt.jsxs)("td",{className:"py-2",children:[r.reorder_level," ",r.unit_of_measure]})]}),(0,Dt.jsxs)("tr",{children:[(0,Dt.jsx)("td",{className:"py-2 text-gray-500",children:"Unit Price"}),(0,Dt.jsxs)("td",{className:"py-2",children:[Mi(r.unit_price)," per ",r.unit_of_measure]})]}),(0,Dt.jsxs)("tr",{children:[(0,Dt.jsx)("td",{className:"py-2 text-gray-500",children:"Stock Value"}),(0,Dt.jsx)("td",{className:"py-2",children:Mi(r.current_stock*r.unit_price)})]})]})})]})]}),(0,Dt.jsxs)("div",{children:[(0,Dt.jsx)("h2",{className:"text-lg font-semibold mb-4",children:"Transaction History"}),(0,Dt.jsx)("div",{className:"overflow-x-auto",children:(0,Dt.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,Dt.jsx)("thead",{className:"bg-gray-50",children:(0,Dt.jsxs)("tr",{children:[(0,Dt.jsx)("th",{className:"px-4 py-3 whitespace-nowrap text-sm font-medium text-gray-500",children:"Date"}),(0,Dt.jsx)("th",{className:"px-4 py-3 whitespace-nowrap text-sm font-medium text-gray-500",children:"Quantity"}),(0,Dt.jsx)("th",{className:"px-4 py-3 whitespace-nowrap text-sm font-medium text-gray-500",children:"Unit Price"}),(0,Dt.jsx)("th",{className:"px-4 py-3 whitespace-nowrap text-sm font-medium text-gray-500",children:"User"}),(0,Dt.jsx)("th",{className:"px-4 py-3 whitespace-nowrap text-sm font-medium text-gray-500",children:"Notes"})]})}),(0,Dt.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:i.map((e=>(0,Dt.jsxs)("tr",{children:[(0,Dt.jsx)("td",{className:"px-4 py-3 whitespace-nowrap text-sm text-gray-700",children:ji(e.transaction_date)}),(0,Dt.jsxs)("td",{className:"px-4 py-3 whitespace-nowrap text-sm text-right font-medium",children:[e.quantity>0?"+":"",e.quantity," ",r.unit_of_measure,e.unit_price&&(0,Dt.jsxs)("p",{className:"text-xs text-gray-500",children:["@ ",Mi(e.unit_price)]})]}),(0,Dt.jsx)("td",{className:"px-4 py-3 whitespace-nowrap text-sm text-gray-700",children:e.user_name}),(0,Dt.jsx)("td",{className:"px-4 py-3 text-sm text-gray-700",children:e.notes||"-"})]},e.id)))})]})})]}),(0,Dt.jsxs)("div",{children:[(0,Dt.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[(0,Dt.jsx)("h2",{className:"text-lg font-semibold mb-4",children:"Current Inventory"}),(0,Dt.jsxs)("div",{className:"p-6 rounded-lg mb-4 text-center "+(w?"bg-red-50":"bg-green-50"),children:[(0,Dt.jsx)("p",{className:"text-sm text-gray-500",children:"Current Stock"}),(0,Dt.jsxs)("p",{className:"text-3xl font-bold mt-1",children:[r.current_stock," ",(0,Dt.jsx)("span",{className:"text-sm font-medium",children:r.unit_of_measure})]}),w&&(0,Dt.jsxs)("p",{className:"text-sm text-red-600 mt-2",children:["Below reorder level (",r.reorder_level," ",r.unit_of_measure,")"]})]}),(0,Dt.jsx)("h3",{className:"text-md font-medium mb-3",children:"Adjust Inventory"}),(0,Dt.jsxs)("div",{className:"space-y-3",children:[(0,Dt.jsxs)("div",{children:[(0,Dt.jsx)("label",{className:"block text-sm text-gray-600 mb-1",children:"Quantity"}),(0,Dt.jsxs)("div",{className:"flex",children:[(0,Dt.jsx)("span",{className:"inline-flex items-center px-3 border border-r-0 border-gray-300 bg-gray-50 text-gray-500 text-sm rounded-l-md",children:"+/-"}),(0,Dt.jsx)("input",{type:"number",value:u,onChange:e=>d(e.target.value),placeholder:"Enter quantity",className:"flex-1 min-w-0 block w-full px-3 py-2 border border-gray-300 rounded-r-md focus:outline-none focus:ring-blue-500 focus:border-blue-500"})]}),(0,Dt.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"Use positive for additions, negative for removals"})]}),(0,Dt.jsxs)("div",{children:[(0,Dt.jsx)("label",{className:"block text-sm text-gray-600 mb-1",children:"Reason"}),(0,Dt.jsx)("textarea",{value:h,onChange:e=>f(e.target.value),placeholder:"Enter reason for adjustment",className:"block w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-blue-500 focus:border-blue-500",rows:3})]}),(0,Dt.jsx)("button",{onClick:()=>{const e=parseFloat(u);if(isNaN(e)||0===e)ne.error("Please enter a valid quantity");else if(h.trim())try{if(r){n({...r,current_stock:r.current_stock+e});const t={id:Math.max(0,...i.map((e=>e.id)))+1,transaction_type:"adjustment",quantity:e,transaction_date:(new Date).toISOString(),user_name:"Current User",notes:h};o([t,...i]),d(""),f(""),ne.success("Inventory adjusted successfully")}}catch(t){console.error("Error adjusting inventory:",t),ne.error("Failed to adjust inventory")}else ne.error("Please provide a reason for the adjustment")},className:"w-full bg-blue-600 text-white px-4 py-2 rounded-md hover:bg-blue-700 transition-colors",children:"Update Inventory"})]})]}),(0,Dt.jsxs)("div",{className:"bg-white rounded-lg shadow p-6 mt-6",children:[(0,Dt.jsx)("h2",{className:"text-lg font-semibold mb-4",children:"Quick Actions"}),(0,Dt.jsxs)("div",{className:"space-y-2",children:[(0,Dt.jsx)(Tt,{to:`/suppliers/${r.supplier_id}`,className:"block w-full text-center bg-white border border-gray-300 text-gray-700 px-4 py-2 rounded-md hover:bg-gray-50 transition-colors",children:"View Supplier"}),(0,Dt.jsx)(Tt,{to:`/orders/new?material=${r.id}`,className:"block w-full text-center bg-white border border-gray-300 text-gray-700 px-4 py-2 rounded-md hover:bg-gray-50 transition-colors",children:"Create Purchase Order"}),(0,Dt.jsx)("button",{onClick:()=>{navigator.clipboard.writeText(r.sku),ne.success("SKU copied to clipboard")},className:"block w-full text-center bg-white border border-gray-300 text-gray-700 px-4 py-2 rounded-md hover:bg-gray-50 transition-colors",children:"Copy SKU"}),(0,Dt.jsx)("button",{onClick:()=>m(!0),className:"block w-full text-center bg-white border border-gray-300 text-gray-700 px-4 py-2 rounded-md hover:bg-gray-50 transition-colors",children:"Scan Barcode"})]})]})]})]}),p&&(0,Dt.jsx)("div",{className:"fixed inset-0 z-50 bg-black bg-opacity-50 flex items-center justify-center p-4",children:(0,Dt.jsx)("div",{className:"w-full max-w-md",children:(0,Dt.jsx)(Jo,{onScan:e=>{ne.success(`Scanned: ${e}`),m(!1)},onError:e=>{ne.error(e),m(!1)},onClose:()=>m(!1)})})})]})},tc=()=>(0,Dt.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"h-5 w-5",children:(0,Dt.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M10.5 19.5L3 12m0 0l7.5-7.5M3 12h18"})}),rc=()=>{const e=Je(),[r,n]=(0,t.useState)(!1),[i,o]=(0,t.useState)([]),[s,a]=(0,t.useState)([]),[l,c]=(0,t.useState)({name:"",description:"",sku:"",category_id:"",unit_of_measure:"sheets",current_stock:"0",reorder_level:"0",unit_price:"0",supplier_id:"",location:""});(0,t.useEffect)((()=>{(async()=>{try{o([{id:1,name:"Paper"},{id:2,name:"Ink"},{id:3,name:"Binding"},{id:4,name:"Plates"},{id:5,name:"Other"}])}catch(e){console.error("Error fetching categories:",e),ne.error("Failed to load categories")}})(),(async()=>{try{a([{id:1,name:"Paper Supplies Inc"},{id:2,name:"Ink Masters"},{id:3,name:"Binding Solutions"},{id:4,name:"Plate Pros"}])}catch(e){console.error("Error fetching suppliers:",e),ne.error("Failed to load suppliers")}})()}),[]);const u=e=>{const{name:t,value:r}=e.target;c((e=>({...e,[t]:r})))};return(0,Dt.jsxs)("div",{className:"p-6",children:[(0,Dt.jsxs)("div",{className:"flex items-center mb-6",children:[(0,Dt.jsx)(Tt,{to:"/materials",className:"mr-4 text-gray-500 hover:text-gray-700",children:(0,Dt.jsx)(tc,{})}),(0,Dt.jsx)("h1",{className:"text-2xl font-bold",children:"Add New Material"})]}),(0,Dt.jsx)("div",{className:"bg-white rounded-lg shadow p-6",children:(0,Dt.jsxs)("form",{onSubmit:async t=>{if(t.preventDefault(),l.name&&l.sku&&l.category_id&&l.supplier_id){n(!0);try{var r,o;if(!localStorage.getItem("token"))return console.error("No authentication token found"),void ne.error("Authentication error. Please log in again.");const t={id:Date.now(),name:l.name,description:l.description,sku:l.sku,category_id:parseInt(l.category_id),category_name:(null===(r=i.find((e=>e.id.toString()===l.category_id)))||void 0===r?void 0:r.name)||"",unit_of_measure:l.unit_of_measure,current_stock:parseFloat(l.current_stock),reorder_level:parseInt(l.reorder_level),unit_price:parseFloat(l.unit_price),supplier_id:parseInt(l.supplier_id),supplier_name:(null===(o=s.find((e=>e.id.toString()===l.supplier_id)))||void 0===o?void 0:o.name)||"",location:l.location},n=JSON.parse(localStorage.getItem("materials")||"[]");n.push(t),localStorage.setItem("materials",JSON.stringify(n)),await new Promise((e=>setTimeout(e,1e3))),ne.success("Material added successfully"),e("/materials"),c({name:"",description:"",sku:"",category_id:"",unit_of_measure:"",current_stock:"",reorder_level:"",unit_price:"",supplier_id:"",location:""})}catch(a){console.error("Error adding material:",a),ne.error("Failed to add material")}finally{n(!1)}}else ne.error("Please fill all required fields")},children:[(0,Dt.jsxs)("div",{className:"grid grid-cols-1 gap-6 md:grid-cols-2",children:[(0,Dt.jsxs)("div",{children:[(0,Dt.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Name ",(0,Dt.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,Dt.jsx)("input",{type:"text",name:"name",required:!0,value:l.name,onChange:u,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-blue-500 focus:border-blue-500"})]}),(0,Dt.jsxs)("div",{children:[(0,Dt.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["SKU ",(0,Dt.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,Dt.jsxs)("div",{className:"flex",children:[(0,Dt.jsx)("input",{type:"text",name:"sku",required:!0,value:l.sku,onChange:u,className:"w-full px-3 py-2 border border-gray-300 rounded-l-md focus:outline-none focus:ring-blue-500 focus:border-blue-500"}),(0,Dt.jsx)("button",{type:"button",onClick:()=>{const e=i.find((e=>e.id.toString()===l.category_id));if(!e||!l.name)return;const t=`AG-${e.name.substring(0,3).toUpperCase()}-${l.name.replace(/[^a-zA-Z0-9]/g,"").substring(0,5).toUpperCase()}-${Math.floor(1e3*Math.random()).toString().padStart(3,"0")}`;c((e=>({...e,sku:t})))},className:"bg-gray-200 px-3 py-2 rounded-r-md hover:bg-gray-300 transition-colors",children:"Generate"})]})]}),(0,Dt.jsxs)("div",{children:[(0,Dt.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Category ",(0,Dt.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,Dt.jsxs)("select",{name:"category_id",required:!0,value:l.category_id,onChange:u,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-blue-500 focus:border-blue-500",children:[(0,Dt.jsx)("option",{value:"",children:"Select Category"}),i.map((e=>(0,Dt.jsx)("option",{value:e.id,children:e.name},e.id)))]})]}),(0,Dt.jsxs)("div",{children:[(0,Dt.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Supplier ",(0,Dt.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,Dt.jsxs)("select",{name:"supplier_id",required:!0,value:l.supplier_id,onChange:u,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-blue-500 focus:border-blue-500",children:[(0,Dt.jsx)("option",{value:"",children:"Select Supplier"}),s.map((e=>(0,Dt.jsx)("option",{value:e.id,children:e.name},e.id)))]})]}),(0,Dt.jsxs)("div",{children:[(0,Dt.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Initial Stock"}),(0,Dt.jsx)("input",{type:"number",name:"current_stock",min:"0",step:"1",value:l.current_stock,onChange:u,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-blue-500 focus:border-blue-500"})]}),(0,Dt.jsxs)("div",{children:[(0,Dt.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Unit of Measure"}),(0,Dt.jsxs)("select",{name:"unit_of_measure",value:l.unit_of_measure,onChange:u,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-blue-500 focus:border-blue-500",children:[(0,Dt.jsx)("option",{value:"sheets",children:"Sheets"}),(0,Dt.jsx)("option",{value:"rolls",children:"Rolls"}),(0,Dt.jsx)("option",{value:"liters",children:"Liters"}),(0,Dt.jsx)("option",{value:"kilograms",children:"Kilograms"}),(0,Dt.jsx)("option",{value:"pieces",children:"Pieces"}),(0,Dt.jsx)("option",{value:"boxes",children:"Boxes"})]})]}),(0,Dt.jsxs)("div",{children:[(0,Dt.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Reorder Level"}),(0,Dt.jsx)("input",{type:"number",name:"reorder_level",min:"0",step:"1",value:l.reorder_level,onChange:u,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-blue-500 focus:border-blue-500"})]}),(0,Dt.jsxs)("div",{children:[(0,Dt.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Unit Price (\u20b9)"}),(0,Dt.jsx)("input",{type:"number",name:"unit_price",min:"0",step:"0.01",value:l.unit_price,onChange:u,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-blue-500 focus:border-blue-500"})]}),(0,Dt.jsxs)("div",{children:[(0,Dt.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Storage Location"}),(0,Dt.jsx)("input",{type:"text",name:"location",value:l.location,onChange:u,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-blue-500 focus:border-blue-500"})]}),(0,Dt.jsxs)("div",{className:"md:col-span-2",children:[(0,Dt.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Description"}),(0,Dt.jsx)("textarea",{name:"description",rows:3,value:l.description,onChange:u,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-blue-500 focus:border-blue-500"})]})]}),(0,Dt.jsxs)("div",{className:"mt-6 flex items-center justify-end space-x-3",children:[(0,Dt.jsx)(Tt,{to:"/materials",className:"bg-white border border-gray-300 text-gray-700 px-4 py-2 rounded-md hover:bg-gray-50 transition-colors",children:"Cancel"}),(0,Dt.jsx)("button",{type:"submit",disabled:r,className:"bg-blue-600 text-white px-4 py-2 rounded-md hover:bg-blue-700 transition-colors disabled:bg-blue-300",children:r?"Saving...":"Save Material"})]})]})})]})},nc=hi("https://qlkxukzmtkkxarcqzysn.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InFsa3h1a3ptdGtreGFyY3F6eXNuIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDEyNTkzODcsImV4cCI6MjA1NjgzNTM4N30.60ab2zNHSUkm23RR_NUo9-yDlUo3lcqOUnIF4M-0K0o"),ic=()=>(0,Dt.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"h-5 w-5",children:(0,Dt.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 4.5v15m7.5-7.5h-15"})}),oc=()=>(0,Dt.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"h-5 w-5",children:(0,Dt.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M16.862 4.487l1.687-1.688a1.875 1.875 0 112.652 2.652L10.582 16.07a4.5 4.5 0 01-1.897 1.13L6 18l.8-2.685a4.5 4.5 0 011.13-1.897l8.932-8.931zm0 0L19.5 7.125M18 14v4.75A2.25 2.25 0 0115.75 21H5.25A2.25 2.25 0 013 18.75V8.25A2.25 2.25 0 015.25 6H10"})}),sc=()=>(0,Dt.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"h-5 w-5",children:(0,Dt.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M14.74 9l-.346 9m-4.788 0L9.26 9m9.968-3.21c.342.052.682.107 1.022.166m-1.022-.165L18.16 19.673a2.25 2.25 0 01-2.244 2.077H8.084a2.25 2.25 0 01-2.244-2.077L4.772 5.79m14.456 0a48.108 48.108 0 00-3.478-.397m-12 .562c.34-.059.68-.114 1.022-.165m0 0a48.11 48.11 0 013.478-.397m7.5 0v-.916c0-1.18-.91-2.164-2.09-2.201a51.964 51.964 0 00-3.32 0c-1.18.037-2.09 1.022-2.09 2.201v.916m7.5 0a48.667 48.667 0 00-7.5 0"})}),ac=()=>{const[e,r]=(0,t.useState)([]),[n,i]=(0,t.useState)(!0),[o,s]=(0,t.useState)(""),[a,l]=(0,t.useState)("all");(0,t.useEffect)((()=>{(async()=>{try{console.log("\ud83d\udcca Fetching equipment from Supabase...");const{data:e,error:t}=await nc.from("equipment").select("*");if(t)throw t;console.log(`\u2705 Fetched ${e.length} equipment from Supabase`),r(e)}catch(e){console.error("\u274c Error fetching equipment:",e)}finally{i(!1)}})()}),[]);const c=e.filter((e=>{const t=e.name.toLowerCase().includes(o.toLowerCase())||e.model.toLowerCase().includes(o.toLowerCase())||e.serial_number.toLowerCase().includes(o.toLowerCase());return"all"===a?t:"operational"===a?t&&"operational"===e.status:"maintenance"===a?t&&"maintenance"===e.status:"non-operational"===a?t&&"non-operational"===e.status:t})),u=e=>{switch(e){case"operational":return"bg-green-100 text-green-800";case"maintenance":return"bg-yellow-100 text-yellow-800";case"non-operational":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}};return(0,Dt.jsxs)("div",{className:"p-6",children:[(0,Dt.jsxs)("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center mb-6",children:[(0,Dt.jsx)("h1",{className:"text-2xl font-bold",children:"Equipment Management"}),(0,Dt.jsxs)(Tt,{to:"/equipment/add",className:"mt-3 sm:mt-0 flex items-center bg-blue-600 text-white px-4 py-2 rounded-md hover:bg-blue-700 transition-colors",children:[(0,Dt.jsx)(ic,{}),(0,Dt.jsx)("span",{className:"ml-2",children:"Add Equipment"})]})]}),(0,Dt.jsxs)("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:[(0,Dt.jsxs)("div",{className:"p-4 border-b flex flex-col md:flex-row justify-between items-start md:items-center space-y-4 md:space-y-0",children:[(0,Dt.jsxs)("div",{className:"relative w-full md:w-64",children:[(0,Dt.jsx)("input",{type:"text",placeholder:"Search equipment...",className:"pl-10 pr-4 py-2 border rounded-md w-full focus:outline-none focus:ring-2 focus:ring-blue-500",value:o,onChange:e=>s(e.target.value)}),(0,Dt.jsx)("div",{className:"absolute left-3 top-2.5 text-gray-400",children:(0,Dt.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,Dt.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})})]}),(0,Dt.jsxs)("div",{className:"flex space-x-2",children:[(0,Dt.jsx)("button",{className:"px-3 py-1.5 rounded-md "+("all"===a?"bg-blue-600 text-white":"bg-gray-100 text-gray-800"),onClick:()=>l("all"),children:"All"}),(0,Dt.jsx)("button",{className:"px-3 py-1.5 rounded-md "+("operational"===a?"bg-blue-600 text-white":"bg-gray-100 text-gray-800"),onClick:()=>l("operational"),children:"Operational"}),(0,Dt.jsx)("button",{className:"px-3 py-1.5 rounded-md "+("maintenance"===a?"bg-blue-600 text-white":"bg-gray-100 text-gray-800"),onClick:()=>l("maintenance"),children:"Maintenance"}),(0,Dt.jsx)("button",{className:"px-3 py-1.5 rounded-md "+("non-operational"===a?"bg-blue-600 text-white":"bg-gray-100 text-gray-800"),onClick:()=>l("non-operational"),children:"Non-operational"})]})]}),n?(0,Dt.jsx)("div",{className:"p-8 flex justify-center",children:(0,Dt.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-700"})}):(0,Dt.jsx)(Dt.Fragment,{children:0===c.length?(0,Dt.jsx)("div",{className:"p-8 text-center text-gray-500",children:"No equipment found matching your search criteria."}):(0,Dt.jsx)("div",{className:"overflow-x-auto",children:(0,Dt.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,Dt.jsx)("thead",{className:"bg-gray-50",children:(0,Dt.jsxs)("tr",{children:[(0,Dt.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Name/Model"}),(0,Dt.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Serial Number"}),(0,Dt.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),(0,Dt.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Last Maintenance"}),(0,Dt.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Next Maintenance"}),(0,Dt.jsx)("th",{className:"px-6 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),(0,Dt.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:c.map((t=>(0,Dt.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,Dt.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap",children:[(0,Dt.jsx)(Tt,{to:`/equipment/${t.id}`,className:"text-blue-600 hover:text-blue-800 font-medium",children:t.name}),(0,Dt.jsx)("p",{className:"text-xs text-gray-500",children:t.model})]}),(0,Dt.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-gray-700",children:t.serial_number}),(0,Dt.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,Dt.jsx)("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${u(t.status)}`,children:t.status.charAt(0).toUpperCase()+t.status.slice(1)})}),(0,Dt.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-gray-700",children:new Date(t.last_maintenance_date).toLocaleDateString()}),(0,Dt.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-gray-700",children:t.next_maintenance_date?new Date(t.next_maintenance_date).toLocaleDateString():"Not scheduled"}),(0,Dt.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-center",children:(0,Dt.jsxs)("div",{className:"flex justify-center space-x-3",children:[(0,Dt.jsx)(Tt,{to:`/equipment/${t.id}/edit`,className:"text-indigo-600 hover:text-indigo-900",children:(0,Dt.jsx)(oc,{})}),(0,Dt.jsx)("button",{onClick:()=>(async t=>{if(window.confirm("Are you sure you want to delete this equipment?"))try{r(e.filter((e=>e.id!==t))),ne.success("Equipment deleted successfully")}catch(n){console.error("Error deleting equipment:",n),ne.error("Failed to delete equipment")}})(t.id),className:"text-red-600 hover:text-red-900",children:(0,Dt.jsx)(sc,{})})]})})]},t.id)))})]})})})]})]})},lc=hi("https://qlkxukzmtkkxarcqzysn.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InFsa3h1a3ptdGtreGFyY3F6eXNuIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDEyNTkzODcsImV4cCI6MjA1NjgzNTM4N30.60ab2zNHSUkm23RR_NUo9-yDlUo3lcqOUnIF4M-0K0o"),cc=()=>{const e=Je(),[r,n]=(0,t.useState)(!1),[i,o]=(0,t.useState)({name:"",model:"",serial_number:"",status:"Operational",last_maintenance_date:"",next_maintenance_date:"",notes:""}),s=e=>{const{name:t,value:r}=e.target;o((e=>({...e,[t]:r})))};return(0,Dt.jsxs)("div",{className:"p-6 max-w-4xl mx-auto",children:[(0,Dt.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,Dt.jsx)("h1",{className:"text-2xl font-bold",children:"Add New Equipment"}),(0,Dt.jsx)("button",{onClick:()=>e("/equipment"),className:"px-4 py-2 text-sm text-gray-600 bg-gray-100 rounded-md hover:bg-gray-200",children:"Cancel"})]}),(0,Dt.jsxs)("form",{onSubmit:async t=>{if(t.preventDefault(),i.name&&i.model&&i.serial_number){n(!0);try{const{data:t,error:r}=await lc.from("equipment").insert([{name:i.name,model:i.model,serial_number:i.serial_number,status:i.status,last_maintenance_date:i.last_maintenance_date,next_maintenance_date:i.next_maintenance_date,notes:i.notes}]).select();if(r)return console.error("Error creating equipment:",r),void ne.error("Failed to create equipment");ne.success("Equipment created successfully!"),e("/equipment")}catch(r){console.error("Error:",r),ne.error("Something went wrong")}finally{n(!1)}}else ne.error("Please fill all required fields")},className:"bg-white rounded-lg shadow-md p-6",children:[(0,Dt.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,Dt.jsxs)("div",{children:[(0,Dt.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Equipment Name ",(0,Dt.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,Dt.jsx)("input",{type:"text",name:"name",value:i.name,onChange:s,className:"w-full p-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0})]}),(0,Dt.jsxs)("div",{children:[(0,Dt.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Model ",(0,Dt.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,Dt.jsx)("input",{type:"text",name:"model",value:i.model,onChange:s,className:"w-full p-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0})]}),(0,Dt.jsxs)("div",{children:[(0,Dt.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Serial Number ",(0,Dt.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,Dt.jsx)("input",{type:"text",name:"serial_number",value:i.serial_number,onChange:s,className:"w-full p-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0})]}),(0,Dt.jsxs)("div",{children:[(0,Dt.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Status ",(0,Dt.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,Dt.jsxs)("select",{name:"status",value:i.status,onChange:s,className:"w-full p-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[(0,Dt.jsx)("option",{value:"Operational",children:"Operational"}),(0,Dt.jsx)("option",{value:"Maintenance",children:"Under Maintenance"}),(0,Dt.jsx)("option",{value:"Broken",children:"Broken"}),(0,Dt.jsx)("option",{value:"Retired",children:"Retired"})]})]}),(0,Dt.jsxs)("div",{children:[(0,Dt.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Last Maintenance Date"}),(0,Dt.jsx)("input",{type:"date",name:"last_maintenance_date",value:i.last_maintenance_date,onChange:s,className:"w-full p-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),(0,Dt.jsxs)("div",{children:[(0,Dt.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Next Maintenance Date"}),(0,Dt.jsx)("input",{type:"date",name:"next_maintenance_date",value:i.next_maintenance_date,onChange:s,className:"w-full p-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),(0,Dt.jsxs)("div",{className:"md:col-span-2",children:[(0,Dt.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Notes"}),(0,Dt.jsx)("textarea",{name:"notes",value:i.notes,onChange:s,rows:4,className:"w-full p-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]})]}),(0,Dt.jsx)("div",{className:"mt-6 flex justify-end",children:(0,Dt.jsx)("button",{type:"submit",disabled:r,className:"px-6 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed",children:r?"Creating...":"Create Equipment"})})]})]})},uc=hi("https://qlkxukzmtkkxarcqzysn.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InFsa3h1a3ptdGtreGFyY3F6eXNuIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDEyNTkzODcsImV4cCI6MjA1NjgzNTM4N30.60ab2zNHSUkm23RR_NUo9-yDlUo3lcqOUnIF4M-0K0o"),dc=()=>(0,Dt.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"h-5 w-5",children:(0,Dt.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 4.5v15m7.5-7.5h-15"})}),hc=()=>(0,Dt.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"h-5 w-5",children:[(0,Dt.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.036 12.322a1.012 1.012 0 010-.639C3.423 7.51 7.36 4.5 12 4.5c4.638 0 8.573 3.007 9.963 7.178.07.207.07.431 0 .639C20.577 16.49 16.64 19.5 12 19.5c-4.638 0-8.573-3.007-9.963-7.178z"}),(0,Dt.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"})]}),fc=()=>(0,Dt.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"h-5 w-5",children:(0,Dt.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M14.74 9l-.346 9m-4.788 0L9.26 9m9.968-3.21c.342.052.682.107 1.022.166m-1.022-.165L18.16 19.673a2.25 2.25 0 01-2.244 2.077H8.084a2.25 2.25 0 01-2.244-2.077L4.772 5.79m14.456 0a48.108 48.108 0 00-3.478-.397m-12 .562c.34-.059.68-.114 1.022-.165m0 0a48.11 48.11 0 013.478-.397m7.5 0v-.916c0-1.18-.91-2.164-2.09-2.201a51.964 51.964 0 00-3.32 0c-1.18.037-2.09 1.022-2.09 2.201v.916m7.5 0a48.667 48.667 0 00-7.5 0"})}),pc=()=>{const[e,r]=(0,t.useState)([]),[n,i]=(0,t.useState)(!0),[o,s]=(0,t.useState)(""),[a,l]=(0,t.useState)("all");(0,t.useEffect)((()=>{(async()=>{try{i(!0),console.log("\ud83d\udcca Fetching orders from Supabase...");const{data:e,error:t}=await uc.from("orders").select("*").order("order_date",{ascending:!1});if(t)throw t;console.log(`\u2705 Fetched ${(null===e||void 0===e?void 0:e.length)||0} orders from Supabase`),r(e||[])}catch(e){console.error("\u274c Error fetching orders:",e),ne.error("Failed to load orders"),r([{id:1,customer_name:"Acme Corp",order_date:"2023-05-10",required_date:"2023-05-17",status:"pending",total_amount:1250},{id:2,customer_name:"TechStart Inc",order_date:"2023-05-08",required_date:"2023-05-15",status:"in-progress",total_amount:850},{id:3,customer_name:"Global Media",order_date:"2023-05-05",required_date:"2023-05-12",status:"completed",total_amount:1600}])}finally{i(!1)}})()}),[]);const c=e.filter((e=>{const t=e.customer_name.toLowerCase().includes(o.toLowerCase())||e.id.toString().includes(o);return"all"===a?t:"pending"===a?t&&"pending"===e.status:"in-progress"===a?t&&"in-progress"===e.status:"completed"===a?t&&"completed"===e.status:"cancelled"===a?t&&"cancelled"===e.status:t})),u=e=>{switch(e){case"completed":return"bg-green-100 text-green-800";case"in-progress":return"bg-blue-100 text-blue-800";case"pending":return"bg-yellow-100 text-yellow-800";case"cancelled":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}};return(0,Dt.jsxs)("div",{className:"p-6",children:[(0,Dt.jsxs)("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center mb-6",children:[(0,Dt.jsx)("h1",{className:"text-2xl font-bold",children:"Orders"}),(0,Dt.jsxs)(Tt,{to:"/orders/add",className:"mt-3 sm:mt-0 flex items-center bg-blue-600 text-white px-4 py-2 rounded-md hover:bg-blue-700 transition-colors",children:[(0,Dt.jsx)(dc,{}),(0,Dt.jsx)("span",{className:"ml-2",children:"New Order"})]})]}),(0,Dt.jsxs)("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:[(0,Dt.jsxs)("div",{className:"p-4 border-b flex flex-col md:flex-row justify-between items-start md:items-center space-y-4 md:space-y-0",children:[(0,Dt.jsxs)("div",{className:"relative w-full md:w-64",children:[(0,Dt.jsx)("input",{type:"text",placeholder:"Search orders...",className:"pl-10 pr-4 py-2 border rounded-md w-full focus:outline-none focus:ring-2 focus:ring-blue-500",value:o,onChange:e=>s(e.target.value)}),(0,Dt.jsx)("div",{className:"absolute left-3 top-2.5 text-gray-400",children:(0,Dt.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,Dt.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})})]}),(0,Dt.jsxs)("div",{className:"flex flex-wrap gap-2",children:[(0,Dt.jsx)("button",{className:"px-3 py-1.5 rounded-md "+("all"===a?"bg-blue-600 text-white":"bg-gray-100 text-gray-800"),onClick:()=>l("all"),children:"All"}),(0,Dt.jsx)("button",{className:"px-3 py-1.5 rounded-md "+("pending"===a?"bg-blue-600 text-white":"bg-gray-100 text-gray-800"),onClick:()=>l("pending"),children:"Pending"}),(0,Dt.jsx)("button",{className:"px-3 py-1.5 rounded-md "+("in-progress"===a?"bg-blue-600 text-white":"bg-gray-100 text-gray-800"),onClick:()=>l("in-progress"),children:"In Progress"}),(0,Dt.jsx)("button",{className:"px-3 py-1.5 rounded-md "+("completed"===a?"bg-blue-600 text-white":"bg-gray-100 text-gray-800"),onClick:()=>l("completed"),children:"Completed"}),(0,Dt.jsx)("button",{className:"px-3 py-1.5 rounded-md "+("cancelled"===a?"bg-blue-600 text-white":"bg-gray-100 text-gray-800"),onClick:()=>l("cancelled"),children:"Cancelled"})]})]}),n?(0,Dt.jsx)("div",{className:"p-8 flex justify-center",children:(0,Dt.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-700"})}):(0,Dt.jsx)(Dt.Fragment,{children:0===c.length?(0,Dt.jsx)("div",{className:"p-8 text-center text-gray-500",children:"No orders found matching your search criteria."}):(0,Dt.jsx)("div",{className:"overflow-x-auto",children:(0,Dt.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,Dt.jsx)("thead",{className:"bg-gray-50",children:(0,Dt.jsxs)("tr",{children:[(0,Dt.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Order #"}),(0,Dt.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Customer"}),(0,Dt.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Order Date"}),(0,Dt.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Required Date"}),(0,Dt.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),(0,Dt.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Total"}),(0,Dt.jsx)("th",{className:"px-6 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),(0,Dt.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:c.map((t=>(0,Dt.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,Dt.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,Dt.jsxs)(Tt,{to:`/orders/${t.id}`,className:"text-blue-600 hover:text-blue-800 font-medium",children:["#",t.id]})}),(0,Dt.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-gray-700",children:t.customer_name}),(0,Dt.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-gray-700",children:ji(t.order_date)}),(0,Dt.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-gray-700",children:ji(t.required_date)}),(0,Dt.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,Dt.jsx)("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${u(t.status)}`,children:t.status.charAt(0).toUpperCase()+t.status.slice(1).replace("-"," ")})}),(0,Dt.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-gray-700",children:Mi(t.total_amount)}),(0,Dt.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-center",children:(0,Dt.jsxs)("div",{className:"flex justify-center space-x-3",children:[(0,Dt.jsx)(Tt,{to:`/orders/${t.id}`,className:"text-indigo-600 hover:text-indigo-900",children:(0,Dt.jsx)(hc,{})}),(0,Dt.jsx)("button",{onClick:()=>(async t=>{if(window.confirm("Are you sure you want to delete this order?"))try{console.log(`\ud83d\uddd1\ufe0f Deleting order with ID: ${t}`);const{error:n}=await uc.from("orders").delete().eq("id",t);if(n)throw n;r(e.filter((e=>e.id!==t))),ne.success("Order deleted successfully")}catch(n){console.error("\u274c Error deleting order:",n),ne.error("Failed to delete order")}})(t.id),className:"text-red-600 hover:text-red-900",children:(0,Dt.jsx)(fc,{})})]})})]},t.id)))})]})})})]})]})},mc=()=>(0,Dt.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"h-5 w-5",children:(0,Dt.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M10.5 19.5L3 12m0 0l7.5-7.5M3 12h18"})}),gc=()=>{const e=Je(),[r,n]=(0,t.useState)([]),[i,o]=(0,t.useState)([]),[s,a]=(0,t.useState)(!1),[l,c]=(0,t.useState)(""),[u,d]=(0,t.useState)(""),[h,f]=(0,t.useState)(""),[p,m]=(0,t.useState)(""),[g,y]=(0,t.useState)(""),[w,b]=(0,t.useState)([{material_id:0,quantity:1,unit_price:0}]);(0,t.useEffect)((()=>{(async()=>{try{a(!0),n([{id:1,name:"ABC Corp"},{id:2,name:"XYZ Publishing"},{id:3,name:"Local Magazine"},{id:4,name:"City Newspaper"},{id:5,name:"Business Cards Inc"}]),o([{id:1,name:"Matte Paper A4",current_stock:500,unit_of_measure:"sheets",unit_price:.05},{id:2,name:"Glossy Paper A3",current_stock:250,unit_of_measure:"sheets",unit_price:.12},{id:3,name:"Black Ink",current_stock:20,unit_of_measure:"liters",unit_price:25},{id:4,name:"Cyan Ink",current_stock:15,unit_of_measure:"liters",unit_price:30},{id:5,name:"Magenta Ink",current_stock:18,unit_of_measure:"liters",unit_price:30},{id:6,name:"Yellow Ink",current_stock:22,unit_of_measure:"liters",unit_price:28},{id:7,name:"Binding Wire",current_stock:30,unit_of_measure:"rolls",unit_price:15},{id:8,name:"Offset Plates",current_stock:40,unit_of_measure:"pieces",unit_price:8}])}catch(e){console.error("Error fetching data:",e),ne.error("Failed to load data")}finally{a(!1)}})()}),[]);const v=(e,t,r)=>{const n=[...w];if("material_id"===t){const t=i.find((e=>e.id===parseInt(r)));t&&(n[e].material_id=t.id,n[e].unit_price=t.unit_price)}else n[e][t]=r;b(n)};return(0,Dt.jsx)("div",{className:"container mx-auto p-4",children:(0,Dt.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[(0,Dt.jsxs)("div",{className:"flex items-center mb-6",children:[(0,Dt.jsx)("button",{onClick:()=>e("/orders"),className:"mr-4 text-gray-500 hover:text-gray-700",children:(0,Dt.jsx)(mc,{})}),(0,Dt.jsx)("h1",{className:"text-2xl font-semibold",children:"New Order"})]}),(0,Dt.jsxs)("form",{onSubmit:async t=>{if(t.preventDefault(),l)if(p)if(w.some((e=>0===e.material_id)))ne.error("Please select materials for all items");else try{a(!0),await new Promise((e=>setTimeout(e,1e3))),ne.success("Order created successfully"),e("/orders")}catch(r){console.error("Error creating order:",r),ne.error("Failed to create order")}finally{a(!1)}else ne.error("Please select required date");else ne.error("Please enter customer name")},children:[(0,Dt.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-6",children:[(0,Dt.jsxs)("div",{children:[(0,Dt.jsx)("h2",{className:"text-lg font-semibold mb-4",children:"Customer Information"}),(0,Dt.jsxs)("div",{className:"space-y-4",children:[(0,Dt.jsxs)("div",{children:[(0,Dt.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Customer Name *"}),(0,Dt.jsx)("input",{type:"text",value:l,onChange:e=>c(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500",required:!0})]}),(0,Dt.jsxs)("div",{children:[(0,Dt.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Contact Person"}),(0,Dt.jsx)("input",{type:"text",value:u,onChange:e=>d(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500"})]}),(0,Dt.jsxs)("div",{children:[(0,Dt.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Email"}),(0,Dt.jsx)("input",{type:"email",value:h,onChange:e=>f(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500"})]})]})]}),(0,Dt.jsxs)("div",{children:[(0,Dt.jsx)("h2",{className:"text-lg font-semibold mb-4",children:"Order Details"}),(0,Dt.jsxs)("div",{className:"space-y-4",children:[(0,Dt.jsxs)("div",{children:[(0,Dt.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Required Date *"}),(0,Dt.jsx)("input",{type:"date",value:p,onChange:e=>m(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500",required:!0})]}),(0,Dt.jsxs)("div",{children:[(0,Dt.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Notes"}),(0,Dt.jsx)("textarea",{value:g,onChange:e=>y(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500",rows:3})]})]})]})]}),(0,Dt.jsx)("h2",{className:"text-lg font-semibold mb-4",children:"Order Items"}),(0,Dt.jsx)("div",{className:"overflow-x-auto mb-6",children:(0,Dt.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,Dt.jsx)("thead",{className:"bg-gray-50",children:(0,Dt.jsxs)("tr",{children:[(0,Dt.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Material"}),(0,Dt.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Quantity"}),(0,Dt.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Unit Price"}),(0,Dt.jsx)("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Total"}),(0,Dt.jsx)("th",{className:"px-4 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),(0,Dt.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:w.map(((e,t)=>(0,Dt.jsxs)("tr",{children:[(0,Dt.jsx)("td",{className:"px-4 py-3 whitespace-nowrap",children:(0,Dt.jsxs)("select",{value:e.material_id||"",onChange:e=>v(t,"material_id",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500",required:!0,children:[(0,Dt.jsx)("option",{value:"",children:"Select a material"}),i.map((e=>(0,Dt.jsxs)("option",{value:e.id,children:[e.name," (",e.current_stock," ",e.unit_of_measure," available)"]},e.id)))]})}),(0,Dt.jsx)("td",{className:"px-4 py-3 whitespace-nowrap",children:(0,Dt.jsx)("input",{type:"number",min:"1",value:e.quantity,onChange:e=>v(t,"quantity",parseInt(e.target.value)||0),className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500",required:!0})}),(0,Dt.jsx)("td",{className:"px-4 py-3 whitespace-nowrap",children:Mi(e.unit_price)}),(0,Dt.jsx)("td",{className:"px-4 py-3 whitespace-nowrap",children:Mi(e.quantity*e.unit_price)}),(0,Dt.jsx)("td",{className:"px-4 py-3 whitespace-nowrap text-center",children:(0,Dt.jsx)("button",{type:"button",onClick:()=>(e=>{if(w.length>1){const t=[...w];t.splice(e,1),b(t)}})(t),className:"text-red-600 hover:text-red-900",disabled:1===w.length,children:"Remove"})})]},t)))}),(0,Dt.jsxs)("tfoot",{children:[(0,Dt.jsx)("tr",{children:(0,Dt.jsx)("td",{colSpan:5,className:"px-4 py-3",children:(0,Dt.jsx)("button",{type:"button",onClick:()=>{b([...w,{material_id:0,quantity:1,unit_price:0}])},className:"text-blue-600 hover:text-blue-900",children:"+ Add Item"})})}),(0,Dt.jsxs)("tr",{children:[(0,Dt.jsx)("td",{colSpan:3,className:"px-4 py-3 text-right font-semibold",children:"Total:"}),(0,Dt.jsx)("td",{className:"px-4 py-3 whitespace-nowrap font-semibold",children:Mi(w.reduce(((e,t)=>e+t.quantity*t.unit_price),0))}),(0,Dt.jsx)("td",{})]})]})]})}),(0,Dt.jsxs)("div",{className:"flex justify-end",children:[(0,Dt.jsx)("button",{type:"button",onClick:()=>e("/orders"),className:"mr-4 px-4 py-2 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:"Cancel"}),(0,Dt.jsx)("button",{type:"submit",className:"px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",disabled:s,children:s?"Creating...":"Create Order"})]})]})]})})},yc=()=>(0,Dt.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"h-5 w-5",children:(0,Dt.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M10.5 19.5L3 12m0 0l7.5-7.5M3 12h18"})}),wc=()=>(0,Dt.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"h-5 w-5",children:(0,Dt.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M16.862 4.487l1.687-1.688a1.875 1.875 0 112.652 2.652L10.582 16.07a4.5 4.5 0 01-1.897 1.13L6 18l.8-2.685a4.5 4.5 0 011.13-1.897l8.932-8.931zm0 0L19.5 7.125M18 14v4.75A2.25 2.25 0 0115.75 21H5.25A2.25 2.25 0 013 18.75V8.25A2.25 2.25 0 015.25 6H10"})}),bc=()=>(0,Dt.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"h-5 w-5",children:(0,Dt.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M14.74 9l-.346 9m-4.788 0L9.26 9m9.968-3.21c.342.052.682.107 1.022.166m-1.022-.165L18.16 19.673a2.25 2.25 0 01-2.244 2.077H8.084a2.25 2.25 0 01-2.244-2.077L4.772 5.79m14.456 0a48.108 48.108 0 00-3.478-.397m-12 .562c.34-.059.68-.114 1.022-.165m0 0a48.11 48.11 0 013.478-.397m7.5 0v-.916c0-1.18-.91-2.164-2.09-2.201a51.964 51.964 0 00-3.32 0c-1.18.037-2.09 1.022-2.09 2.201v.916m7.5 0a48.667 48.667 0 00-7.5 0"})}),vc=e=>{let{job:r,onClose:n,onSave:i}=e;const[o,s]=(0,t.useState)(r.status),[a,l]=(0,t.useState)(r.completion_date?new Date(r.completion_date).toISOString().split("T")[0]:null);return(0,Dt.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50",children:(0,Dt.jsxs)("div",{className:"bg-white w-full max-w-md p-6 rounded-lg shadow-lg",children:[(0,Dt.jsx)("h3",{className:"text-xl font-semibold mb-4",children:"Update Job Status"}),(0,Dt.jsxs)("div",{className:"mb-4",children:[(0,Dt.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Job Name"}),(0,Dt.jsx)("p",{className:"px-3 py-2 bg-gray-50 rounded-md",children:r.job_name})]}),(0,Dt.jsxs)("div",{className:"mb-4",children:[(0,Dt.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Status"}),(0,Dt.jsxs)("select",{value:o,onChange:e=>{const t=e.target.value;s(t),"completed"!==t||a?"completed"!==t&&l(null):l((new Date).toISOString().split("T")[0])},className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500",children:[(0,Dt.jsx)("option",{value:"pending",children:"Pending"}),(0,Dt.jsx)("option",{value:"in-progress",children:"In Progress"}),(0,Dt.jsx)("option",{value:"completed",children:"Completed"}),(0,Dt.jsx)("option",{value:"cancelled",children:"Cancelled"})]})]}),"completed"===o&&(0,Dt.jsxs)("div",{className:"mb-4",children:[(0,Dt.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Completion Date"}),(0,Dt.jsx)("input",{type:"date",value:a||"",onChange:e=>l(e.target.value||null),className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500",required:!0})]}),(0,Dt.jsxs)("div",{className:"flex justify-end space-x-2",children:[(0,Dt.jsx)("button",{onClick:n,className:"px-4 py-2 border border-gray-300 text-gray-700 rounded-md hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:"Cancel"}),(0,Dt.jsx)("button",{onClick:()=>{i(r.id,o,a)},className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:"Save Changes"})]})]})})},_c=()=>{const{id:e}=tt(),[r,n]=(0,t.useState)(null),[i,o]=(0,t.useState)(!0),s=Je(),[a,l]=(0,t.useState)(null);(0,t.useEffect)((()=>{e&&(async()=>{try{o(!0),n({id:parseInt(e||"0"),customer_name:"ABC Corporation",customer_contact:"John Smith",customer_email:"john.smith@abccorp.com",order_date:"2023-09-15",required_date:"2023-09-30",status:"in-progress",total_amount:1250,notes:"Rush order, customer needs delivery ASAP",items:[{id:1,material_name:"Matte Paper A4",quantity:500,unit_price:.05,unit_of_measure:"sheets",total_price:25},{id:2,material_name:"Black Ink",quantity:2,unit_price:25,unit_of_measure:"liters",total_price:50},{id:3,material_name:"Binding Wire",quantity:5,unit_price:15,unit_of_measure:"rolls",total_price:75}],production_jobs:[{id:1,job_name:"Print Business Cards",status:"in-progress",start_date:"2023-09-16",due_date:"2023-09-25",completion_date:null},{id:2,job_name:"Print Brochures",status:"pending",start_date:"2023-09-18",due_date:"2023-09-28",completion_date:null}]})}catch(t){console.error("Error fetching order:",t),ne.error("Failed to load order details")}finally{o(!1)}})()}),[e]);const c=e=>{switch(e){case"completed":return"bg-green-100 text-green-800";case"in-progress":return"bg-blue-100 text-blue-800";case"pending":return"bg-yellow-100 text-yellow-800";case"cancelled":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}};return i?(0,Dt.jsx)("div",{className:"p-8 flex justify-center",children:(0,Dt.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-700"})}):r?(0,Dt.jsxs)("div",{className:"p-6",children:[(0,Dt.jsxs)("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center mb-6",children:[(0,Dt.jsxs)("div",{className:"flex items-center",children:[(0,Dt.jsx)(Tt,{to:"/orders",className:"mr-4 text-gray-500 hover:text-gray-700",children:(0,Dt.jsx)(yc,{})}),(0,Dt.jsxs)("h1",{className:"text-2xl font-bold",children:["Order #",r.id]})]}),(0,Dt.jsxs)("div",{className:"mt-4 sm:mt-0 flex space-x-3",children:[(0,Dt.jsxs)(Tt,{to:`/orders/${r.id}/edit`,className:"flex items-center bg-indigo-600 text-white px-4 py-2 rounded-md hover:bg-indigo-700 transition-colors",children:[(0,Dt.jsx)(wc,{}),(0,Dt.jsx)("span",{className:"ml-2",children:"Edit Order"})]}),(0,Dt.jsxs)("button",{onClick:async()=>{if(window.confirm("Are you sure you want to delete this order?"))try{ne.success("Order deleted successfully"),s("/orders")}catch(e){console.error("Error deleting order:",e),ne.error("Failed to delete order")}},className:"flex items-center bg-red-600 text-white px-4 py-2 rounded-md hover:bg-red-700 transition-colors",children:[(0,Dt.jsx)(bc,{}),(0,Dt.jsx)("span",{className:"ml-2",children:"Delete"})]})]})]}),(0,Dt.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[(0,Dt.jsxs)("div",{className:"bg-white rounded-lg shadow p-6 lg:col-span-2",children:[(0,Dt.jsx)("h2",{className:"text-lg font-semibold mb-4",children:"Order Information"}),(0,Dt.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-6",children:[(0,Dt.jsxs)("div",{children:[(0,Dt.jsx)("p",{className:"text-sm text-gray-500",children:"Customer"}),(0,Dt.jsx)("p",{className:"font-medium",children:r.customer_name})]}),(0,Dt.jsxs)("div",{children:[(0,Dt.jsx)("p",{className:"text-sm text-gray-500",children:"Contact Person"}),(0,Dt.jsx)("p",{className:"font-medium",children:r.customer_contact})]}),(0,Dt.jsxs)("div",{children:[(0,Dt.jsx)("p",{className:"text-sm text-gray-500",children:"Email"}),(0,Dt.jsx)("p",{className:"font-medium",children:r.customer_email})]}),(0,Dt.jsxs)("div",{children:[(0,Dt.jsx)("p",{className:"text-sm text-gray-500",children:"Status"}),(0,Dt.jsx)("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${c(r.status)}`,children:r.status.charAt(0).toUpperCase()+r.status.slice(1).replace("-"," ")})]}),(0,Dt.jsxs)("div",{children:[(0,Dt.jsx)("p",{className:"text-sm text-gray-500",children:"Order Date"}),(0,Dt.jsx)("p",{className:"font-medium",children:new Date(r.order_date).toLocaleDateString()})]}),(0,Dt.jsxs)("div",{children:[(0,Dt.jsx)("p",{className:"text-sm text-gray-500",children:"Required Date"}),(0,Dt.jsx)("p",{className:"font-medium",children:new Date(r.required_date).toLocaleDateString()})]})]}),r.notes&&(0,Dt.jsxs)("div",{className:"mb-6",children:[(0,Dt.jsx)("p",{className:"text-sm text-gray-500 mb-1",children:"Notes"}),(0,Dt.jsx)("p",{className:"p-3 bg-gray-50 rounded",children:r.notes})]}),(0,Dt.jsx)("h3",{className:"text-md font-semibold mb-3",children:"Order Items"}),(0,Dt.jsx)("div",{className:"overflow-x-auto",children:(0,Dt.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,Dt.jsx)("thead",{className:"bg-gray-50",children:(0,Dt.jsxs)("tr",{children:[(0,Dt.jsx)("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Item"}),(0,Dt.jsx)("th",{className:"px-4 py-2 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Quantity"}),(0,Dt.jsx)("th",{className:"px-4 py-2 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Unit Price"}),(0,Dt.jsx)("th",{className:"px-4 py-2 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Total"})]})}),(0,Dt.jsxs)("tbody",{className:"bg-white divide-y divide-gray-200",children:[r.items.map((e=>(0,Dt.jsxs)("tr",{children:[(0,Dt.jsx)("td",{className:"px-4 py-3 whitespace-nowrap text-sm font-medium text-gray-900",children:e.material_name}),(0,Dt.jsxs)("td",{className:"px-4 py-3 whitespace-nowrap text-sm text-gray-700 text-right",children:[e.quantity," ",e.unit_of_measure]}),(0,Dt.jsx)("td",{className:"px-4 py-3 whitespace-nowrap text-sm text-gray-700 text-right",children:Mi(e.unit_price)}),(0,Dt.jsx)("td",{className:"px-4 py-3 whitespace-nowrap text-sm text-gray-700 text-right",children:Mi(e.total_price)})]},e.id))),(0,Dt.jsxs)("tr",{className:"bg-gray-50",children:[(0,Dt.jsx)("td",{colSpan:4,className:"px-4 py-3 whitespace-nowrap text-sm font-semibold text-gray-900 text-right",children:"Total:"}),(0,Dt.jsx)("td",{className:"px-4 py-3 whitespace-nowrap text-sm font-bold text-gray-900 text-right",children:Mi(r.total_amount)})]})]})]})})]}),(0,Dt.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[(0,Dt.jsx)("h2",{className:"text-lg font-semibold mb-4",children:"Production Jobs"}),0===r.production_jobs.length?(0,Dt.jsx)("p",{className:"text-gray-500",children:"No production jobs for this order."}):(0,Dt.jsx)("div",{className:"space-y-4",children:r.production_jobs.map((e=>(0,Dt.jsxs)("div",{className:"bg-white rounded-lg shadow-sm p-4 mb-3 border border-gray-200",children:[(0,Dt.jsxs)("div",{className:"flex justify-between items-center mb-3",children:[(0,Dt.jsx)("h4",{className:"text-lg font-semibold",children:e.job_name}),(0,Dt.jsx)("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${c(e.status)}`,children:e.status.charAt(0).toUpperCase()+e.status.slice(1)})]}),(0,Dt.jsxs)("div",{className:"text-sm",children:[(0,Dt.jsxs)("p",{className:"flex justify-between my-1",children:[(0,Dt.jsx)("span",{className:"text-gray-500",children:"Start Date:"}),(0,Dt.jsx)("span",{children:ji(e.start_date)})]}),(0,Dt.jsxs)("p",{className:"flex justify-between my-1",children:[(0,Dt.jsx)("span",{className:"text-gray-500",children:"Due Date:"}),(0,Dt.jsx)("span",{children:ji(e.due_date)})]}),e.completion_date&&(0,Dt.jsxs)("p",{className:"flex justify-between my-1",children:[(0,Dt.jsx)("span",{className:"text-gray-500",children:"Completed:"}),(0,Dt.jsx)("span",{children:ji(e.completion_date)})]})]}),(0,Dt.jsx)("div",{className:"mt-4 flex justify-end",children:(0,Dt.jsx)("button",{onClick:()=>l(e),className:"text-blue-600 hover:text-blue-800 text-sm font-medium",children:"Update Status"})})]},e.id)))}),(0,Dt.jsx)("div",{className:"mt-4",children:(0,Dt.jsx)(Tt,{to:`/jobs/add?orderId=${r.id}`,className:"w-full flex justify-center items-center bg-blue-600 text-white px-4 py-2 rounded-md hover:bg-blue-700 transition-colors",children:"Add Production Job"})})]})]}),a&&(0,Dt.jsx)(vc,{job:a,onClose:()=>l(null),onSave:(t,i,o)=>{if(!r)return;const s=r.production_jobs.map((e=>e.id===t?{...e,status:i,completion_date:o}:e));n({...r,production_jobs:s});const a=localStorage.getItem("orders");if(a){const t=JSON.parse(a).map((t=>t.id.toString()===e?{...t,production_jobs:s}:t));localStorage.setItem("orders",JSON.stringify(t))}l(null),ne.success("Job status updated successfully")}})]}):(0,Dt.jsx)("div",{className:"p-8 text-center text-gray-500",children:"Order not found."})},xc=e=>(0,Dt.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:e.className||"h-8 w-8",children:(0,Dt.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19.5 14.25v-2.625a3.375 3.375 0 00-3.375-3.375h-1.5A1.125 1.125 0 0113.5 7.125v-1.5a3.375 3.375 0 00-3.375-3.375H8.25m0 12.75h7.5m-7.5 3H12M10.5 2.25H5.625c-.621 0-1.125.504-1.125 1.125v17.25c0 .621.504 1.125 1.125 1.125h12.75c.621 0 1.125-.504 1.125-1.125V11.25a9 9 0 00-9-9z"})}),Ec=e=>(0,Dt.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:e.className||"h-5 w-5",children:(0,Dt.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 16.5v2.25A2.25 2.25 0 005.25 21h13.5A2.25 2.25 0 0021 18.75V16.5M16.5 12L12 16.5m0 0L7.5 12m4.5 4.5V3"})}),Cc=()=>{const[e,r]=(0,t.useState)(null),[n,i]=(0,t.useState)(""),[o,s]=(0,t.useState)(""),[a,l]=(0,t.useState)(!1),[c,u]=(0,t.useState)(null);(0,t.useEffect)((()=>{const e=new Date,t=new Date(e.getFullYear(),e.getMonth(),1),r=new Date(e.getFullYear(),e.getMonth()+1,0);i(t.toISOString().split("T")[0]),s(r.toISOString().split("T")[0])}),[]);const d=[{id:"inventory",name:"Inventory Status Report",description:"Current stock levels, low stock alerts, and inventory valuation",icon:(0,Dt.jsx)(xc,{className:"h-8 w-8 text-blue-500"})},{id:"material-usage",name:"Material Usage Report",description:"Track consumption of materials over time",icon:(0,Dt.jsx)(xc,{className:"h-8 w-8 text-green-500"})},{id:"orders",name:"Orders Summary",description:"Orders placed, fulfilled, and revenue for the period",icon:(0,Dt.jsx)(xc,{className:"h-8 w-8 text-purple-500"})},{id:"equipment",name:"Equipment Maintenance",description:"Upcoming and completed maintenance schedules",icon:(0,Dt.jsx)(xc,{className:"h-8 w-8 text-red-500"})}];return(0,Dt.jsxs)("div",{className:"p-6",children:[(0,Dt.jsx)("h1",{className:"text-2xl font-bold mb-6",children:"Reports"}),(0,Dt.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-6",children:[(0,Dt.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[(0,Dt.jsx)("h2",{className:"text-lg font-semibold mb-4",children:"Generate Report"}),(0,Dt.jsxs)("div",{className:"mb-4",children:[(0,Dt.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Report Type"}),(0,Dt.jsx)("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3",children:d.map((t=>(0,Dt.jsx)("div",{className:"border rounded-lg p-3 cursor-pointer transition-colors "+(e===t.id?"border-blue-500 bg-blue-50":"border-gray-200 hover:border-blue-300"),onClick:()=>r(t.id),children:(0,Dt.jsxs)("div",{className:"flex items-start",children:[(0,Dt.jsx)("div",{className:"flex-shrink-0",children:t.icon}),(0,Dt.jsxs)("div",{className:"ml-3",children:[(0,Dt.jsx)("h3",{className:"text-sm font-medium",children:t.name}),(0,Dt.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:t.description})]})]})},t.id)))})]}),(0,Dt.jsxs)("div",{className:"mb-4",children:[(0,Dt.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Date Range"}),(0,Dt.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3",children:[(0,Dt.jsxs)("div",{children:[(0,Dt.jsx)("label",{className:"block text-xs text-gray-500 mb-1",children:"Start Date"}),(0,Dt.jsx)("input",{type:"date",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-blue-500 focus:border-blue-500",value:n,onChange:e=>i(e.target.value)})]}),(0,Dt.jsxs)("div",{children:[(0,Dt.jsx)("label",{className:"block text-xs text-gray-500 mb-1",children:"End Date"}),(0,Dt.jsx)("input",{type:"date",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-blue-500 focus:border-blue-500",value:o,onChange:e=>s(e.target.value)})]})]})]}),(0,Dt.jsx)("button",{onClick:async()=>{if(e)if(n&&o){l(!0);try{await new Promise((e=>setTimeout(e,1e3)));let t={reportName:"",generatedOn:(new Date).toISOString(),dateRange:{start:n,end:o}};switch(e){case"inventory":t={...t,reportName:"Inventory Status Report",materials:[{id:1,name:"Matte Paper A4",current_stock:2500,unit_of_measure:"sheets",reorder_level:1e3,value:125},{id:2,name:"Glossy Paper A4",current_stock:1800,unit_of_measure:"sheets",reorder_level:1e3,value:108},{id:3,name:"Black Ink",current_stock:15,unit_of_measure:"liters",reorder_level:20,value:375},{id:4,name:"Cyan Ink",current_stock:12,unit_of_measure:"liters",reorder_level:20,value:300},{id:5,name:"Magenta Ink",current_stock:10,unit_of_measure:"liters",reorder_level:20,value:250},{id:6,name:"Yellow Ink",current_stock:8,unit_of_measure:"liters",reorder_level:20,value:200},{id:7,name:"Binding Wire",current_stock:35,unit_of_measure:"rolls",reorder_level:15,value:525}],summary:{totalItems:7,totalValue:1883,lowStockItems:3}};break;case"material-usage":t={...t,reportName:"Material Usage Report",usage:[{material:"Matte Paper A4",total_used:12500,unit_of_measure:"sheets",total_cost:625},{material:"Glossy Paper A4",total_used:7500,unit_of_measure:"sheets",total_cost:450},{material:"Black Ink",total_used:25,unit_of_measure:"liters",total_cost:625},{material:"Cyan Ink",total_used:18,unit_of_measure:"liters",total_cost:450},{material:"Magenta Ink",total_used:15,unit_of_measure:"liters",total_cost:375},{material:"Yellow Ink",total_used:17,unit_of_measure:"liters",total_cost:425},{material:"Binding Wire",total_used:28,unit_of_measure:"rolls",total_cost:420}],summary:{totalCost:3370,topMaterial:"Matte Paper A4",topMaterialCost:625}};break;case"orders":t={...t,reportName:"Orders Summary",orders:{total:42,completed:32,inProgress:7,pending:2,cancelled:1},revenue:{total:28750,byStatus:{completed:23500,inProgress:4800,pending:450}},topCustomers:[{name:"ABC Corp",orders:8,value:5600},{name:"XYZ Publishing",orders:5,value:4200},{name:"Local Magazine",orders:4,value:3700}]};break;case"equipment":t={...t,reportName:"Equipment Maintenance Report",equipment:[{name:"Offset Press",model:"HP-2000",status:"operational",maintenance:{completed:[{date:"2023-08-15",type:"Regular Maintenance",cost:350},{date:"2023-06-10",type:"Part Replacement",cost:800}],upcoming:[{date:"2023-11-15",type:"Regular Maintenance",estimated_cost:350}]}},{name:"Digital Press",model:"Canon 800",status:"maintenance",maintenance:{completed:[{date:"2023-09-05",type:"Emergency Repair",cost:1200},{date:"2023-05-20",type:"Regular Maintenance",cost:400}],upcoming:[{date:"2023-10-05",type:"Part Replacement",estimated_cost:750}]}},{name:"Large Format Printer",model:"Epson P900",status:"operational",maintenance:{completed:[{date:"2023-07-22",type:"Regular Maintenance",cost:300}],upcoming:[{date:"2023-10-22",type:"Regular Maintenance",estimated_cost:300}]}}],summary:{totalEquipment:3,maintenanceCosts:3050,upcomingMaintenance:3}}}u(t),ne.success("Report generated successfully")}catch(t){console.error("Error generating report:",t),ne.error("Failed to generate report")}finally{l(!1)}}else ne.error("Please select date range");else ne.error("Please select a report type")},disabled:a||!e,className:"w-full bg-blue-600 text-white px-4 py-2 rounded-md hover:bg-blue-700 transition-colors disabled:bg-blue-300",children:a?(0,Dt.jsxs)("span",{className:"flex items-center justify-center",children:[(0,Dt.jsx)("span",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Generating..."]}):"Generate Report"})]}),(0,Dt.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[(0,Dt.jsx)("h2",{className:"text-lg font-semibold mb-4",children:"Report Preview"}),c?(0,Dt.jsxs)("div",{className:"space-y-4",children:[(0,Dt.jsxs)("div",{className:"flex justify-between items-center",children:[(0,Dt.jsx)("h3",{className:"text-md font-medium",children:c.reportName}),(0,Dt.jsxs)("button",{onClick:()=>{if(!c)return;const e=JSON.stringify(c,null,2),t="data:application/json;charset=utf-8,"+encodeURIComponent(e),r=`${c.reportName.replace(/\s+/g,"-").toLowerCase()}-${n}-to-${o}.json`,i=document.createElement("a");i.setAttribute("href",t),i.setAttribute("download",r),i.click()},className:"flex items-center text-blue-600 hover:text-blue-800",children:[(0,Dt.jsx)(Ec,{className:"h-5 w-5 mr-1"}),"Download"]})]}),(0,Dt.jsxs)("div",{className:"text-sm",children:[(0,Dt.jsxs)("p",{children:[(0,Dt.jsx)("span",{className:"font-medium",children:"Period:"})," ",new Date(c.dateRange.start).toLocaleDateString()," to"," ",new Date(c.dateRange.end).toLocaleDateString()]}),(0,Dt.jsxs)("p",{children:[(0,Dt.jsx)("span",{className:"font-medium",children:"Generated:"})," ",new Date(c.generatedOn).toLocaleString()]})]}),(0,Dt.jsxs)("div",{className:"border-t pt-3 mt-3",children:["inventory"===e&&(0,Dt.jsxs)("div",{children:[(0,Dt.jsxs)("div",{className:"grid grid-cols-2 gap-3 mb-3",children:[(0,Dt.jsxs)("div",{className:"bg-blue-50 p-3 rounded-lg",children:[(0,Dt.jsx)("p",{className:"text-xs text-gray-500",children:"Total Materials"}),(0,Dt.jsx)("p",{className:"text-lg font-medium",children:c.summary.totalItems})]}),(0,Dt.jsxs)("div",{className:"bg-blue-50 p-3 rounded-lg",children:[(0,Dt.jsx)("p",{className:"text-xs text-gray-500",children:"Total Inventory Value"}),(0,Dt.jsx)("p",{className:"text-lg font-medium",children:Mi(c.summary.totalValue)})]}),(0,Dt.jsxs)("div",{className:"bg-red-50 p-3 rounded-lg col-span-2",children:[(0,Dt.jsx)("p",{className:"text-xs text-gray-500",children:"Low Stock Items"}),(0,Dt.jsx)("p",{className:"text-lg font-medium",children:c.summary.lowStockItems})]})]}),(0,Dt.jsx)("div",{className:"max-h-48 overflow-y-auto",children:(0,Dt.jsxs)("table",{className:"min-w-full text-xs",children:[(0,Dt.jsx)("thead",{children:(0,Dt.jsxs)("tr",{className:"border-b",children:[(0,Dt.jsx)("th",{className:"text-left py-2",children:"Material"}),(0,Dt.jsx)("th",{className:"text-right py-2",children:"Stock"}),(0,Dt.jsx)("th",{className:"text-right py-2",children:"Value"})]})}),(0,Dt.jsx)("tbody",{children:c.materials.map((e=>(0,Dt.jsxs)("tr",{className:"border-b border-gray-100",children:[(0,Dt.jsx)("td",{className:"py-1.5",children:e.name}),(0,Dt.jsxs)("td",{className:"text-right py-1.5",children:[e.current_stock," ",e.unit_of_measure]}),(0,Dt.jsx)("td",{className:"text-right py-1.5",children:Mi(e.value)})]},e.id)))})]})})]}),"material-usage"===e&&(0,Dt.jsxs)("div",{children:[(0,Dt.jsxs)("div",{className:"grid grid-cols-2 gap-3 mb-3",children:[(0,Dt.jsxs)("div",{className:"bg-green-50 p-3 rounded-lg",children:[(0,Dt.jsx)("p",{className:"text-xs text-gray-500",children:"Total Usage Cost"}),(0,Dt.jsx)("p",{className:"text-lg font-medium",children:Mi(c.summary.totalCost)})]}),(0,Dt.jsxs)("div",{className:"bg-green-50 p-3 rounded-lg",children:[(0,Dt.jsx)("p",{className:"text-xs text-gray-500",children:"Top Material"}),(0,Dt.jsx)("p",{className:"text-lg font-medium",children:c.summary.topMaterial})]})]}),(0,Dt.jsx)("div",{className:"max-h-48 overflow-y-auto",children:(0,Dt.jsxs)("table",{className:"min-w-full text-xs",children:[(0,Dt.jsx)("thead",{children:(0,Dt.jsxs)("tr",{className:"border-b",children:[(0,Dt.jsx)("th",{className:"text-left py-2",children:"Material"}),(0,Dt.jsx)("th",{className:"text-right py-2",children:"Used"}),(0,Dt.jsx)("th",{className:"text-right py-2",children:"Cost"})]})}),(0,Dt.jsx)("tbody",{children:c.usage.map(((e,t)=>(0,Dt.jsxs)("tr",{className:"border-b border-gray-100",children:[(0,Dt.jsx)("td",{className:"py-1.5",children:e.material}),(0,Dt.jsxs)("td",{className:"text-right py-1.5",children:[e.total_used," ",e.unit_of_measure]}),(0,Dt.jsx)("td",{className:"text-right py-1.5",children:Mi(e.total_cost)})]},t)))})]})})]}),"orders"===e&&(0,Dt.jsxs)("div",{children:[(0,Dt.jsxs)("div",{className:"grid grid-cols-3 gap-3 mb-3",children:[(0,Dt.jsxs)("div",{className:"bg-purple-50 p-3 rounded-lg",children:[(0,Dt.jsx)("p",{className:"text-xs text-gray-500",children:"Total Orders"}),(0,Dt.jsx)("p",{className:"text-lg font-medium",children:c.orders.total})]}),(0,Dt.jsxs)("div",{className:"bg-purple-50 p-3 rounded-lg",children:[(0,Dt.jsx)("p",{className:"text-xs text-gray-500",children:"Completed"}),(0,Dt.jsx)("p",{className:"text-lg font-medium",children:c.orders.completed})]}),(0,Dt.jsxs)("div",{className:"bg-purple-50 p-3 rounded-lg",children:[(0,Dt.jsx)("p",{className:"text-xs text-gray-500",children:"Total Revenue"}),(0,Dt.jsx)("p",{className:"text-lg font-medium",children:Mi(c.revenue.total)})]})]}),(0,Dt.jsxs)("div",{className:"max-h-48 overflow-y-auto",children:[(0,Dt.jsx)("p",{className:"font-medium mb-1",children:"Top Customers"}),(0,Dt.jsxs)("table",{className:"min-w-full text-xs",children:[(0,Dt.jsx)("thead",{children:(0,Dt.jsxs)("tr",{className:"border-b",children:[(0,Dt.jsx)("th",{className:"text-left py-2",children:"Customer"}),(0,Dt.jsx)("th",{className:"text-right py-2",children:"Orders"}),(0,Dt.jsx)("th",{className:"text-right py-2",children:"Revenue"})]})}),(0,Dt.jsx)("tbody",{children:c.topCustomers.map(((e,t)=>(0,Dt.jsxs)("tr",{className:"border-b border-gray-100",children:[(0,Dt.jsx)("td",{className:"py-1.5",children:e.name}),(0,Dt.jsx)("td",{className:"text-right py-1.5",children:e.orders}),(0,Dt.jsx)("td",{className:"text-right py-1.5",children:Mi(e.value)})]},t)))})]})]})]}),"equipment"===e&&(0,Dt.jsxs)("div",{children:[(0,Dt.jsxs)("div",{className:"grid grid-cols-2 gap-3 mb-3",children:[(0,Dt.jsxs)("div",{className:"bg-red-50 p-3 rounded-lg",children:[(0,Dt.jsx)("p",{className:"text-xs text-gray-500",children:"Total Equipment"}),(0,Dt.jsx)("p",{className:"text-lg font-medium",children:c.summary.totalEquipment})]}),(0,Dt.jsxs)("div",{className:"bg-red-50 p-3 rounded-lg",children:[(0,Dt.jsx)("p",{className:"text-xs text-gray-500",children:"Maintenance Costs"}),(0,Dt.jsx)("p",{className:"text-lg font-medium",children:Mi(c.summary.maintenanceCosts)})]})]}),(0,Dt.jsxs)("div",{className:"max-h-48 overflow-y-auto",children:[(0,Dt.jsx)("p",{className:"font-medium mb-1",children:"Upcoming Maintenance"}),(0,Dt.jsxs)("table",{className:"min-w-full text-xs",children:[(0,Dt.jsx)("thead",{children:(0,Dt.jsxs)("tr",{className:"border-b",children:[(0,Dt.jsx)("th",{className:"text-left py-2",children:"Equipment"}),(0,Dt.jsx)("th",{className:"text-left py-2",children:"Type"}),(0,Dt.jsx)("th",{className:"text-right py-2",children:"Date"}),(0,Dt.jsx)("th",{className:"text-right py-2",children:"Est. Cost"})]})}),(0,Dt.jsx)("tbody",{children:c.equipment.flatMap((e=>e.maintenance.upcoming.map(((t,r)=>(0,Dt.jsxs)("tr",{className:"border-b border-gray-100",children:[(0,Dt.jsx)("td",{className:"py-1.5",children:e.name}),(0,Dt.jsx)("td",{className:"py-1.5",children:t.type}),(0,Dt.jsx)("td",{className:"text-right py-1.5",children:new Date(t.date).toLocaleDateString()}),(0,Dt.jsx)("td",{className:"text-right py-1.5",children:Mi(t.estimated_cost)})]},`${e.name}-${r}`)))))})]})]})]})]})]}):(0,Dt.jsxs)("div",{className:"flex flex-col items-center justify-center h-64 text-gray-500",children:[(0,Dt.jsx)(xc,{className:"h-16 w-16 mb-2"}),(0,Dt.jsx)("p",{children:"Select a report type and date range, then click Generate"})]})]})]})]})},Sc=()=>(0,Dt.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"h-5 w-5",children:(0,Dt.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M10.5 19.5L3 12m0 0l7.5-7.5M3 12h18"})}),Ac=()=>{const{id:e}=tt(),r=Je(),[n,i]=(0,t.useState)({name:"",description:"",sku:"",category_id:"",unit_of_measure:"",current_stock:"",reorder_level:"",unit_price:"",supplier_id:"",location:""}),[o,s]=(0,t.useState)([]),[a,l]=(0,t.useState)([]),[c,u]=(0,t.useState)(!0),[d,h]=(0,t.useState)(!1);(0,t.useEffect)((()=>{(async()=>{try{u(!0);const t=localStorage.getItem("materials");if(t){const n=JSON.parse(t).find((t=>t.id.toString()===e));if(!n)return ne.error("Material not found"),void r("/materials");i({name:n.name||"",description:n.description||"",sku:n.sku||"",category_id:n.category_id?n.category_id.toString():"",unit_of_measure:n.unit_of_measure||"",current_stock:n.current_stock?n.current_stock.toString():"0",reorder_level:n.reorder_level?n.reorder_level.toString():"0",unit_price:n.unit_price?n.unit_price.toString():"0",supplier_id:n.supplier_id?n.supplier_id.toString():"",location:n.location||""})}else{const t=localStorage.getItem("token");if(!t)return console.error("No authentication token found"),void ne.error("Authentication error. Please log in again.");const r=(await xl.get(`https://applegraphics.vercel.app/api/materials/${e}`,{headers:{Authorization:`Bearer ${t}`}})).data;i({name:r.name||"",description:r.description||"",sku:r.sku||"",category_id:r.category_id?r.category_id.toString():"",unit_of_measure:r.unit_of_measure||"",current_stock:r.current_stock?r.current_stock.toString():"0",reorder_level:r.reorder_level?r.reorder_level.toString():"0",unit_price:r.unit_price?r.unit_price.toString():"0",supplier_id:r.supplier_id?r.supplier_id.toString():"",location:r.location||""})}await Promise.all([f(),p()])}catch(t){console.error("Error fetching material:",t),ne.error("Failed to load material"),r("/materials")}finally{u(!1)}})()}),[e,r]);const f=async()=>{try{s([{id:1,name:"Paper"},{id:2,name:"Ink"},{id:3,name:"Binding"},{id:4,name:"Plates"},{id:5,name:"Miscellaneous"}])}catch(e){console.error("Error fetching categories:",e),ne.error("Failed to load categories")}},p=async()=>{try{l([{id:1,name:"PaperCo Ltd"},{id:2,name:"Ink Suppliers Inc"},{id:3,name:"Binding Solutions"},{id:4,name:"Print Equipment Ltd"},{id:5,name:"Wholesale Materials Co"}])}catch(e){console.error("Error fetching suppliers:",e),ne.error("Failed to load suppliers")}},m=e=>{const{name:t,value:r}=e.target;i((e=>({...e,[t]:r})))};return c?(0,Dt.jsx)("div",{className:"flex justify-center items-center h-64",children:(0,Dt.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-700"})}):(0,Dt.jsxs)("div",{className:"p-6",children:[(0,Dt.jsxs)("div",{className:"flex items-center mb-6",children:[(0,Dt.jsx)("button",{onClick:()=>r("/materials"),className:"mr-4 text-gray-500 hover:text-gray-700",children:(0,Dt.jsx)(Sc,{})}),(0,Dt.jsx)("h1",{className:"text-2xl font-bold",children:"Edit Material"})]}),(0,Dt.jsx)("div",{className:"bg-white rounded-lg shadow p-6",children:(0,Dt.jsxs)("form",{onSubmit:async t=>{if(t.preventDefault(),n.name&&n.sku&&n.category_id&&n.supplier_id){h(!0);try{if(!localStorage.getItem("token"))return console.error("No authentication token found"),void ne.error("Authentication error. Please log in again.");const t=localStorage.getItem("materials");if(t){const r=JSON.parse(t).map((t=>{var r,i;return t.id.toString()===e?{...t,name:n.name,description:n.description,sku:n.sku,category_id:parseInt(n.category_id),category_name:(null===(r=o.find((e=>e.id.toString()===n.category_id)))||void 0===r?void 0:r.name)||"",unit_of_measure:n.unit_of_measure,current_stock:parseFloat(n.current_stock),reorder_level:parseInt(n.reorder_level),unit_price:parseFloat(n.unit_price),supplier_id:parseInt(n.supplier_id),supplier_name:(null===(i=a.find((e=>e.id.toString()===n.supplier_id)))||void 0===i?void 0:i.name)||"",location:n.location}:t}));localStorage.setItem("materials",JSON.stringify(r))}await new Promise((e=>setTimeout(e,1e3))),ne.success("Material updated successfully"),r("/materials")}catch(i){console.error("Error updating material:",i),ne.error("Failed to update material")}finally{h(!1)}}else ne.error("Please fill all required fields")},children:[(0,Dt.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-6",children:[(0,Dt.jsxs)("div",{children:[(0,Dt.jsx)("h2",{className:"text-lg font-semibold mb-4",children:"General Information"}),(0,Dt.jsxs)("div",{className:"space-y-4",children:[(0,Dt.jsxs)("div",{children:[(0,Dt.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Name *"}),(0,Dt.jsx)("input",{type:"text",name:"name",value:n.name,onChange:m,className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500",required:!0})]}),(0,Dt.jsxs)("div",{children:[(0,Dt.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Description"}),(0,Dt.jsx)("textarea",{name:"description",value:n.description,onChange:m,className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500",rows:3})]}),(0,Dt.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[(0,Dt.jsxs)("div",{children:[(0,Dt.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"SKU *"}),(0,Dt.jsxs)("div",{className:"flex",children:[(0,Dt.jsx)("input",{type:"text",name:"sku",value:n.sku,onChange:m,className:"w-full px-3 py-2 border border-gray-300 rounded-l-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500",required:!0}),(0,Dt.jsx)("button",{type:"button",onClick:()=>{const e=o.find((e=>e.id.toString()===n.category_id));if(!e||!n.name)return;const t=`AG-${e.name.substring(0,3).toUpperCase()}-${n.name.replace(/[^a-zA-Z0-9]/g,"").substring(0,5).toUpperCase()}-${Math.floor(1e3*Math.random()).toString().padStart(3,"0")}`;i((e=>({...e,sku:t})))},className:"px-4 py-2 bg-gray-100 text-gray-700 border border-gray-300 border-l-0 rounded-r-md hover:bg-gray-200",children:"Generate"})]})]}),(0,Dt.jsxs)("div",{children:[(0,Dt.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Category *"}),(0,Dt.jsxs)("select",{name:"category_id",value:n.category_id,onChange:m,className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500",required:!0,children:[(0,Dt.jsx)("option",{value:"",children:"Select a category"}),o.map((e=>(0,Dt.jsx)("option",{value:e.id,children:e.name},e.id)))]})]})]})]})]}),(0,Dt.jsxs)("div",{children:[(0,Dt.jsx)("h2",{className:"text-lg font-semibold mb-4",children:"Inventory Details"}),(0,Dt.jsxs)("div",{className:"space-y-4",children:[(0,Dt.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[(0,Dt.jsxs)("div",{children:[(0,Dt.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Current Stock *"}),(0,Dt.jsx)("input",{type:"number",name:"current_stock",value:n.current_stock,onChange:m,min:"0",step:"0.01",className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500",required:!0})]}),(0,Dt.jsxs)("div",{children:[(0,Dt.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Unit of Measure *"}),(0,Dt.jsxs)("select",{name:"unit_of_measure",value:n.unit_of_measure,onChange:m,className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500",required:!0,children:[(0,Dt.jsx)("option",{value:"",children:"Select a unit"}),(0,Dt.jsx)("option",{value:"sheets",children:"Sheets"}),(0,Dt.jsx)("option",{value:"reams",children:"Reams"}),(0,Dt.jsx)("option",{value:"rolls",children:"Rolls"}),(0,Dt.jsx)("option",{value:"liters",children:"Liters"}),(0,Dt.jsx)("option",{value:"kg",children:"Kilograms"}),(0,Dt.jsx)("option",{value:"pieces",children:"Pieces"}),(0,Dt.jsx)("option",{value:"boxes",children:"Boxes"})]})]})]}),(0,Dt.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[(0,Dt.jsxs)("div",{children:[(0,Dt.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Reorder Level *"}),(0,Dt.jsx)("input",{type:"number",name:"reorder_level",value:n.reorder_level,onChange:m,min:"0",className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500",required:!0})]}),(0,Dt.jsxs)("div",{children:[(0,Dt.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Unit Price (\u20b9) *"}),(0,Dt.jsx)("input",{type:"number",name:"unit_price",value:n.unit_price,onChange:m,min:"0",step:"0.01",className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500",required:!0})]})]}),(0,Dt.jsxs)("div",{children:[(0,Dt.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Supplier *"}),(0,Dt.jsxs)("select",{name:"supplier_id",value:n.supplier_id,onChange:m,className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500",required:!0,children:[(0,Dt.jsx)("option",{value:"",children:"Select a supplier"}),a.map((e=>(0,Dt.jsx)("option",{value:e.id,children:e.name},e.id)))]})]}),(0,Dt.jsxs)("div",{children:[(0,Dt.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Storage Location"}),(0,Dt.jsx)("input",{type:"text",name:"location",value:n.location,onChange:m,className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500"})]})]})]})]}),(0,Dt.jsxs)("div",{className:"flex justify-end",children:[(0,Dt.jsx)("button",{type:"button",onClick:()=>r("/materials"),className:"mr-4 px-4 py-2 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:"Cancel"}),(0,Dt.jsx)("button",{type:"submit",className:"px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",disabled:d,children:d?"Saving...":"Save Changes"})]})]})})]})},Nc=e=>{let{value:r,materialName:n,onClose:i}=e;const{code:o}=tt(),s=Je(),a=(0,t.useRef)(null),l=r||o||"";return(0,Dt.jsxs)("div",{className:"bg-white rounded-lg shadow-lg p-6 max-w-md mx-auto my-8",children:[(0,Dt.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,Dt.jsx)("h3",{className:"text-lg font-medium",children:"QR Code Generator"}),(0,Dt.jsx)("button",{onClick:()=>{i?i():s(-1)},className:"text-gray-500 hover:text-gray-700",children:(0,Dt.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,Dt.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),(0,Dt.jsx)("div",{id:"qr-code-to-print",ref:a,className:"flex flex-col items-center",children:(0,Dt.jsxs)("div",{className:"qr-wrapper",children:[(0,Dt.jsx)("div",{className:"qr-code p-4 bg-white rounded-lg",children:(0,Dt.jsx)(Gl,{value:l,size:200,level:"H",includeMargin:!0})}),(0,Dt.jsxs)("div",{className:"material-info mt-3 text-center",children:[n&&(0,Dt.jsx)("div",{className:"font-medium",children:n}),(0,Dt.jsx)("div",{className:"sku mt-1",children:l})]})]})}),(0,Dt.jsxs)("div",{className:"mt-6 flex flex-col space-y-3",children:[(0,Dt.jsxs)("button",{onClick:()=>{const e=document.getElementById("qr-code-to-print"),t=`qrcode_${(new Date).getTime()}`,r=window.open("about:blank",t);r&&(r.document.write("<html><head><title>Print QR Code</title>"),r.document.write("<style>"),r.document.write("\n        body { font-family: Arial, sans-serif; margin: 0; padding: 20px; text-align: center; }\n        .container { display: inline-block; padding: 15px; border: 1px solid #ccc; border-radius: 5px; }\n        .qr-wrapper { display: flex; flex-direction: column; align-items: center; }\n        .qr-code { margin-bottom: 10px; }\n        .material-info { margin-top: 15px; font-size: 14px; }\n        .sku { font-weight: bold; font-size: 16px; margin-top: 5px; }\n      "),r.document.write("</style></head><body>"),e&&(r.document.write('<div class="container">'),r.document.write(e.innerHTML),r.document.write("</div>")),r.document.write("</body></html>"),r.document.close(),setTimeout((()=>{r.print(),r.close()}),250))},className:"w-full bg-blue-600 text-white px-4 py-2 rounded-md hover:bg-blue-700 transition-colors flex items-center justify-center",children:[(0,Dt.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,Dt.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 17h2a2 2 0 002-2v-4a2 2 0 00-2-2H5a2 2 0 00-2 2v4a2 2 0 002 2h2m2 4h6a2 2 0 002-2v-4a2 2 0 00-2-2H9a2 2 0 00-2 2v4a2 2 0 002 2zm8-12V5a2 2 0 00-2-2H9a2 2 0 00-2 2v4h10z"})}),"Print QR Code"]}),(0,Dt.jsxs)(Tt,{to:"/",className:"w-full bg-gray-200 text-gray-800 px-4 py-2 rounded-md hover:bg-gray-300 transition-colors flex items-center justify-center",children:[(0,Dt.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,Dt.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"})}),"Back to Dashboard"]})]})]})},Ic=hi("https://qlkxukzmtkkxarcqzysn.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InFsa3h1a3ptdGtreGFyY3F6eXNuIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDEyNTkzODcsImV4cCI6MjA1NjgzNTM4N30.60ab2zNHSUkm23RR_NUo9-yDlUo3lcqOUnIF4M-0K0o"),Tc=()=>(0,Dt.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"h-5 w-5",children:(0,Dt.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 4.5v15m7.5-7.5h-15"})}),Oc=()=>(0,Dt.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"h-5 w-5",children:(0,Dt.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M14.74 9l-.346 9m-4.788 0L9.26 9m9.968-3.21c.342.052.682.107 1.022.166m-1.022-.165L18.16 19.673a2.25 2.25 0 01-2.244 2.077H8.084a2.25 2.25 0 01-2.244-2.077L4.772 5.79m14.456 0a48.108 48.108 0 00-3.478-.397m-12 .562c.34-.059.68-.114 1.022-.165m0 0a48.11 48.11 0 013.478-.397m7.5 0v-.916c0-1.18-.91-2.164-2.09-2.201a51.964 51.964 0 00-3.32 0c-1.18.037-2.09 1.022-2.09 2.201v.916m7.5 0a48.667 48.667 0 00-7.5 0"})}),kc=()=>(0,Dt.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"h-5 w-5",children:(0,Dt.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M16.862 4.487l1.687-1.688a1.875 1.875 0 112.652 2.652L10.582 16.07a4.5 4.5 0 01-1.897 1.13L6 18l.8-2.685a4.5 4.5 0 011.13-1.897l8.932-8.931zm0 0L19.5 7.125M18 14v4.75A2.25 2.25 0 0115.75 21H5.25A2.25 2.25 0 013 18.75V8.25A2.25 2.25 0 015.25 6H10"})}),Rc=()=>{const[e,r]=(0,t.useState)([]),[n,i]=(0,t.useState)(!0),[o,s]=(0,t.useState)(!1),[a,l]=(0,t.useState)(!1),[c,u]=(0,t.useState)(null),[d,h]=(0,t.useState)({name:"",description:""});(0,t.useEffect)((()=>{f()}),[]);const f=async()=>{try{i(!0),console.log("Fetching categories from Supabase...");const{data:e,error:t}=await Ic.from("categories").select("*").order("name");if(t)throw t;r(e||[{id:1,name:"Paper",description:"All types of paper materials"},{id:2,name:"Ink",description:"Printing inks and toners"},{id:3,name:"Binding",description:"Binding materials and tools"},{id:4,name:"Plates",description:"Printing plates"},{id:5,name:"Other",description:"Miscellaneous materials"}])}catch(e){console.error("Error fetching categories:",e),ne.error("Failed to load categories"),r([{id:1,name:"Paper",description:"All types of paper materials"},{id:2,name:"Ink",description:"Printing inks and toners"},{id:3,name:"Binding",description:"Binding materials and tools"},{id:4,name:"Plates",description:"Printing plates"},{id:5,name:"Other",description:"Miscellaneous materials"}])}finally{i(!1)}},p=e=>{e?(l(!0),u(e),h({name:e.name,description:e.description||""})):(l(!1),u(null),h({name:"",description:""})),s(!0)},m=()=>{s(!1)},g=e=>{const{name:t,value:r}=e.target;h((e=>({...e,[t]:r})))};return(0,Dt.jsxs)("div",{className:"p-6",children:[(0,Dt.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,Dt.jsx)("h1",{className:"text-2xl font-bold",children:"Categories"}),(0,Dt.jsxs)("button",{onClick:()=>p(),className:"flex items-center bg-blue-600 text-white px-4 py-2 rounded-md hover:bg-blue-700 transition-colors",children:[(0,Dt.jsx)(Tc,{}),(0,Dt.jsx)("span",{className:"ml-2",children:"Add Category"})]})]}),n?(0,Dt.jsx)("div",{className:"flex justify-center items-center h-64",children:(0,Dt.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-blue-500"})}):(0,Dt.jsx)("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:(0,Dt.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,Dt.jsx)("thead",{className:"bg-gray-50",children:(0,Dt.jsxs)("tr",{children:[(0,Dt.jsx)("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Name"}),(0,Dt.jsx)("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Description"}),(0,Dt.jsx)("th",{scope:"col",className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),(0,Dt.jsxs)("tbody",{className:"bg-white divide-y divide-gray-200",children:[e.map((e=>(0,Dt.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,Dt.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,Dt.jsx)("div",{className:"text-sm font-medium text-gray-900",children:e.name})}),(0,Dt.jsx)("td",{className:"px-6 py-4",children:(0,Dt.jsx)("div",{className:"text-sm text-gray-500",children:e.description})}),(0,Dt.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:[(0,Dt.jsx)("button",{onClick:()=>p(e),className:"text-blue-600 hover:text-blue-900 mr-4",children:(0,Dt.jsx)(kc,{})}),(0,Dt.jsx)("button",{onClick:()=>(async e=>{if(window.confirm("Are you sure you want to delete this category?"))try{const{data:t,error:n}=await Ic.from("materials").select("id").eq("category_id",e);if(n)throw n;if(t&&t.length>0)return void ne.error(`Cannot delete category: ${t.length} materials are using it`);const{error:i}=await Ic.from("categories").delete().eq("id",e);if(i)throw i;ne.success("Category deleted successfully"),r((t=>t.filter((t=>t.id!==e))))}catch(t){console.error("Error deleting category:",t),ne.error("Failed to delete category")}})(e.id),className:"text-red-600 hover:text-red-900",children:(0,Dt.jsx)(Oc,{})})]})]},e.id))),0===e.length&&(0,Dt.jsx)("tr",{children:(0,Dt.jsx)("td",{colSpan:3,className:"px-6 py-4 text-center text-sm text-gray-500",children:"No categories found"})})]})]})}),o&&(0,Dt.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,Dt.jsxs)("div",{className:"bg-white rounded-lg p-6 max-w-md w-full",children:[(0,Dt.jsx)("h2",{className:"text-xl font-semibold mb-4",children:a?"Edit Category":"Add New Category"}),(0,Dt.jsxs)("form",{onSubmit:async t=>{if(t.preventDefault(),d.name.trim())try{if(a&&c){const{error:e}=await Ic.from("categories").update({name:d.name,description:d.description}).eq("id",c.id);if(e)throw e;ne.success("Category updated successfully"),r((e=>e.map((e=>e.id===c.id?{...e,name:d.name,description:d.description}:e))))}else{const{data:t,error:n}=await Ic.from("categories").insert([{name:d.name,description:d.description}]).select();if(n)throw n;if(ne.success("Category created successfully"),t)r((e=>[...e,...t]));else{const t={id:Math.max(...e.map((e=>e.id)),0)+1,name:d.name,description:d.description};r((e=>[...e,t]))}}m()}catch(n){console.error("Error saving category:",n),ne.error("Failed to save category")}else ne.error("Category name is required")},children:[(0,Dt.jsxs)("div",{className:"mb-4",children:[(0,Dt.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Name ",(0,Dt.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,Dt.jsx)("input",{type:"text",name:"name",value:d.name,onChange:g,className:"w-full p-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0})]}),(0,Dt.jsxs)("div",{className:"mb-4",children:[(0,Dt.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Description"}),(0,Dt.jsx)("textarea",{name:"description",value:d.description,onChange:g,rows:3,className:"w-full p-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),(0,Dt.jsxs)("div",{className:"flex justify-end space-x-3",children:[(0,Dt.jsx)("button",{type:"button",onClick:m,className:"px-4 py-2 bg-gray-200 text-gray-800 rounded-md hover:bg-gray-300",children:"Cancel"}),(0,Dt.jsx)("button",{type:"submit",className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700",children:a?"Update":"Create"})]})]})]})})]})},Mc=hi("https://qlkxukzmtkkxarcqzysn.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InFsa3h1a3ptdGtreGFyY3F6eXNuIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDEyNTkzODcsImV4cCI6MjA1NjgzNTM4N30.60ab2zNHSUkm23RR_NUo9-yDlUo3lcqOUnIF4M-0K0o"),jc=()=>(0,Dt.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"h-5 w-5",children:(0,Dt.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 4.5v15m7.5-7.5h-15"})}),Dc=()=>(0,Dt.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"h-5 w-5",children:(0,Dt.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M14.74 9l-.346 9m-4.788 0L9.26 9m9.968-3.21c.342.052.682.107 1.022.166m-1.022-.165L18.16 19.673a2.25 2.25 0 01-2.244 2.077H8.084a2.25 2.25 0 01-2.244-2.077L4.772 5.79m14.456 0a48.108 48.108 0 00-3.478-.397m-12 .562c.34-.059.68-.114 1.022-.165m0 0a48.11 48.11 0 013.478-.397m7.5 0v-.916c0-1.18-.91-2.164-2.09-2.201a51.964 51.964 0 00-3.32 0c-1.18.037-2.09 1.022-2.09 2.201v.916m7.5 0a48.667 48.667 0 00-7.5 0"})}),Pc=()=>(0,Dt.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"h-5 w-5",children:(0,Dt.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M16.862 4.487l1.687-1.688a1.875 1.875 0 112.652 2.652L10.582 16.07a4.5 4.5 0 01-1.897 1.13L6 18l.8-2.685a4.5 4.5 0 011.13-1.897l8.932-8.931zm0 0L19.5 7.125M18 14v4.75A2.25 2.25 0 0115.75 21H5.25A2.25 2.25 0 013 18.75V8.25A2.25 2.25 0 015.25 6H10"})}),Lc=()=>{const[e,r]=(0,t.useState)([]),[n,i]=(0,t.useState)(!0),[o,s]=(0,t.useState)(!1),[a,l]=(0,t.useState)(!1),[c,u]=(0,t.useState)(null),[d,h]=(0,t.useState)({name:"",contact_person:"",email:"",phone:"",address:""});(0,t.useEffect)((()=>{f()}),[]);const f=async()=>{try{i(!0),console.log("Fetching suppliers from Supabase...");const{data:e,error:t}=await Mc.from("suppliers").select("*").order("name");if(t)throw t;r(e||[{id:1,name:"Paper Supplies Inc",contact_person:"John Smith",email:"john@papersupplies.com",phone:"123-456-7890",address:"123 Paper St, Printville, CA 90210"},{id:2,name:"Ink Suppliers Inc",contact_person:"Sarah Jones",email:"sarah@inksuppliers.com",phone:"987-654-3210",address:"456 Ink Blvd, Colortown, NY 10001"},{id:3,name:"Binding Masters",contact_person:"Mike Johnson",email:"mike@bindingmasters.com",phone:"555-123-4567",address:"789 Binding Road, Booksville, TX 75001"}])}catch(e){console.error("Error fetching suppliers:",e),ne.error("Failed to load suppliers"),r([{id:1,name:"Paper Supplies Inc",contact_person:"John Smith",email:"john@papersupplies.com",phone:"123-456-7890",address:"123 Paper St, Printville, CA 90210"},{id:2,name:"Ink Suppliers Inc",contact_person:"Sarah Jones",email:"sarah@inksuppliers.com",phone:"987-654-3210",address:"456 Ink Blvd, Colortown, NY 10001"},{id:3,name:"Binding Masters",contact_person:"Mike Johnson",email:"mike@bindingmasters.com",phone:"555-123-4567",address:"789 Binding Road, Booksville, TX 75001"}])}finally{i(!1)}},p=e=>{e?(l(!0),u(e),h({name:e.name,contact_person:e.contact_person||"",email:e.email||"",phone:e.phone||"",address:e.address||""})):(l(!1),u(null),h({name:"",contact_person:"",email:"",phone:"",address:""})),s(!0)},m=()=>{s(!1)},g=e=>{const{name:t,value:r}=e.target;h((e=>({...e,[t]:r})))};return(0,Dt.jsxs)("div",{className:"p-6",children:[(0,Dt.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,Dt.jsx)("h1",{className:"text-2xl font-bold",children:"Suppliers"}),(0,Dt.jsxs)("button",{onClick:()=>p(),className:"flex items-center bg-blue-600 text-white px-4 py-2 rounded-md hover:bg-blue-700 transition-colors",children:[(0,Dt.jsx)(jc,{}),(0,Dt.jsx)("span",{className:"ml-2",children:"Add Supplier"})]})]}),n?(0,Dt.jsx)("div",{className:"flex justify-center items-center h-64",children:(0,Dt.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-blue-500"})}):(0,Dt.jsx)("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:(0,Dt.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,Dt.jsx)("thead",{className:"bg-gray-50",children:(0,Dt.jsxs)("tr",{children:[(0,Dt.jsx)("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Name"}),(0,Dt.jsx)("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Contact Person"}),(0,Dt.jsx)("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Email"}),(0,Dt.jsx)("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Phone"}),(0,Dt.jsx)("th",{scope:"col",className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),(0,Dt.jsxs)("tbody",{className:"bg-white divide-y divide-gray-200",children:[e.map((e=>(0,Dt.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,Dt.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,Dt.jsx)("div",{className:"text-sm font-medium text-gray-900",children:e.name})}),(0,Dt.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,Dt.jsx)("div",{className:"text-sm text-gray-500",children:e.contact_person})}),(0,Dt.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,Dt.jsx)("div",{className:"text-sm text-gray-500",children:e.email})}),(0,Dt.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,Dt.jsx)("div",{className:"text-sm text-gray-500",children:e.phone})}),(0,Dt.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:[(0,Dt.jsx)("button",{onClick:()=>p(e),className:"text-blue-600 hover:text-blue-900 mr-4",children:(0,Dt.jsx)(Pc,{})}),(0,Dt.jsx)("button",{onClick:()=>(async e=>{if(window.confirm("Are you sure you want to delete this supplier?"))try{const{data:t,error:n}=await Mc.from("materials").select("id").eq("supplier_id",e);if(n)throw n;if(t&&t.length>0)return void ne.error(`Cannot delete supplier: ${t.length} materials are associated with this supplier`);const{error:i}=await Mc.from("suppliers").delete().eq("id",e);if(i)throw i;ne.success("Supplier deleted successfully"),r((t=>t.filter((t=>t.id!==e))))}catch(t){console.error("Error deleting supplier:",t),ne.error("Failed to delete supplier")}})(e.id),className:"text-red-600 hover:text-red-900",children:(0,Dt.jsx)(Dc,{})})]})]},e.id))),0===e.length&&(0,Dt.jsx)("tr",{children:(0,Dt.jsx)("td",{colSpan:5,className:"px-6 py-4 text-center text-sm text-gray-500",children:"No suppliers found"})})]})]})}),o&&(0,Dt.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,Dt.jsxs)("div",{className:"bg-white rounded-lg p-6 max-w-md w-full",children:[(0,Dt.jsx)("h2",{className:"text-xl font-semibold mb-4",children:a?"Edit Supplier":"Add New Supplier"}),(0,Dt.jsxs)("form",{onSubmit:async t=>{if(t.preventDefault(),d.name.trim())try{if(a&&c){const{error:e}=await Mc.from("suppliers").update({name:d.name,contact_person:d.contact_person,email:d.email,phone:d.phone,address:d.address}).eq("id",c.id);if(e)throw e;ne.success("Supplier updated successfully"),r((e=>e.map((e=>e.id===c.id?{...e,name:d.name,contact_person:d.contact_person,email:d.email,phone:d.phone,address:d.address}:e))))}else{const{data:t,error:n}=await Mc.from("suppliers").insert([{name:d.name,contact_person:d.contact_person,email:d.email,phone:d.phone,address:d.address}]).select();if(n)throw n;if(ne.success("Supplier created successfully"),t)r((e=>[...e,...t]));else{const t={id:Math.max(...e.map((e=>e.id)),0)+1,name:d.name,contact_person:d.contact_person,email:d.email,phone:d.phone,address:d.address};r((e=>[...e,t]))}}m()}catch(n){console.error("Error saving supplier:",n),ne.error("Failed to save supplier")}else ne.error("Supplier name is required")},children:[(0,Dt.jsxs)("div",{className:"mb-4",children:[(0,Dt.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Name ",(0,Dt.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,Dt.jsx)("input",{type:"text",name:"name",value:d.name,onChange:g,className:"w-full p-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0})]}),(0,Dt.jsxs)("div",{className:"mb-4",children:[(0,Dt.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Contact Person"}),(0,Dt.jsx)("input",{type:"text",name:"contact_person",value:d.contact_person,onChange:g,className:"w-full p-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),(0,Dt.jsxs)("div",{className:"mb-4",children:[(0,Dt.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Email"}),(0,Dt.jsx)("input",{type:"email",name:"email",value:d.email,onChange:g,className:"w-full p-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),(0,Dt.jsxs)("div",{className:"mb-4",children:[(0,Dt.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Phone"}),(0,Dt.jsx)("input",{type:"tel",name:"phone",value:d.phone,onChange:g,className:"w-full p-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),(0,Dt.jsxs)("div",{className:"mb-4",children:[(0,Dt.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Address"}),(0,Dt.jsx)("textarea",{name:"address",value:d.address,onChange:g,rows:3,className:"w-full p-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),(0,Dt.jsxs)("div",{className:"flex justify-end space-x-3",children:[(0,Dt.jsx)("button",{type:"button",onClick:m,className:"px-4 py-2 bg-gray-200 text-gray-800 rounded-md hover:bg-gray-300",children:"Cancel"}),(0,Dt.jsx)("button",{type:"submit",className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700",children:a?"Update":"Create"})]})]})]})})]})},Bc=()=>(0,Dt.jsx)(Bt,{children:(0,Dt.jsx)(mi,{children:(0,Dt.jsxs)(At,{children:[(0,Dt.jsx)(re,{position:"top-right"}),(0,Dt.jsxs)(vt,{children:[(0,Dt.jsx)(wt,{path:"/login",element:(0,Dt.jsx)(Oi,{})}),(0,Dt.jsx)(wt,{path:"/",element:(0,Dt.jsx)(gt,{to:"/dashboard",replace:!0})}),(0,Dt.jsxs)(wt,{path:"/",element:(0,Dt.jsx)(gi,{children:(0,Dt.jsx)(Ti,{})}),children:[(0,Dt.jsx)(wt,{index:!0,element:(0,Dt.jsx)(as,{})}),(0,Dt.jsxs)(wt,{path:"materials",children:[(0,Dt.jsx)(wt,{index:!0,element:(0,Dt.jsx)(Zl,{})}),(0,Dt.jsx)(wt,{path:"add",element:(0,Dt.jsx)(rc,{})}),(0,Dt.jsx)(wt,{path:"edit/:id",element:(0,Dt.jsx)(Ac,{})}),(0,Dt.jsx)(wt,{path:":id",element:(0,Dt.jsx)(ec,{})})]}),(0,Dt.jsxs)(wt,{path:"equipment",children:[(0,Dt.jsx)(wt,{index:!0,element:(0,Dt.jsx)(ac,{})}),(0,Dt.jsx)(wt,{path:"add",element:(0,Dt.jsx)(cc,{})})]}),(0,Dt.jsxs)(wt,{path:"orders",children:[(0,Dt.jsx)(wt,{index:!0,element:(0,Dt.jsx)(pc,{})}),(0,Dt.jsx)(wt,{path:"add",element:(0,Dt.jsx)(gc,{})}),(0,Dt.jsx)(wt,{path:":id",element:(0,Dt.jsx)(_c,{})})]}),(0,Dt.jsx)(wt,{path:"categories",children:(0,Dt.jsx)(wt,{index:!0,element:(0,Dt.jsx)(Rc,{})})}),(0,Dt.jsx)(wt,{path:"suppliers",children:(0,Dt.jsx)(wt,{index:!0,element:(0,Dt.jsx)(Lc,{})})}),(0,Dt.jsx)(wt,{path:"reports",element:(0,Dt.jsx)(Cc,{})}),(0,Dt.jsx)(wt,{path:"qr-generator/:code",element:(0,Dt.jsx)(Nc,{})})]})]})]})})});i.createRoot(document.getElementById("root")).render((0,Dt.jsxs)(t.StrictMode,{children:[(0,Dt.jsx)(re,{position:"top-right"}),(0,Dt.jsx)(Bc,{})]}))})()})();